<html>
<head>
<title>Fishing in Fortnite: Decoding the Algorithm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在堡垒之夜钓鱼:解码算法</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/fishing-in-fortnite-decoding-the-algorithm-e7084691c29b?source=collection_archive---------4-----------------------#2020-10-25">https://pub.towardsai.net/fishing-in-fortnite-decoding-the-algorithm-e7084691c29b?source=collection_archive---------4-----------------------#2020-10-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="cfba" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/probability" rel="noopener ugc nofollow" target="_blank">概率</a>，<a class="ae ep" href="https://towardsai.net/p/category/programming" rel="noopener ugc nofollow" target="_blank">编程</a></h2><div class=""/><div class=""><h2 id="7ca9" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">我能破解堡垒之夜钓鱼机制背后的算法吗？全部代码可在我的Github repo 获得<a class="ae kr" href="https://github.com/arditoibryan/Projects/tree/master/20200915_Fishing_Fortnite" rel="noopener ugc nofollow" target="_blank">。</a></h2></div><p id="b440" class="pw-post-body-paragraph ks kt it ku b kv kw kd kx ky kz kg la lb lc ld le lf lg lh li lj lk ll lm ln im bi translated">《堡垒之夜》是这一代最具竞争力的在线游戏之一，它有一个有趣的功能，可以让玩家在游戏内部钓鱼。有几类鱼可以在河流中(或海洋中)被捕获，每一类都在有限的时间内携带不同的力量。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi lo"><img src="../Images/853528008571d9e925badb86f6346310.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2baZz5mRpsAYwm1Kt_QWUA.png"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">传说中的迈达斯鱼</figcaption></figure><p id="4559" class="pw-post-body-paragraph ks kt it ku b kv kw kd kx ky kz kg la lb lc ld le lf lg lh li lj lk ll lm ln im bi translated">例如，热带鱼给玩家一个短暂的竞争优势，让他们有一个热感视野，可以发现周围的其他玩家，甚至在建筑物后面。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi me"><img src="../Images/de217e02890cd3bbcfcea36a761244c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*Pk4zu4k-DK0O_dVOQy2-Fw.png"/></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">其中一种鱼的统计数据</figcaption></figure><h2 id="eda5" class="mf mg it bd mh mi mj dn mk ml mm dp mn lb mo mp mq lf mr ms mt lj mu mv mw iz bi translated">估计概率分布</h2><p id="a0b8" class="pw-post-body-paragraph ks kt it ku b kv mx kd kx ky my kg la lb mz ld le lf na lh li lj nb ll lm ln im bi translated">为了理解堡垒之夜如何生成鱼，我需要估计用于生成鱼的正确概率分布函数，然后将其转换成代码来模拟相同的鱼生成器。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi nc"><img src="../Images/dd0342f65a7e8cf41a189483efba2929.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7GffCI7xItbdPirgIt9uLw.jpeg"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">你能在堡垒之夜买到的鱼的列表</figcaption></figure><h2 id="f4a2" class="mf mg it bd mh mi mj dn mk ml mm dp mn lb mo mp mq lf mr ms mt lj mu mv mw iz bi translated">对数正态分布</h2><p id="16ff" class="pw-post-body-paragraph ks kt it ku b kv mx kd kx ky my kg la lb mz ld le lf na lh li lj nb ll lm ln im bi translated">* * *因为我使用对数正态分布失败，如果您不感兴趣，请跳到下一节</p><p id="7a45" class="pw-post-body-paragraph ks kt it ku b kv kw kd kx ky kz kg la lb lc ld le lf lg lh li lj lk ll lm ln im bi translated">我对鱼类分布的第一个选择是对数正态分布。大多数鱼的大小都聚集在平均大小附近。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi nd"><img src="../Images/2788f25878fb835f005b7d1997728e73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ncY5TXqpYC_K2dfHtMZJlw.png"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">使用图形计算器的<a class="ae kr" href="http://www.desmos.com," rel="noopener ugc nofollow" target="_blank">www.desmos.com、</a>对数正态分布截图</figcaption></figure><p id="9c7c" class="pw-post-body-paragraph ks kt it ku b kv kw kd kx ky kz kg la lb lc ld le lf lg lh li lj lk ll lm ln im bi translated">然而，找到创建峰值为35/40、上限为100的对数正态分布的最佳调优已经被证明是具有挑战性的:我对参数进行的调整越多，该分布就越接近正态分布。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi ne"><img src="../Images/b320b0584f8af0a9c3150c32324f992e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nZWnM_ZdBCCUfQh2e4QHIQ.png"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">第二次尝试创建对数正态分布</figcaption></figure><p id="04a6" class="pw-post-body-paragraph ks kt it ku b kv kw kd kx ky kz kg la lb lc ld le lf lg lh li lj lk ll lm ln im bi translated">从上面的图表中可以看出，分布的上限越接近100，分布的平均值就越大，越远离35/40的目标。</p><h2 id="e60a" class="mf mg it bd mh mi mj dn mk ml mm dp mn lb mo mp mq lf mr ms mt lj mu mv mw iz bi translated">非对称正态分布</h2><p id="11d0" class="pw-post-body-paragraph ks kt it ku b kv mx kd kx ky my kg la lb mz ld le lf na lh li lj nb ll lm ln im bi translated">当使用偏斜的正态分布时，结果看起来更有希望。</p><pre class="lp lq lr ls gt nf ng nh ni aw nj bi"><span id="2341" class="mf mg it ng b gy nk nl l nm nn">def simulate_normal(sd, mean, alfa, size):<br/>  #simulated probability distribution of one stock<br/>  import pandas as pd<br/>  from scipy.stats import skewnorm<br/>  import matplotlib.pyplot as plt</span><span id="a4a5" class="mf mg it ng b gy no nl l nm nn">#invertire il segno di alfa<br/>  x = skewnorm.rvs(-alfa, size=size) <br/>  def calc(k, sd, mean):<br/>    return (k*sd)+mean<br/>  x = calc(x, sd, mean) #standard distribution</span><span id="9364" class="mf mg it ng b gy no nl l nm nn">fig = plt.figure(figsize = (14,7))<br/>  ax = fig.gca()<br/>  pd.DataFrame(x).hist(ax=ax, bins=100)<br/>  return pd.DataFrame(x)</span><span id="5ede" class="mf mg it ng b gy no nl l nm nn">#pick one random number from the distribution<br/>  #formally I would use cdf, but I just have to pick randomly from the 1000000 samples<br/>x = simulate_normal(14, 40, -4, 1000000)<br/>x</span></pre><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi np"><img src="../Images/d43c1957fe63db0bc5f2680b6f1af50e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4CJ0cvoFPK3YJNOOBdB6lA.png"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">偏斜概率分布</figcaption></figure><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi nq"><img src="../Images/54aa6c3e381f92f21751f3244735defb.png" data-original-src="https://miro.medium.com/v2/resize:fit:464/format:webp/1*X9Kl7o4sf4PaYvBP34h8xQ.png"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">分布的输出，100k个样本</figcaption></figure><h2 id="69b4" class="mf mg it bd mh mi mj dn mk ml mm dp mn lb mo mp mq lf mr ms mt lj mu mv mw iz bi translated">随机鱼群生成器</h2><p id="becf" class="pw-post-body-paragraph ks kt it ku b kv mx kd kx ky my kg la lb mz ld le lf na lh li lj nb ll lm ln im bi translated">我现在可以把所有的东西放在一起:因为有不同类型的鱼，我也必须随机选择物种。一种方法是生成一个介于0和1之间的随机数，然后选择对应于某个值范围的鱼(例如，如果该数字介于[0，0.1]之间，则选择一个Midas，否则选择一个Flopper)。相反，我只是决定把鱼添加到列表中</p><pre class="lp lq lr ls gt nf ng nh ni aw nj bi"><span id="7295" class="mf mg it ng b gy nk nl l nm nn">import random</span><span id="6bd8" class="mf mg it ng b gy no nl l nm nn">#given that you wish to separate the list from the function<br/>fishes = list()</span><span id="95a8" class="mf mg it ng b gy no nl l nm nn">def add_multiple(fish, number):<br/>  #a fish should be an object<br/>  fishes.extend([fish for i in range(number)])</span><span id="1309" class="mf mg it ng b gy no nl l nm nn">add_multiple('flopper', 10)<br/>add_multiple('midas', 1)<br/>#and many others</span><span id="e1b9" class="mf mg it ng b gy no nl l nm nn">[print(random.choice(fishes)) for x in range(10)]</span><span id="b891" class="mf mg it ng b gy no nl l nm nn">output:<br/>flopper<br/>flopper<br/>midas<br/>flopper<br/>flopper<br/>flopper<br/>midas<br/>flopper<br/>flopper<br/>flopper</span></pre><h2 id="a535" class="mf mg it bd mh mi mj dn mk ml mm dp mn lb mo mp mq lf mr ms mt lj mu mv mw iz bi translated">创建一个鱼类</h2><p id="adc5" class="pw-post-body-paragraph ks kt it ku b kv mx kd kx ky my kg la lb mz ld le lf na lh li lj nb ll lm ln im bi translated">为了使事情正常进行，我们可以创建一个Fish类，它将允许我们实例化我们想要的鱼的数量:</p><pre class="lp lq lr ls gt nf ng nh ni aw nj bi"><span id="6fb4" class="mf mg it ng b gy nk nl l nm nn">fish_list = list()<br/>class Fish():<br/>  def __init__(self):<br/>    self.species = random.choice(fishes)<br/>    self.size = random.choice(x[0])<br/>    fish_list.append(self)</span><span id="db82" class="mf mg it ng b gy no nl l nm nn">def print_data(self):<br/>    print(self.species, self.size)</span><span id="af00" class="mf mg it ng b gy no nl l nm nn">def cheat(self, species, size):<br/>    self.species = species<br/>    self.size = size</span></pre><p id="563c" class="pw-post-body-paragraph ks kt it ku b kv kw kd kx ky kz kg la lb lc ld le lf lg lh li lj lk ll lm ln im bi translated">我还可以用下面的代码创建一个预制鱼的列表:</p><pre class="lp lq lr ls gt nf ng nh ni aw nj bi"><span id="7a70" class="mf mg it ng b gy nk nl l nm nn">[Fish() for _ in range(10)]<br/>fish_list<br/>[&lt;__main__.Fish at 0x7f55cf837780&gt;,  <br/>&lt;__main__.Fish at 0x7f55cf8377b8&gt;,  <br/>&lt;__main__.Fish at 0x7f55c7bdc048&gt;,  <br/>&lt;__main__.Fish at 0x7f55c7bdc080&gt;,  <br/>&lt;__main__.Fish at 0x7f55c7bdc0f0&gt;,  <br/>&lt;__main__.Fish at 0x7f55c7bdc160&gt;,  <br/>&lt;__main__.Fish at 0x7f55c7bdc198&gt;,  <br/>&lt;__main__.Fish at 0x7f55c7bdc1d0&gt;,  <br/>&lt;__main__.Fish at 0x7f55c7bdc208&gt;,  <br/>&lt;__main__.Fish at 0x7f55c7bdc240&gt;]</span></pre><h2 id="0160" class="mf mg it bd mh mi mj dn mk ml mm dp mn lb mo mp mq lf mr ms mt lj mu mv mw iz bi translated">挑选鱼</h2><p id="1e85" class="pw-post-body-paragraph ks kt it ku b kv mx kd kx ky my kg la lb mz ld le lf na lh li lj nb ll lm ln im bi translated">如果我们想挑一条鱼，也许在运动中，我可以</p><pre class="lp lq lr ls gt nf ng nh ni aw nj bi"><span id="aa40" class="mf mg it ng b gy nk nl l nm nn">new = Fish()<br/>new.print_data()</span><span id="77fb" class="mf mg it ng b gy no nl l nm nn">flopper 39.91704213919765</span></pre><h2 id="535a" class="mf mg it bd mh mi mj dn mk ml mm dp mn lb mo mp mq lf mr ms mt lj mu mv mw iz bi translated">用数据作弊</h2><p id="eeeb" class="pw-post-body-paragraph ks kt it ku b kv mx kd kx ky my kg la lb mz ld le lf na lh li lj nb ll lm ln im bi translated">如果你真的想使用cheatcodes，我给这个类添加了一个小后门:一个叫cheat的函数，它允许我手动输入鱼的统计数据:</p><pre class="lp lq lr ls gt nf ng nh ni aw nj bi"><span id="84a4" class="mf mg it ng b gy nk nl l nm nn">new.cheat(‘midas’, 100)<br/>new.print_data()</span><span id="c9e1" class="mf mg it ng b gy no nl l nm nn">midas 100</span></pre></div></div>    
</body>
</html>