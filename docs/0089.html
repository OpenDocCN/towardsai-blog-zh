<html>
<head>
<title>Association Discovery — the Apriori Algorithm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关联发现Apriori算法</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/association-discovery-the-apriori-algorithm-28c1e71e0f04?source=collection_archive---------0-----------------------#2019-06-27">https://pub.towardsai.net/association-discovery-the-apriori-algorithm-28c1e71e0f04?source=collection_archive---------0-----------------------#2019-06-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="io ip gp gr iq ir gh gi paragraph-image"><div class="ab gu cl is"><img src="../Images/9c00f9e0d49f7849e8302a02c7c67dd2.png" data-original-src="https://miro.medium.com/v2/format:webp/1*OEqUSjpX0rpQaJsvZgB9eA.png"/></div></figure><h2 id="ba0a" class="iv iw ix bd b dl iy iz ja jb jc jd dk je translated" aria-label="kicker paragraph">数据科学中的购物篮分析| <a class="ae ep" href="https://towardsai.net" rel="noopener ugc nofollow" target="_blank">走向人工智能</a></h2><div class=""/><p id="4d5d" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关联发现俗称<strong class="kf jh"><em class="lb">【MBA】</em></strong>。MBA被杂货店、银行和电信等行业广泛使用。其结果用于优化商店布局、设计产品包、计划优惠券、选择合适的特价商品以及选择直销中的附加邮件。MBA有助于我们了解哪些物品可能会一起购买。联机事务处理系统通常为关联发现提供数据源。</p><h1 id="8579" class="lc ld ix bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">什么是购物篮分析？</h1><figure class="mb mc md me gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi ma"><img src="../Images/ef12270428d3d53bd7b8e84bca784683.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PzRtRGd6vkkcbUOZajANMg.png"/></div></div></figure><p id="6b77" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">买牙膏的人也倾向于买牙刷，对吗？零售店的营销团队应瞄准购买牙膏和牙刷的顾客，并向他们提供报价，以便顾客购买第三种产品，例如漱口水。如果顾客购买牙膏和牙刷，看到漱口水打折，他们会被鼓励多花钱买漱口水，这就是市场分析的全部内容。这有助于我们了解哪些商品可能会一起购买。联机事务处理系统通常为关联发现提供数据源。</p><figure class="mb mc md me gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi mj"><img src="../Images/58304e6261062a3e8f830b872d87b496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8DCwLlH4nHZZF3CG1ilosg.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">资料来源:MBA——Berry和Linoff的购物车类比(2004)</figcaption></figure><p id="5923" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通常，交易是单个客户购买，项目是购买的东西。关联发现是对在给定事件或记录中一起出现的项目的识别。关联规则强调事务数据库中项目或对象集合之间频繁的关联模式或因果结构。关联发现规则基于项目在数据库中单独和组合出现的频率计数。它们被表达为“如果物品A是事件的一部分，那么物品B也是事件的一部分，X %的时间。”因此，关联规则是以下形式的语句(项目集A)项目集B)。</p><p id="517d" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如:顾客购买牙膏(商品A ),然后牙刷(商品b)在同一交易ID下被顾客挑选的机会。这里需要明白一件事，这不是一个偶然事件，而是一个共现模式。</p><p id="658f" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的牙膏是一个婴儿的例子。如果我们拿真正的零售店来说，他们有超过数千种商品。想象一下，通过正确放置物品，他们可以使用这种算法获得多少收入。MBA是一种帮助企业盈利的流行算法。上述A和B规则是为两个项目创建的。很难为超过1000个项目创建规则，这就是关联发现和apriori算法的用武之地。我们来看看这个算法是怎么实现的？</p><h1 id="a6b1" class="lc ld ix bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">关联发现的基本概念</h1><p id="51c6" class="pw-post-body-paragraph kd ke ix kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">关联规则被写成A =&gt; B，其中A是<em class="lb">前因</em>，B是<em class="lb">后果</em>。关联规则的两端可以包含多个项目。关联发现中使用的技术是从概率和统计中借用的。<strong class="kf jh"> <em class="lb">支持度、置信度和提升度</em> </strong>是关联发现的三个重要评价标准。</p><h2 id="53b5" class="mt ld ix bd le mu mv dn li mw mx dp lm ko my mz lq ks na nb lu kw nc nd ly jd bi translated">支持</h2><p id="50ea" class="pw-post-body-paragraph kd ke ix kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">支持级别是组合在市场篮(数据库)中出现的频率。支持是包含关联的A和B的篮子(或交易)的百分比，即规则为真的篮子的百分比</p><blockquote class="ne nf ng"><p id="0869" class="kd ke lb kf b kg kh ki kj kk kl km kn nh kp kq kr ni kt ku kv nj kx ky kz la ij bi translated"><strong class="kf jh">支持度(A = &gt; B) = P(A ∩ B) </strong></p></blockquote><h2 id="c6a7" class="mt ld ix bd le mu mv dn li mw mx dp lm ko my mz lq ks na nb lu kw nc nd ly jd bi translated">预期信心</h2><p id="3c00" class="pw-post-body-paragraph kd ke ix kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">这是后果独立于前因的概率。因此，期望置信度是包含B的事件的百分比</p><blockquote class="ne nf ng"><p id="03c0" class="kd ke lb kf b kg kh ki kj kk kl km kn nh kp kq kr ni kt ku kv nj kx ky kz la ij bi translated"><strong class="kf jh">预期置信度(A = &gt; B) = P(B) </strong></p></blockquote><h2 id="e985" class="mt ld ix bd le mu mv dn li mw mx dp lm ko my mz lq ks na nb lu kw nc nd ly jd bi translated">信心</h2><p id="b7a8" class="pw-post-body-paragraph kd ke ix kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">关联的强度由其置信因子来定义，置信因子是给定先行事件发生的情况下，结果出现的情况的百分比。置信度是包含A但也包含B的篮子的百分比，即包含B的篮子占包含A的篮子的百分比。注:置信度(A =&gt; B) ≠置信度(B =&gt; A)。</p><blockquote class="ne nf ng"><p id="2d11" class="kd ke lb kf b kg kh ki kj kk kl km kn nh kp kq kr ni kt ku kv nj kx ky kz la ij bi translated"><strong class="kf jh">置信度(A = &gt; B) = P(B | A) </strong></p></blockquote><h2 id="ae06" class="mt ld ix bd le mu mv dn li mw mx dp lm ko my mz lq ks na nb lu kw nc nd ly jd bi translated">电梯</h2><figure class="mb mc md me gt ir gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/7f172617b8582bf38fa38d19e4c36951.png" data-original-src="https://miro.medium.com/v2/resize:fit:606/format:webp/1*0vVnK4wr6L3XKCG-zr--yw.png"/></div></figure><p id="c177" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Lift等于置信度因子除以预期置信度。提升是一个因素，在给定前因的情况下，通过这个因素，后果的可能性增加。预期置信度等于后续交易的数量除以交易的总数。提升是在已知包含A的篮子中找到B的可能性与在任何随机篮子中找到B的可能性之比。</p><p id="a536" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">举例:鞋子和袜子</strong></p><figure class="mb mc md me gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nl"><img src="../Images/0e3f26dd6484bb49f042a4822a0d6c71.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*rmV2DYL-GB3XT17vmagrlw.png"/></div></div></figure><p id="5366" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果顾客买鞋，那么10%的时间他也会买袜子。</p><p id="502e" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个示例规则有一个左侧(前提)和一个右侧(结果)。鞋子是先行项，袜子是后继项。</p><h1 id="d003" class="lc ld ix bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">Apriori算法</h1><p id="f3ff" class="pw-post-body-paragraph kd ke ix kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">Apriori算法是挖掘频繁项集和关联规则的经典算法。通常，该算法适用于包含大量事务的数据库。</p><h2 id="1d51" class="mt ld ix bd le mu mv dn li mw mx dp lm ko my mz lq ks na nb lu kw nc nd ly jd bi translated">术语</h2><p id="ab47" class="pw-post-body-paragraph kd ke ix kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated"><strong class="kf jh"> <em class="lb"> k-itemset: </em> </strong>一组<em class="lb"> k </em>项。</p><p id="4544" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如{啤酒，尿布，果汁}是3项集；{cheese}是1项集；{亲爱的，冰淇淋}是一个2项集</p><p id="52c0" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh"> <em class="lb">支持</em> </strong>:如果数据库中有10%的记录包含那些项，那么一个项集就有10%的支持。</p><p id="4fa2" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh"> <em class="lb">最小支持度</em></strong>:Apriori算法启动一个指定的最小支持度级别，重点关注至少具有该级别的项集。</p><h1 id="c137" class="lc ld ix bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">Apriori算法，示例</h1><p id="7105" class="pw-post-body-paragraph kd ke ix kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">考虑一个仅包含5种产品的所有可能组合的格:</p><p id="069b" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh"> A </strong> =苹果，<strong class="kf jh"> B </strong> =啤酒，<strong class="kf jh"> C </strong> =苹果酒，<strong class="kf jh"> D </strong> =尿布&amp;T8】E=耳塞</p><figure class="mb mc md me gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nm"><img src="../Images/ca39dbf4e4b486f418ab186895d11ac4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JCMoMh8qeXPTwBWlF8ccuA.png"/></div></div></figure><p id="3436" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Apriori算法旨在对包含事务的数据库进行操作，它首先扫描并确定单个项目的频率(即项目集大小，k = 1)。例如，如果项目集{A，B}不是频繁的，那么我们可以排除所有包含{A，B}的项目集组合(见上文)。</p><h1 id="2df0" class="lc ld ix bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">先验的完整运行</h1><figure class="mb mc md me gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nn"><img src="../Images/52f18a5cfcd514ffa2278eff8fd5579b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*unUpt7xG_yxGUO3AP110Tw.png"/></div></div></figure><figure class="mb mc md me gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi no"><img src="../Images/a53ebbec7c48f31f24959ca73c98694e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qdRuq1iyzncDbu8N1FFUNw.png"/></div></div></figure><figure class="mb mc md me gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi np"><img src="../Images/1c10a6fcc70eb7e9d75bb2cf7a775250.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9lcn59ELXyFTTw12WQGrAA.png"/></div></div></figure><p id="c5a5" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">第6步:</strong>要创建三个项目的集合，我们还需要一个规则(它被称为<em class="lb">自连接</em>)。简单地说，从上表中的项目对中，我们找到两个首字母相同的项目对，因此我们得到<strong class="kf jh"> OK </strong>和<strong class="kf jh"> OE </strong>，这给出了<strong class="kf jh"> OKE、KE </strong>和<strong class="kf jh"> KY </strong>，这给出了<strong class="kf jh"> KEY </strong></p><figure class="mb mc md me gt ir gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/821b9d62bc2c82cacc51a372d6cda2da.png" data-original-src="https://miro.medium.com/v2/resize:fit:662/format:webp/1*9UHnbTh0ohwdcmBj8XmmTw.png"/></div></figure><p id="9570" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设你有3件物品。例如:</p><p id="1dc1" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh"> ABC、ABD、ACD、ACE、BCD </strong>我们想要生成4个项目的项目集。然后，寻找第一个<strong class="kf jh">和第二个</strong>字母相同的两组字母。</p><p id="4eb9" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh"> ABC </strong>和<strong class="kf jh">ABD</strong>-&gt;T34】ABCD、ACD 和<strong class="kf jh">ACE</strong>-&gt;T38】ACDE等等..</p><p id="41c9" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一般来说，我们只寻找最后一个字母/项目不同的集合。</p><h2 id="4b89" class="mt ld ix bd le mu mv dn li mw mx dp lm ko my mz lq ks na nb lu kw nc nd ly jd bi translated">MBA的优势</h2><ol class=""><li id="fe7a" class="nr ns ix kf b kg mo kk mp ko nt ks nu kw nv la nw nx ny nz bi translated">容易理解</li></ol><p id="15d3" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2.支持非定向数据挖掘</p><p id="a6fb" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">3.处理可变长度的数据记录和简单的计算</p><h2 id="7b95" class="mt ld ix bd le mu mv dn li mw mx dp lm ko my mz lq ks na nb lu kw nc nd ly jd bi translated">弱点</h2><p id="59f8" class="pw-post-body-paragraph kd ke ix kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">随着项目数量的增加，计算量呈指数增长(<em class="lb"> Apriori算法</em>)</p><p id="c037" class="pw-post-body-paragraph kd ke ix kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你有任何反馈，请在评论中告诉我。</p></div></div>    
</body>
</html>