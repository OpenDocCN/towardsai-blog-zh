<html>
<head>
<title>An Approach Towards Building a COVID-19 Detection Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一种构建新冠肺炎检测应用的方法</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/an-approach-towards-building-a-covid-19-detection-application-5c6169370f2a?source=collection_archive---------3-----------------------#2020-10-19">https://pub.towardsai.net/an-approach-towards-building-a-covid-19-detection-application-5c6169370f2a?source=collection_archive---------3-----------------------#2020-10-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/a0302d747679f3acd0e0fa1a4c2ae85a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cVFwulMrKZnVOwS9ogCTKw.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">马库斯·斯皮斯克在<a class="ae jd" href="https://unsplash.com/s/photos/virus?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h2 id="ffe2" class="je jf jg bd b dl jh ji jj jk jl jm dk jn translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/computer-vision" rel="noopener ugc nofollow" target="_blank">计算机视觉</a>，<a class="ae ep" href="https://towardsai.net/p/category/machine-learning/deep-learning" rel="noopener ugc nofollow" target="_blank">深度学习</a></h2><div class=""/><div class=""><h2 id="3910" class="pw-subtitle-paragraph km jp jg bd b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dk translated">我们能用科技探测到新冠肺炎吗？</h2></div><p id="d7d4" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">新型冠状病毒疫情的传播已经影响了世界上的几个国家。死亡和受影响的人数正在以非常快的速度上升。我们知道传播背后的主要原因是，它通过接触传播。因此，我们必须隔离已经受影响的人，以阻止传播。但是检测这种疾病的过程是一个非常艰难和耗时的过程。所有这些因素都需要处理，以达到阻止疫情扩散的条件。</p><p id="1d22" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">另一方面，最近，人们发现新冠肺炎对所有患者的影响并不相同。一些患者症状轻微，风险低得多，而另一些患者风险巨大，需要立即就医。目前，由于巨大的病人量，医院无法执行。因此，如果我们能检测出与患者相关的危险因素，那就太好了。</p><p id="1bd0" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在本文中，我们将讨论实现这一任务的方法。</p><h2 id="1a65" class="ma mb jg bd mc md me dn mf mg mh dp mi ln mj mk ml lr mm mn mo lv mp mq mr jm bi translated">这个想法</h2><p id="24dd" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">为了检测患者是否真的感染了冠状病毒，我们将使用卷积神经网络，并对他/她的胸部x光图像进行分类。如果CNN分类器预测患者是covid阳性，我们将预测风险，否则一切正常，我们终止我们的申请。</p><p id="8c32" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在这一步，正确预测风险非常重要，因为我们正在应对一种威胁生命的疾病。因此，对于这一步，我们将使用两个模型。</p><p id="14a6" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">第一个模型是XGBoost模型，它通过我们的CNN模型、患者的年龄和性别来获取胸部X射线的预测概率。我们也可以使用CNN根据X射线创建的扁平特征空间，但我认为，如果我们使用完全连接的层给出的预测百分比，它将成为更好的特征。</p><p id="eb6c" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">第二个模型是梯度推进模型。该模型将根据患者的症状、年龄和性别来预测疾病的风险。我们已经知道，冠状病毒攻击有各种症状，如肺炎、感冒、喉咙痛和呼吸系统问题。所有这些症状信息以及患者的年龄和性别可用于预测患者的风险因素。</p><p id="38b2" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们的最终结果将是两个模型预测的平均值。使用两种模型的原因是，它提供了一种双向检查来提供预测，既使用了医学X射线扫描，又使用了年龄、性别和症状等因素。</p><blockquote class="mx my mz"><p id="2ad4" class="le lf na lg b lh li kq lj lk ll kt lm nb lo lp lq nc ls lt lu nd lw lx ly lz ij bi translated">注意:实验是在一小组图像的基础上完成的，只是为了研究的目的。尚未对该方法进行临床研究。所以，从结果中什么也推断不出来。</p></blockquote><h2 id="8719" class="ma mb jg bd mc md me dn mf mg mh dp mi ln mj mk ml lr mm mn mo lv mp mq mr jm bi translated">数据集</h2><p id="dcad" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated"><strong class="lg jq">为卷积神经网络训练</strong></p><p id="8996" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我在这里使用了两个数据集。第一个数据集是由<a class="ae jd" href="https://josephpcohen.com/w/" rel="noopener ugc nofollow" target="_blank"> <strong class="lg jq">约瑟夫·保罗·寇恩</strong> </a> <strong class="lg jq">博士维护的开源数据库。</strong>数据库可以在<a class="ae jd" href="https://github.com/ieee8023/covid-chestxray-dataset" rel="noopener ugc nofollow" target="_blank">这里</a>找到。我也使用过<a class="ae jd" href="https://www.kaggle.com/paultimothymooney/chest-xray-pneumonia" rel="noopener ugc nofollow" target="_blank"> Kaggle的胸部x光数据集</a>。第一个数据集包含患有<strong class="lg jq">新冠肺炎的患者的胸部x光图像。</strong>也有其他疾病如SARS的胸部x光图像。我只考虑并选择了新冠肺炎病人的x光片。</p><p id="6463" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg jq">用于XGBoost模型训练</strong></p><p id="2d39" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我使用了一个由约瑟夫·保罗·寇恩博士维护的开源数据库。数据库可以在这里找到<a class="ae jd" href="https://github.com/ieee8023/covid-chestxray-dataset" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="3a86" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg jq">用于梯度推进模型训练</strong></p><p id="4c29" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我使用了从一场卡格尔比赛中获得的数据集。数据可以在这里<a class="ae jd" href="https://www.kaggle.com/edhenrivi/covid19-age-gender-symptoms-exploration?select=COVID19-age-gender-symptoms-outcome.csv" rel="noopener ugc nofollow" target="_blank">找到。</a></p><p id="110f" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">应用程序的GitHub源代码中提供了所有数据。我将提供下面的链接。</p><h2 id="47de" class="ma mb jg bd mc md me dn mf mg mh dp mi ln mj mk ml lr mm mn mo lv mp mq mr jm bi translated">应用</h2><p id="361f" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">我们已经讨论了应用程序的目标和想法。所以让我们直接开始吧。</p><h2 id="b130" class="ma mb jg bd mc md me dn mf mg mh dp mi ln mj mk ml lr mm mn mo lv mp mq mr jm bi translated">卷积神经网络</h2><p id="50a4" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">我们先来看看CNN的训练和表现。</p><div class="ne nf ng nh gt ab cb"><figure class="ni is nj nk nl nm nn paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/cba15e935ca538285655633234294ef5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*PGWE0Qg83g7O1otbBnJOMg.png"/></div></figure><figure class="ni is no nk nl nm nn paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/90eb9eac39bd74e378d46e1432197616.png" data-original-src="https://miro.medium.com/v2/resize:fit:914/format:webp/1*vYeFYBh3_Gqjj35LRNkqxw.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk np di nq nr translated">(1)受影响人的x光片(2)正常人的x光片。</figcaption></figure></div><p id="a692" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们看看数据集的分布。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/1b9e576b8dcf095ef54a8f16b400865e.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/0*rEhu2KcEDRQNq4Yv.png"/></div></figure><p id="6c71" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">与新冠肺炎患者相比，健康人的数量相当大。我用了每个类的200张图片来保持布景的平衡。</p><pre class="ne nf ng nh gt nt nu nv nw aw nx bi"><span id="71d0" class="ma mb jg nu b gy ny nz l oa ob">images=[]<br/>labels=[]<br/>for fle in files:<br/>  files_ac=os.listdir(fldr+'/'+fle)<br/>    j=0<br/>    if 'NORMAL' in fle:<br/>      label=0<br/>    if 'Covid' in fle:<br/>      label=1<br/>    for fle_2 in files_ac:<br/>      if j&gt;=200:<br/>        break<br/>      image_p=fldr+'/'+fle+'/'+fle_2<br/>      print(image_p)<br/>      image=cv2.imread(image_p)<br/>      image = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)<br/>      image = cv2.resize(image, (224, 224))<br/>      images.append(image)<br/>      labels.append(label)<br/>      j+=1</span></pre><p id="e624" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我对标签进行了硬编码，以避免一次性编码。我将使用大小为(224 x 224 x 3)的调整后的图像。对应于新冠肺炎患者的标签保持为1。</p><p id="0fbd" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">“图像”列表包含所有X射线图像,“标签”列表包含相应的标签，0代表健康，1代表受影响的新冠肺炎。</p><div class="ne nf ng nh gt ab cb"><figure class="ni is oc nk nl nm nn paragraph-image"><img src="../Images/cd44174bfaaa191e7ac47992462964b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:448/format:webp/1*hyhQ9_AzgPO39cmbx7FOOQ.png"/></figure><figure class="ni is oc nk nl nm nn paragraph-image"><img src="../Images/04047973c59b7101a0c1578aa89c7fe8.png" data-original-src="https://miro.medium.com/v2/resize:fit:448/format:webp/1*GM74SKn9zrfu5xHxqxpkYA.png"/></figure><figure class="ni is oc nk nl nm nn paragraph-image"><img src="../Images/14d96576aa33cd8c9f11c3813e6b3371.png" data-original-src="https://miro.medium.com/v2/resize:fit:448/format:webp/1*MZM5zBRsHCxJvZ4W_bdCMg.png"/></figure></div><p id="0d54" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这是我们的x光经过预处理后的样子。第三张图片属于一名新冠肺炎患者。为了创建我们的训练集和测试集，我们需要缩放我们的“图像”集并将它们转换为数组。</p><pre class="ne nf ng nh gt nt nu nv nw aw nx bi"><span id="add7" class="ma mb jg nu b gy ny nz l oa ob">import numpy as np<br/>images_final=np.array(images)/255  ## Standardized<br/>labels_final=np.array(labels)<br/>from sklearn.model_selection import train_test_split<br/>X_train, X_test, Y_train, Y_test = train_test_split(images_final, labels_final,test_size=0.25, random_state=42)</span></pre><p id="17b8" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们将使用75%和25%的列车测试分割。</p><p id="5bb1" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">接下来，让我们初始化我们的扩充数据生成器。</p><pre class="ne nf ng nh gt nt nu nv nw aw nx bi"><span id="f2b9" class="ma mb jg nu b gy ny nz l oa ob">from tensorflow.keras.preprocessing.image import ImageDataGenerator<br/>data_generator = ImageDataGenerator(shear_range = 0.2,zoom_range = 0.2, horizontal_flip = True, rotation_range=30,vertical_flip = True)</span></pre><p id="9454" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">ImageDataGenerator将通过应用剪切、放大图像以及裁剪、旋转、水平或垂直翻转，从我们的批处理中生成随机增强的图像。这将有助于我们的模型更好地学习列车组。</p><h2 id="1b02" class="ma mb jg bd mc md me dn mf mg mh dp mi ln mj mk ml lr mm mn mo lv mp mq mr jm bi translated">模型</h2><p id="1d7f" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">我们现在准备继续我们的模型，我们将使用进行分类。</p><pre class="ne nf ng nh gt nt nu nv nw aw nx bi"><span id="d332" class="ma mb jg nu b gy ny nz l oa ob">from tensorflow.keras.layers import Dropout<br/>from tensorflow.keras.layers import Flatten,BatchNormalization<br/>from tensorflow.keras.layers import Dense, MaxPooling2D,Conv2D<br/>from tensorflow.keras.layers import Input,Activation,Add<br/>from tensorflow.keras.models import Model<br/>from tensorflow.keras.regularizers import l2<br/>from tensorflow.keras.optimizers import Adamdef Convolution(input_tensor,filters):<br/>    <br/>    x = Conv2D(filters=filters,kernel_size=(3, 3),padding = 'same',strides=(1, 1),kernel_regularizer=l2(0.001))(input_tensor)<br/>    x = Dropout(0.2)(x)<br/>    x= Activation('relu')(x)return x<br/>def model(input_shape):<br/>  inputs = Input((input_shape))<br/>  <br/>  conv_1= Convolution(inputs,32)<br/>  maxp_1 = MaxPooling2D(pool_size = (2,2)) (conv_1)<br/>  conv_2 = Convolution(maxp_1,64)<br/>  maxp_2 = MaxPooling2D(pool_size = (2, 2)) (conv_2)<br/>  conv_3 = Convolution(maxp_2,128)<br/>  maxp_3 = MaxPooling2D(pool_size = (2, 2)) (conv_3)<br/>  conv_4 = Convolution(maxp_3,256)<br/>  maxp_4 = MaxPooling2D(pool_size = (2, 2)) (conv_4)<br/>  flatten= Flatten() (maxp_4)<br/>  dense_1= Dense(64,activation='relu')(flatten)<br/>  drop_1=Dropout(0.2)(dense_1)<br/>  output= Dense(1,activation="sigmoid")(drop_1)model = Model(inputs=[inputs], outputs=[output])model.compile(loss="binary_crossentropy", optimizer="Adam",<br/> metrics=["accuracy"])<br/>  return model</span></pre><p id="0d3a" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们将使用4层模型，二元交叉熵作为我们的损失函数。我用了亚当的优化程序。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div class="gh gi od"><img src="../Images/29fe152bcf696ba5480b52987a1f558f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/0*aiXLtEG6Rt_J5BCQ.png"/></div></figure><p id="1f14" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">该模型具有3M个可训练参数。我使用了正则和辍学层，以避免过度拟合。</p><pre class="ne nf ng nh gt nt nu nv nw aw nx bi"><span id="ee3e" class="ma mb jg nu b gy ny nz l oa ob">import tensorflow as tf<br/>logdir = os.path.join("logs", datetime.datetime.now().strftime("%Y%m%d-%H%M%S"))<br/>tensorboard_callback = tf.keras.callbacks.TensorBoard(logdir, histogram_freq=1)<br/>fle_s='Covid_19_detection.h5'<br/>checkpointer = ModelCheckpoint(fle_s, monitor='loss',verbose=1,save_best_only=True,save_weights_only=False, mode='auto',save_freq='epoch')<br/>callback_list=[checkpointer,tensorboard_callback]History=Model.fit_generator(data_generator.flow(X_train,Y_train,batch_size=32),validation_data=(X_test,Y_test),epochs=25,callbacks=[callback_list])</span></pre><p id="fb5d" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">上面的片段可以用来训练我们的模型。我已经使用了32的批量大小和扩充的数据生成器，我们已经在这篇文章中看到了。</p><pre class="ne nf ng nh gt nt nu nv nw aw nx bi"><span id="cb76" class="ma mb jg nu b gy ny nz l oa ob">pred=Model.predict(X_test)<br/>score=Model.evaluate(X_test,Y_test)<br/>print(score)<br/>&gt;&gt;&gt; [0.25777390599250793, 0.9599999785423279]</span></pre><p id="1499" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们的模型给出了96%的测试准确度。</p><h2 id="e8f1" class="ma mb jg bd mc md me dn mf mg mh dp mi ln mj mk ml lr mm mn mo lv mp mq mr jm bi translated">结果评估</h2><p id="c61e" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">让我们看看我们的学习曲线。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/8cc538597a86563b76a146afff2bba8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/0*5RiYh-SSwn1w7YwY.png"/></div></figure><p id="5737" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">上面的曲线显示了我们的损失函数随时间的减少。橙色曲线表示验证集，蓝色曲线表示训练集。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div class="gh gi of"><img src="../Images/5772f84386886a71bbbe48d1c06c370b.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/format:webp/0*FU2FvTWxK_s7oCO7.png"/></div></figure><p id="45ab" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们来看看获得的混淆矩阵。</p><pre class="ne nf ng nh gt nt nu nv nw aw nx bi"><span id="7c79" class="ma mb jg nu b gy ny nz l oa ob">results = confusion_matrix(Y_test, pred_np)<br/>import seaborn as snssns.heatmap(results, annot=True)</span></pre><figure class="ne nf ng nh gt is gh gi paragraph-image"><div class="gh gi og"><img src="../Images/98b6bbbdb735d0f7a67bafd97d554bdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:692/format:webp/0*3qVEWZ5huITVP2sb.png"/></div></figure><p id="a6ba" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这是我们得到的混淆矩阵。</p><h2 id="b90f" class="ma mb jg bd mc md me dn mf mg mh dp mi ln mj mk ml lr mm mn mo lv mp mq mr jm bi translated">XGBoost模型</h2><p id="338a" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">我们现在来看看XGBoost模型的训练。</p><p id="1d09" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><a class="ae jd" href="https://github.com/ieee8023/covid-chestxray-dataset" rel="noopener ugc nofollow" target="_blank">数据集</a>包含一个名为metadata.csv的文件。该文件包含每个患者的详细信息，包括其x光片的相应文件名。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oh"><img src="../Images/26d1da11772ed30cf0b45f89efbebd6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UCdRNTpkJGRYarBqGvWgQw.png"/></div></div></figure><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oi"><img src="../Images/ba23485d4ff2ae6d91dea4c7b7d9b326.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cy9ULcE6cHlJOeluRtftNA.png"/></div></div></figure><p id="cc4d" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">上面的图像显示了文件的结构。我已经选择了关于“性别”、“年龄”、“存活”、“插管”、“插管_存在”、“去了_重症监护室”、“在_重症监护室”和“文件名”字段的信息片段，仅用于发现新冠肺炎的患者。</p><p id="efa4" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在预处理数据时，我删除了“年龄”或“性别”列中所有空值的条目。接下来，如果‘插管’，‘插管_存在’，‘去了_重症监护室’，‘在_重症监护室’中的任何字段具有值‘Y’或者‘存活’列具有值‘N’，则我已经标记该患者具有严重状况，否则没有。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/e738bf8b866708ccc9a5329aedde639a.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*Nq7oy3Ccez0RQ2KcsHM69Q.png"/></div></figure><p id="6957" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">上图显示了初级预处理后的数据。接下来，我们相应地选择文件名，并使用我们的CNN模型来获得X射线扫描的预测百分比。</p><pre class="ne nf ng nh gt nt nu nv nw aw nx bi"><span id="4ea4" class="ma mb jg nu b gy ny nz l oa ob">import cv2<br/>import numpy as np<br/>def prediction(model,df):<br/>    i=0<br/>    pred=[]<br/>    while i&lt;len(df):<br/>        <br/>        file_ext=fldr+'/'+files[1]+'/'<br/>        name=df.iloc[i]['filename']<br/>        file=file_ext+name<br/>        image=cv2.imread(file)<br/>        image = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)<br/>        image = cv2.resize(image, (224, 224))<br/>        images_final=np.array(image)/255<br/>        pred_1=model.predict(np.array([images_final]))<br/>        #print(pred_1[0][0])<br/>        pred.append(pred_1[0][0])<br/>        <br/>        i+=1<br/>    return pred</span></pre><p id="b95c" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">上面这段代码用于获得预测百分比。</p><p id="be40" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对数据进行充分预处理后，获得的数据集如下所示:</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/58731ebbf76fc0e666eac7c2b7350b55.png" data-original-src="https://miro.medium.com/v2/resize:fit:498/format:webp/1*hSjrR6cztimQwHI1-aZgPw.png"/></div></figure><h2 id="d135" class="ma mb jg bd mc md me dn mf mg mh dp mi ln mj mk ml lr mm mn mo lv mp mq mr jm bi translated">模型和培训</h2><p id="8ca3" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">我们准备初始化XGBoost模型。</p><pre class="ne nf ng nh gt nt nu nv nw aw nx bi"><span id="079f" class="ma mb jg nu b gy ny nz l oa ob">from sklearn.model_selection import train_test_split<br/>from sklearn.metrics import accuracy_score<br/>import xgboost as xgb</span><span id="2b9e" class="ma mb jg nu b gy ok nz l oa ob">X_train, X_test, y_train, y_test = train_test_split(X, Y, random_state=0)<br/>xgb_model = xgb.XGBClassifier(objective="binary:logistic", random_state=42)<br/>xgb_model.fit(X_train, y_train)<br/>y_pred=xgb_model.predict(X_test)<br/>acc=accuracy_score(y_pred,y_test)</span></pre><p id="e99a" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">上面的代码片段用于初始化XGBoost分类器来预测风险。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ol"><img src="../Images/3b6813d16e0a913dee5de5d5bbc4b799.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FLcrv6YEZFc8USzhvC65Sg.png"/></div></div></figure><p id="47c2" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">该图显示了所使用的XGBoost模型。</p><p id="6925" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">该模型给出了77%的准确度分数。</p><p id="74be" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">得到的混淆矩阵和分类得分为:</p><div class="ne nf ng nh gt ab cb"><figure class="ni is om nk nl nm nn paragraph-image"><img src="../Images/4e921f797aa90a8587c8bd3a9ca4b484.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*8J91h7H9sNmAdQPhDI17ig.png"/></figure><figure class="ni is on nk nl nm nn paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/e888cadc4bde7cd5ccd09b1648669574.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*Zyewv28oRRUdl0frcFk7XQ.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk oo di op nr translated">(1)分类报告和(2)混淆矩阵</figcaption></figure></div><h2 id="33fe" class="ma mb jg bd mc md me dn mf mg mh dp mi ln mj mk ml lr mm mn mo lv mp mq mr jm bi translated">梯度推进模型</h2><p id="8ad2" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">对于梯度增强模型，我们的训练数据呈现在<a class="ae jd" href="https://www.kaggle.com/edhenrivi/covid19-age-gender-symptoms-exploration?select=COVID19-age-gender-symptoms-outcome.csv" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="b44f" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">数据的结构如下所示:</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oq"><img src="../Images/4bda911bdaf9b10abd130f085656c182.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LD4PahY0tAAleMYY8EUz7w.png"/></div></div></figure><p id="da3e" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">实际文件有几列:</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi or"><img src="../Images/40eded414c4c8caa4c799255f7a63412.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F8cNlBnKKQUDduE0WTSosA.png"/></div></div></figure><p id="075a" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">“结果”列有三个结果:“未知”、“高风险”、“低风险”。我们将只使用“高风险”和“低风险”结果，我们将使用的列有:</p><pre class="ne nf ng nh gt nt nu nv nw aw nx bi"><span id="a37e" class="ma mb jg nu b gy ny nz l oa ob">[[‘gender_male’,’age’,’has_pneumonia’, ‘has_stiff’, ‘has_effusion’,’has_tired’, ‘has_thirst’, ‘has_appetite’, ‘has_pleural’, ‘has_symptom’,’has_weak’, ‘has_discomfort’,’has_cough’,’has_ache’, ‘has_rigor’, ‘has_cold’, ‘has_sore’,’has_pharyn’,<br/> ‘has_runny’, ‘has_respiratory’,’has_viral’,’outcome’]]</span></pre><p id="fc58" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">因此，我们使用前20列作为我们的训练集，使用结果列作为我们的目标集。</p><div class="ne nf ng nh gt ab cb"><figure class="ni is os nk nl nm nn paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/cb99a7d1ff7d69b88d1825a034494c63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*N1SeCIWWC7XWRR2pAEyTJg.png"/></div></figure><figure class="ni is ot nk nl nm nn paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/d2c5f174919cc82f68c5f08fcf57e81b.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*F8mjY7uhA1MVOJI-1WI7pQ.png"/></div></figure></div><p id="d492" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">上图显示了经过处理的数据集。</p><p id="492c" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在，需要注意的是，我们的数据严重不平衡。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/0eebe164e8259dfdb01a83542934e4f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*u1A7sGBomKYBF3gpwwK9TA.png"/></div></figure><p id="c1f7" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">所以，我用重采样的方法将每个类的数据均衡到500。</p><pre class="ne nf ng nh gt nt nu nv nw aw nx bi"><span id="908d" class="ma mb jg nu b gy ny nz l oa ob">df_majority = df[df.tag==0]<br/>df_minority = df[df.tag==1]<br/>df_minority_upsampled = resample(df_minority, <br/>                                 replace=True,     <br/>                                 n_samples=500,    <br/>                                 random_state=32)<br/>df_majority_downsampled = resample(df_majority, <br/>                                 replace=False,   <br/>                                 n_samples=500,    <br/>                                 random_state=32)<br/>df_final=pd.concat([df_minority_upsampled,df_majority_downsampled],axis=0)</span></pre><p id="e903" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在，我们的数据是平衡的。</p><p id="77fd" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们检查一下数据的分布。为了做到这一点，我使用了主成分分析来可视化数据。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/7377f38d8448fbfb5b84240fdb21427b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*_1BJBiHwvV6t8Kde7xocjQ.png"/></div></figure><p id="97f9" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">上图显示了PCA。我们可以看到没有线性分离。因此，我们将需要使用决策树或集成学习算法。因此，我们使用梯度推进。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/9679e034c7af15d308a2d13594ba9e7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:508/format:webp/1*17aBQUlVsNcdEP8yLfG4sQ.png"/></div></figure><p id="c1a5" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">上图显示了我们的训练数据集的细节。</p><h2 id="9d00" class="ma mb jg bd mc md me dn mf mg mh dp mi ln mj mk ml lr mm mn mo lv mp mq mr jm bi translated">模型和培训</h2><p id="2c17" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">我们来看看模型和评测。</p><pre class="ne nf ng nh gt nt nu nv nw aw nx bi"><span id="d423" class="ma mb jg nu b gy ny nz l oa ob">from sklearn.model_selection import train_test_split<br/>from sklearn.ensemble import GradientBoostingClassifier<br/>from sklearn.metrics import accuracy_score</span><span id="7cdf" class="ma mb jg nu b gy ok nz l oa ob">model_gb=GradientBoostingClassifier()<br/>model_gb.fit(X_train,y_train)<br/>y_pred=model_gb.predict(X_test)<br/>acc=accuracy_score(y_pred,y_test)</span></pre><p id="e298" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">上面的代码用于训练模型。获得的准确率为82%</p><div class="ne nf ng nh gt ab cb"><figure class="ni is ox nk nl nm nn paragraph-image"><img src="../Images/0101676fa5883beeef06bf15b8e21568.png" data-original-src="https://miro.medium.com/v2/resize:fit:918/format:webp/1*45r8U9aDaHVP4La985cAyA.png"/></figure><figure class="ni is oy nk nl nm nn paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/444d6adc36430b5e6beeb14ecaef27bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*-93HIJwtpCrQYFMYxXmhfw.png"/></div></figure></div><p id="5986" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">上图分别给出了分类报告和混淆矩阵。</p><h2 id="8f2b" class="ma mb jg bd mc md me dn mf mg mh dp mi ln mj mk ml lr mm mn mo lv mp mq mr jm bi translated">部署</h2><p id="028e" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">我使用Flask和Docker进行项目的部署。</p><div class="ne nf ng nh gt ab cb"><figure class="ni is oz nk nl nm nn paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/17800fa5a0eb8050c277aebb94bcb0dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*cWuvkF15QKOsTHtgyIaqOA.png"/></div></figure><figure class="ni is pa nk nl nm nn paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/f3dd29e38eb8ae50fd9c7b7e44413ed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*3EdJ1467D1nqYkj4Vgkung.jpeg"/></div></figure></div><blockquote class="mx my mz"><p id="4cd6" class="le lf na lg b lh li kq lj lk ll kt lm nb lo lp lq nc ls lt lu nd lw lx ly lz ij bi translated">Flask是一个用Python编写的微型web框架。它被归类为微框架，因为它不需要特殊的工具或库。</p><p id="05f5" class="le lf na lg b lh li kq lj lk ll kt lm nb lo lp lq nc ls lt lu nd lw lx ly lz ij bi translated">Docker是一组平台即服务产品，使用操作系统级虚拟化来交付称为容器的软件包中的软件。容器是相互隔离的，捆绑了它们自己的软件、库和配置文件；他们可以通过明确定义的渠道相互交流。</p></blockquote><figure class="ne nf ng nh gt is"><div class="bz fp l di"><div class="pb pc l"/></div></figure><p id="04ac" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">上面的代码用于使用Flask部署模型。</p><p id="9a24" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><em class="na">第10- 55行:</em>该部分涉及上传患者的x光片并预测患者是否受到冠状病毒的影响。</p><div class="ne nf ng nh gt ab cb"><figure class="ni is pd nk nl nm nn paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/78897e0af373667eda3bc54194421ba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/1*_9OqY0egT6yonITHQ0HHsg.png"/></div></figure><figure class="ni is pe nk nl nm nn paragraph-image"><img src="../Images/3369d3709d676104369c51069b9faba5.png" data-original-src="https://miro.medium.com/v2/resize:fit:686/format:webp/1*bXdwhxV-Um7lzutRXAYbrA.png"/></figure><figure class="ni is pf nk nl nm nn paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/ff4e69ef358bc3e7d2e2bd42e96e52cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*erhU7zFHJBqi6KtA5j3u6w.png"/></div></figure></div><p id="2dac" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">以上图像显示了该部分的工作情况。</p><pre class="ne nf ng nh gt nt nu nv nw aw nx bi"><span id="6dca" class="ma mb jg nu b gy ny nz l oa ob">&lt;!doctype html&gt;<br/>&lt;title&gt;Covid-19-Detector&lt;/title&gt;<br/>&lt;h2&gt;Select a file to upload&lt;/h2&gt;</span><span id="36c2" class="ma mb jg nu b gy ok nz l oa ob">&lt;form method="post" action="/predicter" enctype="multipart/form-data"&gt;<br/>    &lt;dl&gt;<br/> &lt;p&gt;<br/>  &lt;input type="file" name="file" autocomplete="off" required&gt;<br/> &lt;/p&gt;<br/>    &lt;/dl&gt;<br/>    &lt;p&gt;<br/> &lt;input type="submit" value="Submit"&gt;<br/>    &lt;/p&gt;<br/>&lt;/form&gt;</span></pre><p id="d3bf" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">以上是上传页面的HTML模板代码。</p><p id="1ee3" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在，如果患者被发现冠状动脉阳性，他/她将进行风险预测。</p><p id="8bed" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><em class="na">第57–133行:</em>该部分处理表单数据的收集和风险预测最终结果的交付。</p><div class="ne nf ng nh gt ab cb"><figure class="ni is pg nk nl nm nn paragraph-image"><img src="../Images/dd9ca9ab027f7e7758363dd4fd583d4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/format:webp/1*9FXm2cO-DfiuVe0eDmb-IA.png"/></figure><figure class="ni is ph nk nl nm nn paragraph-image"><img src="../Images/f28ac2aa22f7291cd5a1191c6f07c7eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*x5m3CO5-eKj04IU4SJEG1A.png"/></figure></div><p id="4d28" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">以上图像显示了该部分的工作情况，最终结果如下:</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pi"><img src="../Images/39c04789a8611231efead4ba5dc469bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m6AifOyioQtyvtC0qVEqMQ.png"/></div></div></figure><pre class="ne nf ng nh gt nt nu nv nw aw nx bi"><span id="1c7f" class="ma mb jg nu b gy ny nz l oa ob">&lt;html&gt;  <br/>&lt;head&gt;  <br/>&lt;title&gt;Form&lt;/title&gt;  <br/>&lt;/head&gt;  <br/>&lt;body&gt;  <br/>&lt;p&gt;Enter 'Yes or Y' for Yes and 'No or N' for NO&lt;/p&gt; <br/>&lt;p&gt;Enter 'M' for Male or 'F' for Female&lt;/p&gt;  <br/>&lt;/body&gt; <br/>&lt;form action="/getinfo" method="POST", enctype="multipart/form-data"&gt;</span><span id="70aa" class="ma mb jg nu b gy ok nz l oa ob">&lt;label&gt;Name&lt;/label&gt;<br/>         &lt;input type="text" id="name" name="name" placeholder=" Enter name"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Age&lt;/label&gt;<br/>         &lt;input type="text" id="age" name="age" placeholder="Enter the age"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Gender&lt;/label&gt;<br/>         &lt;input type="text" id="gender" name="gender" placeholder="Enter the gender"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Pneumonia&lt;/label&gt;<br/>         &lt;input type="text" id="has_pneumonia" name="has_pneumonia" placeholder="Yes for Pneumonia"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Stiffness&lt;/label&gt;<br/>         &lt;input type="text" id="has_stiff" name="has_stiff" placeholder="Yes for Stiffness"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Effusion&lt;/label&gt;<br/>         &lt;input type="text" id="has_effusion" name="has_effusion" placeholder="Yes for Effusion"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Tiredness&lt;/label&gt;<br/>         &lt;input type="text" id="has_tired" name="has_tired" placeholder="Yes for Tiredness"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Thrist&lt;/label&gt;<br/>         &lt;input type="text" id="has_thirst" name="has_thirst" placeholder="Yes for Thrist"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Appetite&lt;/label&gt;<br/>         &lt;input type="text" id="has_appetite" name="has_appetite" placeholder="Yes for Appetite"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Pleural&lt;/label&gt;<br/>         &lt;input type="text" id="has_pleural" name="has_pleural" placeholder="Yes for Pleural"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Symptoms&lt;/label&gt;<br/>         &lt;input type="text" id="has_symptom" name="has_symptom" placeholder="Yes for Symptoms like loss of smell and taste"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Weakness&lt;/label&gt;<br/>         &lt;input type="text" id="has_weak" name="has_weak" placeholder="Yes for Weakness"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Discomfort&lt;/label&gt;<br/>         &lt;input type="text" id="has_discomfort" name="has_discomfort" placeholder="Yes for Discomfort"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Cough&lt;/label&gt;<br/>         &lt;input type="text" id="has_cough" name="has_cough" placeholder="Yes for Cough"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Ache&lt;/label&gt;<br/>         &lt;input type="text" id="has_ache" name="has_ache" placeholder="Yes for Ache"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Rigor&lt;/label&gt;<br/>         &lt;input type="text" id="has_rigor" name="has_rigor" placeholder="Yes for Rigor"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Cold&lt;/label&gt;<br/>         &lt;input type="text" id="has_cold" name="has_cold" placeholder="Yes for Cold"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Sore Throat&lt;/label&gt;<br/>         &lt;input type="text" id="has_sore" name="has_sore" placeholder="Yes for Sore Throat"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Pain in throat/ Inflated throat&lt;/label&gt;<br/>         &lt;input type="text" id="has_pharyn" name="has_pharyn" placeholder="Yes for Inflated throat"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Runny Nose&lt;/label&gt;<br/>         &lt;input type="text" id="has_runny" name="has_runny" placeholder="Yes for Runny Nose"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Respiratory Problem&lt;/label&gt;<br/>         &lt;input type="text" id="has_respiratory" name="has_respiratory" placeholder="Yes for Respiratory Problem"&gt;<br/>         &lt;br&gt;<br/>         &lt;label&gt;Viral Fever&lt;/label&gt;<br/>         &lt;input type="text" id="has_viral" name="has_viral" placeholder="Yes for Viral Fever"&gt;<br/>         &lt;br&gt;<br/>         &lt;dl&gt;<br/>         &lt;p&gt;<br/>  &lt;input type="file" name="file" autocomplete="off" required&gt;<br/>  &lt;/p&gt;<br/>      &lt;/dl&gt;</span><span id="40cc" class="ma mb jg nu b gy ok nz l oa ob">&lt;button type="submit"&gt;Submit&lt;/button&gt;</span><span id="9830" class="ma mb jg nu b gy ok nz l oa ob">&lt;/form&gt; <br/>&lt;/html&gt;</span></pre><p id="e17b" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">上面的代码给出了表单模板。</p><p id="22f5" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我已经使用Docker来容器化上述项目。以下是该准则的要求。</p><pre class="ne nf ng nh gt nt nu nv nw aw nx bi"><span id="59b2" class="ma mb jg nu b gy ny nz l oa ob">numpy==1.18.5<br/>matplotlib<br/>opencv-python-headless<br/>DateTime<br/>sklearn<br/>scikit-learn<br/>pandas<br/>seaborn<br/>tensorflow<br/>Werkzeug==0.14.1<br/>Flask-WTF<br/>WTForms<br/>xgboost</span></pre><p id="e578" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">docker文件如下所示:</p><pre class="ne nf ng nh gt nt nu nv nw aw nx bi"><span id="4b23" class="ma mb jg nu b gy ny nz l oa ob">FROM ubuntu:latest<br/>MAINTAINER Abhijit Roy</span><span id="857b" class="ma mb jg nu b gy ok nz l oa ob">RUN apt-get update -y</span><span id="8074" class="ma mb jg nu b gy ok nz l oa ob">RUN apt-get install -y python3-pip python3-dev build-essential</span><span id="2a0c" class="ma mb jg nu b gy ok nz l oa ob">COPY . /app</span><span id="ea87" class="ma mb jg nu b gy ok nz l oa ob">WORKDIR /app</span><span id="5254" class="ma mb jg nu b gy ok nz l oa ob">RUN pip3 install --default-timeout=200 future</span><span id="27fa" class="ma mb jg nu b gy ok nz l oa ob">RUN pip3 install -r requirements.txt</span><span id="26fd" class="ma mb jg nu b gy ok nz l oa ob">EXPOSE 5000</span><span id="5cc5" class="ma mb jg nu b gy ok nz l oa ob">CMD python3 deployer.py</span></pre><p id="487e" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在，我们可以使用以下指令来构建映像:</p><pre class="ne nf ng nh gt nt nu nv nw aw nx bi"><span id="501a" class="ma mb jg nu b gy ny nz l oa ob">sudo docker build -t covid_detector_image .</span><span id="3161" class="ma mb jg nu b gy ok nz l oa ob">docker images</span></pre><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pj"><img src="../Images/a488a4706f679349a06948490133169d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GpvcAmg0NgCUfc4RNIQkOw.png"/></div></div></figure><p id="a173" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">该图像显示了创建的docker图像。</p><h2 id="a65a" class="ma mb jg bd mc md me dn mf mg mh dp mi ln mj mk ml lr mm mn mo lv mp mq mr jm bi translated">结论</h2><p id="3eb6" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">在本文中，我们看到了一个构建新冠肺炎探测器应用程序的想法。</p><p id="0aeb" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">Github库在这里是<a class="ae jd" href="https://github.com/abr-98/COVID_19_detection_app" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="23b9" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我希望这有所帮助。</p></div></div>    
</body>
</html>