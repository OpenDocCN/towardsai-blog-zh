<html>
<head>
<title>The Fastest Way To Build An FAQ Bot In Rasa</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Rasa中构建FAQ机器人的最快方法</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/the-fastest-way-to-build-an-faq-bot-in-rasa-90b705a21f5e?source=collection_archive---------1-----------------------#2021-09-18">https://pub.towardsai.net/the-fastest-way-to-build-an-faq-bot-in-rasa-90b705a21f5e?source=collection_archive---------1-----------------------#2021-09-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="4989" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/nlp" rel="noopener ugc nofollow" target="_blank">自然语言处理</a></h2><div class=""/><div class=""><h2 id="2879" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">将FAQ视为问答问题</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/aab6b0ebc474395184ba2154fb260175.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E3bnosm-oV9sKnGbC0jDhA.png"/></div></div></figure><h1 id="dfea" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">介绍</h1><p id="cc0a" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">在这篇文章中，我将分享一个想法，使用<a class="ae mr" href="https://rasa.com/" rel="noopener ugc nofollow" target="_blank"> Rasa </a>快速构建一个机器人来回答类似FAQ的问题。</p><p id="a4c7" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">重现本文中描述的结果的代码是<a class="ae mr" href="https://github.com/hsm207/rasa_haystack" rel="noopener ugc nofollow" target="_blank">，这里是</a>。</p><h1 id="172d" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">问题陈述</h1><p id="9211" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">想象一下，你的任务是构建一个机器人来处理某个技术主题的常见问题，例如<a class="ae mr" href="https://en.wikipedia.org/wiki/Osteopathy" rel="noopener ugc nofollow" target="_blank">骨病</a>。</p><p id="8122" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">标准的方法是为每种类型的问题编写一个<a class="ae mr" href="https://rasa.com/docs/rasa/next/glossary#intent" rel="noopener ugc nofollow" target="_blank">意图</a>和一个<a class="ae mr" href="https://rasa.com/docs/rasa/next/glossary#response--template--utterance" rel="noopener ugc nofollow" target="_blank">响应</a>。例如，我们可以创建一个名为<code class="fe mx my mz na b">ask_osteopathy_definition</code>的意图，包含以下示例:</p><ul class=""><li id="cad8" class="nb nc it lx b ly ms mb mt me nd mi ne mm nf mq ng nh ni nj bi translated">什么是整骨？</li><li id="5ccb" class="nb nc it lx b ly nk mb nl me nm mi nn mm no mq ng nh ni nj bi translated">说说整骨术？</li><li id="f53e" class="nb nc it lx b ly nk mb nl me nm mi nn mm no mq ng nh ni nj bi translated">定义骨病</li></ul><p id="355a" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">并定义一个名为<code class="fe mx my mz na b">utter_osteopathy_definition</code>的响应来返回文本:</p><blockquote class="np nq nr"><p id="30a4" class="lv lw ns lx b ly ms kd ma mb mt kg md nt mu mg mh nu mv mk ml nv mw mo mp mq im bi translated">整骨疗法是一种替代医学，强调对身体肌肉组织和骨骼的物理操作</p></blockquote><p id="bfa3" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">我们可以更进一步，使用<a class="ae mr" href="https://rasa.com/docs/rasa/chitchat-faqs" rel="noopener ugc nofollow" target="_blank">响应选择器</a>来实现这些问题。</p><p id="215a" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">然而，这两种方法都存在这两个问题:</p><ul class=""><li id="1854" class="nb nc it lx b ly ms mb mt me nd mi ne mm nf mq ng nh ni nj bi translated"><strong class="lx jd">为意图生成示例</strong>:一个人询问骨病定义的方式只有这么多。如果一个问题没有太多的表达方式，我们该怎么办？我们应该求助于生成合成示例吗？</li><li id="e9b8" class="nb nc it lx b ly nk mb nl me nm mi nn mm no mq ng nh ni nj bi translated"><strong class="lx jd">生成回答</strong>:寻找一个技术问题的答案是非常耗时的。实际上，已经有一个包含答案的文档库。人类只需要搜索正确的文档并提取相关部分来构建答案。我们不能自动化这个过程吗？</li></ul><h1 id="63c2" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">解决办法</h1><h2 id="7d87" class="nw le it bd lf nx ny dn lj nz oa dp ln me ob oc lp mi od oe lr mm of og lt iz bi translated">概观</h2><p id="9fe9" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">我们可以通过将一个FAQ机器人视为一个<a class="ae mr" href="https://www.microsoft.com/en-us/ai/ai-lab-machine-reading" rel="noopener ugc nofollow" target="_blank">机器阅读理解</a>问题来解决上一节提到的两个问题。</p><p id="9b48" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">该解决方案的关键组件是问答(QA)系统。该系统将接受自由文本输入，例如“什么是整骨术？”并在其内部知识库(文档集合)中搜索答案。它将返回它认为能回答给定输入的文本片段。</p><h2 id="3fad" class="nw le it bd lf nx ny dn lj nz oa dp ln me ob oc lp mi od oe lr mm of og lt iz bi translated">履行</h2><p id="2917" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">本文将使用<a class="ae mr" href="https://haystack.deepset.ai/overview/intro" rel="noopener ugc nofollow" target="_blank">草堆</a>作为问答系统。</p><p id="54cf" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">首先，我们需要定义一个意图，以便机器人知道它需要将这个意图传递给QA系统。让我们称这个意图为<code class="fe mx my mz na b">ask_question</code>:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/f74add51fff493d40419d2ed1e4e19ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:842/format:webp/1*NLiiFrCrUC9LDlTuMH1qNw.png"/></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated">图1:调用QA系统的意图</figcaption></figure><p id="8bb6" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">接下来，我们定义一个规则，告诉机器人在识别到一个<code class="fe mx my mz na b">ask_question</code>时调用QA系统:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/7ddb051290adc4626bbc325ecc7cf70e.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*BLE4OInebIOjiJuyvDRTfg.png"/></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated">图2:调用QA系统的规则</figcaption></figure><p id="f0d2" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">图2假设我们有一个名为<code class="fe mx my mz na b">action_answer_question</code>的定制动作。这是一个通过系统的REST端点与QA系统交互的动作。</p><p id="0d7d" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">下面是<code class="fe mx my mz na b">action_answer_question</code>初始化时发生的情况:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi on"><img src="../Images/4e726fe8d846386d8e80dd41f1f9c654.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*85_daiJuN19-svBq2a9mZA.png"/></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated">图3:启动时构建知识库</figcaption></figure><p id="63f8" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">图3显示，每次启动动作服务器时，bot都会构建自己的知识库。知识库由一些从维基百科下载的文章组成。实际上，文档存储将是一个独立于bot管理的组件，因此这一步是不必要的。</p><p id="3d62" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">当机器人需要调用这个自定义操作时，就会发生这种情况:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/adfbea42292b0832ebe92474ed9bac9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*IKRbGrwaq18RINAebkM06Q.png"/></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated">图4:机器人如何从问答系统获得答案</figcaption></figure><p id="3c08" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">机器人将使用tracker对象提取用户的问题(第75行)。然后，它将这个问题传递给QA系统(第77行)。如果来自QA系统的最高得分答案的概率大于0.70，那么机器人将把这个答案返回给用户(第82行)。否则会说“我不知道答案(第84行)”。</p><h2 id="1098" class="nw le it bd lf nx ny dn lj nz oa dp ln me ob oc lp mi od oe lr mm of og lt iz bi translated">结果</h2><p id="f40f" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">这是一个与机器人对话的例子:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi op"><img src="../Images/cec97e5e8d7a12eff090b3fd57f74f00.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*HkCHzYYZ8lxjCTsX-jY8tw.png"/></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated">图5:与骨病常见问题机器人的对话示例</figcaption></figure><p id="a4c8" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">请注意:</p><ul class=""><li id="5569" class="nb nc it lx b ly ms mb mt me nd mi ne mm nf mq ng nh ni nj bi translated">该机器人对用户问题中的错别字具有很强的鲁棒性</li><li id="7764" class="nb nc it lx b ly nk mb nl me nm mi nn mm no mq ng nh ni nj bi translated">当机器人“知道”答案时，给定用于构建其知识库的文章，它实际上是正确的</li></ul><p id="487a" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">这确实令人印象深刻，因为我们只是使用了QA系统附带的默认设置，并没有根据我们的数据集对其模型进行微调，也没有对我们的数据集进行注释。</p><p id="629c" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">如果我们花一些时间定制QA系统的管道，并根据我们的数据集对其模型进行微调，我们很可能会获得更好的性能。</p><h1 id="ff87" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">结论</h1><p id="90a8" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">这篇文章分享了一个想法，即通过利用机器阅读理解领域的最新进展，快速构建一个像样的FAQ bot。我希望你发现这很有见地。如果你有任何问题，请在评论中告诉我。</p></div></div>    
</body>
</html>