<html>
<head>
<title>Model Monitoring Dashboards made easy (1/3).</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简化模型监控仪表板(1/3)。</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/model-monitoring-dashboards-made-easy-1-3-471b94313b5f?source=collection_archive---------1-----------------------#2021-11-15">https://pub.towardsai.net/model-monitoring-dashboards-made-easy-1-3-471b94313b5f?source=collection_archive---------1-----------------------#2021-11-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="3575" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/data-visualization" rel="noopener ugc nofollow" target="_blank">数据可视化</a></h2><div class=""/><div class=""><h2 id="4401" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">在这个由3部分组成的系列中，我将展示如何轻松地制作模型监控仪表板。</h2></div><p id="9ce4" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi lk translated"><span class="l ll lm ln bm lo lp lq lr ls di">我</span>知道模型监控和重新训练模型的痛苦对于任何机器学习工程师来说都不是很愉快，如果没有任何简单的方法来跟踪部署在生产中或其他需要监控的地方的所有模型，就更是如此。</p><p id="e113" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在这个由3部分组成的系列中，我将介绍用交互式GUI构建模型监控仪表板，并用最少的GUI部分代码。</p><p id="9a03" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja"> <em class="lt">第1部分:</em> </strong> <em class="lt">构建一个简单的GUI界面，带有一个基本的模型监控界面和评估指标。我们将使用</em><a class="ae lu" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank"><em class="lt">streamlit</em></a><em class="lt">来完成工作，这是所有竞争对手中最好的。</em></p><p id="9b54" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">第2部分:</strong>我们将添加更复杂的模型监控指标，在这里，我们将使用类似<a class="ae lu" href="https://evidentlyai.com/" rel="noopener ugc nofollow" target="_blank">的服务，显然是</a>，将数据传递给已经构建好的具有基本功能的GUI。</p><p id="b1c2" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">第3部分:</strong>我们将尽可能在再培训中加入自动化，并使用GitHub actions构建CI/CD管道，还将尝试不同的替代方案。</p><p id="f630" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">注意:本指南是最基本的指南，假设您已经设置了数据获取管道(CSV文件、数据库、REST APIs)。</strong></p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi lv"><img src="../Images/98f64fd4a02bfe9bcef78c0a8bed127e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5t3gwpjC4ETCjcendzS2SA.jpeg"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">斯蒂芬·道森在<a class="ae lu" href="https://unsplash.com/s/photos/data?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="a188" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">让我们开始吧。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="bcc8" class="ms mt iq bd mu mv mw mx my mz na nb nc kf nd kg ne ki nf kj ng kl nh km ni nj bi translated"><strong class="ak">要做的事情:</strong></h1><ul class=""><li id="8148" class="nk nl iq kq b kr nm ku nn kx no lb np lf nq lj nr ns nt nu bi translated">数据探索(简介)</li><li id="6e81" class="nk nl iq kq b kr nv ku nw kx nx lb ny lf nz lj nr ns nt nu bi translated">模型监控简介</li><li id="7969" class="nk nl iq kq b kr nv ku nw kx nx lb ny lf nz lj nr ns nt nu bi translated">简化基础知识和GUI构建</li></ul><h1 id="deb2" class="ms mt iq bd mu mv oa mx my mz ob nb nc kf oc kg ne ki od kj ng kl oe km ni nj bi translated">数据探索(简介)</h1><p id="7074" class="pw-post-body-paragraph ko kp iq kq b kr nm ka kt ku nn kd kw kx of kz la lb og ld le lf oh lh li lj ij bi translated">我们将要使用的数据来自kaggle。这里可以找到<a class="ae lu" href="https://www.kaggle.com/fedesoriano/heart-failure-prediction" rel="noopener ugc nofollow" target="_blank">。这是一个心力衰竭预测的数据集。让我们对数据有一个基本的了解。</a></p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi oi"><img src="../Images/3c643e003e6bcb20d0e80e22eedeadfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i4U0VnoQ7Ib9_33_NKQn-A.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">数据集的标题(5)</figcaption></figure><p id="b75d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">上面是数据的一瞥，让我们检查数据中的数据类型和空值(如果有的话)。</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/b72f391d823c6fb489038238ea4af9ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*1ITXMrRPpb7SfrK0a-tlkw.png"/></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">数据上的df.info()</figcaption></figure><p id="4a01" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">数据集中没有任何空值，总共有<strong class="kq ja"> 11 </strong>个要素可以确定是否存在患心脏病的风险。我将在这里做一个非常基本的EDA，因为复杂的EDA超出了本文的范围。</p><p id="b7d9" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们将研究不同特征与目标变量<em class="lt">心脏病的相关性。</em></p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi ok"><img src="../Images/9235d60ab2892db7911be956390ae685.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dvOxpenS_-a-2sHU4CvTbA.png"/></div></div></figure><p id="54be" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们现在对这些特征是如何相关的有了一个概念。对于一个详细的，插图丰富的EDA，看看这个<a class="ae lu" href="https://www.kaggle.com/francescovattiato/heart-disease-prediction-with-svm-up-to-100-rec" rel="noopener ugc nofollow" target="_blank">笔记本</a>。</p><h1 id="f172" class="ms mt iq bd mu mv oa mx my mz ob nb nc kf oc kg ne ki od kj ng kl oe km ni nj bi translated">模型监控简介</h1><p id="0cad" class="pw-post-body-paragraph ko kp iq kq b kr nm ka kt ku nn kd kw kx of kz la lb og ld le lf oh lh li lj ij bi translated">虽然这本身是一个更大的概念，但我将尝试简单介绍一下为什么我们甚至需要模型监控。</p><p id="b6ca" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">让我们举一个例子，您编写了一些代码来从数据库中获取数据，并在前端显示出来。在这种情况下，如果数据库本身没有被篡改，那么即使过了很长时间，编写的代码也会像预期的那样工作。这是代码的确定性行为，在机器学习模型的情况下，模型的概率性质和不断变化的数据使得模型的结果非常不确定，并且模型性能会随着时间而降低。尽管所述时间并不一致，并且随着每个用例而变化，并且是非常特定于域和数据的，因此需要实时(或接近实时)地对模型性能进行建模。</p><p id="da70" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">模型的这种不确定性可能是由许多因素造成的，我将尝试解释其中的一些因素。</p><ul class=""><li id="d32b" class="nk nl iq kq b kr ks ku kv kx ol lb om lf on lj nr ns nt nu bi translated"><em class="lt">数据分布随时间变化(可能)</em></li></ul><p id="ba93" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这是……非常特定的领域。随着时间的推移，数据分布可能会发生变化，针对一种数据训练的模型可能不是另一种数据的最佳选择。</p><ul class=""><li id="d462" class="nk nl iq kq b kr ks ku kv kx ol lb om lf on lj nr ns nt nu bi translated"><em class="lt">模型漂移</em></li></ul><p id="b79a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">一些模型需要定期重新训练以确保准确性，例如时间序列数据，还有许多模型可以运行一年以上而无需任何更新，例如CV模型和一些分类场景。无论是哪种情况，现在能给出好结果的模型在一段时间后不一定能给出最好的结果。这个模型会随着时间而衰退。</p><ul class=""><li id="2d5f" class="nk nl iq kq b kr ks ku kv kx ol lb om lf on lj nr ns nt nu bi translated"><em class="lt">异常值</em></li></ul><p id="bae3" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">如果管道没有很好地处理异常值，从长远来看，它会损害性能。在某些情况下，比如创业初期，可能根本没有异常值，但随着业务的增长，将会有许多异常值，而旧模型将无法保留这些异常值。</p><p id="9bdc" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">您可能出于许多原因想要在生产中监控您的模型，例如<em class="lt">向高层管理人员或客户解释模型，生产中的预测延迟可能与本地不同。解释所有这些本身就需要一篇文章，所以我不会深入细节。</em></p><h1 id="0b7e" class="ms mt iq bd mu mv oa mx my mz ob nb nc kf oc kg ne ki od kj ng kl oe km ni nj bi translated">简化基础知识和GUI构建</h1><p id="100c" class="pw-post-body-paragraph ko kp iq kq b kr nm ka kt ku nn kd kw kx of kz la lb og ld le lf oh lh li lj ij bi translated">Streamlit让数据科学家和机器学习工程师的生活变得更加轻松。它是竞争对手中最好的，只是因为它没有任何隐藏的定价问题(据我所知)，而且社区支持非常好，更新非常定期。</p><p id="a522" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">首先，在您的python/conda环境中使用下面的命令安装streamlit。我建议做一个新的，那样会更容易运输。</p><p id="f2c6" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><code class="fe oo op oq or b">pip install streamlit</code></p><p id="2f29" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">现在你只需要这个包，除了基本的numpy、pandas和matplotlib/plotly。</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi os"><img src="../Images/a576c92a78a584c38360c6d53e3f56ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-1_LF1qT764v3Ltetr_Y5w.png"/></div></div></figure><p id="7b31" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">为了文章的简洁，我现在尝试只使用SVM。您可以根据需要添加任意多的算法。要获得上面的接口，你只需要在一个python文件中编写下面的代码。如果你想尝试dash live，你可以点击这里的<a class="ae lu" href="https://share.streamlit.io/mohneesh7/streamlit-demo-dashboard/main/dashboard.py" rel="noopener ugc nofollow" target="_blank"><strong class="kq ja"/></a><strong class="kq ja">。</strong></p><figure class="lw lx ly lz gt ma"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="8ca3" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">真的很简单，不是吗，对于任何额外的按钮或选择框，请参考非常简单直观的streamlit的API参考。</p><p id="b815" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在这一部分中，我们将只提供基本的监控控制，我们将启用更高级的监控工具和模型评估指标，同时为用户提供更好的选择。这只是我们希望如何在仪表板中看到我们的数据的基本介绍。</p><p id="a5b7" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这是这部分的结尾。我不想在一篇文章中包含所有的内容，这会使阅读和理解变得很麻烦。</p><p id="691e" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">敬请期待下一部分。别忘了摆弄这个<a class="ae lu" href="https://share.streamlit.io/mohneesh7/streamlit-demo-dashboard/main/dashboard.py" rel="noopener ugc nofollow" target="_blank">在线应用</a>。</p><p id="4a65" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">干杯！！</p></div></div>    
</body>
</html>