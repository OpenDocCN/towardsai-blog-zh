<html>
<head>
<title>Pix2Pix Network, An Image-To-Image Translation Using Conditional GANs (cGANs)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Pix2Pix网络，一个使用条件GANs(cgan)的图像到图像的翻译</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/pix2pix-network-an-image-to-image-translation-using-conditional-gans-cgans-8a08b661d206?source=collection_archive---------0-----------------------#2019-05-26">https://pub.towardsai.net/pix2pix-network-an-image-to-image-translation-using-conditional-gans-cgans-8a08b661d206?source=collection_archive---------0-----------------------#2019-05-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="4580" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><strong class="ak">pix 2 pix简介cGANs | </strong> <a class="ae ep" href="https://towardsai.net" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">走向AI </strong> </a></h2><div class=""/><h1 id="2c70" class="jw jx iq bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">介绍</h1><p id="01e8" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae ls" href="https://arxiv.org/pdf/1611.07004.pdf" rel="noopener ugc nofollow" target="_blank"> <strong class="kw ja"> Pix2Pix </strong> </a>网络基本上是一个<strong class="kw ja">条件GANs</strong><strong class="kw ja">【cGAN】</strong>学习从输入图像到输出图像的映射。你可以在我之前的帖子<a class="ae ls" href="https://medium.com/datadriveninvestor/an-introduction-to-conditional-gans-cgans-727d1f5bb011" rel="noopener">这里</a>和它的应用<a class="ae ls" href="https://medium.com/towards-artificial-intelligence/face-aging-using-conditional-gans-an-introduction-to-age-cgans-machine-learning-8a4a6a100201" rel="noopener">这里</a>阅读<strong class="kw ja">条件句</strong>。在这篇文章中，我将试着解释一下<a class="ae ls" href="https://arxiv.org/pdf/1611.07004.pdf" rel="noopener ugc nofollow" target="_blank"> <strong class="kw ja"> Pix2Pix </strong> </a>网络。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/d6282bb1bd97a6886a0754db6a1c40ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2i4r8uEvLLfFJfz5.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated"><a class="ae ls" href="https://arxiv.org/pdf/1611.07004.pdf" rel="noopener ugc nofollow" target="_blank">https://arxiv.org/pdf/1611.07004.pdf</a></figcaption></figure><p id="ee76" class="pw-post-body-paragraph ku kv iq kw b kx mj kz la lb mk ld le lf ml lh li lj mm ll lm ln mn lp lq lr ij bi translated"><strong class="kw ja">图像到图像转换</strong>是将图像的一种表示转换成另一种表示的过程。</p><h1 id="5e80" class="jw jx iq bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">发电机网络</h1><p id="3444" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="kw ja">发电机</strong>网络采用基于<a class="ae ls" href="https://arxiv.org/pdf/1505.04597.pdf" rel="noopener ugc nofollow" target="_blank"> <strong class="kw ja"> U-Net </strong> </a>的架构。<strong class="kw ja"> U-Net的</strong>架构类似于<strong class="kw ja">自动编码器</strong>网络，除了一点不同。<strong class="kw ja"> U-Net </strong>和<strong class="kw ja">自动编码器</strong>网络都有两个网络<strong class="kw ja">编码器</strong>和<strong class="kw ja">解码器。</strong></p><h1 id="6aa0" class="jw jx iq bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">优信网络架构图</strong></h1><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="ab gu cl mo"><img src="../Images/ee7ae80764784089b583ca137663acf1.png" data-original-src="https://miro.medium.com/v2/format:webp/1*pSdyWrrzRBoUn7z9JUdHYQ.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated"><strong class="bd jy">优信网的架构</strong></figcaption></figure><ul class=""><li id="6323" class="mp mq iq kw b kx mj lb mk lf mr lj ms ln mt lr mu mv mw mx bi translated"><strong class="kw ja"> U-Net的</strong>网络在<strong class="kw ja">编码器</strong>层和<strong class="kw ja">解码器</strong>层之间有跳跃连接。</li><li id="f48b" class="mp mq iq kw b kx my lb mz lf na lj nb ln nc lr mu mv mw mx bi translated">如图所示，第一层<strong class="kw ja">编码器的输出直接通过</strong>传到最后一层<strong class="kw ja">解码器</strong>，第二层<strong class="kw ja">编码器</strong>的输出传到倒数第二层<strong class="kw ja">解码器</strong>，以此类推。</li><li id="f9bb" class="mp mq iq kw b kx my lb mz lf na lj nb ln nc lr mu mv mw mx bi translated">我们来考虑一下，如果<strong class="kw ja"> U-Net的</strong>(包括中间层)总共有N层，那么从<strong class="kw ja">编码器</strong>网络的第k <em class="nd">层到<strong class="kw ja">解码器</strong>网络的第(N-k+1)层会有一个跳跃连接。其中1 ≤ k ≤ N/2。</em></li></ul><h1 id="d3a6" class="jw jx iq bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">自动编码器架构图</strong></h1><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/dd92215899ccdc918620b863d93144d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*yZdlu0Se6pQdWRZnkIKpcg.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated"><strong class="bd jy">自动编码器的架构</strong></figcaption></figure><ul class=""><li id="b953" class="mp mq iq kw b kx mj lb mk lf mr lj ms ln mt lr mu mv mw mx bi translated">如图所示<strong class="kw ja">自动编码器</strong>在<strong class="kw ja">编码器</strong>层和<strong class="kw ja">解码器</strong>层之间没有跳跃连接。</li></ul><h1 id="7b0a" class="jw jx iq bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">发电机的架构</strong></h1><ul class=""><li id="87b0" class="mp mq iq kw b kx ky lb lc lf nf lj ng ln nh lr mu mv mw mx bi translated">发电机T21网络由这两个网络组成。</li><li id="32aa" class="mp mq iq kw b kx my lb mz lf na lj nb ln nc lr mu mv mw mx bi translated"><strong class="kw ja">编码器</strong>网络是一个下采样器。</li><li id="351f" class="mp mq iq kw b kx my lb mz lf na lj nb ln nc lr mu mv mw mx bi translated"><strong class="kw ja">解码器</strong>网络是一个上采样器。</li></ul><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi ni"><img src="../Images/443031729e3051f0029172a1597440f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pvUkOZyxwS1H_lhL1dmv6w.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated"><strong class="bd jy">发电机的结构</strong></figcaption></figure><h1 id="9e15" class="jw jx iq bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">发电机的编码器架构</strong></h1><ul class=""><li id="e031" class="mp mq iq kw b kx ky lb lc lf nf lj ng ln nh lr mu mv mw mx bi translated"><strong class="kw ja">发生器</strong>网络的<strong class="kw ja">编码器</strong>网络有七个卷积块。</li><li id="f264" class="mp mq iq kw b kx my lb mz lf na lj nb ln nc lr mu mv mw mx bi translated">每个卷积块都有一个卷积层，后跟一个LeakyRelu激活函数。</li><li id="a3fa" class="mp mq iq kw b kx my lb mz lf na lj nb ln nc lr mu mv mw mx bi translated">除了第一卷积层之外，每个卷积块还具有批量归一化层。</li></ul><h1 id="93b5" class="jw jx iq bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">发生器的解码器架构</strong></h1><ul class=""><li id="f2a3" class="mp mq iq kw b kx ky lb lc lf nf lj ng ln nh lr mu mv mw mx bi translated"><strong class="kw ja">发生器</strong>网络的<strong class="kw ja">解码器</strong>网络有七个上采样卷积块。</li><li id="f7d1" class="mp mq iq kw b kx my lb mz lf na lj nb ln nc lr mu mv mw mx bi translated">每个上采样卷积块具有上采样层，其后是卷积层、批量归一化层和ReLU激活函数。</li></ul><p id="658b" class="pw-post-body-paragraph ku kv iq kw b kx mj kz la lb mk ld le lf ml lh li lj mm ll lm ln mn lp lq lr ij bi nj translated">这里是一个<strong class="kw ja">发电机</strong>网络中的六个跳跃连接。串联沿着通道轴发生。</p><ul class=""><li id="f59e" class="mp mq iq kw b kx mj lb mk lf mr lj ms ln mt lr mu mv mw mx bi translated">第一个<strong class="kw ja">编码器</strong>模块的输出连接到第六个<strong class="kw ja">解码器</strong>模块。</li><li id="6b01" class="mp mq iq kw b kx my lb mz lf na lj nb ln nc lr mu mv mw mx bi translated">第二个<strong class="kw ja">编码器</strong>模块的输出连接到第五个<strong class="kw ja">解码器</strong>模块。</li><li id="0119" class="mp mq iq kw b kx my lb mz lf na lj nb ln nc lr mu mv mw mx bi translated">第三个<strong class="kw ja">编码器</strong>模块的输出连接到第四个<strong class="kw ja">解码器</strong>模块。</li><li id="e9f6" class="mp mq iq kw b kx my lb mz lf na lj nb ln nc lr mu mv mw mx bi translated">第四个<strong class="kw ja">编码器</strong>模块的输出连接到第三个<strong class="kw ja">解码器</strong>模块。</li><li id="465a" class="mp mq iq kw b kx my lb mz lf na lj nb ln nc lr mu mv mw mx bi translated">第五个<strong class="kw ja">编码器</strong>模块的输出连接到第二个<strong class="kw ja">解码器</strong>模块。</li><li id="530b" class="mp mq iq kw b kx my lb mz lf na lj nb ln nc lr mu mv mw mx bi translated">第6个<strong class="kw ja">编码器</strong>模块的输出连接到第1个<strong class="kw ja">解码器</strong>模块。</li></ul><h1 id="3700" class="jw jx iq bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">鉴别器<strong class="ak">的架构</strong></h1><p id="8f3c" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">鉴频器网络采用<a class="ae ls" href="https://arxiv.org/pdf/1604.04382.pdf" rel="noopener ugc nofollow" target="_blank"> <strong class="kw ja"> PatchGAN </strong> </a>架构。PatchGAN网络包含五个卷积块。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/ab18349af166722799c3d7ffa44d1956.png" data-original-src="https://miro.medium.com/v2/resize:fit:742/format:webp/1*7lUIwjD-AMhuX3bvWJmuBw.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated"><strong class="bd jy">鉴频器架构</strong></figcaption></figure><h1 id="0389" class="jw jx iq bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">甘<strong class="ak">的架构</strong></h1><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/93996839069acf6edb3c39c0c47f23e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:442/format:webp/1*ddVsDlXlFaTesxwlEcGXbA.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated"><strong class="bd jy">甘的建筑</strong></figcaption></figure><h1 id="8b94" class="jw jx iq bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak"> Pix2Pix </strong>网络培训</h1><p id="ca66" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Pix2Pix是一个条件GANs。条件GANs的损失函数可以写成如下形式。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi nu"><img src="../Images/ef08ff7e72d1a5f23661326b17558768.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AuVnZqqpJd7Q0Q6zxl4RnA.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated"><strong class="bd jy">条件甘的损失函数</strong></figcaption></figure><p id="a12f" class="pw-post-body-paragraph ku kv iq kw b kx mj kz la lb mk ld le lf ml lh li lj mm ll lm ln mn lp lq lr ij bi translated">我们必须最小化重建图像和原始图像之间的损失。为了使图像不那么模糊，我们可以使用<strong class="kw ja"> L1 </strong>或<strong class="kw ja"> L2 </strong>正则化。</p><ul class=""><li id="a531" class="mp mq iq kw b kx mj lb mk lf mr lj ms ln mt lr mu mv mw mx bi translated">L1正则化是每个数据点的绝对误差之和。</li><li id="16e6" class="mp mq iq kw b kx my lb mz lf na lj nb ln nc lr mu mv mw mx bi translated">L2正则化是每个数据点的平方损失之和。</li><li id="a70e" class="mp mq iq kw b kx my lb mz lf na lj nb ln nc lr mu mv mw mx bi translated">对于单个图像，L1正则化损失函数可以如下所示。</li></ul><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/24bf90bfc9fa3f027cc766def4b1447b.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*otZX5Ih8bC4PH9P2Pfie2Q.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated"><strong class="bd jy"> L1正则化损失函数</strong></figcaption></figure><p id="a6a5" class="pw-post-body-paragraph ku kv iq kw b kx mj kz la lb mk ld le lf ml lh li lj mm ll lm ln mn lp lq lr ij bi translated">其中y是原始图像，G(x，z)是由<strong class="kw ja">生成器</strong>网络生成的图像。L1损失通过原始图像的所有像素值和生成图像的所有像素值之间的所有绝对差的总和来计算。</p><p id="cecc" class="pw-post-body-paragraph ku kv iq kw b kx mj kz la lb mk ld le lf ml lh li lj mm ll lm ln mn lp lq lr ij bi translated"><strong class="kw ja"> Pix2Pix </strong>的最终损失函数如下所示。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/9ccf80438ad50488371c350012f29d7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*dJVvdfcB1o2mh9xkBc6ZRg.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated"><strong class="bd jy">Pix2Pix的总损失函数</strong></figcaption></figure><p id="e183" class="pw-post-body-paragraph ku kv iq kw b kx mj kz la lb mk ld le lf ml lh li lj mm ll lm ln mn lp lq lr ij bi translated"><strong class="kw ja">伴随jupyter本帖的笔记本可以在</strong><a class="ae ls" href="https://github.com/nitwmanish/Pix2Pix-Network-An-Image-To-Image-Translation-Using-Conditional-GANs" rel="noopener ugc nofollow" target="_blank"><strong class="kw ja">Github</strong></a><strong class="kw ja">上找到。</strong></p><h1 id="f354" class="jw jx iq bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">结论</h1><p id="4d32" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="kw ja"> Pix2Pix cGANs </strong>可用于将黑色&amp;白色图像转换为彩色图像，将草图转换为照片，将白天图像转换为夜晚图像，将卫星图像转换为地图图像。</p><p id="28d5" class="pw-post-body-paragraph ku kv iq kw b kx mj kz la lb mk ld le lf ml lh li lj mm ll lm ln mn lp lq lr ij bi translated"><strong class="kw ja"> <em class="nd">我希望这篇文章能帮助你开始构建自己的</em>pix 2 pix<em class="nd">cgan。我认为它至少会提供一个关于</em>pix 2 pix<em class="nd">cgan的很好的解释和理解。</em> </strong></p></div></div>    
</body>
</html>