<html>
<head>
<title>Tutorial on Data Wrangling: College Towns Dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据争论教程:大学城数据集</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/tutorial-on-data-wrangling-college-towns-dataset-a0e8f8dfb6ae?source=collection_archive---------1-----------------------#2019-08-05">https://pub.towardsai.net/tutorial-on-data-wrangling-college-towns-dataset-a0e8f8dfb6ae?source=collection_archive---------1-----------------------#2019-08-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="3736" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">数据角力教程| <a class="ae ep" href="https://towardsai.net" rel="noopener ugc nofollow" target="_blank">走向AI </a></h2><div class=""/><figure class="gl gn ka kb kc kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi jz"><img src="../Images/2831d976e510d4637e2b0a25f5e44f7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oIUINxQX6Yip_kKBFQwzew.png"/></div></div></figure><p id="2c4f" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">数据争论是指将数据从原始形式转换为便于分析的整洁形式的过程。数据争论是数据预处理中的一个重要步骤，包括几个过程，如数据导入、数据清理、数据结构化、字符串处理、HTML解析、处理日期和时间、处理缺失数据和文本挖掘。</p><p id="c532" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">对于任何数据科学家来说，数据争论的过程都是至关重要的一步。在数据科学项目中，很少能够轻松访问数据进行分析。数据更有可能在文件、数据库中，或者从网页、tweets或pdf等文档中提取。知道如何争论和清理数据将使您能够从数据中获得关键的洞察力，否则这些洞察力将被隐藏。</p><p id="a244" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">本教程将演示数据争论的过程。您将了解以下内容:</p><ol class=""><li id="60e3" class="li lj it km b kn ko kr ks kv lk kz ll ld lm lh ln lo lp lq bi translated">非结构化数据的导入</li><li id="c46d" class="li lj it km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated">使用字符串处理技术清理和组织非结构化数据</li><li id="3f1a" class="li lj it km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated">将非结构化数据转换为结构化数据</li><li id="6c2a" class="li lj it km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated">执行结构化数据的分析</li></ol><p id="cb8b" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">本文的数据集和代码可以从这个资源库下载:<a class="ae lw" href="https://github.com/bot13956/unstructured_data_university_towns" rel="noopener ugc nofollow" target="_blank">https://github . com/bot 13956/unstructured _ data _ university _ towns</a>。</p><p id="7fde" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated"><strong class="km jd">项目目标:</strong>这段代码从非结构化的<a class="ae lw" href="https://github.com/bot13956/unstructured_data_university_towns" rel="noopener ugc nofollow" target="_blank"> <strong class="km jd"> university_towns.txt数据集</strong> </a>中返回大学城及其所属州的数据框架。最终清理的数据帧的格式如下:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="2fb0" class="mg mh it mc b gy mi mj l mk ml">DataFrame( [ [“Michigan”, “Ann Arbor”], [“Michigan”, “Yipsilanti”] ], columns=[“State”, “RegionName”] )</span></pre><p id="1c95" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">其中显示了州以及给定州的大学城名称。</p><h1 id="91ee" class="mm mh it bd mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni bi translated"><strong class="ak">导入必要的库</strong></h1><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="2e1f" class="mg mh it mc b gy mi mj l mk ml"><strong class="mc jd">import</strong> <strong class="mc jd">pandas</strong> <strong class="mc jd">as</strong> <strong class="mc jd">pd</strong><br/><strong class="mc jd">import</strong> <strong class="mc jd">numpy</strong> <strong class="mc jd">as</strong> <strong class="mc jd">np</strong></span></pre><h1 id="b6b4" class="mm mh it bd mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni bi translated"><strong class="ak">导入非结构化、不干净的数据集</strong></h1><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="d5c7" class="mg mh it mc b gy mi mj l mk ml">df=pd.read_table("university_towns.txt",header=<strong class="mc jd">None</strong>)<br/>df.columns=["data"]<br/>df.head(10)</span></pre><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/b0433d9c7943158c3c646aea4b82cea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:692/format:webp/1*lzpMsIwov_ff9JIJ0vrJWg.png"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk translated"><strong class="bd mn">表1:大学城及其所属州的非结构化、不干净数据集。</strong></figcaption></figure><p id="18cf" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">正如我们从<strong class="km jd">表1 </strong>中看到的，数据集是非结构化的、不干净的，在进行任何进一步分析之前需要进行大量整理。</p><p id="b246" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">让我们定义一个字典，它可以用来将状态映射到它们各自的两个字母的缩写:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="516f" class="mg mh it mc b gy mi mj l mk ml">states = {'OH': 'Ohio', 'KY': 'Kentucky', 'AS': 'American Samoa', 'NV': 'Nevada', 'WY': 'Wyoming', <br/>          'NA': 'National', 'AL': 'Alabama', 'MD': 'Maryland', 'AK': 'Alaska', 'UT': 'Utah', <br/>          'OR': 'Oregon','MT': 'Montana', 'IL': 'Illinois', 'TN': 'Tennessee', 'DC': 'District of Columbia', <br/>          'VT': 'Vermont','ID': 'Idaho', 'AR': 'Arkansas', 'ME': 'Maine', 'WA': 'Washington', 'HI': 'Hawaii',<br/>          'WI': 'Wisconsin','MI': 'Michigan', 'IN': 'Indiana', 'NJ': 'New Jersey', 'AZ': 'Arizona', <br/>          'GU': 'Guam', 'MS': 'Mississippi','PR': 'Puerto Rico', 'NC': 'North Carolina', 'TX': 'Texas', <br/>          'SD': 'South Dakota', 'MP': 'Northern Mariana Islands','IA': 'Iowa', 'MO': 'Missouri', 'CT': 'Connecticut',<br/>          'WV': 'West Virginia', 'SC': 'South Carolina', 'LA': 'Louisiana',  'KS': 'Kansas', 'NY': 'New York', <br/>          'NE': 'Nebraska', 'OK': 'Oklahoma', 'FL': 'Florida', 'CA': 'California', 'CO': 'Colorado', <br/>          'PA': 'Pennsylvania', 'DE': 'Delaware', 'NM': 'New Mexico', 'RI': 'Rhode Island', 'MN': 'Minnesota',<br/>          'VI': 'Virgin Islands','NH': 'New Hampshire', 'MA': 'Massachusetts', 'GA': 'Georgia',<br/>          'ND': 'North Dakota', 'VA': 'Virginia'}</span></pre><h1 id="ef29" class="mm mh it bd mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni bi translated"><strong class="ak">按字母顺序排列状态</strong></h1><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="6ee6" class="mg mh it mc b gy mi mj l mk ml">order_states=np.sort(pd.Series(states).values)<br/>order_states;</span></pre><h1 id="bdee" class="mm mh it bd mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni bi translated">数据清理、准备和组织</h1><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="800b" class="mg mh it mc b gy mi mj l mk ml">NewState=[]<br/><strong class="mc jd">for</strong> i <strong class="mc jd">in</strong> range(0,len(order_states)):<br/>    <strong class="mc jd">for</strong> j <strong class="mc jd">in</strong> range(0,len(df.data)):<br/>        <strong class="mc jd">if</strong> (order_states[i] +'['+'edit'+']'==df.data[j]):<br/>            NewState=np.append(NewState,order_states[i])</span><span id="d537" class="mg mh it mc b gy no mj l mk ml">StateRegion=[]<br/><strong class="mc jd">for</strong> i <strong class="mc jd">in</strong> range(0,len(NewState)):<br/>    <strong class="mc jd">for</strong> j <strong class="mc jd">in</strong> range(0,len(df.data)):<br/>        <strong class="mc jd">if</strong> (NewState[i] +'['+'edit'+']'==df.data[j]):<br/>            n = j + 1<br/>    StateRegion=np.append(StateRegion,n)</span><span id="1a41" class="mg mh it mc b gy no mj l mk ml">StateName=[]<br/>CityName=[]<br/><strong class="mc jd">for</strong> i <strong class="mc jd">in</strong> range(0,len(NewState)-1):<br/>    <strong class="mc jd">for</strong> j <strong class="mc jd">in</strong> range(0,len(df.data)):<br/>        <strong class="mc jd">if</strong> (NewState[i] +'['+'edit'+']'==df.data[j]):<br/>            n = j + 1<br/>    <strong class="mc jd">while</strong> (NewState[i+1] +'['+'edit'+']'!=df.data[n]):<br/>          StateName=np.append(StateName,NewState[i])<br/>          CityName=np.append(CityName,df.data[n])<br/>          n = n + 1</span><span id="ae66" class="mg mh it mc b gy no mj l mk ml">CTYNAME=[]<br/><strong class="mc jd">for</strong> i <strong class="mc jd">in</strong> CityName:<br/>    CTYNAME=np.append(CTYNAME, i.split('(')[0])</span><span id="21fd" class="mg mh it mc b gy no mj l mk ml">city_new=[]<br/><strong class="mc jd">for</strong> i <strong class="mc jd">in</strong> CTYNAME:<br/>    <strong class="mc jd">if</strong> i[-1]==' ':<br/>        city_new = np.append(city_new,i[:-1])<br/>    <strong class="mc jd">else</strong>:<br/>        city_new=np.append(city_new,i)</span></pre><h1 id="c45c" class="mm mh it bd mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni bi translated">构建清理后的数据集</h1><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="784a" class="mg mh it mc b gy mi mj l mk ml">df_final=pd.DataFrame([])</span><span id="8cd3" class="mg mh it mc b gy no mj l mk ml">StateName=np.append(StateName,'Wyoming')<br/>city_new=np.append(city_new, 'Laramie')<br/>df_final['State']=StateName<br/>df_final['RegionName']=city_new</span><span id="c10c" class="mg mh it mc b gy no mj l mk ml">df_final.set_index(['State','RegionName'],inplace=<strong class="mc jd">True</strong>)</span><span id="e10c" class="mg mh it mc b gy no mj l mk ml">df_final.head(20)</span></pre><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div class="gh gi np"><img src="../Images/788dad457ed002f3b5b1764317d26f18.png" data-original-src="https://miro.medium.com/v2/resize:fit:328/format:webp/1*JgZrsHO4PHoUXn9jScOdNA.png"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk translated">表2:显示各州及其大学城的干净且结构化的数据集。</figcaption></figure><p id="d233" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">将<strong class="km jd">表1 </strong>与<strong class="km jd">表2 </strong>进行比较，我们看到<strong class="km jd">表2 </strong>中的数据集代表一个干净且结构化的数据集，现在可用于进一步分析。</p><h1 id="9f2c" class="mm mh it bd mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni bi translated">使用争论数据集的数据分析</h1><p id="94d1" class="pw-post-body-paragraph kk kl it km b kn nq kp kq kr nr kt ku kv ns kx ky kz nt lb lc ld nu lf lg lh im bi translated">堪萨斯州和特拉华州的大学城</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="e7f2" class="mg mh it mc b gy mi mj l mk ml">df_final.loc['Kansas']</span></pre><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/44f02c4cf74c1f9390da9dfc50b72c84.png" data-original-src="https://miro.medium.com/v2/resize:fit:212/format:webp/1*2HJBtzZACsD998UeVKmByQ.png"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk translated"><strong class="bd mn">表3:堪萨斯州的大学城。</strong></figcaption></figure><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="4a97" class="mg mh it mc b gy mi mj l mk ml">df_final.loc['Delaware']</span></pre><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/f36390964dd87bbbc7fe5480e647b310.png" data-original-src="https://miro.medium.com/v2/resize:fit:216/format:webp/1*2Pm8AMZgRmKdwtEr12wkrA.png"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk translated"><strong class="bd mn">表4:特拉华州的大学城。</strong></figcaption></figure><p id="a7f1" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated"><strong class="km jd"> b)给定州的大学城数量</strong></p><p id="e340" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">这可以使用以下代码获得:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="4c6b" class="mg mh it mc b gy mi mj l mk ml">df_final.reset_index().groupby('State').count()</span></pre><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/8bad03b9cefc15f4068a3b4b50e55a2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:448/format:webp/1*UEY5P-ZbZbQ0RzaBovkijQ.png"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk translated"><strong class="bd mn">表5:每个州的一些大学城的样本输出。</strong></figcaption></figure><p id="252b" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">总之，我们已经展示了如何使用数据角力将未清理的非结构化数据集转换为整齐的形式，以备进一步分析。对于任何数据科学家来说，数据争论的过程都是至关重要的一步。知道如何争论和清理数据将使您能够从数据中获得关键的洞察力，否则这些洞察力将被隐藏。</p><p id="8d6b" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">本文的数据集和代码可以从这个存储库下载:<a class="ae lw" href="https://github.com/bot13956/unstructured_data_university_towns" rel="noopener ugc nofollow" target="_blank">https://github . com/bot 13956/unstructured _ data _ university _ towns</a>。</p></div></div>    
</body>
</html>