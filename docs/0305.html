<html>
<head>
<title>Bond Valuation and Analysis (Part 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">债券估值与分析(一)</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/bond-valuation-and-analysis-part-1-44df0ca25609?source=collection_archive---------1-----------------------#2020-02-05">https://pub.towardsai.net/bond-valuation-and-analysis-part-1-44df0ca25609?source=collection_archive---------1-----------------------#2020-02-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div class="gh gi io"><img src="../Images/941fb420259dfc6fcaf6e54a28865a87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*xAGz8Spb1od3LS0-bVQdKQ.png"/></div></figure><h2 id="9e23" class="iv iw ix bd b dl iy iz ja jb jc jd dk je translated" aria-label="kicker paragraph">走进应用金融世界的一小步</h2><div class=""/><div class=""><h2 id="01ac" class="pw-subtitle-paragraph kd jg ix bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">如何计算货币的现值、未来值和时间值—一个实例</h2></div><p id="1f60" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi lr translated">债券是由公司发行并作为可交易资产证券化的公司债务单位。传统上向债券持有人支付固定利率(息票)的固定收益工具(<em class="ma">可变或浮动利率现在也很常见)</em> — <a class="ae mb" href="https://www.investopedia.com/terms/b/bond.asp" rel="noopener ugc nofollow" target="_blank"> Investopedia </a></p><figure class="md me mf mg gt is gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mc"><img src="../Images/34c7e7ad85d2f3d6865790ca776b6e97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lv-VBZIlCD9I76JNPQQm6A.jpeg"/></div></div></figure><p id="3c85" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">债券特性</strong></p><p id="b943" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">● <code class="fe ml mm mn mo b"><strong class="kx jh">Issuer</strong></code>:借钱的实体</p><p id="eeb5" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">● <code class="fe ml mm mn mo b"><strong class="kx jh">Principal</strong></code>:借款金额(票面金额或面值)</p><p id="df80" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">● <code class="fe ml mm mn mo b"><strong class="kx jh">Coupon Rate</strong>:</code>发行人同意支付的利息金额(每年、每半年或每季度|固定或浮动利率)</p><p id="e8b6" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">● <code class="fe ml mm mn mo b"><strong class="kx jh"> Maturity Date:</strong></code>本金返还给投资者的日期(部分债券未到期)</p><p id="9456" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">● <code class="fe ml mm mn mo b"><strong class="kx jh">Embedded Options</strong></code>:</p><ul class=""><li id="fe19" class="mp mq ix kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated">示例— <strong class="kx jh">可赎回债券</strong>(发行人可以以预先约定的价格提前回购债券)</li><li id="39bd" class="mp mq ix kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">需要更复杂的分析。</li></ul><p id="3c28" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本文中，我们将了解:</p><p id="9e44" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●年票</p><p id="35b3" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●固定利率</p><p id="9589" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●固定期限</p><p id="0ae6" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●无嵌入式选项</p><h1 id="f9ef" class="nd ne ix bd nf ng nh ni nj nk nl nm nn km no kn np kp nq kq nr ks ns kt nt nu bi translated">价格与价值</h1><p id="b496" class="pw-post-body-paragraph kv kw ix kx b ky nv kh la lb nw kk ld le nx lg lh li ny lk ll lm nz lo lp lq ij bi translated">●有时，“价格”和“价值”这两个术语可以互换，但也有区别:</p><ul class=""><li id="6f95" class="mp mq ix kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated">价格:获得一项资产所支付的金额</li><li id="708e" class="mp mq ix kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">价值:资产的价值</li></ul><p id="3763" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●对于活跃交易的资产，价格可能被认为是价值的最佳估计</p><h1 id="364b" class="nd ne ix bd nf ng nh ni nj nk nl nm nn km no kn np kp nq kq nr ks ns kt nt nu bi translated">金钱的时间价值</h1><p id="dedf" class="pw-post-body-paragraph kv kw ix kx b ky nv kh la lb nw kk ld le nx lg lh li ny lk ll lm nz lo lp lq ij bi translated">●今天的1美元比明天的1美元更有价值</p><p id="5f9f" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●假设你在一场游戏中赢了1000美元，你会选择什么？</p><ul class=""><li id="9846" class="mp mq ix kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated">今天收到1000美元了吗？</li><li id="d6b2" class="mp mq ix kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">一年后收到1000美元？</li></ul><h2 id="7550" class="ob ne ix bd nf oc od dn nj oe of dp nn le og oh np li oi oj nr lm ok ol nt jd bi translated">未来价值</h2><p id="693d" class="pw-post-body-paragraph kv kw ix kx b ky nv kh la lb nw kk ld le nx lg lh li ny lk ll lm nz lo lp lq ij bi translated">●未来价值是投资价格在未来某个时间点的价值</p><p id="05fc" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●从现在起一年和两年的未来值<code class="fe ml mm mn mo b">(fv)</code>可以计算为:</p><pre class="md me mf mg gt om mo on oo aw op bi"><span id="bc56" class="ob ne ix mo b gy oq or l os ot">fv1 &lt;- pv * (1+r)<br/>fv2 &lt;- pv * (1+r) * (1+r)<br/><strong class="mo jh">*** r is interest rate<br/>*** pv is present value</strong></span></pre><h2 id="76c0" class="ob ne ix bd nf oc od dn nj oe of dp nn le og oh np li oi oj nr lm ok ol nt jd bi translated">现值</h2><p id="87b9" class="pw-post-body-paragraph kv kw ix kx b ky nv kh la lb nw kk ld le nx lg lh li ny lk ll lm nz lo lp lq ij bi translated">●未来价值的逆向逻辑</p><p id="4a10" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●未来1美元的价值在今天变得更低</p><p id="0f98" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●所以你会愿意今天拿不到1美元，而不是等一两年后再拿1美元</p><p id="380b" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●这可以通过以下方式计算:</p><pre class="md me mf mg gt om mo on oo aw op bi"><span id="5753" class="ob ne ix mo b gy oq or l os ot">pv &lt;- fv1 / (1 + r)<br/>pv &lt;- fv2 / ((1 + r) * (1 + r))<br/><strong class="mo jh">***fv1 is future value calculated for one year from above<br/>***fv2 is future value calculated for two years from above</strong></span></pre><h2 id="9a12" class="ob ne ix bd nf oc od dn nj oe of dp nn le og oh np li oi oj nr lm ok ol nt jd bi translated">TVM适用于债券</h2><p id="b6a8" class="pw-post-body-paragraph kv kw ix kx b ky nv kh la lb nw kk ld le nx lg lh li ny lk ll lm nz lo lp lq ij bi translated">●我们可以将货币的时间价值概念应用于债券</p><p id="02f3" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●示例:</p><ul class=""><li id="c87b" class="mp mq ix kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated">面值100美元，票面利率5%(= $ 5)，5年后到期</li><li id="fe6d" class="mp mq ix kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">价格=今天100美元</li></ul><p id="ae97" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你应该购买这种债券吗？</p><p id="326b" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了确定债券的价值，我们可以用图表显示一段时间内的现金流入和现金流出。</p><p id="f926" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">假设今天是<code class="fe ml mm mn mo b">‘zero’ </code>年，你将支付100美元购买债券，如下表所示。</p><figure class="md me mf mg gt is gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi ou"><img src="../Images/36f5f58202befd08580e50389afa0db3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*COsnQ4q8bISuByI879Tomg.png"/></div></div></figure><p id="2e1d" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您将通过<code class="fe ml mm mn mo b">year four</code>获得$5 <code class="fe ml mm mn mo b">year one </code>。在第5年，你将得到最后一笔息票付款+100美元本金付款。之后，债券到期，不再是未偿还的。</p><p id="2dd1" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要知道今天放弃100美元是否值得，你需要知道息票和本金支付的现值<code class="fe ml mm mn mo b">(pv)</code>大于100美元。</p><p id="d412" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要做到这一点，你应该拿第一年的5美元，计算它的现值，并对第<code class="fe ml mm mn mo b">year one</code>年到第<code class="fe ml mm mn mo b">year four</code>年的5美元做同样的事情</p><p id="cab8" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在<code class="fe ml mm mn mo b">year five, </code>中，你将计算105美元的价值。</p><h2 id="5e60" class="ob ne ix bd nf oc od dn nj oe of dp nn le og oh np li oi oj nr lm ok ol nt jd bi translated"><strong class="ak">比较现金流</strong></h2><figure class="md me mf mg gt is gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi ov"><img src="../Images/eb6e0a304894b297afcae952796cd4b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rtttcqIa0LCx_qqH93TzuQ.png"/></div></div></figure><p id="a347" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这些现值的总和等于债券的价值</p><pre class="md me mf mg gt om mo on oo aw op bi"><span id="1398" class="ob ne ix mo b gy oq or l os ot">#Using the above example i.e Bond with 5 year to maturity and has a yield of 6%, which acts as the discount rate.<br/># Create vector of cash flows</span><span id="62f6" class="ob ne ix mo b gy ow or l os ot">cf &lt;- c(5,5,5,5,105) <strong class="mo jh">#Create vector with cash flow</strong></span><span id="6b2c" class="ob ne ix mo b gy ow or l os ot">cf &lt;- data.frame(cf)<strong class="mo jh"># Convert to data frame</strong></span><span id="f55d" class="ob ne ix mo b gy ow or l os ot">cf$t &lt;- as.numeric(rownames(cf)) <strong class="mo jh"># Add column t</strong></span><span id="a3ac" class="ob ne ix mo b gy ow or l os ot">cf$pv_factor &lt;- 1 / (1 + 0.06)^cf$t <strong class="mo jh"># Calculate pv_factor</strong></span><span id="3f18" class="ob ne ix mo b gy ow or l os ot">cf$pv &lt;- cf$cf * cf$pv_factor <strong class="mo jh"># Calculate pv</strong></span><span id="6d5c" class="ob ne ix mo b gy ow or l os ot">sum(cf$pv)<strong class="mo jh"># Calculate the bond price</strong></span><span id="bbb1" class="ob ne ix mo b gy ow or l os ot"><strong class="mo jh">95.78764</strong></span></pre><blockquote class="ox oy oz"><p id="c5aa" class="kv kw ma kx b ky kz kh la lb lc kk ld pa lf lg lh pb lj lk ll pc ln lo lp lq ij bi translated">如果现值之和<strong class="kx jh">超过</strong>100美元，你<strong class="kx jh">买入</strong>债券。</p></blockquote><h1 id="626b" class="nd ne ix bd nf ng nh ni nj nk nl nm nn km no kn np kp nq kq nr ks ns kt nt nu bi translated">债券估价</h1><p id="60e7" class="pw-post-body-paragraph kv kw ix kx b ky nv kh la lb nw kk ld le nx lg lh li ny lk ll lm nz lo lp lq ij bi translated">在本节中，我们将考虑一个简单的债券:</p><p id="f407" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●固定年利率</p><p id="b3f7" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●固定到期日</p><p id="d190" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●无嵌入式选项</p><h2 id="d671" class="ob ne ix bd nf oc od dn nj oe of dp nn le og oh np li oi oj nr lm ok ol nt jd bi translated">资产的价值</h2><blockquote class="pd"><p id="b6d8" class="pe pf ix bd pg ph pi pj pk pl pm lq dk translated">从经济学角度来看，任何资产的价值都等于预期未来现金流的现值。</p></blockquote><p id="638c" class="pw-post-body-paragraph kv kw ix kx b ky pn kh la lb po kk ld le pp lg lh li pq lk ll lm pr lo lp lq ij bi translated">这些现金流以适当的风险调整贴现率贴现，这在数学上反映如下。</p><figure class="md me mf mg gt is gh gi paragraph-image"><div class="gh gi ps"><img src="../Images/04c0f40c37c45a1924c3c422c673a3de.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*XgQ-v2r4Ga1V_czmfazn1w.png"/></div></figure><p id="5e25" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">债券也不例外，计算债券价值的第一步是规划我们要贴现的现金流。</p><p id="0df6" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">到期前，债券投资者收到息票付款，到期时，债券投资者收到最后一笔息票付款<strong class="kx jh">和</strong>票面价值。</p><p id="8644" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以修改上面的公式，从机械的角度考虑这些现金流是如何分离的。</p><figure class="md me mf mg gt is gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi pt"><img src="../Images/3eb52ff775cb42a42bb2e9bcfa07fb51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t1v5MQUKN3xJr6St2D1i8w.png"/></div></div></figure><p id="d947" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们如何在<strong class="kx jh">‘R’</strong>中运行这个分析</p><p id="b5db" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">创建现金流向量</strong></p><p id="ea90" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在'<strong class="kx jh">' R '</strong>中，我们可以通过按原样布置现金流来创建现金流向量<code class="fe ml mm mn mo b">(cf) </code>。</p><pre class="md me mf mg gt om mo on oo aw op bi"><span id="be39" class="ob ne ix mo b gy oq or l os ot">cf &lt;- c(c1,c2,c3,c4,c5....)<br/><strong class="mo jh">***last cash flow equals the last coupon rate + principal</strong></span></pre><p id="59d2" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">创建数据帧</strong></p><p id="a49e" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了进行债券估值，我们需要向现金流向量添加额外的变量。为了做到这一点，我们需要将现金流向量转换为数据框架。</p><pre class="md me mf mg gt om mo on oo aw op bi"><span id="a409" class="ob ne ix mo b gy oq or l os ot">cf &lt;- data.frame(cf)</span></pre><p id="759b" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">创建时间索引</strong></p><p id="49c4" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因为每个现金流都发生在特定的时间，所以我们需要添加一个时间指数变量。我们将这个变量标记为<code class="fe ml mm mn mo b">‘t’</code></p><p id="5ba8" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">时间指数被用作周期数，在我们的例子中是<em class="ma">‘年’，</em>我们将贴现每笔债券现金流。</p><pre class="md me mf mg gt om mo on oo aw op bi"><span id="0daf" class="ob ne ix mo b gy oq or l os ot">cf$t &lt;- c(1, 2, 3, 4, 5, . . . )</span></pre><p id="e828" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">计算现值系数</strong></p><p id="5889" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，我们将不得不计算<code class="fe ml mm mn mo b">pv </code>因子来贴现每笔债券现金流。</p><p id="dec0" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">债券的<strong class="kx jh">贴现率</strong>称为<strong class="kx jh">债券收益率</strong></p><pre class="md me mf mg gt om mo on oo aw op bi"><span id="b449" class="ob ne ix mo b gy oq or l os ot">cf$pv_factor &lt;- 1 / (1 + y)^cf$t<br/><strong class="mo jh">***y is discount rate</strong></span></pre><p id="c7f6" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">比如我们有一个<strong class="kx jh"> <em class="ma"> 10% </em> </strong>的折现率。从现在起<strong class="kx jh"> <em class="ma"> 2年</em> </strong> <em class="ma"> </em>收到的现金流的<code class="fe ml mm mn mo b">pv</code>因子为</p><pre class="md me mf mg gt om mo on oo aw op bi"><span id="3e79" class="ob ne ix mo b gy oq or l os ot">pv_factor &lt;- 1 / (1 + .10)^2<br/>pv_factor<br/>[1] 0.8264463</span></pre><p id="99fd" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">现金流PV</strong></p><p id="f390" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">倒数第二步是通过将每个现金流乘以适当的<code class="fe ml mm mn mo b">pv</code>因子来计算每个债券现金流的现值</p><pre class="md me mf mg gt om mo on oo aw op bi"><span id="f21d" class="ob ne ix mo b gy oq or l os ot">cf$pv &lt;- cf$cf * cf$pv_factor</span></pre><p id="5a01" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，我们将现金流的PV相加，得出债券的价值。</p><h1 id="b4e3" class="nd ne ix bd nf ng nh ni nj nk nl nm nn km no kn np kp nq kq nr ks ns kt nt nu bi translated">创建函数</h1><p id="e12b" class="pw-post-body-paragraph kv kw ix kx b ky nv kh la lb nw kk ld le nx lg lh li ny lk ll lm nz lo lp lq ij bi translated">现在让我们创建一个简单的函数来执行许多债券的估值，而不是像我们在上面学到的那样。</p><p id="ffdc" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">输入概括</strong></p><p id="f5a3" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">● <code class="fe ml mm mn mo b">p</code>面值</p><p id="eb87" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">● <code class="fe ml mm mn mo b">r</code>票面利率</p><p id="8c12" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">● <code class="fe ml mm mn mo b">ttm</code>到期时间</p><p id="e7e9" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">● <code class="fe ml mm mn mo b">y</code>为产量</p><pre class="md me mf mg gt om mo on oo aw op bi"><span id="4120" class="ob ne ix mo b gy oq or l os ot">cf &lt;- c(rep(p * r, ttm - 1), p * (1 + r))</span></pre><p id="c06d" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●rep(x，y)-重复y次x的值</p><ul class=""><li id="5dd8" class="mp mq ix kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated">x = <code class="fe ml mm mn mo b">p * r</code> =息票支付</li><li id="92f9" class="mp mq ix kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">y = <code class="fe ml mm mn mo b">ttm — 1</code> =债券的到期时间减去一年</li></ul><p id="c3e5" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">● <code class="fe ml mm mn mo b">p * (1 + r)</code> =本金+最终息票支付</p><pre class="md me mf mg gt om mo on oo aw op bi"><span id="c870" class="ob ne ix mo b gy oq or l os ot">cf &lt;- data.frame(cf) #Convert to data frame</span><span id="f939" class="ob ne ix mo b gy ow or l os ot">cf$t &lt;- as.numeric(rownames(cf))<strong class="mo jh">#create time index</strong></span></pre><ul class=""><li id="c23e" class="mp mq ix kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated"><code class="fe ml mm mn mo b">“cf”</code>向量的rownames()等于1，2，3，4，直到键的<code class="fe ml mm mn mo b">“ttm”</code></li><li id="a123" class="mp mq ix kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">需要as.numeric()来确保值被读取为数字</li></ul><pre class="md me mf mg gt om mo on oo aw op bi"><span id="ed32" class="ob ne ix mo b gy oq or l os ot">cf$pv_factor <strong class="mo jh">#Calculate PV Factor</strong><br/>cf$pv &lt;- cf$cf * cf$pv_factor <strong class="mo jh">#Calculate PV of each cash flow<br/></strong>sum(cf$pv) <strong class="mo jh">#Sum PV to arrive at bond’s value</strong></span></pre><p id="15a0" class="pw-post-body-paragraph kv kw ix kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在把所有东西包装在一起</p><pre class="md me mf mg gt om mo on oo aw op bi"><span id="c6d6" class="ob ne ix mo b gy oq or l os ot">bond_price &lt;- function(p, r, ttm, y){<br/> cf &lt;- c(rep(p * r, ttm - 1), p * (1 + r))<br/> cf &lt;- data.frame(cf)<br/> cf$t &lt;- as.numeric(rownames(cf))<br/> cf$pv_factor &lt;- 1 / (1 + y)^cf$t<br/> cf$pv &lt;- cf$cf * cf$pv_factor<br/> sum(cf$pv)<br/>}</span></pre><blockquote class="ox oy oz"><p id="fde0" class="kv kw ma kx b ky kz kh la lb lc kk ld pa lf lg lh pb lj lk ll pc ln lo lp lq ij bi translated">检查<code class="fe ml mm mn mo b">bond_price</code>函数是否给我们一个价格为<strong class="kx jh"> $95.79 </strong>的债券，面值100美元，票面利率5%，5年到期，到期收益率6%。</p></blockquote></div></div>    
</body>
</html>