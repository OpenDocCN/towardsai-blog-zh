<html>
<head>
<title>Building a Fast Interactive Dashboard in Jupyter through Gradio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Gradio在Jupyter中构建快速交互式仪表板</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/building-a-fast-interactive-dashboard-in-jupyter-through-gradio-95a1981772aa?source=collection_archive---------0-----------------------#2021-09-01">https://pub.towardsai.net/building-a-fast-interactive-dashboard-in-jupyter-through-gradio-95a1981772aa?source=collection_archive---------0-----------------------#2021-09-01</a></blockquote><div><div class="fc ik il im in io"/><div class="ip iq ir is it"><h2 id="5f46" class="iu iv iw bd b dl ix iy iz ja jb jc dk jd translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/machine-learning" rel="noopener ugc nofollow" target="_blank">机器学习</a></h2><div class=""/><div class=""><h2 id="d767" class="pw-subtitle-paragraph kc jf iw bd b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dk translated">关于Gradio的现成教程，这是一个非常强大的Python包，用于机器学习演示。</h2></div><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj ku"><img src="../Images/42b08a0b428e24cb50c4a0bf99013225.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HYG3LSl2eRVtWqAy"/></div></div><figcaption class="lg lh gk gi gj li lj bd b be z dk translated">照片由<a class="ae lk" href="https://unsplash.com/@condorito1953?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Arie Wubben </a>在<a class="ae lk" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="8ae4" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">前几天，我发现了一个非常有趣的Python包，名为<a class="ae lk" href="https://www.gradio.app/" rel="noopener ugc nofollow" target="_blank"> Gradio </a>。根据其作者的说法，<strong class="ln jg"> Gradio允许为机器学习</strong>构建演示。谷歌、脸书和亚马逊的机器学习团队开发了这个包。</p><p id="7986" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">因此，我决定研究这个包并构建一个小演示。在阅读文档时，我很高兴地发现了一个有趣的特性，其他类似的包，如<a class="ae lk" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank"> streamlit </a>没有提供。</p><blockquote class="mi"><p id="915b" class="mj mk iw bd ml mm mn mo mp mq mr mg dk translated">Gradio可以很容易地与Jupyter实验室集成。</p></blockquote><p id="e34b" class="pw-post-body-paragraph ll lm iw ln b lo ms kg lq lr mt kj lt lu mu lw lx ly mv ma mb mc mw me mf mg ip bi translated">这个特性使得这个包<strong class="ln jg">非常有前途</strong>。让我们发现格拉迪欧！</p><p id="026b" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">本教程组织如下:</p><ul class=""><li id="e82a" class="mx my iw ln b lo lp lr ls lu mz ly na mc nb mg nc nd ne nf bi translated">Gradio包的简短概述</li><li id="1ec6" class="mx my iw ln b lo ng lr nh lu ni ly nj mc nk mg nc nd ne nf bi translated">一个基本的例子，它匿名化通过文本框提供的文本中包含的所有日期</li><li id="bb0c" class="mx my iw ln b lo ng lr nh lu ni ly nj mc nk mg nc nd ne nf bi translated">一个更高级的例子，匿名化通过输入文件提供的文本中包含的所有日期。</li></ul><h1 id="4e64" class="nl nm iw bd nn no np nq nr ns nt nu nv kl nw km nx ko ny kp nz kr oa ks ob oc bi translated">Gradio概述</h1><p id="4172" class="pw-post-body-paragraph ll lm iw ln b lo od kg lq lr oe kj lt lu of lw lx ly og ma mb mc oh me mf mg ip bi translated">Gradio可以通过Python包索引进行安装，如下所示:</p><pre class="kv kw kx ky gu oi oj ok ol aw om bi"><span id="acec" class="on nm iw oj b gz oo op l oq or">pip install gradio</span></pre><p id="78af" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">安装后，Gradio可以作为标准Python包导入:</p><pre class="kv kw kx ky gu oi oj ok ol aw om bi"><span id="b566" class="on nm iw oj b gz oo op l oq or">import gradio as gr</span></pre><p id="4fb0" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">Gradio提供了一个基础类，名为<code class="fe os ot ou oj b">Interface()</code>，包含了构建接口所需的所有信息。下图显示了一个界面示例:</p><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj ov"><img src="../Images/aabd395af187b32a35aa7514314f5605.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mzXtUTl2aKMW2FcTgLsNAQ.png"/></div></div><figcaption class="lg lh gk gi gj li lj bd b be z dk translated">作者图片</figcaption></figure><p id="281e" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">在左边，界面显示了输入(一个文本框和前面例子中的一些例子)，以及一个submit按钮，它将运行用户定义的操作。在右边，界面将显示执行定义的操作后的输出。</p><p id="b05e" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">这个<code class="fe os ot ou oj b">Interface()</code>类接收三个参数作为输入:</p><ul class=""><li id="cdf1" class="mx my iw ln b lo lp lr ls lu mz ly na mc nb mg nc nd ne nf bi translated"><strong class="ln jg"> fn </strong> —一个可调用的函数，执行用户定义的操作。该函数接收接口的输入，并返回接口显示的输出。</li><li id="3690" class="mx my iw ln b lo ng lr nh lu ni ly nj mc nk mg nc nd ne nf bi translated"><strong class="ln jg">输入</strong> —单个Gradio输入组件，或一系列Gradio输入组件。输入组件的例子有文本框、图像、视频、滑块、复选框等等。</li><li id="5a22" class="mx my iw ln b lo ng lr nh lu ni ly nj mc nk mg nc nd ne nf bi translated"><strong class="ln jg">输出</strong> —单个Gradio输出组件或一系列Gradio输出组件。与输入组件类似，输出组件可能包括文本框、图像、视频等等。</li></ul><p id="d38e" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">有关输入和输出组件的更多信息，您可以阅读<a class="ae lk" href="https://www.gradio.app/docs" rel="noopener ugc nofollow" target="_blank"> Gradio文档</a>。</p><p id="fd3e" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">一旦构建了接口，就可以通过调用<code class="fe os ot ou oj b">launch()</code>函数来运行它。</p><h1 id="64c6" class="nl nm iw bd nn no np nq nr ns nt nu nv kl nw km nx ko ny kp nz kr oa ks ob oc bi translated">基本接口</h1><p id="b181" class="pw-post-body-paragraph ll lm iw ln b lo od kg lq lr oe kj lt lu of lw lx ly og ma mb mc oh me mf mg ip bi translated">第一个示例构建了一个接口，该接口从textbox中读取文本，然后匿名化文本中包含的日期，最后显示匿名化的文本。</p><p id="cb9e" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">首先，我定义了一个名为<code class="fe os ot ou oj b">anonymise_text()</code>的函数，它接受一个文本作为输入，然后用HTML文本替换文本中包含的所有日期，这突出显示了匿名化的日期。</p><pre class="kv kw kx ky gu oi oj ok ol aw om bi"><span id="7dd5" class="on nm iw oj b gz oo op l oq or">import re</span><span id="e9ad" class="on nm iw oj b gz ow op l oq or">def anonymise_date(txt):<br/>    date_RE="(\d{1,2}[\.-/]\d{1,2}[\.-/]\d{4})|(\d{4})"<br/>    matches=re.findall(date_RE,txt)<br/>    if matches:<br/>        for match in matches:<br/>            index = 0<br/>            if match[index] == '':<br/>                index = 1<br/>            txt = txt.replace(match[index], "&lt;span style='background-color:yellow'&gt;XXXXXX&lt;/span&gt;")<br/>    return txt</span></pre><p id="b0c2" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">然后，我导入Gradio包并构建<code class="fe os ot ou oj b">Interface()</code>对象，它接收以下参数作为输入:</p><ul class=""><li id="b160" class="mx my iw ln b lo lp lr ls lu mz ly na mc nb mg nc nd ne nf bi translated">先前定义的<code class="fe os ot ou oj b">anomyise_date</code>功能</li><li id="5f3e" class="mx my iw ln b lo ng lr nh lu ni ly nj mc nk mg nc nd ne nf bi translated">一个输入框<code class="fe os ot ou oj b">gr.inputs.Textbox()</code>，它将捕获输入的文本。文本框接收一个占位符作为输入，其中包含默认文本</li><li id="3298" class="mx my iw ln b lo ng lr nh lu ni ly nj mc nk mg nc nd ne nf bi translated">一个输出HTML对象，包含由<code class="fe os ot ou oj b">anonymise_date()</code>函数返回的结果</li><li id="a167" class="mx my iw ln b lo ng lr nh lu ni ly nj mc nk mg nc nd ne nf bi translated">一些默认文本的列表，通过关键字<code class="fe os ot ou oj b">examples</code>识别，用户可以使用。</li></ul><pre class="kv kw kx ky gu oi oj ok ol aw om bi"><span id="3d29" class="on nm iw oj b gz oo op l oq or">import gradio as gr</span><span id="ee0e" class="on nm iw oj b gz ow op l oq or">iface = gr.Interface(<br/>    anonymise_date,<br/>    gr.inputs.Textbox(placeholder="Enter sentence here..."),<br/>    gr.outputs.HTML(),<br/>    examples=[<br/>        ["William Shakespeare was born on 26/04/1616"],<br/>        ["I will go there on 20/03/2022."],<br/>    ]<br/>)</span></pre><p id="afa6" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">最后，我启动界面:</p><pre class="kv kw kx ky gu oi oj ok ol aw om bi"><span id="7616" class="on nm iw oj b gz oo op l oq or">iface.launch()</span></pre><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj ox"><img src="../Images/1242d4f1c152ad907af412043ce46901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dFIwaszbf-kIdJFdSmDvKQ.png"/></div></div><figcaption class="lg lh gk gi gj li lj bd b be z dk translated">作者图片</figcaption></figure><h1 id="5611" class="nl nm iw bd nn no np nq nr ns nt nu nv kl nw km nx ko ny kp nz kr oa ks ob oc bi translated">高级界面</h1><p id="f660" class="pw-post-body-paragraph ll lm iw ln b lo od kg lq lr oe kj lt lu of lw lx ly og ma mb mc oh me mf mg ip bi translated">现在我可以改进前面的例子，用一个通过界面动态上传的文件替换textbox。在这个例子中，我只管理纯文本文件(例如txt)。Gradio上传一个文件作为<a class="ae lk" href="https://docs.python.org/3/library/tempfile.html" rel="noopener ugc nofollow" target="_blank">临时文件</a>。</p><p id="6a50" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">我定义了一个名为<code class="fe os ot ou oj b">process_text()</code>的函数，它接收一个临时文件作为输入，检查其扩展名，读取文件内容，最后返回原始文本和匿名文本。请注意，txt临时文件的扩展名不是。txt但是.平平淡淡。</p><pre class="kv kw kx ky gu oi oj ok ol aw om bi"><span id="7f31" class="on nm iw oj b gz oo op l oq or">def process_text(tmp_file):<br/>    if not tmp_file.name.endswith('.plain'):<br/>        return 'Not Supported File. Please provide a txt file', ''<br/>    with open(tmp_file.name, 'r') as f:<br/>        txt = f.read()</span><span id="2727" class="on nm iw oj b gz ow op l oq or">return txt, anonymise_date(txt)</span></pre><p id="d3d7" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">现在我可以构建接口了。关于前面的例子，我传递了一个<code class="fe os ot ou oj b">gr.inputs.File()</code>对象作为输入，并构建了一个输出文件列表。</p><pre class="kv kw kx ky gu oi oj ok ol aw om bi"><span id="924d" class="on nm iw oj b gz oo op l oq or">iface = gr.Interface(<br/>    process_text,<br/>    gr.inputs.File(label='Upload TXT file'),<br/>    [gr.outputs.HTML(label='Original Text'),gr.outputs.HTML(label='Anonymised Text')],<br/>)</span><span id="f298" class="on nm iw oj b gz ow op l oq or">iface.launch()</span></pre><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj oy"><img src="../Images/f7801e65696d3e57e70e156b3fdf3f5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SA_T_GL2xNV8k_EQVASNMA.png"/></div></div><figcaption class="lg lh gk gi gj li lj bd b be z dk translated">作者图片</figcaption></figure><h1 id="fcd7" class="nl nm iw bd nn no np nq nr ns nt nu nv kl nw km nx ko ny kp nz kr oa ks ob oc bi translated">摘要</h1><p id="b544" class="pw-post-body-paragraph ll lm iw ln b lo od kg lq lr oe kj lt lu of lw lx ly og ma mb mc oh me mf mg ip bi translated">在本教程中，我展示了Gradio Python包，这是一个非常简单的包，它允许非常快速地构建交互式演示。</p><p id="707b" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">Gradio提供了一个基础类，名为<code class="fe os ot ou oj b">Interface()</code>，可以配置来构建整个工作流:输入—流程—输出。</p><p id="cf9a" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">本教程的完整代码可以从我的<a class="ae lk" href="https://github.com/alod83/data-science/tree/master/DataVisualization/Gradio" rel="noopener ugc nofollow" target="_blank"> Github库</a>下载。</p><h1 id="893d" class="nl nm iw bd nn no np nq nr ns nt nu nv kl nw km nx ko ny kp nz kr oa ks ob oc bi translated">相关文章</h1><div class="oz pa gq gs pb pc"><a href="https://towardsdatascience.com/data-visualisation-principles-part-1-a-practical-example-in-altair-b6e16f665fc6" rel="noopener follow" target="_blank"><div class="pd ab fp"><div class="pe ab pf cl cj pg"><h2 class="bd jg gz z fq ph fs ft pi fv fx jf bi translated">数据可视化原理第1部分Altair中的一个实际例子</h2><div class="pj l"><h3 class="bd b gz z fq ph fs ft pi fv fx dk translated">关于如何在Python Altair中构建、定制和添加注释到简单条形图的实用教程</h3></div><div class="pk l"><p class="bd b dl z fq ph fs ft pi fv fx dk translated">towardsdatascience.com</p></div></div><div class="pl l"><div class="pm l pn po pp pl pq le pc"/></div></div></a></div><div class="oz pa gq gs pb pc"><a href="https://towardsdatascience.com/how-to-run-animations-in-altair-and-streamlit-2a0624789ad" rel="noopener follow" target="_blank"><div class="pd ab fp"><div class="pe ab pf cl cj pg"><h2 class="bd jg gz z fq ph fs ft pi fv fx jf bi translated">如何在Altair和Streamlit中运行动画</h2><div class="pj l"><h3 class="bd b gz z fq ph fs ft pi fv fx dk translated">一个现成的教程，描述了如何使用Altair和Streamlit构建动画折线图。</h3></div><div class="pk l"><p class="bd b dl z fq ph fs ft pi fv fx dk translated">towardsdatascience.com</p></div></div><div class="pl l"><div class="pr l pn po pp pl pq le pc"/></div></div></a></div><div class="oz pa gq gs pb pc"><a href="https://towardsdatascience.com/how-to-build-a-narrative-from-data-85e327940c13" rel="noopener follow" target="_blank"><div class="pd ab fp"><div class="pe ab pf cl cj pg"><h2 class="bd jg gz z fq ph fs ft pi fv fx jf bi translated">如何从数据中构建叙事</h2><div class="pj l"><h3 class="bd b gz z fq ph fs ft pi fv fx dk translated">根据设置-冲突-解决范式分析数据的一些技巧</h3></div><div class="pk l"><p class="bd b dl z fq ph fs ft pi fv fx dk translated">towardsdatascience.com</p></div></div><div class="pl l"><div class="ps l pn po pp pl pq le pc"/></div></div></a></div></div></div>    
</body>
</html>