<html>
<head>
<title>Inside Manifold: Uber’s Stack for Debugging Machine Learning Models</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">内部流形:用于调试机器学习模型的优步堆栈</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/inside-manifold-ubers-stack-for-debugging-machine-learning-models-e4daf6830665?source=collection_archive---------0-----------------------#2021-11-15">https://pub.towardsai.net/inside-manifold-ubers-stack-for-debugging-machine-learning-models-e4daf6830665?source=collection_archive---------0-----------------------#2021-11-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="046d" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/machine-learning" rel="noopener ugc nofollow" target="_blank">机器学习</a></h2><div class=""/><div class=""><h2 id="622a" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">开源栈结合了聪明的可视化来检测关于ML模型的见解。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/f642ae281576c205ab3a4d0b5b9c07a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Fq6ofXVeYPfj4mCU.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">图片来源:优步</figcaption></figure><blockquote class="lh li lj"><p id="96a2" class="lk ll lm ln b lo lp kd lq lr ls kg lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">我最近创办了一份专注于人工智能的教育时事通讯，已经有超过10万名订户。《序列》是一份无废话(意思是没有炒作，没有新闻等)的ML导向时事通讯，需要5分钟阅读。目标是让你与机器学习项目、研究论文和概念保持同步。请通过订阅以下内容来尝试一下:</p></blockquote><div class="mh mi gp gr mj mk"><a href="https://thesequence.substack.com/" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab fo"><div class="mm ab mn cl cj mo"><h2 class="bd jd gy z fp mp fr fs mq fu fw jc bi translated">序列</h2><div class="mr l"><h3 class="bd b gy z fp mp fr fs mq fu fw dk translated">订阅人工智能世界中最相关的项目和研究论文。受到102，000多人的信任…</h3></div><div class="ms l"><p class="bd b dl z fp mp fr fs mq fu fw dk translated">thesequence.substack.com</p></div></div><div class="mt l"><div class="mu l mv mw mx mt my lb mk"/></div></div></a></div><p id="9c3f" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated">优步继续其对机器学习开源社区的惊人贡献。从像<a class="ae nc" href="https://pyro.ai/" rel="noopener ugc nofollow" target="_blank"> Pyro </a>这样的概率编程语言到像<a class="ae nc" href="https://uber.github.io/ludwig/" rel="noopener ugc nofollow" target="_blank"> Ludwig </a>这样的低代码机器学习模型工具，这个运输巨头一直在定期发布简化机器学习应用程序生命周期的工具和框架。一年多前，优步宣布它是<a class="ae nc" href="https://github.com/uber/manifold" rel="noopener ugc nofollow" target="_blank">开源歧管</a>，一个用于机器学习模型的与模型无关的可视化调试工具。Manifold的目标是帮助数据科学家以直观的方式识别跨数据集和模型的性能问题。</p><p id="1602" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated">机器学习程序不同于传统的软件应用程序，因为它们的结构随着模型建立更多的知识而不断变化和发展。因此，调试和解释机器学习模型是现实世界人工智能(AI)解决方案中最具挑战性的方面之一。调试、解释和诊断是大规模构建机器学习解决方案的组织关注的活跃领域。调试和解释机器学习模型的挑战并不新鲜，业界已经在这一领域产生了一些工具和框架。然而，大多数现有的堆栈专注于使用性能度量来评估候选模型，例如像<a class="ae nc" href="http://wiki.fast.ai/index.php/Log_Loss" rel="noopener ugc nofollow" target="_blank">对数损失</a>、<a class="ae nc" href="https://stats.stackexchange.com/questions/132777/what-does-auc-stand-for-and-what-is-it" rel="noopener ugc nofollow" target="_blank">曲线下面积(AUC) </a>和<a class="ae nc" href="https://en.wikipedia.org/wiki/Mean_absolute_error" rel="noopener ugc nofollow" target="_blank">平均绝对误差(MAE) </a>，这些度量虽然有用，但在模型性能的根本原因方面提供的洞察力很少。另一个常见的挑战是，大多数机器学习调试工具都局限于特定类型的模型(例如:回归或分类)，很难在更广泛的机器学习架构中推广。因此，数据科学家花费大量时间尝试不同的模型配置，直到他们能够实现特定的性能。</p><h1 id="241e" class="nd ne it bd nf ng nh ni nj nk nl nm nn ki no kj np kl nq km nr ko ns kp nt nu bi translated">进入歧管</h1><p id="2866" class="pw-post-body-paragraph lk ll it ln b lo nv kd lq lr nw kg lt mz nx lw lx na ny ma mb nb nz me mf mg im bi translated">像优步这样的公司正在几十个团队中运营数百个机器学习模型。因此，这些模型的调试和可解释性成为机器学习管道的一个关键方面。借助Manifold，优步工程团队希望实现一些切实可行的目标:</p><p id="c337" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated">调试机器学习模型中的代码错误。</p><p id="c195" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated">理解一个模型的优势和劣势，无论是孤立的还是与其他模型相比较的。</p><p id="44e9" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated">比较和集成不同的模型。</p><p id="fd5d" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated">将通过检查和性能分析收集的见解整合到模型迭代中。</p><p id="3480" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated">为了实现这些目标，Manifold将机器学习分析过程分为三个主要阶段:检查、解释和细化。</p><p id="c5f2" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated"><strong class="ln jd">检查:</strong>在分析过程的第一部分，用户设计一个模型，并试图调查和比较模型结果与其他现有结果。在此阶段，用户比较典型的性能指标，如准确度、精确度/召回率和接收机工作特性曲线(ROC ),以获得新模型是否优于现有模型的粗粒度信息。</p><p id="787e" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated"><strong class="ln jd">解释:</strong>分析过程的这一阶段试图解释前一阶段形成的不同假设。这个阶段依靠比较分析来解释特定模型的一些症状。</p><p id="081f" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated"><strong class="ln jd">细化:</strong>在此阶段，用户试图通过将从解释中提取的知识编码到模型中并测试性能来验证前一阶段生成的解释。</p><p id="37e4" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated">机器学习分析过程的三个步骤在简化机器学习模型调试的简单用户界面上实现。歧管用户界面由两个主要对话框组成:</p><p id="3023" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated">1) <strong class="ln jd">性能比较视图:</strong>提供使用小多重设计的模型对之间的视觉比较，以及局部特征解释器视图。</p><p id="34c4" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated">2) <strong class="ln jd">特征属性视图:</strong>揭示用户定义的子集之间的特征比较，并提供特征分布的相似性度量。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oa"><img src="../Images/56439ce656e495cdad79a4166f47510f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*S3kn7jzGhLDyjvTE.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">图片来源:优步</figcaption></figure><p id="f54d" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated">用户可以使用三个主要步骤在Manifold中调试机器学习模型:</p><p id="896f" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated">1) <strong class="ln jd">比较</strong>:首先，给定具有来自一个或多个ML模型的输出的数据集，流形比较并突出跨模型或数据子集的性能差异。</p><p id="62f3" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated">2) <strong class="ln jd">切片</strong>:该步骤允许用户根据模型性能选择感兴趣的数据子集，以便进一步检查。</p><p id="dcd0" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated">3) <strong class="ln jd">属性</strong> : Manifold然后突出显示所选数据子集之间的特征分布差异，帮助用户找到性能结果背后的原因。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ob"><img src="../Images/38cb3a7da9dab4537b985edec72f2e3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2jcCDacMxLCud_wc.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">图片来源:优步</figcaption></figure><h1 id="67d0" class="nd ne it bd nf ng nh ni nj nk nl nm nn ki no kj np kl nq km nr ko ns kp nt nu bi translated">流形结构</h1><p id="3b10" class="pw-post-body-paragraph lk ll it ln b lo nv kd lq lr nw kg lt mz nx lw lx na ny ma mb nb nz me mf mg im bi translated">从架构的角度来看，流形工作流将一组机器学习模型作为输入，并基于特征工程产生不同的数据段。然后，特征段由一组编码器处理，这些编码器产生一组具有原始模型未捕捉到的内在结构的新特征，并帮助用户迭代新模型并获得更好的性能。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oc"><img src="../Images/f6795d856039247c4bb1a7107511cb19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KFUNnPzyr116CtqT.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">图片来源:优步</figcaption></figure><p id="6037" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated">上面描述的工作流是在一个简单的架构中实现的，该架构基于三个主要组件:数据源、后端和前端。在功能上，管汇架构基于三个主要模块:</p><ul class=""><li id="ef70" class="od oe it ln b lo lp lr ls mz of na og nb oh mg oi oj ok ol bi translated"><strong class="ln jd">数据转换器</strong>，将其他内部服务(如米开朗基罗)的数据格式转换为Manifold内部数据表示格式的功能</li><li id="28e4" class="od oe it ln b lo om lr on mz oo na op nb oq mg oi oj ok ol bi translated"><strong class="ln jd">计算引擎</strong>，负责运行集群和其他数据密集型计算的功能</li><li id="7703" class="od oe it ln b lo om lr on mz oo na op nb oq mg oi oj ok ol bi translated"><strong class="ln jd">前端组件，</strong>流形可视化分析系统的UI(其Python包使用内置版本的JavaScript前端组件)</li></ul><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi or"><img src="../Images/d3ece19bed6e0fb2a385f2322aae8143.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xuKN8eHx6CDS0_X7.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">图片来源:优步</figcaption></figure><p id="85b2" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated">Manifold的关键能力之一是与优步的核心机器学习平台:米开朗基罗的集成。为了实现这一目标，优步工程团队依赖于基于JavaScript的计算框架，如<a class="ae nc" href="https://js.tensorflow.org/" rel="noopener ugc nofollow" target="_blank"> TensorFlow.js </a>，这消除了对昂贵计算硬件的需求。对于更多计算密集型进程，Manifold提供了一个基于Python的接口，该接口基于<a class="ae nc" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">熊猫</a>和<a class="ae nc" href="https://scikit-learn.org/stable/" rel="noopener ugc nofollow" target="_blank"> Scikit-Learn </a>。</p><h1 id="7a51" class="nd ne it bd nf ng nh ni nj nk nl nm nn ki no kj np kl nq km nr ko ns kp nt nu bi translated">歧管v1中的新特性</h1><p id="466f" class="pw-post-body-paragraph lk ll it ln b lo nv kd lq lr nw kg lt mz nx lw lx na ny ma mb nb nz me mf mg im bi translated">自最初发布以来，优步已经为Manifold添加了一系列新特性，以便为其开源首次亮相做好准备:</p><p id="78fd" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated"><strong class="ln jd">对通用二进制分类和回归模型调试的模型无关支持。</strong>用户将能够分析和比较各种算法类型的模型，使他们能够辨别不同数据切片的性能差异。</p><p id="e2ea" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated"><strong class="ln jd">对表格特征输入的可视化支持，包括数字、分类和地理空间特征类型。</strong>使用每个数据切片的特征值分布信息，用户可以更好地了解某些性能问题的潜在原因，例如，模型的预测损失与其数据点的地理位置和分布之间是否存在任何相关性。</p><p id="4e4c" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated"><strong class="ln jd">与Jupyter笔记本的集成。</strong>通过这种集成，Manifold接受作为Pandas DataFrame对象的数据输入，并在Jupyter中呈现该数据的可视化。由于Jupyter Notebook是数据科学家和ML工程师最广泛采用的数据科学平台之一，这种集成使用户能够在不中断正常工作流程的情况下分析他们的模型。</p><p id="4b9b" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated"><strong class="ln jd">基于每个实例的预测损失和其他特征值的交互式数据切片和性能比较。</strong>用户将能够基于预测损失、地面实况或其他感兴趣的特征来切片和查询数据。该功能将使用户能够通过通用的数据切片逻辑快速验证或拒绝他们的假设。</p><p id="07a0" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt mz lv lw lx na lz ma mb nb md me mf mg im bi translated">毫无疑问，流形是优步对机器学习应用开发的最重要贡献之一。像Manifold这样的工具可以帮助简化跨不同机器学习框架的机器学习模型的调试和故障排除。我们当然可以期待机器学习社区在不久的将来为多方面的发展做出积极的贡献。</p></div></div>    
</body>
</html>