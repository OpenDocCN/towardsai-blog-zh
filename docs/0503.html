<html>
<head>
<title>Image Processing Based Vehicle Number Plate Detection and Speeding Radar</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于图像处理的车牌检测和测速雷达</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/image-processing-based-vehicle-number-plate-detection-and-speeding-radar-aa375952d0f6?source=collection_archive---------3-----------------------#2020-05-17">https://pub.towardsai.net/image-processing-based-vehicle-number-plate-detection-and-speeding-radar-aa375952d0f6?source=collection_archive---------3-----------------------#2020-05-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="7c16" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/computer-vision" rel="noopener ugc nofollow" target="_blank">计算机视觉</a></h2><div class=""/><div class=""><h2 id="05c4" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">利用计算机视觉开发廉价的DIY超速和交通雷达</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/a398b571ca93fc5f75778d26c8136f67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lpK7KLqmbv9lhn8zOy1Epw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated"><em class="lh">作者图片</em></figcaption></figure><h1 id="b553" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">介绍</h1><p id="d478" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">该工具的作用是实现一个基于图像处理的交通雷达，它可以检测车辆牌照，并随后测量瞬时车速。选择这种计算摄影/图像处理的应用，是为了开发一种开源的、具有成本效益的替代方案来替代当前的超速雷达系统，这种系统的单价可高达6500美元<a class="ae mw" href="#_edn1" rel="noopener ugc nofollow">【1】</a>。作为一种开源技术，这将使地方当局、市政当局或任何个人能够利用现成的设备和装置实现他们自己的低成本(1700美元)和方便的交通监控系统。</p><p id="c3f3" class="pw-post-body-paragraph ma mb it mc b md mx kd mf mg my kg mi mj mz ml mm mn na mp mq mr nb mt mu mv im bi translated">为了实现这个应用程序，选择了一组容易访问且相对便宜的项目和程序。即，具有60 fps、1080p分辨率、1/120秒曝光时间和激活的闪光灯的iPhone相机用于夜间监控，而具有24 fps、1080p分辨率和1/60秒曝光时间的尼康D7000相机用于白天监控。两台摄像机都安装了一个可调节的三脚架，三脚架紧靠路边，倾角为0°，与道路的水平夹角约为20°，离地高度约为2英尺。从早上到晚上，在不同的环境照明条件下，使用3种不同尺寸和速度范围从20公里/小时到70公里/小时的不同车辆对总共10个测试案例进行了实验。测试矩阵如图1所示。随后，使用几个Python脚本对记录的连续镜头进行处理，以检测和报告车牌和车速；这个步骤的详细描述可以在前面的章节中找到。</p><h1 id="a2c7" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated"><strong class="ak">实现</strong></h1><p id="0997" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">一旦镜头被拍摄，它将被用Python 3.7编写的几个脚本处理。这些脚本利用了几个开源Python工具包，即cv2、NumPy和matplotlib。这些工具包用于处理镜头，创建模板图像，比较像素和处理输出图像，除此之外，所有其他算法都是原始的。实施情况可总结如下:</p><pre class="ks kt ku kv gt nc nd ne nf aw ng bi"><span id="952e" class="nh lj it nd b gy ni nj l nk nl"><strong class="nd jd">1. Extract_frames.py: </strong>fragment footage into individual frames</span><span id="95c7" class="nh lj it nd b gy nm nj l nk nl"><strong class="nd jd">2. Resize_numbers.py: </strong>create templates of numbers 0–9 with varying<br/>   sizes and lighting conditions (executed only once)</span><span id="93d3" class="nh lj it nd b gy nm nj l nk nl"><strong class="nd jd">3. Main.py<br/>   </strong>a. Determine ambient lighting conditions (day/night)<br/>   b. Compare each template (numbers of varying sizes and light) to<br/>      each patch within each extracted frame using the normalized<br/>      correlation coefficient algorithm<br/>      <em class="nn">i.   If the similarity score exceeds a certain threshold, <br/>           record the number and location<br/>      ii.  If distance between the locations of numbers exceed a <br/>           certain threshold, disregard any new numbers (false <br/>           number rejection)<br/>      iii. Append detected digits in order of appearance along<br/>           x-axis<br/>      iv.  If the length of the detected number equals six digits,<br/>           register the digits as the number plate<br/>   c. Count the number of frames where at least 1 digit is detected;<br/>      use the speed measurement model to determine the vehicle speed<br/>      based on the total number of frames with the detected plate<br/>      numbers<br/>   d. Display and save the image of the vehicle with the detected<br/>      number plate and speed</em></span><span id="5809" class="nh lj it nd b gy nm nj l nk nl"><strong class="nd jd">4. Record_video.py: </strong>optionally you may choose to recreate a video<br/>   of the plate detection and speed measurement process using the<br/>   output images from main.py.</span></pre><p id="cf0b" class="pw-post-body-paragraph ma mb it mc b md mx kd mf mg my kg mi mj mz ml mm mn na mp mq mr nb mt mu mv im bi translated">如步骤3b中所述，用于将模板图像与源图像进行比较以进行匹配的技术是下面所示的归一化相关系数等式，其中NCC是相似性得分，T是模板图像，S是源图像，x和y是源图像中的坐标，x’和y’在模板图像中是坐标。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi no"><img src="../Images/874f49278e8aab55fdfff6af825df713.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UI6gYK_eK5XC3E1IGP8VjQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">归一化相关系数函数。</figcaption></figure><p id="c650" class="pw-post-body-paragraph ma mb it mc b md mx kd mf mg my kg mi mj mz ml mm mn na mp mq mr nb mt mu mv im bi translated">使用归一化相关系数的好处在于，当模板和源图像中的像素都具有较亮(+ve +ve)或较暗(-ve -ve)的强度时，由于点积，结果将是指示匹配的大正值。然而，如果一个图像具有亮强度，而另一个图像具有暗强度(+ve -ve)，则结果将是指示不匹配的大负值。这种比较两幅图像的相关性或卷积的过程使得这种技术对绝对差异和环境照明条件相对不敏感。</p><p id="d01b" class="pw-post-body-paragraph ma mb it mc b md mx kd mf mg my kg mi mj mz ml mm mn na mp mq mr nb mt mu mv im bi translated">如步骤3c中详细描述的，在第二次迭代中使用以下速度测量模型(幂回归)来确定速度，其中V是车辆速度，f是具有检测到的车牌号码的帧数。速度测量技术在其开始和实现时简单而新颖，不使用任何开源输入。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi np"><img src="../Images/3fe683c9fe8038bf29671babe46c7f97.png" data-original-src="https://miro.medium.com/v2/resize:fit:602/format:webp/1*wkZ_PlfWZTYLPnniAvCYyg.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">车速功能。</figcaption></figure><h1 id="24a5" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">结果</h1><p id="f635" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">图1中的测试矩阵显示了每个测试用例及其结果。请注意，帧数对应于脚本能够检测到镜头中任何和所有数字的帧数。测试案例被分成训练测试数据集，并用于迭代训练更精确的车辆速度测量模型。分别给出了第一次和第二次迭代的结果。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nq"><img src="../Images/499ccd2dd76c7f19231fc309c97c8273.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IWNFtPrVKdDTa-evKbL-HA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated"><em class="lh">测试矩阵，包含第一次和第二次车速测量迭代的结果。</em></figcaption></figure><p id="77fa" class="pw-post-body-paragraph ma mb it mc b md mx kd mf mg my kg mi mj mz ml mm mn na mp mq mr nb mt mu mv im bi translated">测试案例1是唯一一个在夜间极端恶劣的环境照明条件下进行的实验。在这种情况下，iPhone相机以60 fps和1/120秒的曝光时间使用；同样，不同组的模板图像被用于模板匹配，并且不同的速度测量模型被用于确定车辆速度。在第二次迭代速度测量中很明显，平均误差下降到10%以下(9.6%)，因此，这可以被视为一个成功的结果，因为超速违规的行业标准提供了10%的误差幅度<a class="ae mw" href="#_edn1" rel="noopener ugc nofollow">【2】</a>。然而，应该强调的是，这些结果主要是以24 fps进行的，而更高的帧速率可能会提供更高的精度。关于车牌检测，所有10个测试案例均读取无误(结果样本见图3)，相当于总体错误率为0%。因此，这证明了这种基于图像处理的技术作为传统测速雷达的有效且廉价的替代方案的潜力。</p><h1 id="0d27" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">挑战和创新</h1><p id="4fac" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">这项技术带来的主要挑战是环境照明条件的问题。很明显，基于与模板图像的比较，由于白天、夜晚和云层覆盖而变化的光照水平会对源图像中的数字检测产生显著影响。这可以通过使用归一化相关系数算法来减轻，该算法具有用于每个数字匹配的变化的阈值和模板。因此，最终的实现受绝对光照条件的影响要小得多。此外，由于夜间需要较长的拍摄曝光时间，帧具有较低的时间分辨率，这对检测产生不利影响；这可以通过使用带闪光灯的相机、更高的帧速率和更短的曝光时间来解决，详见方法部分。这里的创新之处在于开发了剔除假车牌的算法(详见步骤3b ii)和车速测量算法(详见步骤3d)。这两种独创的技术使图像处理能够相当可靠地检测和测量车牌和车速，类似于超速雷达，尽管成本只是其一小部分。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nr"><img src="../Images/9c807f9a35a62e4f3db88f14697d856c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5TmGEKQGWZpGipQokYUvTA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated"><em class="lh">车速(实际和预测)与带有检测车牌的帧数的图表(见步骤3c)。</em></figcaption></figure><h1 id="fb2a" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated"><strong class="ak">号牌和测速视频</strong></h1><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ns nt l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">以24 fps输出视频。</figcaption></figure><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ns nt l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">以12 fps的速度输出视频。</figcaption></figure><h2 id="821a" class="nh lj it bd lk nu nv dn lo nw nx dp ls mj ny nz lu mn oa ob lw mr oc od ly iz bi translated">使用Streamlit开发Web应用程序:</h2><div class="oe of gp gr og oh"><a href="https://www.amazon.com/Web-Application-Development-Streamlit-Applications/dp/1484281101?&amp;linkCode=ll1&amp;tag=mkhorasani09-20&amp;linkId=a0cb2bc17df598006fd9029c58792a6b&amp;language=en_US&amp;ref_=as_li_ss_tl" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd jd gy z fp om fr fs on fu fw jc bi translated">使用Streamlit开发Web应用程序:开发和部署安全且可伸缩的Web应用程序…</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">使用Streamlit开发Web应用程序:使用……开发安全且可扩展的Web应用程序并将其部署到云中</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">www.amazon.com</p></div></div><div class="oq l"><div class="or l os ot ou oq ov lb oh"/></div></div></a></div><h2 id="6d4d" class="nh lj it bd lk nu nv dn lo nw nx dp ls mj ny nz lu mn oa ob lw mr oc od ly iz bi translated">使用Python实现数据可视化:</h2><div class="oe of gp gr og oh"><a href="https://www.coursera.org/learn/python-for-data-visualization?irclickid=xgMQ4KWb%3AxyIWO7Uo7Vva0OcUkGQgW2aEwvr1c0&amp;irgwc=1&amp;utm_medium=partners&amp;utm_source=impact&amp;utm_campaign=3308031&amp;utm_content=b2c" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd jd gy z fp om fr fs on fu fw jc bi translated">用Python实现数据可视化</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">“一图胜千言”。我们都熟悉这个表达。它尤其适用于试图…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">www.coursera.org</p></div></div><div class="oq l"><div class="ow l os ot ou oq ov lb oh"/></div></div></a></div><h2 id="ac9e" class="nh lj it bd lk nu nv dn lo nw nx dp ls mj ny nz lu mn oa ob lw mr oc od ly iz bi translated">面向所有人的Python专业化:</h2><div class="oe of gp gr og oh"><a href="https://www.coursera.org/specializations/python?irclickid=xgMQ4KWb%3AxyIWO7Uo7Vva0OcUkGQgW16Ewvr1c0&amp;irgwc=1&amp;utm_medium=partners&amp;utm_source=impact&amp;utm_campaign=3308031&amp;utm_content=b2c" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd jd gy z fp om fr fs on fu fw jc bi translated">面向所有人的Python</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">学习用Python编程和分析数据。开发收集、清理、分析和可视化数据的程序…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">www.coursera.org</p></div></div><div class="oq l"><div class="ox l os ot ou oq ov lb oh"/></div></div></a></div><h2 id="91b7" class="nh lj it bd lk nu nv dn lo nw nx dp ls mj ny nz lu mn oa ob lw mr oc od ly iz bi translated">GitHub资源库:</h2><div class="oe of gp gr og oh"><a href="https://github.com/mkhorasani/Image_Processing_Based_Speeding_Radar" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd jd gy z fp om fr fs on fu fw jc bi translated">mkhorasani/图像处理基础超速雷达</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">这个项目的范围是实现一个基于图像处理的交通雷达，检测车辆号码…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">github.com</p></div></div><div class="oq l"><div class="oy l os ot ou oq ov lb oh"/></div></div></a></div><h1 id="8a01" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">参考</h1><p id="9792" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">【2】<a class="ae mw" href="https://www.clm.co.uk/blog/new-tougher-speeding-fines/" rel="noopener ugc nofollow" target="_blank">【https://www.clm.co.uk/blog/new-tougher-speeding-fines/】</a></p></div><div class="ab cl oz pa hx pb" role="separator"><span class="pc bw bk pd pe pf"/><span class="pc bw bk pd pe pf"/><span class="pc bw bk pd pe"/></div><div class="im in io ip iq"><h1 id="69a4" class="li lj it bd lk ll pg ln lo lp ph lr ls ki pi kj lu kl pj km lw ko pk kp ly lz bi translated">新到中？你可以在这里订阅和解锁无限文章<a class="ae mw" href="https://khorasani.medium.com/membership" rel="noopener">。</a></h1></div></div>    
</body>
</html>