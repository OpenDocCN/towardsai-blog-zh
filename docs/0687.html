<html>
<head>
<title>Using Tesseract-OCR for Text Recognition with Google Colab</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Google Colab使用Tesseract-OCR进行文本识别</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/using-tesseract-ocr-for-text-recognition-with-google-colab-1c4513b9d3e0?source=collection_archive---------0-----------------------#2020-07-17">https://pub.towardsai.net/using-tesseract-ocr-for-text-recognition-with-google-colab-1c4513b9d3e0?source=collection_archive---------0-----------------------#2020-07-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="50fe" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/systems" rel="noopener ugc nofollow" target="_blank">光学字符识别系统</a></h2><div class=""/><div class=""><h2 id="4a31" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">在Google Colab上安装宇宙魔方并试用</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/316ca81090fcde17c62589e5f37260d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fuo5vWp0jmo7dd5IlgxP2Q.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">检索自:<a class="ae lh" href="https://www.leanx.eu/tutorials/use-google-cloud-vision-api-to-process-invoices-and-receipts" rel="noopener ugc nofollow" target="_blank">https://www . leanx . eu/tutorials/use-Google-cloud-vision-API-to-process-invoices-and-receipts</a></figcaption></figure><p id="0ffe" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">* * *以上是Google OCR API的一个例子，希望有一天我也能对Tesseract做同样的事情</p><h2 id="66c2" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">装置</h2><p id="f6de" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">这个库的安装花了我比平时更长的时间。</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="7878" class="me mf it nc b gy ng nh l ni nj">!pip install pytesseract</span></pre><p id="23de" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">虽然您应该从使用pip安装pytesseract开始，但是如果您尝试运行库，它将运行错误。</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="5662" class="me mf it nc b gy ng nh l ni nj">TesseractNotFoundError: /usr/bin/tesseract is not installed or it's not in your PATH</span></pre><p id="8fcb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">安装有点忙乱。事实上，您首先需要安装另一个名为tesseract-ocr的包，并与。exe文件(都写在说明里，在我的回购上有，不要绝望)。</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="221e" class="me mf it nc b gy ng nh l ni nj">!sudo apt install tesseract-ocr</span></pre><p id="4847" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">确保同时安装两个库。</p><h2 id="f297" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">导入库</h2><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="fd28" class="me mf it nc b gy ng nh l ni nj">try:<br/> from PIL import Image<br/>except ImportError:<br/> import Image<br/>import cv2<br/>import pytesseract</span></pre><h2 id="9f33" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">正在检查安装文件夹</h2><p id="8fa6" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">在继续之前，您将需要找出在哪里可以找到宇宙魔方执行文件。</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="c6f4" class="me mf it nc b gy ng nh l ni nj">!which tesseract<br/>/usr/bin/tesseract</span></pre><p id="feff" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在可以复制输出来指定。exe文件。不幸的是，这似乎是让Tesseract在Google Colab上工作的唯一变通方法。到目前为止，这似乎是我搜索过的众多教程中唯一有效的。</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="d456" class="me mf it nc b gy ng nh l ni nj">pytesseract.pytesseract.tesseract_cmd = (<br/>    r'/usr/bin/tesseract'<br/>)</span></pre><p id="11b9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">库应该已经被正确导入。</p><h2 id="7757" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">导入图像</h2><p id="a13a" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">我将使用cv2库来导入和编辑图像。我必须确保在我的笔记本存储器中我已经上传了我想要的图像，并且我可以正确地访问它的路径。在这种情况下，图像被称为image.png。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/3b656a56346c6ec87da0decc8a356483.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*xHQJttgmr6l6lkmBwJBzKQ.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">我最喜欢的迷因之一！</figcaption></figure><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="4f46" class="me mf it nc b gy ng nh l ni nj">img_cv = cv2.imread(r'/content/image.png')</span><span id="f1e8" class="me mf it nc b gy nl nh l ni nj"># By default OpenCV stores images in BGR format and since pytesseract assumes RGB format,<br/># we need to convert from BGR to RGB format/mode:<br/>#d = cv2.cvtColor(img_cv, cv2.COLOR_BGR2RGB)</span></pre><p id="a3fc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我可以直接把图像输入模型。知道在使用Tesseract时可以使用各种配置选项:</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="6da4" class="me mf it nc b gy ng nh l ni nj">#Page segmentation modes:<br/>#  0    Orientation and script detection (OSD) only.<br/>#  1    Automatic page segmentation with OSD.<br/>#  2    Automatic page segmentation, but no OSD, or OCR.<br/>#  3    Fully automatic page segmentation, but no OSD. (Default)<br/>#  4    Assume a single column of text of variable sizes.<br/>#  5    Assume a single uniform block of vertically aligned text.<br/>#  6    Assume a single uniform block of text.<br/>#  7    Treat the image as a single text line.<br/>#  8    Treat the image as a single word.<br/>#  9    Treat the image as a single word in a circle.<br/># 10    Treat the image as a single character.<br/># 11    Sparse text. Find as much text as possible in no particular order.<br/># 12    Sparse text with OSD.<br/># 13    Raw line. Treat the image as a single text line,<br/>#                        bypassing hacks that are Tesseract-specific.</span></pre><p id="02cb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们试着看看输出:</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="8ed6" class="me mf it nc b gy ng nh l ni nj">#by using print we avoid a single string containing various /n<br/>print(pytesseract.image_to_string(img_cv, lang='eng', config='-psm 1'))<br/>...<br/>ONE DOES NOTSSIMPING</span><span id="1834" class="me mf it nc b gy nl nh l ni nj">WALK INTO MORDOR</span><span id="67db" class="me mf it nc b gy nl nh l ni nj">One does not simply..</span></pre><p id="aac2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">不幸的是，到目前为止还不完美。然而，本文的目标是能够在Google Colab中挂载Tesseract OCR。在对这个库和OpenCV (cv2)做了一些试验之后，我将发表另一篇文章，指导你如何获得更好的图像性能。恐怕这个工具需要一点深入的研究。</p></div></div>    
</body>
</html>