<html>
<head>
<title>How To Build an NLP Pipeline On AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在AWS上构建NLP管道</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/how-to-build-an-nlp-pipeline-on-aws-52fb34363ed5?source=collection_archive---------4-----------------------#2022-07-26">https://pub.towardsai.net/how-to-build-an-nlp-pipeline-on-aws-52fb34363ed5?source=collection_archive---------4-----------------------#2022-07-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4a55" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何在虚拟机上部署NLP代码</h2></div><p id="fc9d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">今年夏天，我一直在美国当地的一家公司做数据科学实习生。我和四个同事一直在做的一个重要项目是关于建立一个基于云的管道，每天从50，000条推文中自动提取最相关的讨论主题。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/0cc24f8d5e57d29281619b6d28fafa3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*b9nooXKToVoRTsN2Su-4_A.png"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">亚马逊网络服务</figcaption></figure><p id="1476" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我将解释创建一个托管在AWS上的类似项目所需遵循的主要步骤。</p><h1 id="46a4" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">为什么要使用云？</h1><p id="6fa5" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">如果你还没有开始学习如何使用云，你可能已经把所有的项目都本地化了。当你有一个轻量级的软件，你想随意运行时，这不是一个问题，但是，如果你想要一个每天运行的程序，它需要被托管在别的地方。为此，我们可以从一个主要的云提供商(在我们的例子中是AWS)那里租用云服务，这样我们的软件在运行时就不需要我们的个人电脑了。</p><h2 id="cd47" class="mk lo iq bd lp ml mm dn lt mn mo dp lx ko mp mq lz ks mr ms mb kw mt mu md mv bi translated">项目大纲</h2><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi mw"><img src="../Images/68513e40f3dc0f6294c6d4af714f6350.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6V9wigxjH-ZDA4PXaHuihQ.png"/></div></div></figure><p id="bfbf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们要做的项目将遵循这一架构，并将按以下步骤组织:</p><ol class=""><li id="1f9b" class="nb nc iq kh b ki kj kl km ko nd ks ne kw nf la ng nh ni nj bi translated"><strong class="kh ir">设置虚拟机</strong></li><li id="5f3e" class="nb nc iq kh b ki nk kl nl ko nm ks nn kw no la ng nh ni nj bi translated"><strong class="kh ir">编写python代码</strong></li></ol><ul class=""><li id="89db" class="nb nc iq kh b ki kj kl km ko nd ks ne kw nf la np nh ni nj bi translated"><strong class="kh ir">刮推文</strong></li><li id="512f" class="nb nc iq kh b ki nk kl nl ko nm ks nn kw no la np nh ni nj bi translated"><strong class="kh ir">主题建模</strong></li><li id="19ee" class="nb nc iq kh b ki nk kl nl ko nm ks nn kw no la np nh ni nj bi translated"><strong class="kh ir">聚类</strong></li><li id="dea1" class="nb nc iq kh b ki nk kl nl ko nm ks nn kw no la np nh ni nj bi translated"><strong class="kh ir">数据可视化</strong></li></ul><p id="cfb7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> 3。安排管道每天运行</strong></p><h1 id="651c" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">双手抱头。</h1><p id="0537" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">如果您试图按照这些步骤创建一个类似的项目，请确保您已经拥有一个AWS帐户。</p><h2 id="377b" class="mk lo iq bd lp ml mm dn lt mn mo dp lx ko mp mq lz ks mr ms mb kw mt mu md mv bi translated"><strong class="ak"> 1。</strong> <strong class="ak">设置虚拟机</strong></h2><p id="79bb" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">虚拟机是一台模拟的计算机，你可以从云中租用(你可以支付低至0.04美元/小时的费用)，使你能够运行你的代码。您将需要用来设置VM的AWS服务称为EC2。</p><p id="13be" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我的实验中，我将使用t2.small，因为它是最小的实例，我可以在其中安装我将要使用的一个主要库:句子转换器。根据您的代码，您甚至可以租用较小的EC2实例，比如t2.nano或t2.micro，它们的成本相对较低。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nq"><img src="../Images/d85fad876e54abca5228aaf181bedfd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xvrKoJ9YJD7rz6GoyZQgQA.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">当您启动EC2时，这将是它的样子</figcaption></figure><p id="aaca" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">亚马逊网络服务公司(AWS)为个人、公司和政府提供云计算平台，以根据需要执行各种网络服务。AWS云有很多突出的特性，包括高可伸缩性、高弹性、高可用性等等。</p><p id="e2c3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与任何物理服务器不同，虚拟机是一种完全虚拟化的计算机系统。虚拟机从远程服务器(如AWS)或物理计算机“借用”其CPU和内存。它不仅在运行不能在本地计算机上运行的应用程序和代码时非常有用，还可以备份用户当前的操作系统。</p><h2 id="8ef6" class="mk lo iq bd lp ml mm dn lt mn mo dp lx ko mp mq lz ks mr ms mb kw mt mu md mv bi translated"><strong class="ak"> 2。</strong> <strong class="ak">写起了python代码</strong></h2><p id="af2a" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated"><strong class="kh ir">答.网页抓取</strong></p><p id="ac58" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">snscrape 库用于网络抓取，用户可以根据他们用Python指定的主题和时间范围从Twitter下载大量的tweets。在我们的案例中，由于新冠肺炎作为一个全球性的疫情对社会的巨大影响，我们专注于这个话题，我们总共收集了50，000条推文。</p><p id="9b12" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> b. </strong> <strong class="kh ir">主题建模</strong></p><p id="3394" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">主题建模是一种统计建模方法，它在一组文档中抽象出“主题”。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi ns"><img src="../Images/7686ad79b080cc2b5e4bdc132f4ffdc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PLpRjp4y0p7tF_HOa-O9rQ.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">主题建模的基本步骤</figcaption></figure><p id="99c4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，数据被检索并保存在一个CSV文件中，这样每个句子都在一行中。然后应用编码方法将每个句子转换成空间坐标。接下来，使用聚类方法将空间中的每个点标记到特定的组中。最后，所有的点都在空间中可视化。</p><p id="ca81" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了执行编码，我们将使用一个名为<a class="ae nr" href="https://www.sbert.net/" rel="noopener ugc nofollow" target="_blank">句子转换器</a>的库，它将文本作为输入，并输出一个多维向量。编码后，每个句子都被转换成一个维度为768的空间坐标。通过对我们所有的矢量化数据应用聚类，我们可以识别所有共享相似内容的群体:基本上，我们能够从我们的推文中提取所有趋势/主题。</p><p id="bac6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们想要执行简单的聚类，所以我们对所有的tweets使用参考数量为200的K-Means聚类。</p><p id="7885" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">d .</strong>T16】数据可视化</p><p id="999f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后一步是以清晰的方式可视化数据。一个重要的步骤是将维度从768减少到2(使用<a class="ae nr" href="https://umap-learn.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> Umap </a>作为维度减少算法)，由于不可能可视化维度大于3的向量，我们决定使用<a class="ae nr" href="https://plotly.com/python/" rel="noopener ugc nofollow" target="_blank"> Plotly </a>在X-Y平面上可视化结果。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi ns"><img src="../Images/7a452af57f7ee8a5d10ed47e71e65189.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pXt0Z7MsjwAUIRfeplB-ow.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">二维平面上的数据可视化</figcaption></figure><p id="1685" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在生成的图上，每个点都用特定的颜色标记，表示它们的群体身份。在这种情况下，总共有200个组。</p><h2 id="4011" class="mk lo iq bd lp ml mm dn lt mn mo dp lx ko mp mq lz ks mr ms mb kw mt mu md mv bi translated"><strong class="ak"> 3。</strong> <strong class="ak">安排虚拟机每天运行</strong></h2><p id="ca96" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">为了安排虚拟机每天运行，Lambda和EventBridge是AWS上的两个web服务，它们被部署来自动激活和关闭虚拟机。特别是，lambda命令用于启动和停止虚拟机，而EventBridge帮助Lambda设置触发Lambda命令的循环调度。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nt"><img src="../Images/29138764de6b14fef1434e9081a08a8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cJiqegnOE_UvQrsPVWRUUw.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">Lambda用于启动和停止虚拟，EventBridge用于循环调度Lambda</figcaption></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nu"><img src="../Images/68fb1662276d7d9ab03cb08a1ff807f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mQTFoD5Vpexec5gpwjhLrg.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">通过AWS启动的EventBridge</figcaption></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nu"><img src="../Images/d03138487c15a5001cdc00525f7fd9c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OVeerku1FXIsNxHP12tb8Q.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">Lambda和EventBridge通过虚拟机连接在一起</figcaption></figure></div></div>    
</body>
</html>