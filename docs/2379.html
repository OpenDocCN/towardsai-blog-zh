<html>
<head>
<title>How To Build A Chatbot That Understands Conditional Statements</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何构建理解条件语句的聊天机器人</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/how-to-build-a-chatbot-that-understands-conditional-statements-39ea5a840d5?source=collection_archive---------1-----------------------#2021-11-30">https://pub.towardsai.net/how-to-build-a-chatbot-that-understands-conditional-statements-39ea5a840d5?source=collection_archive---------1-----------------------#2021-11-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="e602" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/nlp" rel="noopener ugc nofollow" target="_blank">自然语言处理</a></h2><div class=""/><div class=""><h2 id="23d3" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">计算语言学方法</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/aef6f076ef591652293beba5af93afbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WTiOpTwFzetZEgqbF6vu3Q.png"/></div></div></figure><h1 id="9a96" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">介绍</h1><p id="ff13" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">在本文中，我将分享一种帮助构建理解条件语句的聊天机器人的方法。</p><p id="5a24" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">复制本文中描述的机器人的代码可以在<a class="ae mw" href="https://github.com/hsm207/conditional-stmt-bot" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="cdbd" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">让我们以一个例子来解释赋予机器人这种能力的原因。</p><h1 id="693b" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">为什么要构建理解条件语句的聊天机器人</h1><p id="3152" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">假设你刚买了一个智能恒温器，比如<a class="ae mw" href="https://support.google.com/googlenest/topic/9361772?hl=en&amp;ref_topic=9361189,9371069,7029808," rel="noopener ugc nofollow" target="_blank"> Nest </a>。</p><p id="4897" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">以下视频展示了如何创建温度预设:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">图1:如何在Nest中创建预设温度</figcaption></figure><p id="2429" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">有一个漂亮的移动应用程序可以用来配置设备，这真的很方便……但它还能更好吗？</p><p id="401c" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">如果您想在睡觉时将温度设置为60度，您需要:</p><ol class=""><li id="c902" class="nd ne it lx b ly mr mb ms me nf mi ng mm nh mq ni nj nk nl bi translated">打开应用程序</li><li id="9c9b" class="nd ne it lx b ly nm mb nn me no mi np mm nq mq ni nj nk nl bi translated">轻按几个按钮以获得所需的设置</li><li id="7262" class="nd ne it lx b ly nm mb nn me no mi np mm nq mq ni nj nk nl bi translated">操纵一些部件以获得想要的效果</li></ol><p id="22ec" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">现在，将图1中的界面与如下界面进行比较:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/b20c7c1286f68c21d3e4d20b6c5ab1b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/1*PLQkCvxkHFRsO-I7fPr1jg.gif"/></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">图2:配置智能设备的对话方式</figcaption></figure><p id="791c" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">在图2中，用户可以从他们的手机上打开一个消息应用程序，例如WhatsApp、Signal、Telegram，并配置他们的任何智能设备，就像他们在与人交谈一样。</p><p id="45d4" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">对话式方法不仅速度更快，而且更加用户友好，因为人们不需要记住他们需要遵循的步骤序列来获得所需的设置。用户只需要声明他们的目标，后端集成会处理剩下的事情。</p><p id="c602" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">除了配置智能设备之外，对话式方法还有其他有用的使用案例:</p><ul class=""><li id="cbfc" class="nd ne it lx b ly mr mb ms me nf mi ng mm nh mq ns nj nk nl bi translated">股票投资:“如果XOM在Q2的收益超过分析师的预期，就在市场上买入”</li><li id="05a1" class="nd ne it lx b ly nm mb nn me no mi np mm nq mq ns nj nk nl bi translated">提醒:“提醒我在阿尔迪买鸡蛋”</li></ul><p id="d9df" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">上述所有用例中的共同线索是，它需要识别用户的话语有两个组成部分:</p><ul class=""><li id="eaf8" class="nd ne it lx b ly mr mb ms me nf mi ng mm nh mq ns nj nk nl bi translated">一个动作:“在市场买XOM”或“提醒我买鸡蛋”</li><li id="c435" class="nd ne it lx b ly nm mb nn me no mi np mm nq mq ns nj nk nl bi translated">一个条件:“如果它在Q2的收益超过分析师的预期”或者“当我在阿尔迪的时候”</li></ul><p id="5e46" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">仅当条件为真时，才应触发该操作。</p><p id="1e89" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">让我们讨论一下如何实现这个特性。</p><h1 id="9e8e" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">实施</h1><p id="e483" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">本文将重点介绍如何在智能家居环境中构建一个能够理解条件语句的机器人。让我们想象这个机器人可以控制恒温器、门、窗和音乐等设备。</p><h2 id="dc2d" class="nt le it bd lf nu nv dn lj nw nx dp ln me ny nz lp mi oa ob lr mm oc od lt iz bi translated">提取动作和条件</h2><p id="e6cf" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">考虑以下关于控制门的说法:</p><blockquote class="oe of og"><p id="ddd8" class="lv lw oh lx b ly mr kd ma mb ms kg md oi mt mg mh oj mu mk ml ok mv mo mp mq im bi translated">没人在家时锁上门</p></blockquote><p id="9e10" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">通过依赖解析器传递该话语会产生以下解析:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ol"><img src="../Images/675794a2a1f1653c0f99df40823f91c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QHg5_iemfHjrAcVhdj5B0A.png"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">图3:机器人如何理解“没人在家时锁门”。来源:<a class="ae mw" href="https://bit.ly/3D0hNh5" rel="noopener ugc nofollow" target="_blank">https://bit.ly/3D0hNh5</a></figcaption></figure><p id="a95e" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">让我们看看如果我们稍微修改一下语句，解析会是什么样子:</p><blockquote class="oe of og"><p id="dd04" class="lv lw oh lx b ly mr kd ma mb ms kg md oi mt mg mh oj mu mk ml ok mv mo mp mq im bi translated">如果没人在家，锁上门</p></blockquote><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi om"><img src="../Images/4f5ff90139e1e7762f1b06d17f98e83f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zCMEZvcBzyHybpxkUtnzBw.png"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">图4:机器人如何理解“如果没人在家，把门锁上”。来源:<a class="ae mw" href="https://bit.ly/3rpbktI" rel="noopener ugc nofollow" target="_blank">https://bit.ly/3rpbktI</a></figcaption></figure><p id="187e" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">出现了几种模式(在我们领域的限制范围内)。我们注意到:</p><ul class=""><li id="228b" class="nd ne it lx b ly mr mb ms me nf mi ng mm nh mq ns nj nk nl bi translated">“如果-那么”形式的话语有一个状语从句(advcl关系)</li><li id="87fb" class="nd ne it lx b ly nm mb nn me no mi np mm nq mq ns nj nk nl bi translated">“门”是我们希望机器人理解的对象之一，是动词“锁”的直接对象(dobj关系)</li><li id="f8fb" class="nd ne it lx b ly nm mb nn me no mi np mm nq mq ns nj nk nl bi translated">“没人在家”是一个名词性主语(nsubj关系)</li></ul><p id="5c0c" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">因此，我们可以遍历依赖树来提取动作和条件语句。确切的细节超出了本文的范围，但可以在附带的回购协议中找到。读者可以参考[1]来学习如何解释依赖树。</p><p id="417a" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">本节的关键要点是，给出一个类似“如果没人在家，把门锁上”的话语，机器人应该能够像这样区分<code class="fe on oo op oq b">action</code>和<code class="fe on oo op oq b">condition</code>:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi or"><img src="../Images/0a4dce1ee1115a34561800eeb813db58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*aTq_YXi5Ofx-TfPyqr1w1g.png"/></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">图5:从“如果没人在家，锁上门”中提取动作和条件</figcaption></figure><p id="a3d7" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">接下来，让我们讨论一下我们能对话语的<code class="fe on oo op oq b">action</code>和<code class="fe on oo op oq b">condition</code>做些什么。</p><h2 id="3db8" class="nt le it bd lf nu nv dn lj nw nx dp ln me ny nz lp mi oa ob lr mm oc od lt iz bi translated">与环境互动</h2><p id="6132" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">机器人影响变化的方式基于话语的<code class="fe on oo op oq b">action</code>和<code class="fe on oo op oq b">condition</code>将取决于许多事情，例如用于构建机器人的平台和智能设备中可用的接口。</p><p id="ede2" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">让我们假设我们已经使用<a class="ae mw" href="https://rasa.com/" rel="noopener ugc nofollow" target="_blank"> rasa </a>构建了这个机器人。</p><p id="d42c" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">在rasa中实现这一点的一种方法是为我们希望机器人支持的每个设备定义一个意图:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi os"><img src="../Images/d87ff3d81c3aeb68c093206d5efa6803.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tr9SgB-QzYGm1txAMUCOPA.png"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">图6:控制温度、音乐和门的意图</figcaption></figure><p id="bef6" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">图6显示了如果我们希望用户能够通过机器人控制他们家的温度、音乐和门，我们将创建的意图。</p><p id="3246" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">请注意，意图不是“如果-那么”的形式。</p><p id="08bc" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">为什么？</p><p id="9c18" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">因为这些例子代表了明确表征用户如何与设备交互的令牌序列。任何辅助令牌，如<code class="fe on oo op oq b">condition</code>将在单独的步骤中解析。</p><p id="0c3f" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">从话语中提取<code class="fe on oo op oq b">action</code>和<code class="fe on oo op oq b">condition</code>的解析器可以实现为一个定制动作:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ot"><img src="../Images/b8cec42b7f369d02876fffd4cc29991e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2tMsdqweAUklFUyXJ9Ae-Q.png"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">图7:从用户话语中提取“动作”和“条件”的自定义动作</figcaption></figure><p id="4b78" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">提取话语的<code class="fe on oo op oq b">action</code>和<code class="fe on oo op oq b">condition</code>发生在图7中的第36行。动作运行后，<code class="fe on oo op oq b">condition</code>、<code class="fe on oo op oq b">action</code>和<code class="fe on oo op oq b">action_intent</code>槽被设置。这些信息可以传递给其他自定义动作，这些动作将触发实际的交互或首先进行进一步处理，例如，<code class="fe on oo op oq b">action</code>“锁门”和<code class="fe on oo op oq b">action_intent</code>“控制_门”是关于开门还是关门？</p><p id="c5b5" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">为了将所有的东西放在一起，我们可以创建这样的规则:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ou"><img src="../Images/93237b8f3eb2f612dc9c931ccbc6250c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XMo5hozyOsMqy13t81ARQw.png"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">图8:处理用户控制设备意图的规则</figcaption></figure><p id="89be" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">我们为每个设备创建一个单独的规则，以防每个设备需要不同的接口。</p><p id="e4cd" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">例如，如果我们有一个支持视觉问答(VQA)的摄像机系统，那么我们可以创建一个组件，将<code class="fe on oo op oq b">condition</code>作为一个问题发送给系统，如果答案是肯定的，就触发<code class="fe on oo op oq b">action</code>。[2]中描述了这种架构的细节。</p><h1 id="66dd" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">结论</h1><p id="c3e1" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">本文描述了一种从if-else语句中提取含义的方法。它围绕着基于话语语言特征的写作规则。根据语句和领域的复杂程度，规则可能很脆弱。</p><p id="bf54" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">在下一篇文章中，我们将讨论一种使用机器学习的替代方法。</p><p id="d8d6" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">我希望你已经发现这是有用的。</p><h1 id="57d3" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">参考</h1><p id="2627" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">[1] <a class="ae mw" href="https://universaldependencies.org/" rel="noopener ugc nofollow" target="_blank">通用依赖关系</a></p><p id="9a21" class="pw-post-body-paragraph lv lw it lx b ly mr kd ma mb ms kg md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">【2】<a class="ae mw" href="https://arxiv.org/abs/1912.09589" rel="noopener ugc nofollow" target="_blank">智能家电:与你的冰箱聊天</a>。古多夫斯基等人。艾尔。2019</p></div></div>    
</body>
</html>