<html>
<head>
<title>Measure the Effectiveness of Covid-19 Vaccinations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">衡量新冠肺炎疫苗的有效性</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/measure-the-effectiveness-of-covid-19-vaccinations-f635e3e2696f?source=collection_archive---------3-----------------------#2021-03-19">https://pub.towardsai.net/measure-the-effectiveness-of-covid-19-vaccinations-f635e3e2696f?source=collection_archive---------3-----------------------#2021-03-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="5c3f" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/data-analysis" rel="noopener ugc nofollow" target="_blank">数据分析</a></h2><div class=""/><div class=""><h2 id="4f89" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">测量Covid19疫苗接种有效性的尝试</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/69f096297482454535ead189e0ccd94d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PMRJZraF4-1IzG1t.png"/></div></div></figure><p id="5443" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在本帖中，我们将尝试测量新冠肺炎疫苗的有效性。这个分析是非常基本的，我们不能得出安全的结论，它是基于这样的假设:随着越来越多的人接种疫苗，我们预计每天的病例和死亡人数会越来越少。一些我们需要提及的事情:</p><ul class=""><li id="c569" class="lz ma it lf b lg lh lj lk lm mb lq mc lu md ly me mf mg mh bi translated">我们没有考虑新冠肺炎的<strong class="lf jd">季节性</strong>。我们知道，在夏季，我们预计每天的病例会减少。</li><li id="144d" class="lz ma it lf b lg mi lj mj lm mk lq ml lu mm ly me mf mg mh bi translated">我们不考虑政府采取的措施，如封锁等。</li><li id="d4e1" class="lz ma it lf b lg mi lj mj lm mk lq ml lu mm ly me mf mg mh bi translated">接种疫苗的人口比例是一个单调递增的序列。</li></ul><p id="8fee" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我们的数据来源是<a class="ae mn" href="https://ourworldindata.org/covid-vaccinations" rel="noopener ugc nofollow" target="_blank">我们的数据世界</a>和<a class="ae mn" href="https://www.worldometers.info/coronavirus/" rel="noopener ugc nofollow" target="_blank">世界计量表</a>。对于这个例子，我们将考虑国家<strong class="lf jd">以色列</strong>以及<strong class="lf jd">完全</strong>接种疫苗并可在此<a class="ae mn" href="https://drive.google.com/file/d/1qbaTYc8z08nZPC9LCBoh4jgLOBj5noYJ/view?usp=sharing" rel="noopener ugc nofollow" target="_blank">找到</a>的人口比例。此外，我们将使用<a class="ae mn" href="https://pypi.org/project/covid-daily/" rel="noopener ugc nofollow" target="_blank"> covid-daily </a> Python库从Worldometers获取数据。请注意，我们有截止到2021年3月18日的数据，到这个时候，以色列已经为51.77%的T21人接种了疫苗。最后，请记住，完全接种疫苗的人的记录始于<strong class="lf jd">2021–01–10</strong>。</p><h1 id="081e" class="mo mp it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated">完全接种疫苗与新病例</h1><pre class="ks kt ku kv gt ng nh ni nj aw nk bi"><span id="142a" class="nl mp it nh b gy nm nn l no np">import pandas as pd<br/>import covid_daily</span><span id="b639" class="nl mp it nh b gy nq nn l no np">KPI = covid_daily.data(country='israel', chart = 'graph-cases-daily',  as_json=False)</span><span id="904e" class="nl mp it nh b gy nq nn l no np">Vaccinated = pd.read_csv("share-people-fully-vaccinated-covid.csv")</span><span id="3a63" class="nl mp it nh b gy nq nn l no np"># Get Data only for Israel<br/>Vaccinated.query("Entity=='Israel'" , inplace = True)</span><span id="34bc" class="nl mp it nh b gy nq nn l no np"># Start Measuring from the time the vaccines started<br/>Vaccinated.query("people_fully_vaccinated_per_hundred&gt;0" , inplace = True)</span><span id="3b7d" class="nl mp it nh b gy nq nn l no np"># Conver the Day to Datetime Index<br/>Vaccinated['Day'] = pd.DatetimeIndex(Vaccinated['Day'])</span><span id="ddf8" class="nl mp it nh b gy nq nn l no np"># Join the data<br/>merged = KPI.merge(Vaccinated, how='inner', left_index=True, right_on='Day')<br/>merged.index=merged.Day<br/>merged.index.name = 'Date'</span><span id="7541" class="nl mp it nh b gy nq nn l no np">merged</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/b7ec16ba2cd8dd101b5b11a377fa9cde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/0*LFrd-a_BlxSbe8rs.png"/></div></figure><h1 id="6714" class="mo mp it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated">散点图</h1><p id="7a71" class="pw-post-body-paragraph ld le it lf b lg ns kd li lj nt kg ll lm nu lo lp lq nv ls lt lu nw lw lx ly im bi translated">从下面的散点图中，我们可以看到新病例和完全接种疫苗的人之间的负相关关系。</p><pre class="ks kt ku kv gt ng nh ni nj aw nk bi"><span id="688b" class="nl mp it nh b gy nm nn l no np">merged.plot.scatter('people_fully_vaccinated_per_hundred', 'Novel Coronavirus Daily Cases',  <br/>                    figsize=(12,8), title = "Israel: Daily Cases vs %Population Vaccinated")</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nx"><img src="../Images/43bbe1b6888e26718fc3c3128aeb6d5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bkwI-vE1brJiBujc.png"/></div></div></figure><h1 id="328d" class="mo mp it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated">用7天的滚动窗口平滑数据</h1><p id="f303" class="pw-post-body-paragraph ld le it lf b lg ns kd li lj nt kg ll lm nu lo lp lq nv ls lt lu nw lw lx ly im bi translated">日常案例以及他们衡量这些案例的方式存在问题。因此，最好通过考虑两个变量的7天滚动窗口的平均值来平滑数据。</p><pre class="ks kt ku kv gt ng nh ni nj aw nk bi"><span id="abf8" class="nl mp it nh b gy nm nn l no np">rolling_merged = merged[['people_fully_vaccinated_per_hundred', 'Novel Coronavirus Daily Cases']].rolling(7).mean().dropna()</span><span id="c2e3" class="nl mp it nh b gy nq nn l no np">rolling_merged.plot.scatter('people_fully_vaccinated_per_hundred', 'Novel Coronavirus Daily Cases',  <br/>                    figsize=(12,8), title = "Israel: Daily Cases vs %Population Vaccinated")</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/2f811d08c45b67ae8a6d65ad1a152c94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GX998AVinHvL4AcE.png"/></div></div></figure><p id="f09a" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">现在，我们有了一个更清晰的观点，很明显，数据是强负相关的。让我们得到原始数据和平滑数据的相关性:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/90bd7755cf84a5cad2965521da236489.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PUaWniZUr78XYaVy.png"/></div></figure><p id="f42b" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">对于平滑数据，相关性为<strong class="lf jd"> -0.965 </strong>，对于原始数据，相关性为<strong class="lf jd"> -0.787 </strong></p><h1 id="823d" class="mo mp it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated">完全接种疫苗与死亡</h1><p id="2193" class="pw-post-body-paragraph ld le it lf b lg ns kd li lj nt kg ll lm nu lo lp lq nv ls lt lu nw lw lx ly im bi translated">让我们进行同样的分析，但是这次考虑每天的死亡人数。</p><pre class="ks kt ku kv gt ng nh ni nj aw nk bi"><span id="0d3e" class="nl mp it nh b gy nm nn l no np">KPI = covid_daily.data(country='israel', chart = 'graph-deaths-daily',  as_json=False)</span><span id="d536" class="nl mp it nh b gy nq nn l no np"># Join the data<br/>merged = KPI.merge(Vaccinated, how='inner', left_index=True, right_on='Day')<br/>merged.index=merged.Day<br/>merged.index.name = 'Date'</span><span id="7fc1" class="nl mp it nh b gy nq nn l no np">merged.plot.scatter('people_fully_vaccinated_per_hundred', 'Novel Coronavirus Daily Deaths',  <br/>                    figsize=(12,8), title = "Israel: Daily Deaths vs %Population Vaccinated")</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nz"><img src="../Images/35e688187535afc6de7216d461a12628.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*B2Xfl2wchfb8eFDV.png"/></div></div></figure><pre class="ks kt ku kv gt ng nh ni nj aw nk bi"><span id="9e11" class="nl mp it nh b gy nm nn l no np">rolling_merged = merged[['people_fully_vaccinated_per_hundred', 'Novel Coronavirus Daily Deaths']].rolling(7).mean().dropna()</span><span id="4c1e" class="nl mp it nh b gy nq nn l no np">rolling_merged.plot.scatter('people_fully_vaccinated_per_hundred', 'Novel Coronavirus Daily Deaths',  <br/>                    figsize=(12,8), title = "Israel: Daily Deaths vs %Population Vaccinated")</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oa"><img src="../Images/cebbdf61ec63d5dc581976a088318f4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_3RglFdNRm4svUan.png"/></div></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/7a0aa0098fac4f8eabca3dcde4d7eb01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/0*WFPYtpUu7vtngFOr.png"/></div></figure><p id="0973" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我们可以看到，当我们考虑每天的死亡人数时，相关性也是负的，其中平滑数据是<strong class="lf jd"> -0.8987 </strong>，原始数据是<strong class="lf jd"> -0.603 </strong></p><p id="8233" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">最后，我们可以通过考虑30天的滚动窗口，在平滑的一天运行滚动相关性。</p><pre class="ks kt ku kv gt ng nh ni nj aw nk bi"><span id="dc59" class="nl mp it nh b gy nm nn l no np">rolling_merged['people_fully_vaccinated_per_hundred'].\ rolling(30).corr(rolling_merged['Novel Coronavirus Daily Deaths']).\ dropna().plot(figsize=(12,8), title="Rolling Correlation")</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oc"><img src="../Images/551e587fd612a9f5eab6c157b07b35c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EhqP9WcEllcnWTxG.png"/></div></div></figure><h1 id="9bdc" class="mo mp it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated">外卖</h1><p id="adb9" class="pw-post-body-paragraph ld le it lf b lg ns kd li lj nt kg ll lm nu lo lp lq nv ls lt lu nw lw lx ly im bi translated">我们之所以考虑以色列，是因为它是迄今为止完全接种率最高的国家。我们可以根据至少注射过一次疫苗的人进行分析。在这一分析中，可以批评的是，除了接种疫苗以外，其他原因也可能导致每日病例和死亡人数减少。然而，我们不能忽视这种强烈的负相关性，特别是在二月和三月，这两个月我们观察到更多的新冠肺炎病例。保持监测这种相关性是有趣的，尤其是当70%的人口已经接种疫苗时，这是一个与所谓的“群体免疫”相关的数字。最后，我们可以看到，在接种疫苗的第一天，无论是对新病例还是死亡病例都没有影响。</p><h1 id="f63f" class="mo mp it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated"><strong class="ak">多余部分</strong></h1><p id="8454" class="pw-post-body-paragraph ld le it lf b lg ns kd li lj nt kg ll lm nu lo lp lq nv ls lt lu nw lw lx ly im bi translated">为方便起见，让我们以原始格式并考虑7天的滚动窗口(移动平均)来看一下每日新增病例和死亡人数。</p><pre class="ks kt ku kv gt ng nh ni nj aw nk bi"><span id="f47a" class="nl mp it nh b gy nm nn l no np">covid_daily.data(country='israel', chart = 'graph-cases-daily',  as_json=False).plot(figsize=(12,8), title="New Cases")</span><span id="c18c" class="nl mp it nh b gy nq nn l no np">covid_daily.data(country='israel', chart = 'graph-cases-daily',  as_json=False).rolling(7).mean().plot(figsize=(12,8), title="New Cases with Moving Average of 7 days")</span><span id="7943" class="nl mp it nh b gy nq nn l no np">covid_daily.data(country='israel', chart = 'graph-deaths-daily',  as_json=False).plot(figsize=(12,8), title="Deaths")</span><span id="d9f5" class="nl mp it nh b gy nq nn l no np">covid_daily.data(country='israel', chart = 'graph-deaths-daily',  as_json=False).rolling(7).mean().plot(figsize=(12,8), title="Deaths with Moving Average of 7 days")</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi od"><img src="../Images/c0fa8288d7304461a119c194d1c209df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7AadsGTN1JrmxRE4.png"/></div></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oe"><img src="../Images/bc6d5b0f56e063d2d30f8815ee847ca2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*r5iOR4RFsqocjXo_.png"/></div></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi of"><img src="../Images/06bf14472d403b42e7ad75cbc53a2c61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rqQ4yOryE9c69XfY.png"/></div></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi og"><img src="../Images/09c6efaf4529528888873abb6770e2d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*17OyZFUcGweDV6Ls.png"/></div></div></figure></div><div class="ab cl oh oi hx oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="im in io ip iq"><p id="b980" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><em class="oo">原载于</em><a class="ae mn" href="https://predictivehacks.com/measure-the-effectiveness-of-covid-19-vaccinations/" rel="noopener ugc nofollow" target="_blank"><em class="oo">https://predictivehacks.com</em></a><em class="oo">。</em></p></div></div>    
</body>
</html>