<html>
<head>
<title>Modeling Seasonality of Airbnb Prices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Airbnb价格的季节性建模</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/modeling-seasonality-of-airbnb-prices-80bd60ea307?source=collection_archive---------1-----------------------#2020-06-16">https://pub.towardsai.net/modeling-seasonality-of-airbnb-prices-80bd60ea307?source=collection_archive---------1-----------------------#2020-06-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="f599" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/data-science" rel="noopener ugc nofollow" target="_blank">数据科学</a>，<a class="ae ep" href="https://towardsai.net/p/category/programming/python" rel="noopener ugc nofollow" target="_blank"> Python </a>，<a class="ae ep" href="https://towardsai.net/p/category/programming/python" rel="noopener ugc nofollow" target="_blank"> R </a></h2><div class=""/><div class=""><h2 id="69c5" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用Python和R的多项式回归实用指南</h2></div><p id="4096" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">多年来，合租扰乱了酒店的价格和入住率。对于新冠肺炎，社交距离、卫生和退款政策可能是新的干扰。在本文中，我们构建了一个多项式回归模型来预测给定日期的Airbnb租赁价格。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ln"><img src="../Images/33e37aa4340913a20a7688c097a7c445.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xUof7llD3hYBWdPV_6IYYg.jpeg"/></div></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk translated">克里斯·罗斯·哈里斯在<a class="ae md" href="https://unsplash.com/photos/bJqeJxeyiJE" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="0c53" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">数据</h1><p id="9b5e" class="pw-post-body-paragraph kr ks it kt b ku mw kd kw kx mx kg kz la my lc ld le mz lg lh li na lk ll lm im bi translated">数据来源于Airbnb网站的公开信息。文件<code class="fe nb nc nd ne b">calendar_train.csv</code>和<code class="fe nb nc nd ne b">calendar_test.csv </code>包含Airbnb单元的可用性和价格数据。</p><p id="4ca5" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">每一行都描述了在<code class="fe nb nc nd ne b">date</code>的<code class="fe nb nc nd ne b">listing_id</code>上进行的预订。如果预订是提前很久进行的，那么<code class="fe nb nc nd ne b">available</code>的值为<code class="fe nb nc nd ne b">f</code>，而<code class="fe nb nc nd ne b">price</code>为空(未知)。否则<code class="fe nb nc nd ne b">available</code>为<code class="fe nb nc nd ne b">t</code>并给出<code class="fe nb nc nd ne b">price</code>。</p><p id="186f" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">下面，我们展示了在2019年疫情奥运会之前，波士顿地区每月的挂牌均价。</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="nf ng l"/></div></figure><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/fa03ab8da6ac09e67902250b5499214a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/1*wxb_-vCWLPJ32WU8pZ4mTA.png"/></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk translated">波士顿地区Airbnb房源示例(<a class="ae md" href="http://insideairbnb.com/get-the-data.html" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><p id="bed9" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">平均预订价格在4月至10月期间最高，在11月至2月期间最低。夏季的高价格是意料之中的。在寒冷的月份可以观察到较低的价格。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/8cf55885b9dc92c35757dcb89519bcdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*lokGZOoHdys_lW5NgVykGQ.png"/></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk translated">在2019年疫情奥运会之前，波士顿地区Airbnb房源的月平均价格</figcaption></figure><p id="2033" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">周五和周六是预订最贵的工作日。这些是周末预订。其余几天平均价格相同。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/d04b278fee1e91019dd54d40b0eca3e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*Ok7BusxkE5ttvN79a-037g.png"/></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk translated">在2019年疫情奥运会之前，波士顿地区Airbnb房源的平均每日价格</figcaption></figure><h1 id="5830" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">R中的多项式回归</h1><p id="5bdf" class="pw-post-body-paragraph kr ks it kt b ku mw kd kw kx mx kg kz la my lc ld le mz lg lh li na lk ll lm im bi translated">我们将拟合一个回归模型，该模型使用该日期作为预测器，并预测该日期Airbnb租赁的平均价格。</p><p id="5875" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">为此，我们将日期转换成一个数字变量。然后我们考虑每个日期的平均价格。</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="nf ng l"/></div></figure><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/29bc2f70f260b06bbd37508e72d71405.png" data-original-src="https://miro.medium.com/v2/resize:fit:230/format:webp/1*aER45NAwaVGUjqsnGCMvhw.png"/></div></figure><blockquote class="nl"><p id="a3c4" class="nm nn it bd no np nq nr ns nt nu lm dk translated">当我们知道真正的均值函数Y相对于预测值x是曲线时，对预测值的多项式函数进行建模非常有用。</p></blockquote><figure class="nw nx ny nz oa ls gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/fd9e20de7df32a22ccc974475e3d5b58.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*xMdfhL8A1sqdlzumpkqabA.png"/></div></figure><p id="c15d" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">Python中多项式回归的两个流行选项是<a class="ae md" href="http://scikit-learn.org/" rel="noopener ugc nofollow" target="_blank"> scikit-learn </a>和<a class="ae md" href="http://www.statsmodels.org/" rel="noopener ugc nofollow" target="_blank"> StatsModels </a>。虽然scikit-learn提供了许多简单易学的算法，但StatsModels提供了统计学和计量经济学工具，这些工具与r等其他统计软件很接近。</p><p id="c9fb" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">来自R世界的新手仍然可以在Python笔记本中使用众所周知的R函数。</p><p id="1f90" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">下面我们使用R语言的Python接口<a class="ae md" href="https://pypi.org/project/rpy2/" rel="noopener ugc nofollow" target="_blank"> rpy2 </a>对Airbnb数据拟合多项式函数。<a class="ae md" href="https://rpy.sourceforge.io/rpy2/doc-dev/html/robjects.html#module-rpy2.robjects" rel="noopener ugc nofollow" target="_blank"> rpy2.robjects </a>中的对象<em class="ob"> r </em>代表正在运行的嵌入式R进程。</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="nf ng l"/></div></figure><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi oc"><img src="../Images/beb8c396a01030e23e85c0eda30ef8d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f85QCoAe4ZBwIRqO7gr3YA.png"/></div></div></figure><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi od"><img src="../Images/388717481a718dee3dac49cfbcf64395.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ap0UJIqkCdq0iuN0RxV_hQ.png"/></div></div></figure><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi oc"><img src="../Images/e4582e462463db77c644db98052223dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cOc--5j64PWLO9eis9TxAg.png"/></div></div></figure><h1 id="18dc" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">偏差与方差的权衡</h1><p id="e1ef" class="pw-post-body-paragraph kr ks it kt b ku mw kd kw kx mx kg kz la my lc ld le mz lg lh li na lk ll lm im bi translated">观察拟合训练数据的蓝线，我们可以观察到曲线随着多项式阶数的增加而增加。这是由于模型复杂性增加，因为高阶多项式试图追踪训练集中的每个单个数据点。尤其是在具有异常值的区域(图的开始和中间部分)，更高次的多项式倾向于朝着这些异常值的方向。</p><p id="517d" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">因此，具有50阶多项式的模型具有最高的方差。与低阶多项式相比，它在训练数据上也具有最低的偏差，这通过最高的R得分来反映，低阶多项式具有较低的R，这意味着较高的偏差，但方差较低。低阶多项式对训练数据不太敏感。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi oe"><img src="../Images/2364fd51536e1f83b0176b5a839704a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:394/format:webp/1*SU51WmmWfFYlt955wXaNUw.png"/></div></div></figure><p id="aa95" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">似乎随着多项式阶数的增加，R值也会增加。预计随着模型变得更加复杂，它将能够拾取更多信号，并更好地匹配训练集。当R值随着复杂性的增加而增加时，它不会过度拟合。</p><h1 id="6be3" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">结论</h1><p id="6760" class="pw-post-body-paragraph kr ks it kt b ku mw kd kw kx mx kg kz la my lc ld le mz lg lh li na lk ll lm im bi translated">多项式回归用于定义或描述曲线现象。本文展示了如何使用多项式模型预测Airbnb在给定日期的价格。我们还介绍了rpy2包，它允许R开发人员在Python生态系统中工作。</p><p id="91c8" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">多项式回归很少在实践中使用，除非科学理论要求使用多项式。更灵活的方法是使用分段多项式。特别是，我们可以使用连接的分段多项式，也称为样条。</p><p id="4fe7" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><a class="ae md" href="https://www.nytimes.com/2020/05/14/travel/hotels-versus-airbnb-pandemic.html" rel="noopener ugc nofollow" target="_blank">新冠肺炎破坏了扰乱者</a>吗？本文提供的代码可进一步用于分析Airbnb在新冠肺炎疫情期间的价格和上市情况。</p></div></div>    
</body>
</html>