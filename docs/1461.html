<html>
<head>
<title>Creating AI Web Apps using TensorFlow, Google Cloud Platform, and Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用TensorFlow、Google云平台和Firebase创建人工智能Web应用程序</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/creating-ai-web-apps-using-tensorflow-google-cloud-platform-and-firebase-127b0c1b2c2e?source=collection_archive---------1-----------------------#2021-02-01">https://pub.towardsai.net/creating-ai-web-apps-using-tensorflow-google-cloud-platform-and-firebase-127b0c1b2c2e?source=collection_archive---------1-----------------------#2021-02-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="b8ed" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/machine-learning" rel="noopener ugc nofollow" target="_blank">机器学习</a>，<a class="ae ep" href="https://towardsai.net/p/category/cloud-computing" rel="noopener ugc nofollow" target="_blank">云计算</a></h2><div class=""/><div class=""><h2 id="f814" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">从沙盒到云:如何轻松地将机器学习模型部署到生产Web应用程序中</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/ed7f981ab1496ea78acc4f73b7859032.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*C4ZNJ0Y4o14B5P92"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated"><a class="ae le" href="https://unsplash.com/@picsbyjameslee?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">李中清</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><h1 id="f2d8" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">介绍</h1><p id="31d6" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">为具有ML功能的web应用程序训练机器学习模型只是整个项目开发范围的一部分。一个经常被忽视的方面是超越沙盒，进入生产环境。在本文中，我将演示如何使用谷歌云平台(GCP)人工智能平台和云功能，通过预测服务轻松服务于张量流模型。之后，我将展示如何使用Firebase部署和托管web客户机，以使用HTTP请求查询模型。</p><p id="51d2" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">最终的项目架构将类似于下图:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/e70284220d3264d7055cfd4fc4c42ae4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TpMP0R6hzFxZdyCdlXMZmQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">项目架构概述</figcaption></figure><blockquote class="mz na nb"><p id="c8b4" class="lx ly nc lz b ma mt ka mc md mu kd mf nd mv mi mj ne mw mm mn nf mx mq mr ms ij bi translated">免责声明:本文将帮助您开始。这不是Firebase或者Google云平台的教程。要了解更多细节，我强烈建议读者访问官方文档。TensorFlow官方文档是获得更深入视图和细节的绝佳资源。</p></blockquote></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><h1 id="c649" class="lf lg iq bd lh li nn lk ll lm no lo lp kf np kg lr ki nq kj lt kl nr km lv lw bi translated">模型训练和保存</h1><h2 id="4fff" class="ns lg iq bd lh nt nu dn ll nv nw dp lp mg nx ny lr mk nz oa lt mo ob oc lv iw bi translated">用于模型训练的Google Colab</h2><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi od"><img src="../Images/ac72bf3629d81a31640c16ab1c53ec1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/0*6_slNXxTCIfANIuh.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">Google Colab是使用硬件加速器训练深度学习模型的优秀资源。最棒的是:它是免费的！</figcaption></figure><p id="521e" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">训练深度学习模型的一个很好的资源是<a class="ae le" href="http://colab.research.google.com" rel="noopener ugc nofollow" target="_blank"> Google Colab </a>。他们提供免费的GPU和TPU，两者都可以显著提高训练时间。这些都是免费提供的，对于更高级的用例，还有付费选项。训练之后，可以下载模型进行进一步的处理和部署。关于如何使用Colab并开始训练你的模型的细节，我推荐<a class="ae le" href="https://colab.research.google.com/github/tensorflow/docs/blob/master/site/en/tutorials/quickstart/beginner.ipynb" rel="noopener ugc nofollow" target="_blank">这篇教程</a>。</p><p id="6aad" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">以下代码定义了一个要使用的张量流模型示例:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oe of l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">使用Keras的示例模型</figcaption></figure><h2 id="6f76" class="ns lg iq bd lh nt nu dn ll nv nw dp lp mg nx ny lr mk nz oa lt mo ob oc lv iw bi translated">SavedModel格式</h2><p id="067b" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">训练结束后，可以使用TensorFlow的<strong class="lz ja"> SavedModel </strong>格式保存。该文件代表模型的<strong class="lz ja">版本</strong>，包含计算图和其他相关数据。参见<a class="ae le" href="https://www.tensorflow.org/guide/saved_model" rel="noopener ugc nofollow" target="_blank">此处</a>了解使用SavedModel的更多细节。以下代码片段显示了如何以保存的模型格式保存TensorFlow模型:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oe of l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi og"><img src="../Images/0569b546c75f001a6cec2e6d00df7aa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:586/format:webp/1*mVSJ6IOJ2BP53FITWbz6Ag.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">版本化模型是机器学习工程中的一个重要实践。任何改进或变更都将更容易监控、记录和跟踪。</figcaption></figure><p id="8181" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated"><strong class="lz ja">版本化</strong>您的模型使您能够跟踪变更和改进。这使得将应用程序部署或回滚到先前已知的良好模型变得更加容易。例如，这里显示的图显示了包含目录<code class="fe oh oi oj ok b">doodle_rnn</code>中模型的三个版本的目录。</p></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><h1 id="4574" class="lf lg iq bd lh li nn lk ll lm no lo lp kf np kg lr ki nq kj lt kl nr km lv lw bi translated">预测服务</h1><p id="110b" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">将训练好的模型部署到生产环境中的一个简单方法是使用GCP AI平台创建一个<strong class="lz ja">预测服务</strong>。web应用程序<strong class="lz ja">请求</strong>对一些查询数据(例如，用户输入)进行预测，预测服务将提供模型的预测作为<strong class="lz ja">响应</strong>。首先，您需要登录GCP并创建一个项目。参见<a class="ae le" href="https://cloud.google.com/appengine/docs/standard/nodejs/building-app/creating-project" rel="noopener ugc nofollow" target="_blank">此处</a>了解在GCP创建项目的更多细节。</p><h2 id="e95f" class="ns lg iq bd lh nt nu dn ll nv nw dp lp mg nx ny lr mk nz oa lt mo ob oc lv iw bi translated">为您的项目创建存储桶</h2><p id="35db" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">创建项目后，将保存的模型存储在<strong class="lz ja">桶</strong>中。按照<a class="ae le" href="https://cloud.google.com/storage/docs/creating-buckets" rel="noopener ugc nofollow" target="_blank">这个例子</a>创建桶，进行快速简单的演练。</p><p id="7075" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">根据官方文件:</p><blockquote class="mz na nb"><p id="2584" class="lx ly nc lz b ma mt ka mc md mu kd mf nd mv mi mj ne mw mm mn nf mx mq mr ms ij bi translated">存储桶是保存数据的基本容器。您存储在云存储中的所有内容都必须包含在一个桶中。</p></blockquote><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ol"><img src="../Images/735152f5b54dfad7b974b246b0865985.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kN4Iq1eoJMtKE9rjWSe9OQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">GCP桶创作形式。</figcaption></figure><p id="62b3" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">准备好bucket后，将SavedModel的目录上传到其中。例如，如果您有一个目录<code class="fe oh oi oj ok b">~/models/doodle_rnn</code>，其中包含模型版本<code class="fe oh oi oj ok b">0001</code>、<code class="fe oh oi oj ok b">0002</code>和<code class="fe oh oi oj ok b">0003</code>，您将上传根目录(换句话说，<code class="fe oh oi oj ok b">doodle_rnn</code>，以及所有版本)。</p><h2 id="33c3" class="ns lg iq bd lh nt nu dn ll nv nw dp lp mg nx ny lr mk nz oa lt mo ob oc lv iw bi translated">创建模型</h2><p id="035d" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">将保存的模型上传到项目桶后，在AI平台上创建一个<strong class="lz ja">模型</strong>。使用左侧导航菜单，在人工智能部分下，导航到人工智能平台，然后单击“创建模型”。或者，点击<a class="ae le" href="http://console.cloud.google.com/ai-platform/models" rel="noopener ugc nofollow" target="_blank">此处</a>进入同一页面。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi om"><img src="../Images/20d143a345bc35308f09549d7f958316.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VDafu_AYo1px-2YwfqIwWQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">GCP人工智能平台上的新模型创建形式</figcaption></figure><blockquote class="mz na nb"><p id="ba0b" class="lx ly nc lz b ma mt ka mc md mu kd mf nd mv mi mj ne mw mm mn nf mx mq mr ms ij bi translated">关于在人工智能平台上创建模型的更多细节，见<a class="ae le" href="https://cloud.google.com/ai-platform/prediction/docs/deploying-models#deploy_models_and_versions" rel="noopener ugc nofollow" target="_blank">这个例子</a></p></blockquote><p id="7c22" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">在创建了<strong class="lz ja">模型资源</strong>之后，通过点击您的模型资源，然后点击<code class="fe oh oi oj ok b">NEW VERSION</code>，创建一个<strong class="lz ja">模型版本</strong>。填写所有必需的版本详细信息，包括机器类型和模型资源的完整路径。这是桶、<strong class="lz ja">中<strong class="lz ja">位置的完整路径，包括版本目录</strong>(例如<code class="fe oh oi oj ok b">doodle_rnn/0003</code>)。</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi on"><img src="../Images/891276c0a6962248faa88ba8d3533b62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ohub_3IxEJ5HFhrAZL_2sQ.png"/></div></div></figure><blockquote class="mz na nb"><p id="54a0" class="lx ly nc lz b ma mt ka mc md mu kd mf nd mv mi mj ne mw mm mn nf mx mq mr ms ij bi translated"><strong class="lz ja">重要事项</strong>:选择机器类型时要小心。对于更实惠的选项，请确保选择低端机选项，以避免高成本。</p></blockquote><p id="c455" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">在创建了模型版本之后，您就已经成功地将您的模型部署到了云中。</p></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><h1 id="1e99" class="lf lg iq bd lh li nn lk ll lm no lo lp kf np kg lr ki nq kj lt kl nr km lv lw bi translated">应用后端</h1><p id="1d10" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">我们可以编写一个GCP云函数来监听预测请求，加载模型，并生成和返回预测。</p><h2 id="e1cf" class="ns lg iq bd lh nt nu dn ll nv nw dp lp mg nx ny lr mk nz oa lt mo ob oc lv iw bi translated">服务帐户</h2><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oo"><img src="../Images/e9e972d0141a1147b042f8d4c052aa6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LUIF5i9vR09rIF_i6wDGsQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">GCP上的服务帐户创建表单</figcaption></figure><p id="8d88" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">需要一个<a class="ae le" href="https://cloud.google.com/iam/docs/understanding-service-accounts" rel="noopener ugc nofollow" target="_blank"> <strong class="lz ja">服务帐户</strong> </a> <strong class="lz ja"> </strong>来认证客户端代码和访问部署的模型。在左侧导航菜单中，转到IAM &amp;管理部分，然后单击服务帐户。这将显示一个表格，其中包含与您的项目关联的所有服务帐户。填写表格并创建一个新的服务帐户。然后，给它分配<strong class="lz ja"> ML引擎开发人员角色</strong>。这将允许服务帐户使用部署的模型进行预测，除此之外别无其他。</p><blockquote class="mz na nb"><p id="99ec" class="lx ly nc lz b ma mt ka mc md mu kd mf nd mv mi mj ne mw mm mn nf mx mq mr ms ij bi translated">根据需要分配权限是一种很好的做法，这样可以避免将来的冲突或意外的访问权限。</p></blockquote><h2 id="1ce2" class="ns lg iq bd lh nt nu dn ll nv nw dp lp mg nx ny lr mk nz oa lt mo ob oc lv iw bi translated">云函数</h2><p id="2b19" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">我们将使用云功能来处理我们的web应用程序的后端。这是Python中的一个无服务器函数，每次我们向指定的URL发送web请求时都会触发这个函数。查看<a class="ae le" href="https://cloud.google.com/functions" rel="noopener ugc nofollow" target="_blank">此处</a>了解更多关于谷歌云功能的细节。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi op"><img src="../Images/1786dbcfde1b0819e1e4946d4a1705d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*FxhVSss9pol3zGNO.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">谷歌云功能徽标</figcaption></figure><p id="988e" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">要开始使用:</p><ul class=""><li id="3234" class="oq or iq lz b ma mt md mu mg os mk ot mo ou ms ov ow ox oy bi translated"><a class="ae le" href="https://cloud.google.com/sdk/docs/install" rel="noopener ugc nofollow" target="_blank">下载并安装</a>Google Cloud SDK。这将使您能够部署您的云功能。</li><li id="a1c6" class="oq or iq lz b ma oz md pa mg pb mk pc mo pd ms ov ow ox oy bi translated">下载<a class="ae le" href="https://github.com/googleapis/google-api-python-client" rel="noopener ugc nofollow" target="_blank"> Google API Python客户端</a>。我们将需要它从Python云函数代码中与我们部署的模型进行交互。</li><li id="b485" class="oq or iq lz b ma oz md pa mg pb mk pc mo pd ms ov ow ox oy bi translated">可选，强烈推荐:下载Python 的<a class="ae le" href="https://github.com/GoogleCloudPlatform/functions-framework-python" rel="noopener ugc nofollow" target="_blank">函数框架。这是一个轻量级框架，允许你在本地运行云功能。这对于开发和调试来说<strong class="lz ja">非常有用</strong>。</a></li></ul><p id="4014" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">下面是一个Python云函数，它处理HTTP请求，加载我们的模型，并返回一个预测:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="23db" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">需要记住的一些重要变量是:</p><ul class=""><li id="7abe" class="oq or iq lz b ma mt md mu mg os mk ot mo ou ms ov ow ox oy bi translated"><code class="fe oh oi oj ok b">GOOGLE_APPLICATION_CREDENTIALS_FILE</code>:用于<strong class="lz ja">本地调试</strong>的环境变量。如果在本地运行，将其设置为<strong class="lz ja">服务帐户密钥文件</strong>所在的路径(例如，使用. env文件)。</li><li id="2406" class="oq or iq lz b ma oz md pa mg pb mk pc mo pd ms ov ow ox oy bi translated"><code class="fe oh oi oj ok b">GOOGLE_APPLICATION_CREDENTIALS</code>:该环境变量是<strong class="lz ja">使用ML服务</strong>所必需的。如果在本地运行云功能，则如上所述用<code class="fe oh oi oj ok b">GOOGLE_APPLICATION_CREDENTIALS_FILE</code>进行设置。否则，当您通过<code class="fe oh oi oj ok b">service-account</code>选项部署该功能时，可以通过CLI 直接设置该值<strong class="lz ja">，如部署示例所示。</strong></li><li id="7436" class="oq or iq lz b ma oz md pa mg pb mk pc mo pd ms ov ow ox oy bi translated"><code class="fe oh oi oj ok b">WEB_CLIENT_URL</code>:这个环境变量是web客户端的URL。这是<strong class="lz ja">安全启用</strong><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" rel="noopener ugc nofollow" target="_blank"><strong class="lz ja">CORS</strong></a><strong class="lz ja"/>所需要的，否则，客户端请求会失败。</li><li id="c0fb" class="oq or iq lz b ma oz md pa mg pb mk pc mo pd ms ov ow ox oy bi translated"><code class="fe oh oi oj ok b">model_path = request.json[“model_path”]</code>:这是一个让客户指定使用哪个型号版本的有用方法。例如，当进行A/B测试时，web客户端根据一些环境变量告诉云函数使用什么模型(参见下面的Web客户端部分的示例)。云函数只是加载指定的模型并返回预测结果。</li></ul><p id="0845" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">要将您的功能部署到云中，请在您的终端中执行以下命令:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oe of l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">使用gcloud SDK部署云功能的CLI命令</figcaption></figure><p id="15cd" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">一些重要且有用的命令选项:</p><ul class=""><li id="51fb" class="oq or iq lz b ma mt md mu mg os mk ot mo ou ms ov ow ox oy bi translated">确保这是您新创建的服务帐户。这样，当功能被部署时，它被部署了正确的角色和权限(在本例中，是<em class="nc"> ML引擎开发人员</em>角色)</li><li id="2d99" class="oq or iq lz b ma oz md pa mg pb mk pc mo pd ms ov ow ox oy bi translated"><code class="fe oh oi oj ok b">--trigger-http</code>:如果您希望您的函数由HTTP请求触发(例如，而不是<a class="ae le" href="https://en.wikipedia.org/wiki/Remote_procedure_call" rel="noopener ugc nofollow" target="_blank"> RPC </a>)，请指定此项。</li><li id="9e42" class="oq or iq lz b ma oz md pa mg pb mk pc mo pd ms ov ow ox oy bi translated"><code class="fe oh oi oj ok b">--env-vars-file</code>:这允许你用环境变量指定一个<code class="fe oh oi oj ok b">env.yaml</code>文件。这是一个非常有用的特性，可以用任何您想打包的值来部署您的应用程序(例如，上面的云函数中显示的<code class="fe oh oi oj ok b">WEB_CLIENT_URL</code>的值)。</li></ul><blockquote class="mz na nb"><p id="a24f" class="lx ly nc lz b ma mt ka mc md mu kd mf nd mv mi mj ne mw mm mn nf mx mq mr ms ij bi translated">关于<strong class="lz ja">部署</strong>云功能时设置环境变量的更多细节，请参见<a class="ae le" href="https://cloud.google.com/functions/docs/env-var" rel="noopener ugc nofollow" target="_blank">这里的</a>。</p></blockquote></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><h1 id="36b1" class="lf lg iq bd lh li nn lk ll lm no lo lp kf np kg lr ki nq kj lt kl nr km lv lw bi translated">用Firebase托管Web客户端</h1><p id="cd47" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">Firebase是谷歌开发的一个平台，用于创建网络和移动应用。它提供了许多有用的功能，并与web应用程序中通常需要的工具(如身份验证、监控、存储等)很好地集成在一起。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/7a854567d223aa65ed9b4b22a1705b1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/0*2uaUN7N2UcE7lgLF.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">Firebase徽标</figcaption></figure><p id="78d1" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">我们将使用Firebase的托管服务来部署和托管我们的web应用程序。要开始使用:</p><ul class=""><li id="2678" class="oq or iq lz b ma mt md mu mg os mk ot mo ou ms ov ow ox oy bi translated">下载Firebase SDK</li><li id="296c" class="oq or iq lz b ma oz md pa mg pb mk pc mo pd ms ov ow ox oy bi translated">从现有的CGP项目中创建一个Firebase项目。点击添加项目，然后输入您的GCP项目名称，并创建Firebase项目。</li><li id="8107" class="oq or iq lz b ma oz md pa mg pb mk pc mo pd ms ov ow ox oy bi translated">在您的终端中，执行<code class="fe oh oi oj ok b">firebase login</code>登录Firebase。</li><li id="380e" class="oq or iq lz b ma oz md pa mg pb mk pc mo pd ms ov ow ox oy bi translated">执行<code class="fe oh oi oj ok b">firebase init</code>来初始化您的项目。选择托管功能。选择选项<code class="fe oh oi oj ok b">Use an existing project</code>，然后选择您新创建的项目。<strong class="lz ja">注意:</strong>在填写下面的<code class="fe oh oi oj ok b">What do you want to use as your public directory?</code>部分时，确保指定正确的构建目录。例如，如果您使用一个类似于<a class="ae le" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> npm </a>的工具，您可以将<code class="fe oh oi oj ok b">build </code>目录指定为公共目录。通过这种方式，Firebase知道在哪里寻找web应用程序的生产就绪构建版本，并将其推送到云中。</li><li id="c805" class="oq or iq lz b ma oz md pa mg pb mk pc mo pd ms ov ow ox oy bi translated">执行<code class="fe oh oi oj ok b">firebase deploy</code>进行部署。</li></ul><p id="f0dc" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">就是这样！部署就是这么简单！</p><h1 id="65b4" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">真实世界应用程序:草图绘制分类器</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pf"><img src="../Images/fa1f1b21aee8f7062b50763224fdd5e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YMZt7FvHhKm6lerIgZa_rg.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">使用本文介绍的方法创建的AI web应用程序示例。</figcaption></figure><p id="1ba8" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">我使用本文中介绍的完全相同的方法创建并部署了一个web应用程序，从使用Colab进行培训到使用Python Cloud函数处理HTTP请求，以及这两者之间的一切。希望，这将作为一个指南，让你开始创建和部署惊人的人工智能网络应用程序。</p><h1 id="47fe" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">结论</h1><p id="f7c3" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">在本文中，我展示了一个使用预测服务的web应用程序的部署和产品化的端到端演练。具体来说，我讲述了如何:</p><ul class=""><li id="6d85" class="oq or iq lz b ma mt md mu mg os mk ot mo ou ms ov ow ox oy bi translated">使用Colab免费培训模型</li><li id="fae1" class="oq or iq lz b ma oz md pa mg pb mk pc mo pd ms ov ow ox oy bi translated">使用SavedModel格式保存模型</li><li id="28bf" class="oq or iq lz b ma oz md pa mg pb mk pc mo pd ms ov ow ox oy bi translated">使用人工智能平台创建预测服务</li><li id="7277" class="oq or iq lz b ma oz md pa mg pb mk pc mo pd ms ov ow ox oy bi translated">使用云函数创建轻量级后端</li><li id="d5b9" class="oq or iq lz b ma oz md pa mg pb mk pc mo pd ms ov ow ox oy bi translated">使用Firebase主机部署现有的web客户端</li></ul><p id="5b89" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">这种方法将使您能够以非常实惠的成本选项轻松快速地部署任何未来的机器学习项目。</p><h2 id="63cb" class="ns lg iq bd lh nt nu dn ll nv nw dp lp mg nx ny lr mk nz oa lt mo ob oc lv iw bi translated">小心成本</h2><p id="a01a" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">记住你的应用程序的使用，并留意你的预算。尽管对于大多数用户项目来说，价格范围是相当合理的，但总是存在运行意外的大成本的风险。一个强有力的建议是<a class="ae le" href="https://cloud.google.com/billing/docs/how-to/budgets" rel="noopener ugc nofollow" target="_blank"> <strong class="lz ja">创建一个预算，并设置闹铃</strong> </a>一旦你的预算达到一定的阈值(例如0.50美元)就会自动触发。这将允许您在需要时监控和断开服务。</p></div></div>    
</body>
</html>