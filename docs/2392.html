<html>
<head>
<title>Analysis on Biodiversity in National Parks Projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">国家公园项目中的生物多样性分析</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/analysis-on-the-biodiversity-in-national-parks-projects-53d1859746ba?source=collection_archive---------1-----------------------#2021-12-03">https://pub.towardsai.net/analysis-on-the-biodiversity-in-national-parks-projects-53d1859746ba?source=collection_archive---------1-----------------------#2021-12-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="25fa" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/data-analysis" rel="noopener ugc nofollow" target="_blank">数据分析</a></h2><div class=""/><figure class="gl gn jx jy jz ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi jw"><img src="../Images/9e05a25351695b529b5b1275cde4c13e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mZ1bmx6H_EjWVwjemOn7Zg.jpeg"/></div></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">由<a class="ae kl" href="https://unsplash.com/@okta?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">塔妮娅·马雷·肖菲</a>在<a class="ae kl" href="https://unsplash.com/s/photos/biodiversity?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="44a2" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi lk translated"><span class="l ll lm ln bm lo lp lq lr ls di">在</span>这篇博客中，我们将对数据集“国家公园项目中的生物多样性”进行分析，该数据集可在<a class="ae kl" href="https://www.kaggle.com/mathisjander/biodiversity-in-national-parks-project" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>中获得。我们将使用可视化和统计来进行分析。记住这是一个简单的分析。我们不会应用任何最大似然算法。</p><p id="5b13" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">你可以在Kaggle查看我的<a class="ae kl" href="https://www.kaggle.com/karthikbhandary2/biodiversity-analysis/notebook?scriptVersionId=65858891" rel="noopener ugc nofollow" target="_blank">笔记本</a>。如果你喜欢，别忘了投票支持它。话虽如此。让我们开始分析数据集。</p><h1 id="935f" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">介绍</h1><p id="bba3" class="pw-post-body-paragraph km kn iq ko b kp mr kr ks kt ms kv kw kx mt kz la lb mu ld le lf mv lh li lj ij bi translated">该项目的目标是分析来自国家公园管理局的生物多样性数据，特别是在不同国家公园地点观察到的各种物种。</p><p id="a335" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">该项目将对数据进行范围界定、分析、准备和绘图，并试图解释分析结果。</p><p id="e76b" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">以下是本项目试图回答的几个问题:</p><ul class=""><li id="7973" class="mw mx iq ko b kp kq kt ku kx my lb mz lf na lj nb nc nd ne bi translated">物种保护状态的分布情况如何？</li><li id="5bba" class="mw mx iq ko b kp nf kt ng kx nh lb ni lf nj lj nb nc nd ne bi translated">某些种类的物种更有可能濒临灭绝吗？</li><li id="2541" class="mw mx iq ko b kp nf kt ng kx nh lb ni lf nj lj nb nc nd ne bi translated">物种及其保护状态之间的差异是否显著？</li><li id="540a" class="mw mx iq ko b kp nf kt ng kx nh lb ni lf nj lj nb nc nd ne bi translated">哪种动物最常见，它们在公园中的分布情况如何？</li></ul><h1 id="6ec9" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">项目目标</h1><p id="a73e" class="pw-post-body-paragraph km kn iq ko b kp mr kr ks kt ms kv kw kx mt kz la lb mu ld le lf mv lh li lj ij bi translated">在这个项目中，视角将通过国家公园服务的生物多样性分析师。国家公园管理局希望确保濒危物种的生存，以维持公园内的生物多样性水平。因此，作为分析员的主要目标是了解物种的特征及其保护状况，以及这些物种及其与国家公园的关系。提出的一些问题:</p><ul class=""><li id="57d1" class="mw mx iq ko b kp kq kt ku kx my lb mz lf na lj nb nc nd ne bi translated">物种保护状态的分布情况如何？</li><li id="4bb9" class="mw mx iq ko b kp nf kt ng kx nh lb ni lf nj lj nb nc nd ne bi translated">某些种类的物种更有可能濒临灭绝吗？</li><li id="b2c1" class="mw mx iq ko b kp nf kt ng kx nh lb ni lf nj lj nb nc nd ne bi translated">物种及其保护状态之间的差异是否显著？</li><li id="5a8d" class="mw mx iq ko b kp nf kt ng kx nh lb ni lf nj lj nb nc nd ne bi translated">哪种动物最常见，它们在公园中的分布情况如何？</li></ul><h1 id="b2e2" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">数据</h1><p id="a0f0" class="pw-post-body-paragraph km kn iq ko b kp mr kr ks kt ms kv kw kx mt kz la lb mu ld le lf mv lh li lj ij bi translated">这个项目有两个随包提供的数据集。第一个<code class="fe nk nl nm nn b">csv</code>文件包含每个物种的信息，另一个包含公园位置的物种观察。这些数据将用于分析项目的目标。</p><h1 id="99e6" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">分析</h1><p id="fa71" class="pw-post-body-paragraph km kn iq ko b kp mr kr ks kt ms kv kw kx mt kz la lb mu ld le lf mv lh li lj ij bi translated">在本节中，将采用描述性统计和数据可视化技术来更好地理解数据。统计推断也将用于检验观察值是否具有统计显著性。将要计算的一些关键指标包括:</p><ol class=""><li id="da12" class="mw mx iq ko b kp kq kt ku kx my lb mz lf na lj no nc nd ne bi translated">分布</li><li id="f64d" class="mw mx iq ko b kp nf kt ng kx nh lb ni lf nj lj no nc nd ne bi translated">计数</li><li id="e184" class="mw mx iq ko b kp nf kt ng kx nh lb ni lf nj lj no nc nd ne bi translated">物种间的关系</li><li id="9b1b" class="mw mx iq ko b kp nf kt ng kx nh lb ni lf nj lj no nc nd ne bi translated">物种保护状况</li><li id="cd2a" class="mw mx iq ko b kp nf kt ng kx nh lb ni lf nj lj no nc nd ne bi translated">对公园中物种的观察。</li></ol><h1 id="65c9" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">估价</h1><p id="1643" class="pw-post-body-paragraph km kn iq ko b kp mr kr ks kt ms kv kw kx mt kz la lb mu ld le lf mv lh li lj ij bi translated">最后，重新审视目标并检查分析的输出是否与第一组要回答的问题相对应(在目标部分)是一个好主意。这一部分还将思考在这个过程中学到了什么，以及是否有任何问题无法回答。这也可能包括局限性，或者是否可以使用不同的方法进行任何分析。</p><h1 id="4db1" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">导入必要的模块</h1><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="4921" class="nx lu iq nn b gy ny nz l oa ob">import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns<br/>%matplotlib inline</span></pre><h1 id="9bb3" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">加载数据</h1><p id="1ab0" class="pw-post-body-paragraph km kn iq ko b kp mr kr ks kt ms kv kw kx mt kz la lb mu ld le lf mv lh li lj ij bi translated">在接下来的步骤中，<code class="fe nk nl nm nn b">Observations.csv</code>和<code class="fe nk nl nm nn b">Species_info.csv</code>被读入为<code class="fe nk nl nm nn b">DataFrames</code>，分别称为<code class="fe nk nl nm nn b">observations</code>和<code class="fe nk nl nm nn b">species</code>。使用<code class="fe nk nl nm nn b">.head()</code>查看新创建的<code class="fe nk nl nm nn b">DataFrames</code>以检查其内容。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="e32c" class="nx lu iq nn b gy ny nz l oa ob">species = pd.read_csv("../input/biodiversity-in-national-parks-project/species_info.csv")<br/>species.head()</span></pre><figure class="np nq nr ns gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi oc"><img src="../Images/a10c419c20313bfe06d45ce276f9fbda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J6tr9vqO-fxpM-usPgHIzw.png"/></div></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</figcaption></figure><p id="bffd" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">它加载以下结果</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="8005" class="nx lu iq nn b gy ny nz l oa ob">observations = pd.read_csv("../input/biodiversity-in-national-parks-project/observations.csv")<br/>observations.head()</span></pre><figure class="np nq nr ns gt ka gh gi paragraph-image"><div class="gh gi od"><img src="../Images/fa96ca09b10c1a8114de12391db70321.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*pZcGURuoZzc67dzPG7QMtg.png"/></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</figcaption></figure><p id="b511" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们得到以下结果</p><h1 id="fc0b" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">数据特征</h1><p id="872e" class="pw-post-body-paragraph km kn iq ko b kp mr kr ks kt ms kv kw kx mt kz la lb mu ld le lf mv lh li lj ij bi translated">接下来，将检查数据集的尺寸，因为<code class="fe nk nl nm nn b">species</code>有5824行和4列，而<code class="fe nk nl nm nn b">observations</code>有23296行和3列。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="81d7" class="nx lu iq nn b gy ny nz l oa ob">print(f"Species Shape: <strong class="nn ja">{</strong>species.shape<strong class="nn ja">}</strong>")<br/>print(f"Observations Shape: <strong class="nn ja">{</strong>observations.shape<strong class="nn ja">}</strong>")</span><span id="6767" class="nx lu iq nn b gy oe nz l oa ob">#Result<br/>Species Shape: (5824, 4)<br/>Observations Shape: (23296, 3)</span></pre><p id="ef83" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">是时候更深入地研究一下<code class="fe nk nl nm nn b">species</code>数据了。第一件事是找出数据中不同物种的数量。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="2583" class="nx lu iq nn b gy ny nz l oa ob">print(f"No of unique species: <strong class="nn ja">{</strong>species.scientific_name.nunique()<strong class="nn ja">}</strong>")</span><span id="8483" class="nx lu iq nn b gy oe nz l oa ob">#Result<br/>No of unique species: 5541</span><span id="e3fd" class="nx lu iq nn b gy oe nz l oa ob">print(f"No of unique categories: <strong class="nn ja">{</strong>species.category.nunique()<strong class="nn ja">}</strong>")<br/>print(f"Categories: <strong class="nn ja">{</strong>species.category.unique()<strong class="nn ja">}</strong>")</span><span id="e59d" class="nx lu iq nn b gy oe nz l oa ob">#Result<br/>No of unique categories: 7<br/>Categories: ['Mammal' 'Bird' 'Reptile' 'Amphibian' 'Fish' 'Vascular Plant'<br/> 'Nonvascular Plant']</span><span id="5bf9" class="nx lu iq nn b gy oe nz l oa ob">species.groupby("category").size()<br/></span><span id="3ef3" class="nx lu iq nn b gy oe nz l oa ob">#Result<br/>category<br/>Amphibian              80<br/>Bird                  521<br/>Fish                  127<br/>Mammal                214<br/>Nonvascular Plant     333<br/>Reptile                79<br/>Vascular Plant       4470<br/>dtype: int64</span></pre><p id="aee0" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">从上述观察结果来看，维管植物是数据中最多的物种，有4470种，爬行动物最少，有79种。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="e31d" class="nx lu iq nn b gy ny nz l oa ob">print(f"No of unique status: <strong class="nn ja">{</strong>species.conservation_status.nunique()<strong class="nn ja">}</strong>")<br/>print(f"Conservation Status: <strong class="nn ja">{</strong>species.conservation_status.unique()<strong class="nn ja">}</strong>")</span><span id="db5c" class="nx lu iq nn b gy oe nz l oa ob">#Result<br/>No of unique status: 4<br/>Conservation Status: [nan 'Species of Concern' 'Endangered' 'Threatened' 'In Recovery']</span></pre><p id="4100" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">接下来，对conservation_status中的类别细分中的观察数量进行计数。有5633个nan值，这意味着它们是没有问题的物种。另一方面，有161种受关注的物种，16种濒临灭绝，10种受到威胁，4种正在恢复。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="834c" class="nx lu iq nn b gy ny nz l oa ob">print(f"na Values: <strong class="nn ja">{</strong>species.conservation_status.isna().sum()<strong class="nn ja">}</strong>")<br/>print(species.groupby('conservation_status').size())</span><span id="8e9a" class="nx lu iq nn b gy oe nz l oa ob">#Result<br/>na Values: 5633<br/>conservation_status<br/>Endangered             16<br/>In Recovery             4<br/>Species of Concern    161<br/>Threatened             10<br/>dtype: int64</span></pre><h1 id="7c85" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">观察</h1><p id="4a0a" class="pw-post-body-paragraph km kn iq ko b kp mr kr ks kt ms kv kw kx mt kz la lb mu ld le lf mv lh li lj ij bi translated">下一节讨论观察数据。第一项任务是检查数据集中的公园数量，而这里只有4个国家公园。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="dd3d" class="nx lu iq nn b gy ny nz l oa ob">print(f"No. of Parks: <strong class="nn ja">{</strong>observations.park_name.nunique()<strong class="nn ja">}</strong>")<br/>print(f"Parks: <strong class="nn ja">{</strong>observations.park_name.unique()<strong class="nn ja">}</strong>")</span><span id="31a6" class="nx lu iq nn b gy oe nz l oa ob">#Result<br/>No. of Parks: 4<br/>Parks: ['Great Smoky Mountains National Park' 'Yosemite National Park'<br/> 'Bryce National Park' 'Yellowstone National Park']</span></pre><p id="a6f3" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这是公园里记录的观察总数，在过去的7天里有3，314，739次观察…这是很多的观察！</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="f266" class="nx lu iq nn b gy ny nz l oa ob">print(f"observations: <strong class="nn ja">{</strong>observations.observations.sum()<strong class="nn ja">}</strong>")</span><span id="a5e9" class="nx lu iq nn b gy oe nz l oa ob">#Result<br/>observations: 3314739</span></pre><h1 id="6a14" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">分析</h1><p id="84d0" class="pw-post-body-paragraph km kn iq ko b kp mr kr ks kt ms kv kw kx mt kz la lb mu ld le lf mv lh li lj ij bi translated">第一项任务将是清理和探索<code class="fe nk nl nm nn b">species</code>中的<code class="fe nk nl nm nn b">conservation_status</code>列。</p><p id="0c1a" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">列<code class="fe nk nl nm nn b">conservation_status</code>有几个可能的值:</p><ul class=""><li id="4ac0" class="mw mx iq ko b kp kq kt ku kx my lb mz lf na lj nb nc nd ne bi translated"><code class="fe nk nl nm nn b">Species of Concern</code>:拒绝或似乎需要保护</li><li id="0ec4" class="mw mx iq ko b kp nf kt ng kx nh lb ni lf nj lj nb nc nd ne bi translated"><code class="fe nk nl nm nn b">Threatened</code>:易受危害</li><li id="df37" class="mw mx iq ko b kp nf kt ng kx nh lb ni lf nj lj nb nc nd ne bi translated"><code class="fe nk nl nm nn b">Endangered</code>:严重濒临灭绝</li><li id="24a6" class="mw mx iq ko b kp nf kt ng kx nh lb ni lf nj lj nb nc nd ne bi translated"><code class="fe nk nl nm nn b">In Recovery</code>:以前叫<code class="fe nk nl nm nn b">Endangered</code>，但目前在其分布区的全部或大部分区域都没有灭绝的危险</li></ul><p id="3f91" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在探索中，检测到了很多<code class="fe nk nl nm nn b">nan</code>值。这些值需要转换成<code class="fe nk nl nm nn b">No Intervention</code>。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="c2a2" class="nx lu iq nn b gy ny nz l oa ob">species.conservation_status.fillna("No Intervention", inplace=True)<br/>species.groupby("conservation_status").size()</span></pre><p id="179b" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">#结果</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="2422" class="nx lu iq nn b gy ny nz l oa ob">conservation_status<br/>Endangered              16<br/>In Recovery              4<br/>No Intervention       5633<br/>Species of Concern     161<br/>Threatened              10<br/>dtype: int64</span></pre><p id="0e4e" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">接下来是检查嵌套在<code class="fe nk nl nm nn b">conservation_status</code>列中的不同类别，不需要干预的类别除外。下面有表格和图表可供探索。</p><p id="b12c" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">处于<code class="fe nk nl nm nn b">Endangered</code>状态的动物中，7只为哺乳动物，4只为鸟类。在<code class="fe nk nl nm nn b">In Recovery</code>状态中，有3只鸟和1只哺乳动物，这可能意味着鸟比哺乳动物反弹得更多。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="2ce4" class="nx lu iq nn b gy ny nz l oa ob">conservationCategory = species[species.conservation_status != 'No Intervention']\<br/>.groupby(["conservation_status", "category"])["scientific_name"]\<br/>.count()\<br/>.unstack()<br/>conservationCategory</span></pre><figure class="np nq nr ns gt ka gh gi paragraph-image"><div class="gh gi of"><img src="../Images/9b0cd80b552ab3d5bee9323f92e137d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*r0j5RehVOHAfxPR-xj5V1A.png"/></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</figcaption></figure><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="fb2d" class="nx lu iq nn b gy ny nz l oa ob">ax = conservationCategory.plot(kind="bar", figsize=(8,6), stacked=True)<br/>ax.set_xlabel("Conservation Status")<br/>ax.set_ylabel("Number of Species");</span></pre><figure class="np nq nr ns gt ka gh gi paragraph-image"><div class="gh gi og"><img src="../Images/cfdfc6d939a7dd94f1a3705b22516b67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*te-nwNByy_SJpNiurbfQfw.png"/></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</figcaption></figure><h1 id="83c9" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">在保护中</h1><p id="96d7" class="pw-post-body-paragraph km kn iq ko b kp mr kr ks kt ms kv kw kx mt kz la lb mu ld le lf mv lh li lj ij bi translated">下一个问题是，某些种类的物种是否更有可能濒临灭绝？这可以通过创建一个名为<code class="fe nk nl nm nn b">is_protected</code>的新列来回答，并包含任何具有除<code class="fe nk nl nm nn b">No Intervention</code>以外的值的物种。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="6412" class="nx lu iq nn b gy ny nz l oa ob">species['is_protected'] = species.conservation_status != 'No Intervention'</span><span id="1477" class="nx lu iq nn b gy oe nz l oa ob">category_counts = species.groupby(['category', 'is_protected'])\<br/>                        .scientific_name.nunique()\<br/>                        .reset_index()\<br/>                        .pivot(columns='is_protected',<br/>                                      index='category',<br/>                                      values='scientific_name')\<br/>                        .reset_index()<br/>category_counts.columns = ['category', 'not_protected', 'protected']<br/><br/>category_counts</span></pre><figure class="np nq nr ns gt ka gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/6e34a038051ddcf7f07f453806b88e0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:628/format:webp/1*ecaOIyGv6YTXiFrCgOKMEw.png"/></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</figcaption></figure><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="46ca" class="nx lu iq nn b gy ny nz l oa ob">category_counts['percent_protected'] = category_counts.protected / \<br/>                                      (category_counts.protected + category_counts.not_protected) * 100<br/><br/>category_counts</span></pre><figure class="np nq nr ns gt ka gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/0b96961870c301193c84f2416c015619.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*oyHx3grtZ-CcCmb6N9K07w.png"/></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</figcaption></figure><h1 id="ab62" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">统计显著性</h1><p id="7672" class="pw-post-body-paragraph km kn iq ko b kp mr kr ks kt ms kv kw kx mt kz la lb mu ld le lf mv lh li lj ij bi translated">本节将运行一些卡方检验，以查看不同物种在保护状态率方面是否存在统计上的显著差异。要进行卡方检验，需要创建一个列联表。列联表应该是这样的:</p><figure class="np nq nr ns gt ka gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/cb02fd60324e5f79f18d0793751f20b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:452/format:webp/1*1g8StPQ5S1NwWeOh5jw37w.png"/></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</figcaption></figure><p id="9638" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">第一个测试将被称为<code class="fe nk nl nm nn b">contingency1</code>，需要填入哺乳动物和鸟类的正确数字。</p><p id="34ee" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">卡方检验的结果返回许多值，第二个值0.69是p值。检验统计显著性的标准p值为0.05。对于从该测试中检索的值，0.69的值远大于0.05。在哺乳动物和鸟类的情况下，它们之间似乎没有任何显著的关系，即变量是独立的。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="5edf" class="nx lu iq nn b gy ny nz l oa ob">from scipy.stats import chi2_contingency<br/><br/>contingency1 = [[30, 146],<br/>              [75, 413]]<br/>chi2_contingency(contingency1)</span></pre><p id="91a4" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">#结果</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="2dce" class="nx lu iq nn b gy ny nz l oa ob">(0.1617014831654557,<br/> 0.6875948096661336,<br/> 1,<br/> array([[ 27.8313253, 148.1686747],<br/>        [ 77.1686747, 410.8313253]]))</span></pre><p id="1fd4" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">下一对将测试<code class="fe nk nl nm nn b">Reptile</code>和<code class="fe nk nl nm nn b">Mammal</code>的区别。</p><p id="ff9c" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">格式如下所示:</p><figure class="np nq nr ns gt ka gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/4586f0b25ba4d4361207cdda7ab89157.png" data-original-src="https://miro.medium.com/v2/resize:fit:458/format:webp/1*u_PRiZe4V2Cd-7PpvvPfHA.png"/></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</figcaption></figure><p id="d3b7" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这次p值为0.039，低于0.05的标准阈值，可以认为爬行动物和哺乳动物之间的差异具有统计学意义。与爬行动物相比，哺乳动物被证明具有统计上显著更高的所需保护率。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="c08e" class="nx lu iq nn b gy ny nz l oa ob">contingency2 = [[30, 146],<br/>               [5, 73]]<br/>chi2_contingency(contingency2)</span></pre><p id="839e" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">#结果</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="1929" class="nx lu iq nn b gy ny nz l oa ob">(4.289183096203645,<br/> 0.03835559022969898,<br/> 1,<br/> array([[ 24.2519685, 151.7480315],<br/>        [ 10.7480315,  67.2519685]]))</span></pre><h1 id="7d04" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">公园里的物种</h1><p id="e4e0" class="pw-post-body-paragraph km kn iq ko b kp mr kr ks kt ms kv kw kx mt kz la lb mu ld le lf mv lh li lj ij bi translated">下一组分析将来自环保主义者的数据，因为他们在过去的7天里记录了在几个国家公园看到的不同物种。</p><p id="060c" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">第一步是查看通用名<code class="fe nk nl nm nn b">species</code>，以了解数据集中最常见的动物。这些数据需要被分割成单独的名字。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="9d64" class="nx lu iq nn b gy ny nz l oa ob">from itertools import chain<br/>import string<br/><br/>def remove_punctuations(text):<br/>    for punctuation <strong class="nn ja">in</strong> string.punctuation:<br/>        text = text.replace(punctuation, '')<br/>    return text<br/><br/>common_Names = species[species.category == "Mammal"]\<br/>    .common_names\<br/>    .apply(remove_punctuations)\<br/>    .str.split().tolist()<br/><br/>common_Names[:6]</span></pre><p id="3a64" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">#结果</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="2b4b" class="nx lu iq nn b gy ny nz l oa ob">[['Gappers', 'RedBacked', 'Vole'],<br/> ['American', 'Bison', 'Bison'],<br/> ['Aurochs',<br/>  'Aurochs',<br/>  'Domestic',<br/>  'Cattle',<br/>  'Feral',<br/>  'Domesticated',<br/>  'Cattle'],<br/> ['Domestic', 'Sheep', 'Mouflon', 'Red', 'Sheep', 'Sheep', 'Feral'],<br/> ['Wapiti', 'Or', 'Elk'],<br/> ['WhiteTailed', 'Deer']]</span></pre><p id="0eeb" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">下一步是清理每一行中的重复单词，因为它们在每个物种中不应被计数超过一次。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="139c" class="nx lu iq nn b gy ny nz l oa ob">cleanRows = []<br/><br/>for item <strong class="nn ja">in</strong> common_Names:<br/>    item = list(dict.fromkeys(item))<br/>    cleanRows.append(item)<br/>    <br/>cleanRows[:6]</span></pre><p id="711b" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">#结果</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="6673" class="nx lu iq nn b gy ny nz l oa ob">[['Gappers', 'RedBacked', 'Vole'],<br/> ['American', 'Bison'],<br/> ['Aurochs', 'Domestic', 'Cattle', 'Feral', 'Domesticated'],<br/> ['Domestic', 'Sheep', 'Mouflon', 'Red', 'Feral'],<br/> ['Wapiti', 'Or', 'Elk'],<br/> ['WhiteTailed', 'Deer']]</span><span id="f5f8" class="nx lu iq nn b gy oe nz l oa ob">res = list(chain.from_iterable(i if isinstance(i, list) else [i] for i <strong class="nn ja">in</strong> cleanRows))<br/>res[:6]</span></pre><p id="5b95" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">#结果</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="8c0b" class="nx lu iq nn b gy ny nz l oa ob">['Gappers', 'RedBacked', 'Vole', 'American', 'Bison', 'Aurochs']</span></pre><p id="f53b" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">现在数据已经准备好，可以计算每个单词出现的次数了。根据这一分析，似乎蝙蝠出现了23次，而鼩鼱出现了18次。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="3f5e" class="nx lu iq nn b gy ny nz l oa ob">words_counted = []<br/><br/>for i <strong class="nn ja">in</strong> res:<br/>    x = res.count(i)<br/>    words_counted.append((i,x))<br/><br/>pd.DataFrame(set(words_counted), columns =['Word', 'Count']).sort_values("Count", ascending = False).head(10)</span></pre><figure class="np nq nr ns gt ka gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/41fc2d9cc255ff08752d89a2a38a7822.png" data-original-src="https://miro.medium.com/v2/resize:fit:332/format:webp/1*GhaQsqe3y1Bw73MgFZzh_Q.png"/></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</figcaption></figure><p id="bb4e" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在数据中，不同类型的蝙蝠有几个不同的学名。下一个任务是找出哪一行物种指的是蝙蝠。将创建一个由布尔值组成的新列来检查is_bat是否为True。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="5ea6" class="nx lu iq nn b gy ny nz l oa ob">species['is_bat'] = species.common_names.str.contains(r"\bBat\b", regex = True)<br/><br/>species.head(10)</span></pre><figure class="np nq nr ns gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi om"><img src="../Images/4011fc15cdce925916dbb4a49b3c25bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1YXcc-AQqsSzHyObfxsuvA.png"/></div></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</figcaption></figure><p id="8f2b" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">下面是is_bat为true的数据子集，返回匹配的行。蝙蝠的种类似乎很多，受保护的和不受保护的种类混杂在一起。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="2f89" class="nx lu iq nn b gy ny nz l oa ob">species[species.is_bat]</span></pre><figure class="np nq nr ns gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi on"><img src="../Images/cc4d315fd4459fcade79409ac88522e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GihL_kHnfTB6UVIdkpdzUQ.png"/></div></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</figcaption></figure><p id="73a8" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">接下来，蝙蝠物种的结果将与观察结果合并，以创建一个包含四个国家公园蝙蝠观察结果的数据框架。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="a33c" class="nx lu iq nn b gy ny nz l oa ob">bat_observations = observations.merge(species[species.is_bat])<br/>bat_observations</span></pre><figure class="np nq nr ns gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi oo"><img src="../Images/57bdde4638e4afcf24dfe5faad170cfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nBm4oSGELRr6woWQu5EleA.png"/></div></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</figcaption></figure><p id="c0d3" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">让我们看看在每个国家公园总共观察了多少只蝙蝠(包括所有物种)。</p><p id="0539" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">过去7天在每个公园观察到的蝙蝠总数如下表所示。黄石国家公园似乎最大，有8362次观察，大烟山国家公园最小，有2411次。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="fe0e" class="nx lu iq nn b gy ny nz l oa ob">bat_observations.groupby('park_name').observations.sum().reset_index()</span></pre><figure class="np nq nr ns gt ka gh gi paragraph-image"><div class="gh gi op"><img src="../Images/7a1ddf9536d9edf6897634905ab31e73.png" data-original-src="https://miro.medium.com/v2/resize:fit:686/format:webp/1*9-iw-XEAjLHs78ZdmuUV_w.png"/></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</figcaption></figure><p id="b4f4" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">现在让我们来看一下每个公园受保护的蝙蝠和不受保护的蝙蝠的对比。似乎除了大烟山国家公园之外，每个公园都有更多受保护蝙蝠的踪迹。这对蝙蝠来说是一个好兆头。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="68ba" class="nx lu iq nn b gy ny nz l oa ob">obs_by_park = bat_observations.groupby(['park_name', 'is_protected']).observations.sum().reset_index()<br/>obs_by_park</span></pre><figure class="np nq nr ns gt ka gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/f39054001145467df23f358c786e9bb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/1*oKrJdqx6g99HQkxfXLU0IQ.png"/></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</figcaption></figure><p id="c984" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">下面是最后一次数据处理的输出图。从这张图表中，我们可以看到黄石国家公园和布莱斯国家公园似乎在蝙蝠数量方面做得很好，因为与未受保护的物种相比，受保护的蝙蝠出现的次数更多。大烟山国家公园可能需要加强他们在保护方面的努力，因为他们已经看到了更多不受保护的物种。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="9e8d" class="nx lu iq nn b gy ny nz l oa ob">plt.figure(figsize=(16, 4))<br/>sns.barplot(x=obs_by_park.park_name, y= obs_by_park.observations, hue=obs_by_park.is_protected)<br/>plt.xlabel('National Parks')<br/>plt.ylabel('Number of Observations')<br/>plt.title('Observations of Bats per Week')<br/>plt.show()</span></pre><figure class="np nq nr ns gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi om"><img src="../Images/9168ac6f1a72ce17b7b7fd5f1ab211e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qJ3w5JbFFnrUSTchLDv6vw.png"/></div></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</figcaption></figure><h1 id="5c69" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">结论</h1><p id="cdc1" class="pw-post-body-paragraph km kn iq ko b kp mr kr ks kt ms kv kw kx mt kz la lb mu ld le lf mv lh li lj ij bi translated">该项目能够对构成该数据集的四个国家公园中的各种物种进行一些数据可视化和推断。</p><p id="2bc4" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这个项目也能够回答最初提出的一些问题:</p><ol class=""><li id="4b00" class="mw mx iq ko b kp kq kt ku kx my lb mz lf na lj no nc nd ne bi translated">物种保护状态的分布情况如何？</li></ol><ul class=""><li id="81c0" class="mw mx iq ko b kp kq kt ku kx my lb mz lf na lj nb nc nd ne bi translated">绝大多数物种不在保护范围内。(5 633对191)</li></ul><p id="c41a" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">2.某些种类的物种更有可能濒临灭绝吗？</p><ul class=""><li id="6c10" class="mw mx iq ko b kp kq kt ku kx my lb mz lf na lj nb nc nd ne bi translated">哺乳动物和鸟类受到保护的比例最高。</li></ul><p id="67e8" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">3.物种及其保护状态之间的差异是否显著？</p><ul class=""><li id="f69e" class="mw mx iq ko b kp kq kt ku kx my lb mz lf na lj nb nc nd ne bi translated">虽然哺乳动物和鸟类在保护百分比上没有显著差异，但哺乳动物和爬行动物在统计上表现出显著差异。</li></ul><p id="a430" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">3.哪种动物最常见，它们在公园中的分布情况如何？</p><ul class=""><li id="fd51" class="mw mx iq ko b kp kq kt ku kx my lb mz lf na lj nb nc nd ne bi translated">研究发现蝙蝠出现的次数最多，而且它们最有可能在黄石国家公园被发现。</li></ul><p id="997f" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我真的希望你觉得这个分析很有帮助和有趣。如果你喜欢我的工作，那么别忘了在<a class="ae kl" href="https://karthikbhandary2.medium.com/" rel="noopener"> Medium </a>和<a class="ae kl" href="https://www.youtube.com/channel/UCKplT0-YqAQdCq6Xajcq5Tw" rel="noopener ugc nofollow" target="_blank"> YouTube </a>上关注我，获取更多关于生产力、自我提升、编码和技术的内容。另外，在<a class="ae kl" href="https://www.kaggle.com/karthikbhandary2/code" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>上查看我的作品，在<a class="ae kl" href="https://www.linkedin.com/in/karthik-bhandary-511778214/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上关注我。</p><p id="d4c0" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">看看我最近的作品:</p><div class="or os gp gr ot ou"><a href="https://levelup.gitconnected.com/basic-sql-for-datascience-part-1-16b5127203c" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd ja gy z fp oz fr fs pa fu fw iz bi translated">数据科学基础SQL第1部分</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">处理数据库时很有帮助</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi kf ou"/></div></div></a></div><div class="or os gp gr ot ou"><a href="https://levelup.gitconnected.com/joins-with-pandas-dataframes-bd077a6ec20d" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd ja gy z fp oz fr fs pa fu fw iz bi translated">与熊猫数据框架连接</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">连接是数据科学家应该知道的关键概念之一。当一个数据科学家在工作时，它通常会…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pd l"><div class="pj l pf pg ph pd pi kf ou"/></div></div></a></div></div></div>    
</body>
</html>