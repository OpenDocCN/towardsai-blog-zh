<html>
<head>
<title>Advancing Neural Search with Jina 2.0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用纪娜2.0推进神经搜索</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/advancing-neural-search-with-jina-2-0-bb9c12c574c0?source=collection_archive---------2-----------------------#2021-08-03">https://pub.towardsai.net/advancing-neural-search-with-jina-2-0-bb9c12c574c0?source=collection_archive---------2-----------------------#2021-08-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="f327" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/machine-learning/deep-learning" rel="noopener ugc nofollow" target="_blank">深度学习</a></h2><div class=""/><div class=""><h2 id="38fd" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">随着信息时代的到来，智能搜索海量信息的能力已经成为我们日常生活中不可或缺的一部分…</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/9a70d89be447aae7e0e6d9ae6de99e7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1nRiszZZlV1ELidz"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">挑战传统——用纪娜2.0引领搜索的未来！</figcaption></figure><h1 id="aab5" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">先决条件</h1><p id="fd7e" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">要了解神经搜索的基础知识以及它与传统搜索的不同之处，请浏览我之前的博客“纪娜驱动的下一代<a class="ae ms" rel="noopener ugc nofollow" target="_blank" href="/next-gen-search-powered-by-jina-dca6953ca068">”。它解释了云原生开源公司纪娜如何在神经搜索领域开创先河。它基于语义搜索的思想，解释了构建智能搜索应用程序所需的纪娜框架的基本构件。</a></p><h1 id="5373" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">回复:神经搜索</h1><p id="9477" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">简单回顾一下，神经搜索背后的想法是利用最先进的深度神经网络从数据堆中智能地检索上下文和语义相关的信息。神经搜索系统可以超越简单的文本搜索，允许您搜索所有格式的数据，包括图像、视频、音频，甚至pdf。</p><h1 id="082d" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">神经搜索的应用</h1><ul class=""><li id="8446" class="mt mu iq ly b lz ma mc md mf mv mj mw mn mx mr my mz na nb bi translated">一个<strong class="ly ja">问答聊天机器人</strong>可以由神经搜索驱动:首先索引所有硬编码的问答配对，然后语义映射用户对话到这些配对。</li><li id="7003" class="mt mu iq ly b lz nc mc nd mf ne mj nf mn ng mr my mz na nb bi translated">智能扬声器可以由神经搜索驱动:通过应用STT(语音到文本)识别，然后将文本语义映射到内部命令。</li><li id="244d" class="mt mu iq ly b lz nc mc nd mf ne mj nf mn ng mr my mz na nb bi translated">一个<strong class="ly ja">推荐系统</strong>可以由神经搜索驱动:以数字向量的形式嵌入用户项目信息，并找到特定用户/项目的前K个最近邻居。</li></ul><p id="72b8" class="pw-post-body-paragraph lw lx iq ly b lz nh ka mb mc ni kd me mf nj mh mi mj nk ml mm mn nl mp mq mr ij bi translated">神经搜索创造了一种理解世界的新方法，并为我们提供了在互联网上对大量数据进行智能信息检索的能力。<strong class="ly ja">纪娜</strong>是一个云原生神经搜索平台，站在创造搜索未来的最前沿！</p><h1 id="57b8" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">纪娜2.0 —有什么变化？</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/22abeed75559eb8c7a62ac68b9d3ea58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*MQ-KoyyW0RvrE1g6W2UfaQ.jpeg"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated"><strong class="bd lg">纪娜1.x v/s纪娜2.0 </strong></figcaption></figure><p id="c683" class="pw-post-body-paragraph lw lx iq ly b lz nh ka mb mc ni kd me mf nj mh mi mj nk ml mm mn nl mp mq mr ij bi translated"><strong class="ly ja">纪娜1.x </strong>是一个复杂的怪物，有很多样板代码，没有那么多透明性，但是<strong class="ly ja">纪娜2.0 </strong>拥抱了“<strong class="ly ja"> <em class="nn">显式高于隐式</em> </strong>”的原则。为了拥抱神经搜索的力量，并让更多的观众可以使用它，纪娜推出了更容易学习、更容易采用和更快学习的2.0版本。</p><p id="53bc" class="pw-post-body-paragraph lw lx iq ly b lz nh ka mb mc ni kd me mf nj mh mi mj nk ml mm mn nl mp mq mr ij bi translated">纪娜1.x更难学习，很难习惯不同的组件，并以一致的方式将它们放入应用程序中。所有这些单独的组件都被抽象为一个简单的层，只有一个流和执行器，所有中间层(包括pod和peas)都隐藏在幕后，使您可以只关注真正重要的内容。T15】</p><p id="cec9" class="pw-post-body-paragraph lw lx iq ly b lz nh ka mb mc ni kd me mf nj mh mi mj nk ml mm mn nl mp mq mr ij bi translated">在构建智能搜索系统的旅程中，要开始使用纪娜2.0，你只需要知道三个概念- <strong class="ly ja">文档</strong>、<strong class="ly ja">执行者</strong>和<strong class="ly ja">流程</strong>，使用用户友好的pythonic界面，你将很快上手。</p><h1 id="c188" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">纪娜2.0的基本组件</h1><p id="fcb7" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated"><code class="fe no np nq nr b">Document</code>、<code class="fe no np nq nr b">Executor</code>、<code class="fe no np nq nr b">Flow</code>是纪娜的三个基本概念。</p><ul class=""><li id="a4c5" class="mt mu iq ly b lz nh mc ni mf ns mj nt mn nu mr my mz na nb bi translated">一个<a class="ae ms" href="https://github.com/jina-ai/jina/blob/master/.github/2.0/cookbooks/Document.md" rel="noopener ugc nofollow" target="_blank"> <strong class="ly ja">文件</strong> </a>是纪娜的基本数据类型</li><li id="6fda" class="mt mu iq ly b lz nc mc nd mf ne mj nf mn ng mr my mz na nb bi translated">一个<a class="ae ms" href="https://github.com/jina-ai/jina/blob/master/.github/2.0/cookbooks/Executor.md" rel="noopener ugc nofollow" target="_blank"> <strong class="ly ja">执行人</strong> </a>就是纪娜处理文件的方式</li><li id="7034" class="mt mu iq ly b lz nc mc nd mf ne mj nf mn ng mr my mz na nb bi translated">一个<a class="ae ms" href="https://github.com/jina-ai/jina/blob/master/.github/2.0/cookbooks/Flow.md" rel="noopener ugc nofollow" target="_blank"> <strong class="ly ja">流程</strong> </a>就是纪娜如何精简和缩放执行者</li></ul><h2 id="aff5" class="nv lf iq bd lg nw nx dn lk ny nz dp lo mf oa ob lq mj oc od ls mn oe of lu iw bi translated">文件</h2><p id="e74c" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated"><code class="fe no np nq nr b">Document</code>是纪娜操作的基本数据类型，它与数据的类型/格式无关。在纪娜，文本、图片、音频、视频都被视为文件。文档数据类型的超集是<code class="fe no np nq nr b">DocumentArray</code> <strong class="ly ja"> <em class="nn">，</em> </strong>，它将多个单独的文档包装起来，充当它们的容器。</p><p id="561c" class="pw-post-body-paragraph lw lx iq ly b lz nh ka mb mc ni kd me mf nj mh mi mj nk ml mm mn nl mp mq mr ij bi translated">您可以将一个<code class="fe no np nq nr b">DocumentArray</code>视为由多个句子组成的文本文件，其中每个句子代表一个<code class="fe no np nq nr b">Document</code>。A <code class="fe no np nq nr b">DocumentArray</code>是纪娜遗嘱执行人的一等公民，担任遗嘱执行人的输入输出。对于数据人员来说，您可以通过简单类比著名的Numpy库来理解“文档”。</p><blockquote class="og"><p id="2f4b" class="oh oi iq bd oj ok ol om on oo op mr dk translated">Document = np.floatDocumentArray = np.ndarray</p></blockquote><h2 id="b964" class="nv lf iq bd lg nw oq dn lk ny or dp lo mf os ob lq mj ot od ls mn ou of lu iw bi translated">执行者</h2><p id="b7b8" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated"><code class="fe no np nq nr b">Executor</code>是纪娜最小的算法单位，用于处理文档，将图像编码成向量，将向量存储在磁盘上，对结果进行排序，所有这些都被公式化为执行器。Executor提供了直观的界面，让AI开发者和工程师能够真正专注于算法。一些常见的遗嘱执行人如下:</p><ul class=""><li id="a242" class="mt mu iq ly b lz nh mc ni mf ns mj nt mn nu mr my mz na nb bi translated"><strong class="ly ja"> Crafter </strong> : Crafter用于将文档预处理成块。</li><li id="8ef2" class="mt mu iq ly b lz nc mc nd mf ne mj nf mn ng mr my mz na nb bi translated"><strong class="ly ja">编码器</strong>:编码器从手工艺者处获取输入的预处理过的文档卡盘，并将其编码成嵌入向量。</li><li id="7fae" class="mt mu iq ly b lz nc mc nd mf ne mj nf mn ng mr my mz na nb bi translated"><strong class="ly ja">索引器</strong>:索引器将编码的向量作为输入，并以键值的方式索引和存储向量。</li><li id="2eee" class="mt mu iq ly b lz nc mc nd mf ne mj nf mn ng mr my mz na nb bi translated">Ranker  : Ranker在索引存储上运行，根据一定的排名对结果进行排序。</li></ul><p id="feb8" class="pw-post-body-paragraph lw lx iq ly b lz nh ka mb mc ni kd me mf nj mh mi mj nk ml mm mn nl mp mq mr ij bi translated"><code class="fe no np nq nr b">Executor</code>通过<code class="fe no np nq nr b">@requests</code>修饰的函数就地处理<code class="fe no np nq nr b">DocumentArray</code>。以下是纪娜遗嘱执行人的特征:</p><ul class=""><li id="1694" class="mt mu iq ly b lz nh mc ni mf ns mj nt mn nu mr my mz na nb bi translated">一个<code class="fe no np nq nr b">Executor</code>应该直接从<code class="fe no np nq nr b">jina.Executor</code>类派生出子类。</li><li id="9e74" class="mt mu iq ly b lz nc mc nd mf ne mj nf mn ng mr my mz na nb bi translated">一个<code class="fe no np nq nr b">Executor</code>类是一个具有共享状态的函数包(通过<code class="fe no np nq nr b">self</code>)，允许它包含任意数量的具有任意名称的函数。</li><li id="5b99" class="mt mu iq ly b lz nc mc nd mf ne mj nf mn ng mr my mz na nb bi translated">用<code class="fe no np nq nr b">@requests</code>装饰器装饰的函数将根据它们的<code class="fe no np nq nr b">on=</code>端点被调用。</li></ul><p id="0cee" class="pw-post-body-paragraph lw lx iq ly b lz nh ka mb mc ni kd me mf nj mh mi mj nk ml mm mn nl mp mq mr ij bi translated">在纪娜，主要有两种方法来设计一个执行程序，所以让我们看一个简单的例子，看看如何使用Python和YAML创建一个执行程序:</p><ul class=""><li id="4a48" class="mt mu iq ly b lz nh mc ni mf ns mj nt mn nu mr my mz na nb bi translated"><strong class="ly ja">使用Python </strong></li></ul><p id="55b3" class="pw-post-body-paragraph lw lx iq ly b lz nh ka mb mc ni kd me mf nj mh mi mj nk ml mm mn nl mp mq mr ij bi translated">要在python中创建一个executor，您只需要从纪娜核心导入本地executor类，并创建一个相同的子类。在<code class="fe no np nq nr b"><strong class="ly ja">MyExecutor</strong></code>子类下，您可以通过在这些函数上附加<code class="fe no np nq nr b"><strong class="ly ja">@requests</strong></code>装饰器来定义许多函数，以使它们在流中可访问。</p><p id="532b" class="pw-post-body-paragraph lw lx iq ly b lz nh ka mb mc ni kd me mf nj mh mi mj nk ml mm mn nl mp mq mr ij bi translated">在定义了executor子类之后，您可以创建一个流程，并通过请求的端点<code class="fe no np nq nr b"><strong class="ly ja">/random_work</strong></code> <strong class="ly ja">调用executor，下面的</strong>是展示如何使用executor的代码片段:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ov ow l"/></div></figure><ul class=""><li id="f50b" class="mt mu iq ly b lz nh mc ni mf ns mj nt mn nu mr my mz na nb bi translated"><strong class="ly ja">使用YAML </strong></li></ul><p id="3322" class="pw-post-body-paragraph lw lx iq ly b lz nh ka mb mc ni kd me mf nj mh mi mj nk ml mm mn nl mp mq mr ij bi translated">执行器可以从YAML文件加载并存储到其中。下面是上面创建的python executor的副本，您可以将该文件保存为“exec.yml”。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="41fa" class="pw-post-body-paragraph lw lx iq ly b lz nh ka mb mc ni kd me mf nj mh mi mj nk ml mm mn nl mp mq mr ij bi translated">保存exec.yml文件后，您可以使用该文件构造一个执行器，并将其添加到新的或现有的纪娜流中:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ov ow l"/></div></figure><h2 id="0bb2" class="nv lf iq bd lg nw nx dn lk ny nz dp lo mf oa ob lq mj oc od ls mn oe of lu iw bi translated">流动</h2><p id="2a51" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">纪娜是如何精简和扩展执行者的，它代表了高层次的任务，如索引、搜索、训练等。它充当上下文管理器，并协调一组执行器来完成一项任务，例如，如果您想要索引数据，您需要一系列执行器，如crafter、encoder、indexer，它们相互协同工作，以实现所需的结果。</p><p id="a0aa" class="pw-post-body-paragraph lw lx iq ly b lz nh ka mb mc ni kd me mf nj mh mi mj nk ml mm mn nl mp mq mr ij bi translated"><code class="fe no np nq nr b">Flow</code>是一项服务，允许多个客户端通过gRPC / REST / WebSocket从公共或私有网络访问它。</p><p id="50bd" class="pw-post-body-paragraph lw lx iq ly b lz nh ka mb mc ni kd me mf nj mh mi mj nk ml mm mn nl mp mq mr ij bi translated">Flow遵循一种懒惰的构造模式，所以直到您使用<code class="fe no np nq nr b">with</code>打开它，它才会真正运行。只需从jina核心库导入流，然后向其中添加执行器，就可以创建流。要运行一个流程，您只需通过<code class="fe no np nq nr b">with</code>打开它，并发送数据请求，如下例所示:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ov ow l"/></div></figure><h1 id="179f" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">参考</h1><ol class=""><li id="a1d2" class="mt mu iq ly b lz ma mc md mf mv mj mw mn mx mr ox mz na nb bi translated">【https://github.com/jina-ai/jina T4】</li><li id="bcdf" class="mt mu iq ly b lz nc mc nd mf ne mj nf mn ng mr ox mz na nb bi translated"><a class="ae ms" href="https://github.com/jina-ai/jina/tree/master/.github/2.0/cookbooks" rel="noopener ugc nofollow" target="_blank">https://github.com/jina-ai/jina/tree/master/.github/2.0/cookbooks </a></li><li id="05a7" class="mt mu iq ly b lz nc mc nd mf ne mj nf mn ng mr ox mz na nb bi translated"><a class="ae ms" href="https://www.thinkwithgoogle.com/intl/en-apac/consumer-insights/consumer-trends/evolution-search/#:~:text=The%20world%20has%20changed%20dramatically,become%20more%20complex%20than%20ever" rel="noopener ugc nofollow" target="_blank">https://www.thinkwithgoogle.com</a></li></ol></div><div class="ab cl oy oz hu pa" role="separator"><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd"/></div><div class="ij ik il im in"><p id="80a7" class="pw-post-body-paragraph lw lx iq ly b lz nh ka mb mc ni kd me mf nj mh mi mj nk ml mm mn nl mp mq mr ij bi translated">如果你想了解更多，或者想让我写更多关于这个主题的东西，请随时联系我们。</p><p id="24d7" class="pw-post-body-paragraph lw lx iq ly b lz nh ka mb mc ni kd me mf nj mh mi mj nk ml mm mn nl mp mq mr ij bi translated">我的社交链接:<a class="ae ms" href="https://www.linkedin.com/in/shubhamsaboo/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae ms" href="https://twitter.com/Saboo_Shubham_" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae ms" href="https://github.com/Shubhamsaboo" rel="noopener ugc nofollow" target="_blank">Github</a></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pf"><img src="../Images/440d750e176b369a88c4dc1b5d6c03c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/0*KlTsiE8Moh_StxB6.gif"/></div></div></figure><p id="3f79" class="pw-post-body-paragraph lw lx iq ly b lz nh ka mb mc ni kd me mf nj mh mi mj nk ml mm mn nl mp mq mr ij bi translated"><em class="nn">如果你喜欢这篇文章或觉得它有帮助，请花一分钟按一下拍手按钮，它会增加文章对其他媒体用户的可见性。</em></p></div></div>    
</body>
</html>