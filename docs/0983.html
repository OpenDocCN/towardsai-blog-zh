<html>
<head>
<title>Natural Language Processing with spaCy — Steps and Examples</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于空间的自然语言处理——步骤与实例</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/natural-language-processing-with-spacy-steps-and-examples-155618e84103?source=collection_archive---------0-----------------------#2020-09-28">https://pub.towardsai.net/natural-language-processing-with-spacy-steps-and-examples-155618e84103?source=collection_archive---------0-----------------------#2020-09-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/01287189d8b1255550c9af84c8fb00af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bYXKcH8I-ByoXMjWRy6apw.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">图片来自<a class="ae jg" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3088958" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae jg" href="https://pixabay.com/users/xresch-7410129/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3088958" rel="noopener ugc nofollow" target="_blank"> xresch </a></figcaption></figure><h2 id="815b" class="jh ji jj bd b dl jk jl jm jn jo jp dk jq translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/nlp" rel="noopener ugc nofollow" target="_blank">自然语言处理</a></h2><div class=""/><div class=""><h2 id="0df7" class="pw-subtitle-paragraph kp js jj bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">使用空间库的各种NLP任务指南</h2></div><p id="6899" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">spaCy是Python中一个开源的高级自然语言处理(NLP)库。该库由Matthew Honnibal和Ines Montani开发，他们是Explosion.ai公司的创始人。<a class="ae jg" href="https://medium.com/towards-artificial-intelligence/text-mining-in-python-steps-and-examples-78b3f8fd913b" rel="noopener">在我之前的文章</a>中，我已经解释了使用NLTK库的自然语言处理。spaCy是专门为生产用途设计的，它有助于处理和理解大量文本。它提供了清晰和用户友好的API。</p><p id="7006" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">想了解更多关于NLP的知识，我邀请你来看看我的<a class="ae jg" href="https://medium.com/towards-artificial-intelligence/text-mining-in-python-steps-and-examples-78b3f8fd913b" rel="noopener">上一篇文章</a>。在本文中，我们将看到如何使用spaCy库来完成各种与NLP相关的任务。</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi md"><img src="../Images/34dcd42adba0e090bf4984ac04e9ede7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sFLZIt106etf3yD9.jpg"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">资料来源:https://spacy.io/</figcaption></figure><h1 id="de3e" class="mi mj jj bd mk ml mm mn mo mp mq mr ms ky mt kz mu lb mv lc mw le mx lf my mz bi translated">装置</h1><h2 id="d098" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="af56" class="na mj jj nm b gy nq nr l ns nt">#Installing spaCy library<br/>!pip install -U spaCy</span></pre><h1 id="d644" class="mi mj jj bd mk ml mm mn mo mp mq mr ms ky mt kz mu lb mv lc mw le mx lf my mz bi translated">如何加载模型？</h1><p id="ba04" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">spaCy有不同类型的预训练模型。这些模型使spaCy能够执行一些与NLP相关的任务，如词性标注、标记化、词汇化、命名实体识别、依存解析等。请在此查看<a class="ae jg" href="https://spacy.io/models" rel="noopener ugc nofollow" target="_blank">不同型号的型号。</a></p><p id="25d4" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">spaCy支持不同的语言模型。在这里，我们使用<code class="fe nz oa ob nm b"><strong class="lj jt">"en_core_web_sm"</strong></code>英国模式。</p><p id="b43c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">使用<code class="fe nz oa ob nm b"><strong class="lj jt">"spacy.load"</strong></code> <strong class="lj jt"> </strong>加载模型。</p><h2 id="7e38" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="fee0" class="na mj jj nm b gy nq nr l ns nt"># Importing the spaCy library</span><span id="cafc" class="na mj jj nm b gy oc nr l ns nt">import spacy</span><span id="2826" class="na mj jj nm b gy oc nr l ns nt"># Loading english model and initialize an object called 'nlp'</span><span id="83f9" class="na mj jj nm b gy oc nr l ns nt">nlp = spacy.load(“en_core_web_sm”)</span></pre><p id="a446" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们加载了模型并初始化了一个名为“nlp”的对象。无论何时调用nlp，它都会加载“en_core_web_sm”模型。这里,“nlp”对象是一个语言模型实例</p></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><h1 id="d99c" class="mi mj jj bd mk ml ok mn mo mp ol mr ms ky om kz mu lb on lc mw le oo lf my mz bi translated">读取字符串</h1><p id="8567" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">文本预处理是自然语言处理的重要组成部分和关键步骤。它将原始文本转换为机器学习算法可以更好地执行的数字。</p><p id="20a8" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在下面的文本示例中，</p><h2 id="7787" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="8ad9" class="na mj jj nm b gy nq nr l ns nt">text = """ The Republican president is being challenged by Democratic Party nominee Joe Biden, who is best known as Barack Obama’s vice-president but has been in US politics since the 1970s.As election day approaches, pollingcompanies will be trying to gauge the mood of the nation by asking voters which candidate they prefer."""</span><span id="dc93" class="na mj jj nm b gy oc nr l ns nt">#Passing the text to nlp and initialize an object called 'doc'</span><span id="dc21" class="na mj jj nm b gy oc nr l ns nt">doc = nlp(text)</span><span id="eca0" class="na mj jj nm b gy oc nr l ns nt">#Checking the type of doc object</span><span id="bfc4" class="na mj jj nm b gy oc nr l ns nt">type(doc)</span></pre><h2 id="f62b" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">输出</h2><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi op"><img src="../Images/23d6339d4fd2a011614b1dbc6934ffde.png" data-original-src="https://miro.medium.com/v2/resize:fit:444/format:webp/1*8n3745bUy8JTIaKdjAzuxQ.png"/></div></figure><p id="7f46" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">当上述文本传递给“nlp对象”时，spaCy首先将文本标记为产品“doc”对象。然后'<strong class="lj jt"> doc' </strong>对象被处理成几个步骤，如标记器、解析器、ner等..这也叫做<strong class="lj jt"> <em class="oq">处理流水线。</em></strong><strong class="lj jt">doc</strong>对象的类型是令牌。我们将逐一查看管道中涉及的步骤。</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi or"><img src="../Images/61eef6fb03410990a388654dd5e97b78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XxF5doSn9vqgD2xtlL65mA.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated"><a class="ae jg" href="https://spacy.io/usage/processing-pipelines" rel="noopener ugc nofollow" target="_blank">https://spacy.io/usage/processing-pipelines</a></figcaption></figure></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><h1 id="e23d" class="mi mj jj bd mk ml ok mn mo mp ol mr ms ky om kz mu lb on lc mw le oo lf my mz bi translated">句子检测</h1><p id="1e04" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">句子检测用于识别给定文本中句子的开始和结束。这有助于将原始文本划分成有意义的形式，也有助于执行词性标注和命名实体识别。spaCy使用<code class="fe nz oa ob nm b"><strong class="lj jt">sents</strong></code>属性来标识句子。</p><h2 id="68d9" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="01d0" class="na mj jj nm b gy nq nr l ns nt">#passing the above text example into nlp object</span><span id="57cd" class="na mj jj nm b gy oc nr l ns nt">sentence = nlp(text)</span><span id="46ab" class="na mj jj nm b gy oc nr l ns nt">#Identify the sentences using attribute</span><span id="aaef" class="na mj jj nm b gy oc nr l ns nt">sentences = list(sentence.sents)</span><span id="5dfb" class="na mj jj nm b gy oc nr l ns nt"># Length of the sentences</span><span id="0b90" class="na mj jj nm b gy oc nr l ns nt">print(" The lenght of the sentences:", len(sentences))</span><span id="22c1" class="na mj jj nm b gy oc nr l ns nt"># Reading the sentences</span><span id="a911" class="na mj jj nm b gy oc nr l ns nt">for sent in sentences:<br/>    print(sent)</span></pre><h2 id="47dc" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">输出</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="df8a" class="na mj jj nm b gy nq nr l ns nt">The lenght of the sentences: 2 </span><span id="6f63" class="na mj jj nm b gy oc nr l ns nt">The Republican president is being challenged by Democratic Party nominee Joe Biden, who is best known as Barack Obama’s vice-president but has been in US politics since the 1970s. </span><span id="6a13" class="na mj jj nm b gy oc nr l ns nt">As election day approaches, polling companies will be trying to gauge the mood of the nation by asking voters which candidate they prefer.</span></pre><p id="dd23" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">spaCy使用分隔符“句号”正确识别句子。从上面的例子中总结两句话。</p></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><h1 id="a8c8" class="mi mj jj bd mk ml ok mn mo mp ol mr ms ky om kz mu lb on lc mw le oo lf my mz bi translated">标记化</h1><p id="7b23" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">标记化是指将文本分成一系列单词或句子。它包括三个步骤:将一个复杂的句子分解成单词，理解每个单词对于句子的重要性，最后对输入的句子进行结构描述。</p><h2 id="c757" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><p id="9cf1" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">使用属性<strong class="lj jt">标记对<strong class="lj jt">文档</strong>进行标记</strong></p><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="d82f" class="na mj jj nm b gy nq nr l ns nt"># Tokenization</span><span id="4042" class="na mj jj nm b gy oc nr l ns nt">#Sample text</span><span id="95f8" class="na mj jj nm b gy oc nr l ns nt">text = “The Republican president is being challenged by Democratic Party nominee Joe Biden,”</span><span id="476c" class="na mj jj nm b gy oc nr l ns nt">#passing the text into nlp and store as a doc object</span><span id="022c" class="na mj jj nm b gy oc nr l ns nt">doc = nlp(text)</span><span id="a2da" class="na mj jj nm b gy oc nr l ns nt"># Tokenize the doc using token.text attribute</span><span id="76e2" class="na mj jj nm b gy oc nr l ns nt">for token in doc:<br/>    print (token.text)</span></pre><h2 id="3be2" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated"><strong class="ak">输出</strong></h2><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi os"><img src="../Images/9058bbe127e5af1dbaff4d9f4a27980b.png" data-original-src="https://miro.medium.com/v2/resize:fit:230/format:webp/1*rUd0EOmkvb_uzO3qF8r6eg.png"/></div></figure><p id="c5fd" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">从上面的输出中，文本被分割成标记。这些标记包含标点符号，像is、being等常用词也称为停用词。这些标点符号和停用词对我们的文本没有任何意义。因此，我们需要删除它。</p></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><h1 id="cb01" class="mi mj jj bd mk ml ok mn mo mp ol mr ms ky om kz mu lb on lc mw le oo lf my mz bi translated">停用词</h1><p id="118e" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">如上所述，停用词是语言中最常见的词，如“at”、“am”、“is”、“above”、“for”等。这些词不提供任何意义，通常从文本中删除。</p><p id="9ac7" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">spaCy有每个语言模型的停用词列表。下面的代码检查英语语言模型中的停用词列表。</p><h2 id="5d3b" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="6a88" class="na mj jj nm b gy nq nr l ns nt">#Checking the stopwords for enlgish language models</span><span id="289c" class="na mj jj nm b gy oc nr l ns nt">stopwords = spacy.lang.en.stop_words.STOP_WORDS</span><span id="0974" class="na mj jj nm b gy oc nr l ns nt"># check the length of stopwords</span><span id="e309" class="na mj jj nm b gy oc nr l ns nt">print(“The length of stopwords:”, len(stopwords))</span><span id="6682" class="na mj jj nm b gy oc nr l ns nt"># Printing the first five stopwords</span><span id="043e" class="na mj jj nm b gy oc nr l ns nt">for i in list(stopwords)[:5]:<br/>   print(i)</span></pre><h2 id="492f" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">输出</h2><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/b33f1344463b34a3ea88dd7d912a2684.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*KxxG91zAye7Boq6Tw8udJA.png"/></div></figure></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><h1 id="333f" class="mi mj jj bd mk ml ok mn mo mp ol mr ms ky om kz mu lb on lc mw le oo lf my mz bi translated">如何识别并去除文本中的停用词？</h1><p id="ada0" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">使用spaCy中的<code class="fe nz oa ob nm b"><strong class="lj jt">is_stop</strong></code>属性类识别并移除停用词。</p><h1 id="688b" class="mi mj jj bd mk ml mm mn mo mp mq mr ms ky mt kz mu lb mv lc mw le mx lf my mz bi translated">密码</h1><p id="fd97" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">识别停用词</p><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="aa5e" class="na mj jj nm b gy nq nr l ns nt">#Printing the stop words from our text example</span><span id="d112" class="na mj jj nm b gy oc nr l ns nt">for token in doc:<br/>  if token.is_stop:</span><span id="d63a" class="na mj jj nm b gy oc nr l ns nt">print(token)</span></pre><h1 id="88be" class="mi mj jj bd mk ml mm mn mo mp mq mr ms ky mt kz mu lb mv lc mw le mx lf my mz bi translated">输出</h1><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/9b7fc2f5cb817ba98fa6e1aa1d7fedb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*svqFfFlkQX6UQTbtVotwbQ.png"/></div></figure><p id="7e18" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">删除停用词</p></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><h1 id="3dd1" class="mi mj jj bd mk ml ok mn mo mp ol mr ms ky om kz mu lb on lc mw le oo lf my mz bi translated">密码</h1><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="276f" class="na mj jj nm b gy nq nr l ns nt"># Printing total number of tokens in doc</span><span id="0ecc" class="na mj jj nm b gy oc nr l ns nt">print(“Number of tokens in the doc:”, len(doc))</span><span id="df0a" class="na mj jj nm b gy oc nr l ns nt"># Removing the stopwords from the doc</span><span id="8f5e" class="na mj jj nm b gy oc nr l ns nt">doc2 = []</span><span id="f1fe" class="na mj jj nm b gy oc nr l ns nt">for token in doc:<br/>  if not token.is_stop:</span><span id="e4f9" class="na mj jj nm b gy oc nr l ns nt">doc2.append(token)</span><span id="a6a6" class="na mj jj nm b gy oc nr l ns nt"># Printing total number of tokens in doc after removing stopwords</span><span id="f8b0" class="na mj jj nm b gy oc nr l ns nt">print(“Number of tokens after removing stopwords:”, len(doc2))</span></pre><h1 id="a51b" class="mi mj jj bd mk ml mm mn mo mp mq mr ms ky mt kz mu lb mv lc mw le mx lf my mz bi translated">输出</h1><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/bad03245675b1413b9bbdaa59d9c6953.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*1P8hPIwyFihdOTz-q9IqVg.png"/></div></figure></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><h1 id="7dd3" class="mi mj jj bd mk ml ok mn mo mp ol mr ms ky om kz mu lb on lc mw le oo lf my mz bi translated">标点符号</h1><p id="5c35" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">我们可以使用<code class="fe nz oa ob nm b"><strong class="lj jt">is_punct</strong></code>属性类删除文本中的标点符号</p><h2 id="7f3a" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="332b" class="na mj jj nm b gy nq nr l ns nt">#Removing Punctuations</span><span id="15d4" class="na mj jj nm b gy oc nr l ns nt"># sample text</span><span id="7c20" class="na mj jj nm b gy oc nr l ns nt">text = “The Republican president, is being challenged by Democratic Party nominee: Joe Biden,”</span><span id="26d2" class="na mj jj nm b gy oc nr l ns nt">doc = nlp(text)</span><span id="4e04" class="na mj jj nm b gy oc nr l ns nt">#Removing the punctuation</span><span id="1c80" class="na mj jj nm b gy oc nr l ns nt">for punc in doc:<br/>    if not punc.is_punct:</span><span id="29d3" class="na mj jj nm b gy oc nr l ns nt">print(punc)</span></pre><h2 id="ed84" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">输出</h2><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/2a6a1a0b48f25a77789a7e03a19bbee4.png" data-original-src="https://miro.medium.com/v2/resize:fit:294/format:webp/1*U9Y-56GAqbGs-Psi8X_5jg.png"/></div></figure><p id="005f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">文本中的标点符号被删除了。</p></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><h1 id="6922" class="mi mj jj bd mk ml ok mn mo mp ol mr ms ky om kz mu lb on lc mw le oo lf my mz bi translated">词汇化</h1><p id="199b" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">词汇化是将一个词转换成它的基本形式的过程。例如，词汇化将正确识别“care”到“care”的基本形式。</p><h2 id="1f59" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="4313" class="na mj jj nm b gy nq nr l ns nt"># sample text</span><span id="8579" class="na mj jj nm b gy oc nr l ns nt">text = “The Republican president is being challenged by Democratic Party nominee Joe Biden”</span><span id="3024" class="na mj jj nm b gy oc nr l ns nt"># Passing the text into spacy model and store as a doc object</span><span id="799c" class="na mj jj nm b gy oc nr l ns nt">doc = nlp(text)</span><span id="e91c" class="na mj jj nm b gy oc nr l ns nt">#Lemmatization, printing token and lemmatization side by side</span><span id="60f8" class="na mj jj nm b gy oc nr l ns nt">for token in doc:<br/>   print(token, '--&gt;', token.lemma_)</span></pre><h2 id="d477" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">输出</h2><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/f0e0d27a45f7d51d27e43170d3b2d16e.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*FIcxiktuv8tIBdFWbv_aeg.png"/></div></figure><p id="4033" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">‘是’字转化为‘是’，是-&gt;是，被挑战-&gt;挑战。</p><p id="e6cc" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">spaCy提供了各种令牌属性类。以下是文本预处理中使用的一些常见属性。我们可以根据数据集使用不同的属性。更多属性类，请<a class="ae jg" href="https://spacy.io/api/token#attributes" rel="noopener ugc nofollow" target="_blank">查看此处</a>。</p><ul class=""><li id="de95" class="oy oz jj lj b lk ll ln lo lq pa lu pb ly pc mc pd pe pf pg bi translated"><code class="fe nz oa ob nm b"><strong class="lj jt">is_ascii</strong></code> <strong class="lj jt"> </strong>检查令牌是否由ASCII字符组成。</li><li id="07c1" class="oy oz jj lj b lk ph ln pi lq pj lu pk ly pl mc pd pe pf pg bi translated"><code class="fe nz oa ob nm b"><strong class="lj jt">is_digit</strong></code> <strong class="lj jt"> </strong>检查令牌是否由数字组成。</li><li id="0616" class="oy oz jj lj b lk ph ln pi lq pj lu pk ly pl mc pd pe pf pg bi translated"><code class="fe nz oa ob nm b"><strong class="lj jt">is_lower</strong></code> <strong class="lj jt"> </strong>检查令牌是否为小写</li><li id="9a66" class="oy oz jj lj b lk ph ln pi lq pj lu pk ly pl mc pd pe pf pg bi translated"><code class="fe nz oa ob nm b"><strong class="lj jt">is_uppercase</strong></code> <strong class="lj jt"> </strong>检查令牌是否大写</li><li id="db6f" class="oy oz jj lj b lk ph ln pi lq pj lu pk ly pl mc pd pe pf pg bi translated"><code class="fe nz oa ob nm b"><strong class="lj jt">text_with_ws</strong></code>打印带有尾随空格的标记文本(如果有)。</li><li id="fc1a" class="oy oz jj lj b lk ph ln pi lq pj lu pk ly pl mc pd pe pf pg bi translated"><code class="fe nz oa ob nm b"><strong class="lj jt">is_alpha</strong></code>检查令牌是否由字母字符组成。</li><li id="7996" class="oy oz jj lj b lk ph ln pi lq pj lu pk ly pl mc pd pe pf pg bi translated"><code class="fe nz oa ob nm b"><strong class="lj jt">is_punct</strong></code>检查令牌是否为标点符号。</li><li id="7252" class="oy oz jj lj b lk ph ln pi lq pj lu pk ly pl mc pd pe pf pg bi translated"><code class="fe nz oa ob nm b"><strong class="lj jt">is_space</strong></code>检查令牌是否为空格。</li><li id="1b4f" class="oy oz jj lj b lk ph ln pi lq pj lu pk ly pl mc pd pe pf pg bi translated"><code class="fe nz oa ob nm b"><strong class="lj jt">shape_</strong></code>打印出单词的形状。</li><li id="9f14" class="oy oz jj lj b lk ph ln pi lq pj lu pk ly pl mc pd pe pf pg bi translated"><code class="fe nz oa ob nm b"><strong class="lj jt">is_stop</strong></code>检查令牌是否为停用词。</li><li id="973e" class="oy oz jj lj b lk ph ln pi lq pj lu pk ly pl mc pd pe pf pg bi translated"><code class="fe nz oa ob nm b"><strong class="lj jt">like_email</strong></code> <strong class="lj jt"> </strong>检查令牌是否由电子邮件地址组成</li><li id="8b69" class="oy oz jj lj b lk ph ln pi lq pj lu pk ly pl mc pd pe pf pg bi translated"><code class="fe nz oa ob nm b"><strong class="lj jt">like_url</strong></code> <strong class="lj jt"> </strong>检查令牌是否由URL组成</li></ul></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><h1 id="9593" class="mi mj jj bd mk ml ok mn mo mp ol mr ms ky om kz mu lb on lc mw le oo lf my mz bi translated">词性标注</h1><p id="8d78" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">词性标注用于根据定义和上下文给给定文本的每个单词(如名词、动词、代词、副词、连词、形容词、感叹词)分配词性。</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pm"><img src="../Images/50351d918ca5fad4fb2072c06c6c90ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9KcTWAduYkAvBwFj.png"/></div></div></figure><p id="a11e" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">词性标注可以在spaCy中使用令牌属性类来完成。<code class="fe nz oa ob nm b"><strong class="lj jt">tag_ </strong></code>显示细粒度词性<code class="fe nz oa ob nm b"><strong class="lj jt">pos_</strong></code> <strong class="lj jt"> </strong>显示粗粒度词性。<code class="fe nz oa ob nm b"><strong class="lj jt">spacy.explain</strong></code>显示关于特定标签的描述性细节。请点击查看更多详情<a class="ae jg" href="https://spacy.io/api/annotation#pos-tagging" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="3f2f" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="3009" class="na mj jj nm b gy nq nr l ns nt">#Sample text</span><span id="8785" class="na mj jj nm b gy oc nr l ns nt">text = “The Republican president is being challenged by Democratic Party nominee Joe Biden”</span><span id="fab8" class="na mj jj nm b gy oc nr l ns nt"># Passing the text into spacy model(nlp) and store as a doc object</span><span id="9b3a" class="na mj jj nm b gy oc nr l ns nt">doc = nlp(text)</span><span id="9786" class="na mj jj nm b gy oc nr l ns nt"># Parts of speech tagging</span><span id="c743" class="na mj jj nm b gy oc nr l ns nt">for token in doc:<br/>    print (token, token.tag_, token.pos_, spacy.explain(token.tag_))</span></pre><h2 id="5434" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">输出</h2><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/936d257654d97af94561addc09b26fe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*6zQI4QOmab8fEmR3767cWQ.png"/></div></figure><p id="e27a" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">上面的输出使用spacy.explain显示了所有单词的词性以及完整的描述性细节。spacy还提供了名为displaCy的内置可视化工具。这有助于我们形象化POS标签</p><h2 id="7557" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="64c0" class="na mj jj nm b gy nq nr l ns nt"># Visualizing the POS Tags using displacy</span><span id="2afd" class="na mj jj nm b gy oc nr l ns nt">#importing displacy</span><span id="2ce2" class="na mj jj nm b gy oc nr l ns nt">from spacy import displacy</span><span id="a5fd" class="na mj jj nm b gy oc nr l ns nt">#Passing the doc</span><span id="b58f" class="na mj jj nm b gy oc nr l ns nt">displacy.render(doc, style=’dep’, jupyter=True, options={‘distance’: 90})</span></pre><h2 id="6612" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">输出</h2><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi po"><img src="../Images/5f75c9bf7b22527ff068c8ae1ea949ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tbIKennQuG1foOSYU2rlIQ.png"/></div></div></figure></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><h1 id="4422" class="mi mj jj bd mk ml ok mn mo mp ol mr ms ky om kz mu lb on lc mw le oo lf my mz bi translated">命名实体识别</h1><p id="0357" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">它是检测命名实体(如人名、地名、公司名、数量和货币价值)的过程。</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/7b588e9b3047052d7d54a6ec91f73702.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/0*6c0WysZqY8BcJQzj.png"/></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">Ref: <a class="ae jg" href="https://www.slideshare.net/sujitpal/soda-v2-named-entity-recognition-from-streaming-test-106598233" rel="noopener ugc nofollow" target="_blank"> Sujit Pal </a></figcaption></figure><p id="5991" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们可以使用spaCy <code class="fe nz oa ob nm b"><strong class="lj jt">ents</strong></code>属性类找到命名实体。</p><p id="e014" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">请点击查看更多关于实体属性<a class="ae jg" href="https://spacy.io/api/annotation#named-entities" rel="noopener ugc nofollow" target="_blank">的详细信息</a></p><h2 id="03ed" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="5b88" class="na mj jj nm b gy nq nr l ns nt"># sample text</span><span id="a365" class="na mj jj nm b gy oc nr l ns nt">text = “The Republican president is being challenged by Democratic Party nominee Joe Biden, who is best known as Barack Obama’s vice-president but has been in US politics since the 1970s”</span><span id="d2d0" class="na mj jj nm b gy oc nr l ns nt"># Passing the text into spacy model and store as a doc object</span><span id="4cb4" class="na mj jj nm b gy oc nr l ns nt">doc = nlp(text)</span><span id="2cf0" class="na mj jj nm b gy oc nr l ns nt"># Named Entity recognition using ents attribute</span><span id="afae" class="na mj jj nm b gy oc nr l ns nt">print(doc.ents)</span><span id="c0ae" class="na mj jj nm b gy oc nr l ns nt"># Printing the entity label description using label_ attribute</span><span id="802a" class="na mj jj nm b gy oc nr l ns nt">for entity in doc.ents:<br/>    print(entity.text, ‘-&gt;’, entity.label_)</span></pre><h2 id="75e5" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">输出</h2><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pq"><img src="../Images/47193c00e216c210b9f4970c561009a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RcvdoKiWER0h5LeKmT1UZQ.png"/></div></div></figure><p id="fc72" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">可视化命名实体描述</p><h2 id="b65e" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="399b" class="na mj jj nm b gy nq nr l ns nt"># Visualizing the named entity description</span><span id="e0f0" class="na mj jj nm b gy oc nr l ns nt">displacy.render(doc, style = “ent”,jupyter = True)</span></pre><h2 id="0fd7" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">输出</h2><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pr"><img src="../Images/7b867d34f1aa381316147502861a5718.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OQfy8HosXIDO2vXwWsHe6Q.png"/></div></div></figure></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><h1 id="ae95" class="mi mj jj bd mk ml ok mn mo mp ol mr ms ky om kz mu lb on lc mw le oo lf my mz bi translated">依存句法分析</h1><p id="b394" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">依存句法分析通过理解句子结构和单个单词之间的关系来帮助理解句子的意思。在分析阶段，它有助于语法检查和理解语义。</p><h2 id="9f4d" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="05dd" class="na mj jj nm b gy nq nr l ns nt"># sample text</span><span id="4123" class="na mj jj nm b gy oc nr l ns nt">text = “The Republican president is being challenged by Democratic Party nominee Joe Biden”</span><span id="4946" class="na mj jj nm b gy oc nr l ns nt"># Passing the text to spacy model and intiialize the object called doc</span><span id="f34c" class="na mj jj nm b gy oc nr l ns nt">doc = nlp(text)</span><span id="8f69" class="na mj jj nm b gy oc nr l ns nt"># Dependency parsing</span><span id="d5ce" class="na mj jj nm b gy oc nr l ns nt">for chunk in doc.noun_chunks:<br/>     print(chunk.text, chunk.root.text, chunk.root.dep_,     chunk.root.head.text)</span></pre><h2 id="98a8" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">输出</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="4232" class="na mj jj nm b gy nq nr l ns nt">The Republican president president nsubjpass challenged Democratic Party nominee Joe Biden Biden pobj by</span></pre><p id="8457" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">上面的输出很难理解。我们可以使用displacy来实现同样的效果</p><h2 id="9509" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="5baf" class="na mj jj nm b gy nq nr l ns nt"># Visualize the dependency</span><span id="af52" class="na mj jj nm b gy oc nr l ns nt">displacy.render(doc, style=”dep”, jupyter= True, options={'distance': 120})</span></pre><h2 id="d3da" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">输出</h2><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ps"><img src="../Images/273d70d611311cc442ba730f34e98fe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TcdhWG_z_fqAvCfveukmIA.png"/></div></div></figure><p id="896f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">上面的输出显示了不同的标签，如nsubjpass、auxpass、agent、compound。这些可以通过理解这些标签在句子中的意思来解释。请查看spaCy关于<a class="ae jg" href="https://spacy.io/api/annotation#dependency-parsing" rel="noopener ugc nofollow" target="_blank">依赖解析</a>的文档，了解标签细节</p></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><h1 id="0796" class="mi mj jj bd mk ml ok mn mo mp ol mr ms ky om kz mu lb on lc mw le oo lf my mz bi translated">基于规则的匹配</h1><p id="f7d0" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">基于规则的匹配是spaCy的另一个惊人特性。它有助于在用户定义的规则的帮助下找到给定文本中的单词和短语。它类似于正则表达式。但是，spaCy通过模式和词汇属性(如词性标签、依赖性、词汇化等)与用户定义的规则进行匹配。</p><h2 id="7c61" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="a41d" class="na mj jj nm b gy nq nr l ns nt"># Import spaCy Matcher</span><span id="1db8" class="na mj jj nm b gy oc nr l ns nt">from spacy.matcher import Matcher</span><span id="2c27" class="na mj jj nm b gy oc nr l ns nt"># Initialize the matcher with the spaCy vocabulary</span><span id="ab83" class="na mj jj nm b gy oc nr l ns nt">matcher = Matcher(nlp.vocab)</span><span id="f15a" class="na mj jj nm b gy oc nr l ns nt">#Sample text</span><span id="c3dd" class="na mj jj nm b gy oc nr l ns nt">text = "The Republican president is being challenged by Democratic  Party nominee Joe Biden"</span><span id="2347" class="na mj jj nm b gy oc nr l ns nt">doc = nlp(text)</span><span id="e9f8" class="na mj jj nm b gy oc nr l ns nt"># Define rule</span><span id="3aec" class="na mj jj nm b gy oc nr l ns nt">pattern = [{‘TEXT’: ‘Joe’}, {‘TEXT’: ‘Biden’}]</span><span id="0ead" class="na mj jj nm b gy oc nr l ns nt"># Add rule</span><span id="633f" class="na mj jj nm b gy oc nr l ns nt">matcher.add(‘rule_1’, None, pattern)</span></pre><p id="d89f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">上述代码解释如下:</p><ul class=""><li id="55d7" class="oy oz jj lj b lk ll ln lo lq pa lu pb ly pc mc pd pe pf pg bi translated">导入空间匹配器</li><li id="b458" class="oy oz jj lj b lk ph ln pi lq pj lu pk ly pl mc pd pe pf pg bi translated">用默认空间词汇表初始化匹配器对象</li><li id="73ed" class="oy oz jj lj b lk ph ln pi lq pj lu pk ly pl mc pd pe pf pg bi translated">将输入传递给NLP对象</li><li id="71a9" class="oy oz jj lj b lk ph ln pi lq pj lu pk ly pl mc pd pe pf pg bi translated">为我们想要从文本中提取的内容定义规则/模式。我们想从文本中提取“乔·拜登”。这意味着每当单词“Joe”后面跟着单词“Biden”时，匹配器应该能够在文本中找到这种模式。</li></ul><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="434c" class="na mj jj nm b gy nq nr l ns nt"># Finding matches and passing the doc to the matches object</span><span id="2ec8" class="na mj jj nm b gy oc nr l ns nt">matches = matcher(doc)</span><span id="4e29" class="na mj jj nm b gy oc nr l ns nt">matches</span></pre><p id="fab3" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">将doc对象传递给匹配项</p><h2 id="1914" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">输出</h2><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi pt"><img src="../Images/933b75cc240989c22fd0425aff775e3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/format:webp/1*ral1MommEHIGh-NVRXVyaQ.png"/></div></figure><p id="aa9c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">Matches对象返回元组列表。它有三个元素，match_id，start和end。7604275899133490726是match_id。开始和结束表示给定文本的开始和结束标记号。</p><p id="7106" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">下面的代码提取匹配</p><h2 id="8d22" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="ca52" class="na mj jj nm b gy nq nr l ns nt"># Extract the matches</span><span id="2467" class="na mj jj nm b gy oc nr l ns nt">for matchid, start, end in matches:</span><span id="de2d" class="na mj jj nm b gy oc nr l ns nt">matchid = nlp.vocab.strings[matchid]</span><span id="1293" class="na mj jj nm b gy oc nr l ns nt">span = doc[start:end]</span><span id="666b" class="na mj jj nm b gy oc nr l ns nt">print(span.text)</span></pre><h2 id="6e8a" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">输出</h2><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi pu"><img src="../Images/97b3d3c9560762c7689dfd8b29416f71.png" data-original-src="https://miro.medium.com/v2/resize:fit:280/format:webp/1*Zzn1zcgbyMhaqTmY6w_SDQ.png"/></div></figure><p id="1aed" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在基于规则的匹配中，我们可以定义许多规则。更多详情，请查看<a class="ae jg" href="https://spacy.io/usage/rule-based-matching" rel="noopener ugc nofollow" target="_blank">此处</a></p></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><h1 id="5f12" class="mi mj jj bd mk ml ok mn mo mp ol mr ms ky om kz mu lb on lc mw le oo lf my mz bi translated">词向量和相似度</h1><p id="3dee" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">单词向量是单词的数字表示，它有助于理解单词的语义并用于各种NLP任务。spaCy模型支持内置向量，我们需要为此任务下载中型或更大的模型。更多详情请点击查看<a class="ae jg" href="https://spacy.io/usage/vectors-similarity" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="9105" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">检查单词向量</h2><p id="2df2" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">第一次装载中型或大型模型。我们在这里使用大模型。</p><h2 id="2ce5" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="57f8" class="na mj jj nm b gy nq nr l ns nt"># Downloading large pre-trained model</span><span id="4c40" class="na mj jj nm b gy oc nr l ns nt">!python -m spacy download en_core_web_lg</span></pre><p id="5ced" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在，在预训练的模型中查找样本文本是否具有向量。<code class="fe nz oa ob nm b"><strong class="lj jt">has_vector</strong></code>用于检查矢量是否可用。</p><h2 id="6be9" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="8d24" class="na mj jj nm b gy nq nr l ns nt"># Importing library and loading the large model</span><span id="7f1c" class="na mj jj nm b gy oc nr l ns nt">import spacy</span><span id="a4c0" class="na mj jj nm b gy oc nr l ns nt">nlp = spacy.load(‘en_core_web_lg’)</span><span id="13a2" class="na mj jj nm b gy oc nr l ns nt"># Sample text</span><span id="997b" class="na mj jj nm b gy oc nr l ns nt">text = “The Republican president is being challenged by Democratic Party nominee Joe Biden fe45ty 34fedjdj”</span><span id="0bd0" class="na mj jj nm b gy oc nr l ns nt"># passing the text to spacy model</span><span id="844b" class="na mj jj nm b gy oc nr l ns nt">doc = nlp(text)</span><span id="910d" class="na mj jj nm b gy oc nr l ns nt"># Finding whether the word is available in the pre-trained model</span><span id="a5a6" class="na mj jj nm b gy oc nr l ns nt">for token in doc:<br/>    print(token.text, ‘ — -&gt;’, token.has_vector)</span></pre><h2 id="14a4" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">输出</h2><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi pv"><img src="../Images/29017786aad47ff6ba8aeba97d4f78df.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/1*EA4LiBOfJ4VOCYxmPWpLMw.png"/></div></figure><p id="ff25" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们可以看到单词<em class="oq">‘Fe 45 ty’，‘34 feddj’</em>在预训练的模型中没有单词向量。</p><h2 id="aa04" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">打印单词向量</h2><p id="01d6" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">使用<code class="fe nz oa ob nm b"><strong class="lj jt">vector_norm</strong></code> <strong class="lj jt"> </strong>属性类打印矢量。</p><h2 id="3ba2" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="38ba" class="na mj jj nm b gy nq nr l ns nt"># Printing the word Vector</span><span id="4e97" class="na mj jj nm b gy oc nr l ns nt"># sample text</span><span id="78bc" class="na mj jj nm b gy oc nr l ns nt">text = “The Republican president is being challenged by Democratic Party nominee Joe Biden, fe45ty, 34fedjdj”</span><span id="aec0" class="na mj jj nm b gy oc nr l ns nt">#Passing the text to model</span><span id="fa57" class="na mj jj nm b gy oc nr l ns nt">doc = nlp(text)</span><span id="1a87" class="na mj jj nm b gy oc nr l ns nt"># Printing the vectors</span><span id="94cf" class="na mj jj nm b gy oc nr l ns nt">for token in doc:<br/>    print(token.text,’ ‘,token.vector_norm)</span></pre><h2 id="f33c" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">输出</h2><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi pw"><img src="../Images/a15891f824eaea71e6efc453b22d27b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:462/format:webp/1*c0Zw-0AzvaJ2yoVTWR_Fzg.png"/></div></figure><p id="ab89" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们可以看到单词“fe45ty”和“34fedjdj”具有向量0，因为这两个单词在预训练模型中不可用。</p></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><h2 id="2a43" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">两个向量之间的相似性</h2><p id="8abd" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated">令牌对象有一个内置的相似性函数，它有助于找到两个令牌之间的相似性。值越高，两个标记之间越相似，值越低，标记之间越不相似。相似性特征主要用于推荐应用。</p><p id="3cef" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">相似性得分可以使用<code class="fe nz oa ob nm b"><strong class="lj jt">similairty</strong></code> <strong class="lj jt"> </strong>属性类来计算。</p><h2 id="614a" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">密码</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="84a8" class="na mj jj nm b gy nq nr l ns nt"># Calculate similarity score</span><span id="43b1" class="na mj jj nm b gy oc nr l ns nt">#sample text</span><span id="415f" class="na mj jj nm b gy oc nr l ns nt">text = “excellent”</span><span id="59fa" class="na mj jj nm b gy oc nr l ns nt">text_1 = “good”</span><span id="0ae5" class="na mj jj nm b gy oc nr l ns nt"># passing the text into nlp model</span><span id="1f2e" class="na mj jj nm b gy oc nr l ns nt">doc = nlp(text)</span><span id="da1d" class="na mj jj nm b gy oc nr l ns nt">doc1 = nlp(text_1)</span><span id="b7b0" class="na mj jj nm b gy oc nr l ns nt"># Finding the similarity</span><span id="d282" class="na mj jj nm b gy oc nr l ns nt">score = doc.similarity(doc1)</span><span id="a8ac" class="na mj jj nm b gy oc nr l ns nt">print(score)</span></pre><h2 id="ff1a" class="na mj jj bd mk nb nc dn mo nd ne dp ms lq nf ng mu lu nh ni mw ly nj nk my jp bi translated">输出</h2><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="8804" class="na mj jj nm b gy nq nr l ns nt">0.777407893397578</span></pre><p id="ec9b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">该值为0.77，更接近于1，因此这两个标记具有高相似性。</p><p id="0371" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">本文总结了spaCy库如何用于各种NLP任务。</p><p id="ddb8" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">感谢阅读。请继续学习，并关注更多内容！</p></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><h1 id="98c4" class="mi mj jj bd mk ml ok mn mo mp ol mr ms ky om kz mu lb on lc mw le oo lf my mz bi translated">参考</h1><p id="3b02" class="pw-post-body-paragraph lh li jj lj b lk nu kt lm ln nv kw lp lq nw ls lt lu nx lw lx ly ny ma mb mc im bi translated"><a class="ae jg" href="https://spacy.io/" rel="noopener ugc nofollow" target="_blank">https://spacy.io/</a></p></div></div>    
</body>
</html>