<html>
<head>
<title>How To Generate Meaningful Sentences Using a T5 Transformer?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用T5变压器生成有意义的句子？</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/how-to-generate-meaningful-sentences-using-a-t5-transformer-b755bee64882?source=collection_archive---------2-----------------------#2021-04-28">https://pub.towardsai.net/how-to-generate-meaningful-sentences-using-a-t5-transformer-b755bee64882?source=collection_archive---------2-----------------------#2021-04-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="6d6b" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/nlp" rel="noopener ugc nofollow" target="_blank">自然语言处理</a></h2><div class=""/><div class=""><h2 id="6594" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">开发一个文本生成API</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/be447db577aea8c75da2477617463199.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zKKpveyt8vg4mxzWeJVn2Q.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">科技日报在<a class="ae lh" href="https://unsplash.com/s/photos/streaming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="371b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在博客<a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="/generating-cool-storylines-using-a-t5-transformer-and-having-fun-4a79f6ab8adb"> <strong class="lk jd">使用T5转换器生成故事情节</strong> </a>中，我们看到了如何通过提供类型、导演、演员和种族等输入来微调Sequence2Sequence(文本到文本)转换器(T5)以生成故事情节/情节。在这篇博客中，我们将看看如何使用训练过的T5模型进行推理。稍后，我们还将看到如何使用<code class="fe me mf mg mh b">gunicorn</code>和<code class="fe me mf mg mh b">flask</code>来部署它。</p><h1 id="19d7" class="mi mj it bd mk ml mm mn mo mp mq mr ms ki mt kj mu kl mv km mw ko mx kp my mz bi translated">如何做模型推断？</h1><ul class=""><li id="0284" class="na nb it lk b ll nc lo nd lr ne lv nf lz ng md nh ni nj nk bi translated"><em class="nl">让我们用导入设置脚本</em></li></ul><pre class="ks kt ku kv gt nm mh nn no aw np bi"><span id="2db7" class="nq mj it mh b gy nr ns l nt nu">import os<br/>import re<br/>import random<br/>import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>from tqdm import tqdm_notebook, tnrange<br/>from sklearn.utils import shuffle<br/>import pickle<br/>import math<br/>import torch<br/>import torch.nn.functional as F<br/>from transformers import T5Tokenizer, T5ForConditionalGeneration</span></pre><ul class=""><li id="4130" class="na nb it lk b ll lm lo lp lr nv lv nw lz nx md nh ni nj nk bi translated"><em class="nl">设置</em> <code class="fe me mf mg mh b"><em class="nl">SEED</em></code> <em class="nl">值，加载模型和分词器</em></li></ul><pre class="ks kt ku kv gt nm mh nn no aw np bi"><span id="5f53" class="nq mj it mh b gy nr ns l nt nu">torch.manual_seed(3007)</span><span id="a2e0" class="nq mj it mh b gy ny ns l nt nu">model = T5ForConditionalGeneration.from_pretrained('./outputs/model_files')<br/>tokenizer = T5Tokenizer.from_pretrained('./outputs/model_files')</span></pre><ul class=""><li id="d672" class="na nb it lk b ll lm lo lp lr nv lv nw lz nx md nh ni nj nk bi translated"><em class="nl">使用</em> <code class="fe me mf mg mh b"><em class="nl">model.generate</em></code> <em class="nl">功能生成序列</em></li></ul><pre class="ks kt ku kv gt nm mh nn no aw np bi"><span id="5f13" class="nq mj it mh b gy nr ns l nt nu">text = "generate plot for genre: horror"<br/>input_ids = tokenizer.encode(text, return_tensors="pt")<br/>greedyOp = model.generate(input_ids, max_length=100)<br/>tokenizer.decode(greedyOp[0], skip_special_tokens=True)</span></pre><p id="1916" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="nl">注:阅读</em> <a class="ae lh" href="https://huggingface.co/blog/how-to-generate" rel="noopener ugc nofollow" target="_blank"> <em class="nl">这篇</em> </a> <em class="nl">关于如何使用变形金刚使用不同解码策略生成文本的惊人拥抱脸博客</em></p><ul class=""><li id="54de" class="na nb it lk b ll lm lo lp lr nv lv nw lz nx md nh ni nj nk bi translated"><em class="nl">让我们把它放在一个函数里</em></li></ul><pre class="ks kt ku kv gt nm mh nn no aw np bi"><span id="b4d6" class="nq mj it mh b gy nr ns l nt nu">def generateStoryLine(text, seq_len, seq_num):<br/>				'''<br/>				args:<br/>					text: input text eg. generate plot for: {genre} or generate plot for: {director}<br/>					seq_len: Max sequence length for the generated text<br/>					seq_num: Number of sequences to generate<br/>				'''<br/>        outputDict = dict()<br/>        outputDict["plots"] = {}<br/>        input_ids = tokenizer.encode(text, return_tensors = "pt")<br/>        beamOp = model.generate(<br/>            input_ids,<br/>            max_length = seq_len,<br/>            do_sample = True,<br/>            top_k = 100,<br/>            top_p = 0.95,<br/>            num_return_sequences = seq_num<br/>        )</span><span id="276c" class="nq mj it mh b gy ny ns l nt nu">        for ix, sample_op in enumerate(beamOp):<br/>            outputDict["plots"][ix] = self.tokenizer.decode(sample_op, skip_special_tokens = True)<br/>            <br/>        <br/>        return outputDict</span></pre><h1 id="8b55" class="mi mj it bd mk ml mm mn mo mp mq mr ms ki mt kj mu kl mv km mw ko mx kp my mz bi translated">如何用Flask部署这个？</h1><p id="544a" class="pw-post-body-paragraph li lj it lk b ll nc kd ln lo nd kg lq lr nz lt lu lv oa lx ly lz ob mb mc md im bi translated">用户可以通过多种方式提供输入，并且模型可能需要生成图。用户可以只提供类型，或者他们可以提供类型和演员，或者他们甚至可以提供所有四个，即类型、导演、演员和种族。但是为了这个实现的目的，我强制要求至少提供一个流派。</p><p id="3d8e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你可以查看下面的链接，看看这个API是如何工作的。</p><div class="oc od gp gr oe of"><a href="https://movie-plot-generator.vercel.app/" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd jd gy z fp ok fr fs ol fu fw jc bi translated">电影情节生成器</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">我在网上生成模糊的电影情节(但有时很好)。但我可以向你保证，它将永远是…</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">电影-情节-生成器. vercel.app</p></div></div></div></a></div><p id="ceb5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="nl">让我们开发一个后端来实现用于上面</em>链接的API调用</p><h1 id="cb74" class="mi mj it bd mk ml mm mn mo mp mq mr ms ki mt kj mu kl mv km mw ko mx kp my mz bi translated">安装需求</h1><pre class="ks kt ku kv gt nm mh nn no aw np bi"><span id="1e6e" class="nq mj it mh b gy nr ns l nt nu">pip install flask flask_cors tqdm rich gunicorn</span></pre><h1 id="c80e" class="mi mj it bd mk ml mm mn mo mp mq mr ms ki mt kj mu kl mv km mw ko mx kp my mz bi translated">创建app.py文件</h1><ul class=""><li id="a07d" class="na nb it lk b ll nc lo nd lr ne lv nf lz ng md nh ni nj nk bi translated"><em class="nl">进口</em></li></ul><pre class="ks kt ku kv gt nm mh nn no aw np bi"><span id="11bd" class="nq mj it mh b gy nr ns l nt nu"># app.py</span><span id="1582" class="nq mj it mh b gy ny ns l nt nu">from flask import Flask, request, jsonify<br/>import json<br/>from flask_cors import CORS<br/>import uuid</span><span id="98d3" class="nq mj it mh b gy ny ns l nt nu">from predict import PredictionModelObject</span><span id="3b4a" class="nq mj it mh b gy ny ns l nt nu">app = Flask(__name__)<br/>CORS(app)</span><span id="6e4a" class="nq mj it mh b gy ny ns l nt nu">print("Loading Model Object")<br/>predictionObject = PredictionModelObject()<br/>print("Loaded Model Object")</span></pre><ul class=""><li id="e36e" class="na nb it lk b ll lm lo lp lr nv lv nw lz nx md nh ni nj nk bi translated"><em class="nl">添加一个API路径</em></li></ul><pre class="ks kt ku kv gt nm mh nn no aw np bi"><span id="749f" class="nq mj it mh b gy nr ns l nt nu">@app.route('/api/generatePlot', methods=['POST'])<br/>def gen_plot():</span><span id="870f" class="nq mj it mh b gy ny ns l nt nu">    req = request.get_json()<br/>    genre = req['genre']<br/>    director = req['director'] if 'director' in req else None<br/>    cast = req['cast'] if 'cast' in req else None<br/>    ethnicity = req['ethnicity'] if 'ethnicity' in req else None<br/>    num_plots = req['num_plots'] if 'num_plots' in req else 1<br/>    seq_len = req['seq_len'] if 'seq_len' in req else 200</span><span id="a91e" class="nq mj it mh b gy ny ns l nt nu">    if not isinstance(num_plots, int) or not isinstance(seq_len, int):<br/>        return jsonify({<br/>            "message": "Number of words in plot and Number of plots must be integers",<br/>            "status": "Fail"<br/>        })<br/>    <br/>    try:<br/>        plot, status = predictionObject.returnPlot(<br/>            genre = genre, <br/>            director = director,<br/>            cast = cast,<br/>            ethnicity = ethnicity,<br/>            seq_len = seq_len,<br/>            seq_num = num_plots<br/>        )</span><span id="2118" class="nq mj it mh b gy ny ns l nt nu">        if status == 'Pass':<br/>            <br/>            plot["message"] = "Success!"<br/>            plot["status"] = "Pass"<br/>            return jsonify(plot)<br/>        <br/>        else:</span><span id="2a7d" class="nq mj it mh b gy ny ns l nt nu">            return jsonify({"message": plot, "status": status})<br/>    <br/>    except Exception as e:</span><span id="50e1" class="nq mj it mh b gy ny ns l nt nu">        return jsonify({"message": "Error getting plot for the given input", "status": "Fail"})</span></pre><ul class=""><li id="d30c" class="na nb it lk b ll lm lo lp lr nv lv nw lz nx md nh ni nj nk bi translated"><em class="nl">主程序块运行</em> <code class="fe me mf mg mh b"><em class="nl">flask</em></code> <em class="nl"> app </em></li></ul><pre class="ks kt ku kv gt nm mh nn no aw np bi"><span id="1e68" class="nq mj it mh b gy nr ns l nt nu">if __name__ == "__main__":<br/>    app.run(debug=True, port = 5000)</span></pre><p id="1a0b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这个脚本还不行。由于我们还没有用 <code class="fe me mf mg mh b"><strong class="lk jd"><em class="nl">PredictionModelObject</em></strong></code>创建 <code class="fe me mf mg mh b"><em class="nl">predict.py</em></code> <em class="nl">脚本，因此在此时执行脚本时，您可能会收到一个导入错误</em></p><h1 id="5d4e" class="mi mj it bd mk ml mm mn mo mp mq mr ms ki mt kj mu kl mv km mw ko mx kp my mz bi translated">创造了<code class="fe me mf mg mh b">PredictionModelObject</code></h1><ul class=""><li id="bc2e" class="na nb it lk b ll nc lo nd lr ne lv nf lz ng md nh ni nj nk bi translated"><em class="nl">创建一个</em> <code class="fe me mf mg mh b"><em class="nl">predict.py</em></code> <em class="nl">文件，导入下面的</em></li></ul><pre class="ks kt ku kv gt nm mh nn no aw np bi"><span id="e803" class="nq mj it mh b gy nr ns l nt nu"># predict.py<br/>import os<br/>import re<br/>import random<br/>import torch<br/>import torch.nn as nn<br/>from rich.console import Console<br/>from transformers import T5Tokenizer, T5ForConditionalGeneration<br/>from collections import defaultdict</span><span id="7691" class="nq mj it mh b gy ny ns l nt nu">console = Console(record = True)</span><span id="292f" class="nq mj it mh b gy ny ns l nt nu">torch.cuda.manual_seed(3007)<br/>torch.manual_seed(3007)</span></pre><ul class=""><li id="fec8" class="na nb it lk b ll lm lo lp lr nv lv nw lz nx md nh ni nj nk bi translated"><em class="nl">创建</em> <code class="fe me mf mg mh b"><em class="nl">PredictionModelObject</em></code> <em class="nl">类</em></li></ul><pre class="ks kt ku kv gt nm mh nn no aw np bi"><span id="c1cf" class="nq mj it mh b gy nr ns l nt nu"># predict.py<br/>class PredictionModelObject(object):</span><span id="73fc" class="nq mj it mh b gy ny ns l nt nu">    def __init__(self):</span><span id="91bd" class="nq mj it mh b gy ny ns l nt nu">console.log("Model Loading")<br/>        self.model = T5ForConditionalGeneration.from_pretrained('./outputs/model_files')<br/>        self.tokenizer = T5Tokenizer.from_pretrained('./outputs/model_files')<br/>        console.log("Model Loaded")<br/>    <br/>    def beamSearch(self, text, seq_len, seq_num):</span><span id="3525" class="nq mj it mh b gy ny ns l nt nu">        outputDict = dict()<br/>        outputDict["plots"] = {}<br/>        input_ids = self.tokenizer.encode(text, return_tensors = "pt")<br/>        beamOp = self.model.generate(<br/>            input_ids,<br/>            max_length = seq_len,<br/>            do_sample = True,<br/>            top_k = 100,<br/>            top_p = 0.95,<br/>            num_return_sequences = seq_num<br/>        )</span><span id="4170" class="nq mj it mh b gy ny ns l nt nu">        for ix, sample_op in enumerate(beamOp):<br/>            outputDict["plots"][ix] = self.tokenizer.decode(sample_op, skip_special_tokens = True)<br/>            <br/>        <br/>        return outputDict</span><span id="3e82" class="nq mj it mh b gy ny ns l nt nu">    def genreToPlot(self, genre, seq_len, seq_num):</span><span id="5e6e" class="nq mj it mh b gy ny ns l nt nu">        text = f"generate plot for genre: {genre}"</span><span id="3cd6" class="nq mj it mh b gy ny ns l nt nu">        return self.beamSearch(text, seq_len, seq_num)</span><span id="30e4" class="nq mj it mh b gy ny ns l nt nu">    def genreDirectorToPlot(self, genre, director, seq_len, seq_num):</span><span id="fa05" class="nq mj it mh b gy ny ns l nt nu">        text = f"generate plot for genre: {genre} and director: {director}"<br/>        <br/>        return self.beamSearch(text, seq_len, seq_num)</span><span id="e998" class="nq mj it mh b gy ny ns l nt nu">    def genreDirectorCastToPlot(self, genre, director, cast, seq_len, seq_num):</span><span id="31af" class="nq mj it mh b gy ny ns l nt nu">        text = f"generate plot for genre: {genre} director: {director} cast: {cast}"</span><span id="d383" class="nq mj it mh b gy ny ns l nt nu">        return self.beamSearch(text, seq_len, seq_num)</span><span id="6b82" class="nq mj it mh b gy ny ns l nt nu">    def genreDirectorCastEthnicityToPlot(self, genre, director, cast, ethnicity, seq_len, seq_num):</span><span id="99fb" class="nq mj it mh b gy ny ns l nt nu">        text = f"generate plot for genre: {genre} director: {director} cast: {cast} and ethnicity: {ethnicity}"</span><span id="e548" class="nq mj it mh b gy ny ns l nt nu">        return self.beamSearch(text, seq_len, seq_num)<br/>    <br/>    def genreCastToPlot(self, genre, cast, seq_len, seq_num):</span><span id="4cfe" class="nq mj it mh b gy ny ns l nt nu">        text = f"genreate plot for genre: {genre} and cast: {cast}"</span><span id="8cdf" class="nq mj it mh b gy ny ns l nt nu">        return self.beamSearch(text, seq_len, seq_num)</span><span id="51c9" class="nq mj it mh b gy ny ns l nt nu">    def genreEthnicityToPlot(self, genre, ethnicity, seq_len, seq_num):</span><span id="917a" class="nq mj it mh b gy ny ns l nt nu">        text = f"generate plot for genre: {genre} and ethnicity: {ethnicity}"</span><span id="99be" class="nq mj it mh b gy ny ns l nt nu">        return self.beamSearch(text, seq_len, seq_num)</span><span id="0a2e" class="nq mj it mh b gy ny ns l nt nu">    def returnPlot(self, genre, director, cast, ethnicity, seq_len, seq_num):<br/>        console.log('Got genre: ', genre, 'director: ', director, 'cast: ', cast, 'seq_len: ', seq_len, 'seq_num: ', seq_num, 'ethnicity: ',ethnicity)<br/>        <br/>        seq_len = 200 if not seq_len else int(seq_len)<br/>        <br/>        seq_num = 1 if not seq_num else int(seq_num)<br/>        <br/>        if not director and not cast and not ethnicity:</span><span id="633e" class="nq mj it mh b gy ny ns l nt nu">            return self.genreToPlot(genre, seq_len, seq_num), "Pass"<br/>        <br/>        elif genre and director and not cast and not ethnicity:</span><span id="e2a7" class="nq mj it mh b gy ny ns l nt nu">            return self.genreDirectorToPlot(genre, director, seq_len, seq_num), "Pass"</span><span id="ebb0" class="nq mj it mh b gy ny ns l nt nu">        elif genre and director and cast and not ethnicity:</span><span id="46de" class="nq mj it mh b gy ny ns l nt nu">            return self.genreDirectorCastToPlot(genre, director, cast, seq_len, seq_num), "Pass"</span><span id="8801" class="nq mj it mh b gy ny ns l nt nu">        elif genre and director and cast and ethnicity:</span><span id="a26d" class="nq mj it mh b gy ny ns l nt nu">            return self.genreDirectorCastEthnicityToPlot(genre, director, cast, ethnicity, seq_len, seq_num), "Pass"</span><span id="19f1" class="nq mj it mh b gy ny ns l nt nu">        elif genre and cast and not director and not ethnicity:</span><span id="aa19" class="nq mj it mh b gy ny ns l nt nu">            return self.genreCastToPlot(genre, cast, seq_len, seq_num), "Pass"<br/>        <br/>        elif genre and ethnicity and not director and not cast:</span><span id="f6d1" class="nq mj it mh b gy ny ns l nt nu">            return self.genreEthnicityToPlot(genre, ethnicity, seq_len, seq_num), "Pass"</span><span id="4640" class="nq mj it mh b gy ny ns l nt nu">        else:</span><span id="04fc" class="nq mj it mh b gy ny ns l nt nu">            return "Genre cannot be empty", "Fail"</span></pre><p id="4e20" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">保存<code class="fe me mf mg mh b">predict.py</code>文件，然后在调试模式下运行<code class="fe me mf mg mh b">app.py</code>文件，</p><pre class="ks kt ku kv gt nm mh nn no aw np bi"><span id="560c" class="nq mj it mh b gy nr ns l nt nu">python app.py</span></pre><h1 id="ca11" class="mi mj it bd mk ml mm mn mo mp mq mr ms ki mt kj mu kl mv km mw ko mx kp my mz bi translated">测试您的API</h1><ul class=""><li id="ba22" class="na nb it lk b ll nc lo nd lr ne lv nf lz ng md nh ni nj nk bi translated"><em class="nl">创建一个</em> <code class="fe me mf mg mh b"><em class="nl">test_api.py</em></code> <em class="nl">文件并执行</em></li></ul><pre class="ks kt ku kv gt nm mh nn no aw np bi"><span id="a78e" class="nq mj it mh b gy nr ns l nt nu"># test_api.py<br/>import requests<br/>import os</span><span id="7b1f" class="nq mj it mh b gy ny ns l nt nu">url = "&lt;http://localhost:5000/api/generatePlot&gt;"<br/>json = {<br/>    "genre": str(input("Genre: ")),<br/>    "director": str(input("Director: ")),<br/>    "cast": str(input("Cast: ")),<br/>    "ethnicity": str(input("Ethnicity: ")),<br/>    "num_plots": int(input("Num Plots: ")),<br/>    "seq_len": int(input("Sequence Length: ")),<br/>}</span><span id="ad29" class="nq mj it mh b gy ny ns l nt nu">r = requests.post(url, json = json)<br/>print(r.json())</span></pre><h1 id="5314" class="mi mj it bd mk ml mm mn mo mp mq mr ms ki mt kj mu kl mv km mw ko mx kp my mz bi translated">如何用<code class="fe me mf mg mh b">gunicorn</code>跑步？</h1><p id="22b7" class="pw-post-body-paragraph li lj it lk b ll nc kd ln lo nd kg lq lr nz lt lu lv oa lx ly lz ob mb mc md im bi translated">使用<code class="fe me mf mg mh b">gunicorn</code>和<code class="fe me mf mg mh b">flask</code>非常简单。在开始安装需求时，我们已经安装了<code class="fe me mf mg mh b">gunicorn</code>命令，现在我们需要转到<code class="fe me mf mg mh b">app.py</code>文件所在的文件夹。终端，并运行以下命令</p><pre class="ks kt ku kv gt nm mh nn no aw np bi"><span id="4786" class="nq mj it mh b gy nr ns l nt nu">gunicorn -k gthread -w 2 -t 40000 --threads 3 -b:5000 app:app</span></pre><p id="b229" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们上面使用的格式和标志表示以下内容</p><ul class=""><li id="02d2" class="na nb it lk b ll lm lo lp lr nv lv nw lz nx md nh ni nj nk bi translated"><em class="nl"> k: kind(工人类型)——</em><code class="fe me mf mg mh b"><em class="nl">gthread</em></code><em class="nl"/><code class="fe me mf mg mh b"><em class="nl">gevent</em></code><em class="nl">等...</em></li><li id="0116" class="na nb it lk b ll oo lo op lr oq lv or lz os md nh ni nj nk bi translated"><em class="nl"> w:工人数量</em></li><li id="75da" class="na nb it lk b ll oo lo op lr oq lv or lz os md nh ni nj nk bi translated"><em class="nl"> t:超时时间</em></li><li id="709c" class="na nb it lk b ll oo lo op lr oq lv or lz os md nh ni nj nk bi translated"><em class="nl">线程:每个工作线程的数量</em></li><li id="0584" class="na nb it lk b ll oo lo op lr oq lv or lz os md nh ni nj nk bi translated"><em class="nl"> b:绑定端口号</em></li></ul><p id="a083" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="nl">如果你的文件名是</em> <code class="fe me mf mg mh b"><em class="nl">server.py</em></code> <em class="nl">或</em><code class="fe me mf mg mh b"><em class="nl">flask_app.py</em></code><em class="nl"/><code class="fe me mf mg mh b"><em class="nl">app:app</em></code><em class="nl">部分会变成</em> <code class="fe me mf mg mh b"><em class="nl">server:app</em></code> <em class="nl">或</em> <code class="fe me mf mg mh b"><em class="nl">flask_app:app</em></code></p><h1 id="c942" class="mi mj it bd mk ml mm mn mo mp mq mr ms ki mt kj mu kl mv km mw ko mx kp my mz bi translated">概括起来</h1><p id="0ace" class="pw-post-body-paragraph li lj it lk b ll nc kd ln lo nd kg lq lr nz lt lu lv oa lx ly lz ob mb mc md im bi translated">在这篇博客中，我们看到了如何使用我们之前训练过的T5变压器来生成故事情节，并使用<code class="fe me mf mg mh b">flask</code>和<code class="fe me mf mg mh b">gunicorn</code>来部署它。这个博客很容易被关注，所以你不用浪费时间去不同的平台查看问题。希望你能享受阅读和实现这个的乐趣。</p></div></div>    
</body>
</html>