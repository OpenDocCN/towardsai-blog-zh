<html>
<head>
<title>My VS Code Setup To Prototype Rasa Chatbots</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我的VS代码设置原型Rasa聊天机器人</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/my-vs-code-setup-to-prototype-rasa-chatbots-2993062de90?source=collection_archive---------2-----------------------#2020-11-25">https://pub.towardsai.net/my-vs-code-setup-to-prototype-rasa-chatbots-2993062de90?source=collection_archive---------2-----------------------#2020-11-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="00f4" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/programming" rel="noopener ugc nofollow" target="_blank">编程</a></h2><div class=""/><div class=""><h2 id="2873" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">一些简化开发工作流程的VS代码特性</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/693a14c56929a9fa2a10e98f97f2ad6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H9zLDD5UVU1tEGKTkL94XQ.png"/></div></div></figure><h1 id="0d6c" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">介绍</h1><p id="2a89" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">在这篇文章中，我将分享我使用<a class="ae mr" href="https://rasa.com/" rel="noopener ugc nofollow" target="_blank"> Rasa </a>框架创建对话式人工智能代理的工作流程。它使用VS Code和Docker以一种与操作系统无关的方式自动化重复的任务和代码。</p><p id="0375" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">重现结果的代码可以在<a class="ae mr" href="https://github.com/hsm207/vscode_rasabot" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="e854" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">我假设读者对Rasa和Docker有基本的了解。</p><h1 id="2653" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">先决条件</h1><p id="9582" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">您需要安装以下软件才能继续操作:</p><ul class=""><li id="06c4" class="mx my it lx b ly ms mb mt me mz mi na mm nb mq nc nd ne nf bi translated"><a class="ae mr" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VS代码</a></li><li id="a5fc" class="mx my it lx b ly ng mb nh me ni mi nj mm nk mq nc nd ne nf bi translated"><a class="ae mr" href="https://docs.docker.com/compose/install/" rel="noopener ugc nofollow" target="_blank"> Docker撰写</a></li></ul><h1 id="80ae" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">设置</h1><h2 id="5706" class="nl le it bd lf nm nn dn lj no np dp ln me nq nr lp mi ns nt lr mm nu nv lt iz bi translated">概观</h2><p id="d71b" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">基于Rasa框架的聊天机器人原型围绕3个不同的任务:</p><ul class=""><li id="163b" class="mx my it lx b ly ms mb mt me mz mi na mm nb mq nc nd ne nf bi translated">编写(和调试)自定义操作</li><li id="844e" class="mx my it lx b ly ng mb nh me ni mi nj mm nk mq nc nd ne nf bi translated">训练模型以执行NLU和对话管理</li><li id="4458" class="mx my it lx b ly ng mb nh me ni mi nj mm nk mq nc nd ne nf bi translated">与机器人聊天以验证正确性</li></ul><p id="7978" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">该工作流的目标是让开发人员能够轻松地在这三个任务之间进行切换。这将涉及设置以下内容:</p><ol class=""><li id="42d2" class="mx my it lx b ly ms mb mt me mz mi na mm nb mq nw nd ne nf bi translated">创建操作服务器</li><li id="4560" class="mx my it lx b ly ng mb nh me ni mi nj mm nk mq nw nd ne nf bi translated">定义所需的服务</li><li id="d1c8" class="mx my it lx b ly ng mb nh me ni mi nj mm nk mq nw nd ne nf bi translated">创建新的Rasa项目</li><li id="ceea" class="mx my it lx b ly ng mb nh me ni mi nj mm nk mq nw nd ne nf bi translated">为自定义操作设置调试基础结构。</li></ol><h2 id="8b0d" class="nl le it bd lf nm nn dn lj no np dp ln me nq nr lp mi ns nt lr mm nu nv lt iz bi translated">步骤1:创建操作服务器</h2><p id="1414" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">首先，我们需要定义一个我们的动作服务器将在其中运行的环境。这个环境将包含运行动作服务器的代码以及我们的自定义动作将需要的任何依赖项。</p><p id="251e" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">例如，我们可以在名为<code class="fe nx ny nz oa b">dev.Dockerfile</code>的文件中编写以下内容:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/f3ababb0bf1807854f25bf1cbf4ac2a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*Lb3Al0SH5E7jWirS9k3ofA.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图1:动作服务器的环境</figcaption></figure><p id="196d" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">图1显示我们将使用<code class="fe nx ny nz oa b">rasa-sdk</code>作为我们的动作服务器，并安装<a class="ae mr" href="https://pypi.org/project/fuzzywuzzy/" rel="noopener ugc nofollow" target="_blank"> fuzzywuzzy </a>库作为依赖项(用于处理错别字)。</p><p id="a586" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">编写自定义动作将涉及大量的编码和测试，因此我们应该安装一些库来使我们的生活更容易，并应用软件工程最佳实践。例如:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi og"><img src="../Images/072cba8a96b624c1a86d22e8e9179965.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*yXrWORcgSkAD_s6kIvLRww.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图2:带有用于开发的有用库的Action server环境</figcaption></figure><p id="b8ed" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">有兴趣的读者可以看看<a class="ae mr" href="https://pypi.org/project/black/" rel="noopener ugc nofollow" target="_blank"> black </a>、<a class="ae mr" href="https://pypi.org/project/debugpy/" rel="noopener ugc nofollow" target="_blank"> debugby、</a>和<a class="ae mr" href="https://pypi.org/project/pytest/" rel="noopener ugc nofollow" target="_blank"> pytest </a>库是做什么的。</p><h2 id="2683" class="nl le it bd lf nm nn dn lj no np dp ln me nq nr lp mi ns nt lr mm nu nv lt iz bi translated">步骤2:定义所需的服务</h2><p id="f45a" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">一个正常运行的bot至少需要一个rasa服务器来托管bot，还需要一个操作服务器来运行自定义操作。</p><p id="2dd1" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">出于原型的目的，我们可以在<code class="fe nx ny nz oa b">docker-compose.yml</code>中定义以下服务:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oh"><img src="../Images/d13ff1bc6eece4a455cc192d295cdbbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q6ftvRLrfCXjHzsrE3rblQ.png"/></div></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图3:机器人将需要的服务</figcaption></figure><p id="1227" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">图3定义了一个名为<code class="fe nx ny nz oa b">rasa-server</code>的服务，它什么也不做，但是拥有托管机器人所需的所有依赖关系。它还定义了一个名为<code class="fe nx ny nz oa b">action-server</code>的服务，在调试模式下启动一个动作服务器。</p><h2 id="10e6" class="nl le it bd lf nm nn dn lj no np dp ln me nq nr lp mi ns nt lr mm nu nv lt iz bi translated">步骤3:创建新的Rasa项目</h2><p id="90c2" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">要创建一个新的Rasa项目，我们首先需要启动我们在上一步中定义的服务。</p><p id="708c" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">我们可以打开一个终端并执行<code class="fe nx ny nz oa b">docker-compose up</code>，但是更方便的方法是使用VS Code的<a class="ae mr" href="https://code.visualstudio.com/docs/getstarted/userinterface#_command-palette" rel="noopener ugc nofollow" target="_blank">命令面板</a>:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/dd671e2909138e67e10028bd4df5f906.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*ZmiHL__pSEoT930COPFqBQ.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图4:使用命令面板启动bot</figcaption></figure><p id="04a7" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">然后，在终端中，我们执行:</p><p id="b7c7" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated"><code class="fe nx ny nz oa b">docker-compose exec rasa-server rasa init</code></p><p id="b77f" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">创建新项目。</p><h2 id="ee82" class="nl le it bd lf nm nn dn lj no np dp ln me nq nr lp mi ns nt lr mm nu nv lt iz bi translated">步骤4:为自定义操作设置调试基础结构</h2><p id="6f6c" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">这一步包括创建一个<a class="ae mr" href="https://code.visualstudio.com/Docs/editor/debugging#_launch-configurations" rel="noopener ugc nofollow" target="_blank">启动配置</a>来启动一个将连接到动作服务器的进程。</p><p id="fa71" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">为此，只需在项目的根文件夹中的目录下创建一个名为<code class="fe nx ny nz oa b">launch.json</code>的文件。</p><p id="e4a2" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated"><code class="fe nx ny nz oa b">launch.json</code>的内容应该是这样的:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oj"><img src="../Images/81dd47075b86b7f80b2fa3a78abe3f9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VoKWCrfD88XUaSzMBYuzmg.png"/></div></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图4:启动配置以调试动作服务器</figcaption></figure><h1 id="72fd" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">一些快捷方式</h1><p id="9591" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">根据上一节中的步骤3，应该很清楚您可以通过在终端中执行来使用<a class="ae mr" href="https://rasa.com/docs/rasa/command-line-interface/" rel="noopener ugc nofollow" target="_blank"> Rasa CLI </a>:</p><p id="3af6" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated"><code class="fe nx ny nz oa b">docker-compose exec rasa-server rasa &lt;command&gt;</code></p><p id="0d34" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">其中<code class="fe nx ny nz oa b">&lt;command&gt;</code>是CLI支持的任何命令。</p><p id="9c98" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">但是打开一个终端并输入如此长的命令是令人厌烦的，尤其是当我们想要重复做这件事的时候，例如，训练机器人，与机器人聊天，验证数据集等等。</p><p id="dde7" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">这个问题的解决方案是通过在<code class="fe nx ny nz oa b">.vscode</code>目录中创建一个<code class="fe nx ny nz oa b">tasks.json</code>文件来创建一个<a class="ae mr" href="https://code.visualstudio.com/Docs/editor/tasks" rel="noopener ugc nofollow" target="_blank"> VS代码任务</a>，该文件将包含我们计划频繁执行的任务。</p><p id="137a" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">例如:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ok"><img src="../Images/d3bcda8ea105822ac113edf8b05d765f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QnUfT77O-xeinfmaF_cl-Q.png"/></div></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图5:一个<code class="fe nx ny nz oa b">tasks.json </code>文件的样本内容</figcaption></figure><p id="a870" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">图5定义了3个任务，即:</p><ol class=""><li id="92cc" class="mx my it lx b ly ms mb mt me mz mi na mm nb mq nw nd ne nf bi translated"><code class="fe nx ny nz oa b">Rasa: Launch Shell</code>哪个执行<code class="fe nx ny nz oa b">rasa shell</code></li><li id="dbb3" class="mx my it lx b ly ng mb nh me ni mi nj mm nk mq nw nd ne nf bi translated"><code class="fe nx ny nz oa b">Rasa: Launch Shell (debug)</code>它也启动rasa shell，但是设置了<code class="fe nx ny nz oa b">--debug</code>标志</li><li id="9cae" class="mx my it lx b ly ng mb nh me ni mi nj mm nk mq nw nd ne nf bi translated"><code class="fe nx ny nz oa b">Rasa: Train Bot</code>执行<code class="fe nx ny nz oa b">rasa train</code></li></ol><p id="d2f8" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">现在我们可以利用命令面板来启动在<code class="fe nx ny nz oa b">tasks.json</code>中定义的任何任务。</p><p id="ef11" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">例如，为了训练机器人，我们首先使用命令面板来调用<code class="fe nx ny nz oa b">Task: Run Task</code>命令:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/17975eee25d5277c852bafcf041c9fe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*OVzCpx1ETqlnBPLXsCHMyA.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图6:在VS代码中执行任务</figcaption></figure><p id="b937" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">然后，我们开始从我们打算执行的任务名称中键入几个字符，即<code class="fe nx ny nz oa b">Rasa: Train Bot</code>，以快速缩小可用任务的列表。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/3bc23728b5eebb96a2f35852d1fdabab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*D35VhqcH45LJ_oKTBI_Svw.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图7:找到我们想要执行的任务</figcaption></figure><h1 id="3f28" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">示例工作流</h1><p id="9ac1" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">本节将描述以下工作流程:</p><ul class=""><li id="3659" class="mx my it lx b ly ms mb mt me mz mi na mm nb mq nc nd ne nf bi translated">编写自定义操作。</li><li id="09fb" class="mx my it lx b ly ng mb nh me ni mi nj mm nk mq nc nd ne nf bi translated">调试自定义操作</li></ul><h2 id="7db9" class="nl le it bd lf nm nn dn lj no np dp ln me nq nr lp mi ns nt lr mm nu nv lt iz bi translated">编写自定义操作</h2><p id="ac97" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">编写自定义动作的第一步是调用命令面板来附加到包含<code class="fe nx ny nz oa b">action-server</code>的容器:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi on"><img src="../Images/fc4d015ea4f67e611098cba571f6e9e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*YG7loJWHGHjvlwZvMA8VFw.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图8a:启动“附加到运行容器”命令</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/7dc0b9f77647df85efaee07119e8881f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*TOAIvZ2rspsIimuEisu-mg.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图8b:连接到动作服务器</figcaption></figure><p id="3e6b" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">连接后，打开<code class="fe nx ny nz oa b">/app/actions</code>文件夹。</p><p id="e40b" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">最后，安装<a class="ae mr" href="https://code.visualstudio.com/docs/languages/python#_install-python-and-the-python-extension" rel="noopener ugc nofollow" target="_blank"> Python扩展</a>。</p><p id="5c98" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">现在，您已经能够在VS代码的完全支持下编写Python代码，例如林挺、自动完成、运行单元测试等。</p><h2 id="5bdf" class="nl le it bd lf nm nn dn lj no np dp ln me nq nr lp mi ns nt lr mm nu nv lt iz bi translated">调试自定义操作</h2><p id="786a" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">假设我们有一个错误的自定义操作，我们希望实时了解该操作的状态，以找出错误的来源。</p><p id="a2e0" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">为了简单起见，我们将使用<code class="fe nx ny nz oa b">rasa init</code>附带的默认定制动作。我们只需要在<code class="fe nx ny nz oa b">actions.py</code>文件中取消对它的注释:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/4695d835e93b4cbba5b3e3ea7d2f377b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*R0sIXxsS38rOSY91Vd4UoQ.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图actions.py中的默认定制动作</figcaption></figure><p id="1ab7" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">我们需要让这个动作能被机器人发现。这包括编辑以下文件:</p><ul class=""><li id="ad17" class="mx my it lx b ly ms mb mt me mz mi na mm nb mq nc nd ne nf bi translated">endpoints.yml</li><li id="74b3" class="mx my it lx b ly ng mb nh me ni mi nj mm nk mq nc nd ne nf bi translated">domain.yml</li></ul><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi op"><img src="../Images/b6db920f500a3e942d3cee65f00793df.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*t6ZhNVttjLWhKvB5k_LIPQ.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图10:endpoints . yml中的配置更新</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/28bb37985066a3ffbe616c81183c9bf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:746/format:webp/1*OZXDWd4hVLIxsyEZca7acQ.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图11:domain . yml中的配置更新</figcaption></figure><p id="980b" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">我们还需要一个能引发行动的故事。为了简单起见，我们将定义一个规则，当用户向机器人告别时，该操作将在该规则中运行(只需编辑<code class="fe nx ny nz oa b">rules.yml</code>中的一个预定义规则):</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi or"><img src="../Images/31d9c27d8860c0ee4eb0fc74b3fd322e.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/format:webp/1*6RbPSbQLSS4YF4_uZhvEgg.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图12:规则更新规则</figcaption></figure><p id="e7e5" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">我们现在准备开始调试过程。</p><p id="4d34" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">首先，启动我们在步骤4中定义的<code class="fe nx ny nz oa b">Rasa: Debug Action Server</code>配置。一种方法是使用命令面板启动<code class="fe nx ny nz oa b">Debug: Select and Start Debugging</code>命令并选择<code class="fe nx ny nz oa b">Rasa: Debug Action Server</code>:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi os"><img src="../Images/df459295d1bc2d44f450a1ca40d89c51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/format:webp/1*pnh2yPmKCiVVLbB8p0Rg0w.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图13a:启动调试配置</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/d695b01cbd9140ad51bed009d1761561.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*Pki3TOMugbLv2LbZVaER0Q.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图13b:选择调试动作服务器的配置</figcaption></figure><p id="9dcc" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">接下来，在自定义操作中插入一个断点:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/d1acaa22a3ae3348cd4f16e2062ea0f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*rilAgbPRSrnZNsqfgRT8NQ.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图14:在actions.py的第25行插入一个断点</figcaption></figure><p id="c9ce" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">此时，如果您启动rasa shell并发出“bye ”,将执行<code class="fe nx ny nz oa b">action_hello_world</code>动作，VS代码将在第25行暂停执行:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ov"><img src="../Images/99d59453cd007827c49b071f86e5fed5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iqZFwTAzoRfxFh1k_tPYTw.png"/></div></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图15: action_hello_world在第25行暂停</figcaption></figure><p id="1a8e" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">我们现在可以自由地检查环境(例如，查看调用堆栈和变量pan)并使用调试控制台执行任意Python代码。</p><h1 id="6d6f" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">清理</h1><p id="3768" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">当你完成一天的工作时，记得从命令面板调用<code class="fe nx ny nz oa b">docker-compose down</code>:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/ffd1554949bdfcd034d766415ecb8ee3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/1*y6a2a9a8m7TeCo8FHFP3IA.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">图16:停止所有容器</figcaption></figure><h1 id="05fb" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">利益</h1><p id="f660" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">这种设置的两个主要优点是:</p><ol class=""><li id="8b87" class="mx my it lx b ly ms mb mt me mz mi na mm nb mq nw nd ne nf bi translated"><strong class="lx jd">机器独立性</strong> —使用VS代码在本地或远程机器上开发代码(通过SSH或附加到远程容器)是很简单的。当你需要远程训练机器人时，这很方便，例如，使用云GPU。</li><li id="8cb6" class="mx my it lx b ly ng mb nh me ni mi nj mm nk mq nw nd ne nf bi translated"><strong class="lx jd">易于部署</strong>—<code class="fe nx ny nz oa b">docker-compose.yml</code>文件可以作为您的DevOps同事的蓝图，帮助他们了解如何在他们的定制基础架构上部署bot并与他们的CI/CD管道集成。</li></ol><h1 id="4982" class="ld le it bd lf lg lh li lj lk ll lm ln ki lo kj lp kl lq km lr ko ls kp lt lu bi translated">结论</h1><p id="6777" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">本文描述了我使用VS代码和Docker容器构建Rasa聊天机器人原型的工作流程。希望你觉得有用。</p><p id="bd3e" class="pw-post-body-paragraph lv lw it lx b ly ms kd ma mb mt kg md me mu mg mh mi mv mk ml mm mw mo mp mq im bi translated">如果你发现了进一步自动化的空间，请在评论中告诉我。</p></div></div>    
</body>
</html>