<html>
<head>
<title>Tutorial on Barplots using R’s ggplot Package</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用R的ggplot包的柱状图教程</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/tutorial-on-barplots-using-rs-ggplot-package-b7f86104a974?source=collection_archive---------1-----------------------#2019-07-21">https://pub.towardsai.net/tutorial-on-barplots-using-rs-ggplot-package-b7f86104a974?source=collection_archive---------1-----------------------#2019-07-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="2011" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">使用R ggplot | <a class="ae ep" href="https://towardsai.net/" rel="noopener ugc nofollow" target="_blank">朝向AI </a>的条形图</h2><div class=""/><div class=""><h2 id="bb86" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">对三个不同数据集的柱状图使用R的“ggplot”包</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/5efd9e253bb71ac5bddda62dfe46fa83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fdnGO8wgIFQkWc3OZRa3pw.png"/></div></div></figure><p id="206e" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">本教程将通过3个例子讨论如何使用R的ggplot软件包生成柱状图。另一个使用python的matplotlib包进行数据可视化的教程可以在这里找到:<a class="ae lz" href="https://medium.com/towards-artificial-intelligence/tutorial-on-data-visualization-weather-data-52efa1bef183" rel="noopener"> <strong class="lf jd">数据可视化教程:天气数据。</strong>T5】</a></p><h1 id="27a7" class="ma mb it bd mc md me mf mg mh mi mj mk ki ml kj mm kl mn km mo ko mp kp mq mr bi translated">1.2016年电动汽车市场份额</h1><p id="62ed" class="pw-post-body-paragraph ld le it lf b lg ms kd li lj mt kg ll lm mu lo lp lq mv ls lt lu mw lw lx ly im bi translated">该代码使用global_EV_2016.csv数据集绘制了选定国家电动汽车(EV)的全球市场份额:从该报告中获得的全球EV数据:<a class="ae lz" href="https://www.iea.org/publications/freepublications/publication/GlobalEVOutlook2017.pdf" rel="noopener ugc nofollow" target="_blank">https://www . IEA . org/publications/free publications/publication/globalevoutlook 2017 . pdf</a>。</p><p id="805b" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这个例子的代码可以从这个资源库下载:<a class="ae lz" href="https://github.com/bot13956/2016_market_share_electric_cars_using_R" rel="noopener ugc nofollow" target="_blank">https://github . com/bot 13956/2016 _ market _ share _ electric _ cars _ using _ R</a>。</p><p id="2e71" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">导入必要的库</strong></p><pre class="ks kt ku kv gt mx my mz na aw nb bi"><span id="6f5d" class="nc mb it my b gy nd ne l nf ng">library(readr)<br/>library(tidyverse)</span></pre><p id="0709" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">数据导入和准备</strong></p><pre class="ks kt ku kv gt mx my mz na aw nb bi"><span id="1d8a" class="nc mb it my b gy nd ne l nf ng">data&lt;-read_csv("global_EV_2016.csv",col_names = FALSE)<br/>head(data)<br/>data&lt;-data[-c(1,2),]<br/>names(data)&lt;-c("country","sales_bev","stock_bev","sales_phev","stock_phev","shares")<br/>head(data)</span></pre><p id="a596" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">为数据可视化生成柱状图</strong></p><pre class="ks kt ku kv gt mx my mz na aw nb bi"><span id="f0f7" class="nc mb it my b gy nd ne l nf ng">data%&gt;%drop_na(shares)%&gt;%mutate(shares=parse_number(shares))%&gt;%<br/>       filter(shares&gt;=0.91)%&gt;%<br/>       ggplot(aes(reorder(country, shares),shares))+<br/>       geom_col(fill="blue")+<br/>       coord_flip()+ theme(axis.title.x=element_blank())+<br/>       theme(axis.title.y=element_blank())+<br/>       ggtitle("Market share of electric vehicles in selected countries (%)")</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/c81e6784c427b7c8518f4d9b2f3fa25f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1130/format:webp/1*mvxO8q20cHCW_7XmccrQmA.png"/></div></figure><h1 id="32b1" class="ma mb it bd mc md me mf mg mh mi mj mk ki ml kj mm kl mn km mo ko mp kp mq mr bi translated">2.个人营销电子邮件柱状图</h1><p id="0093" class="pw-post-body-paragraph ld le it lf b lg ms kd li lj mt kg ll lm mu lo lp lq mv ls lt lu mw lw lx ly im bi translated">该代码使用marketing_emails.csv数据集生成了5个月期间来自百思买电子(BBY)、沃尔格林制药(WGN)和沃尔玛零售(WMT)的个人营销电子邮件柱状图。</p><p id="9050" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这个例子的代码可以从这个库下载:<a class="ae lz" href="https://github.com/bot13956/barplot_marketing_emails" rel="noopener ugc nofollow" target="_blank">https://github.com/bot13956/barplot_marketing_emails</a>。</p><p id="cca0" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">导入必要的库</strong></p><pre class="ks kt ku kv gt mx my mz na aw nb bi"><span id="2ae0" class="nc mb it my b gy nd ne l nf ng">library(readr)<br/>library(tidyverse)</span></pre><p id="6961" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">数据导入和准备</strong></p><pre class="ks kt ku kv gt mx my mz na aw nb bi"><span id="2ac5" class="nc mb it my b gy nd ne l nf ng">df&lt;-read.csv("marketing_emails.csv")<br/>df&lt;-df%&gt;%mutate(digit = seq(5,1,-1))<br/>df%&gt;%head()<br/>df2&lt;-data.frame(digit=c(df$digit,df$digit,df$digit),type=sort(as.vector(replicate(5,c("BBY","WGN","WMT")))), <br/>                quantity=c(df$Best,df$Walgreen,df$Walmart))<br/>df2%&gt;%head(n=10)</span></pre><p id="7d76" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">为数据可视化生成柱状图</strong></p><pre class="ks kt ku kv gt mx my mz na aw nb bi"><span id="eadd" class="nc mb it my b gy nd ne l nf ng">df2%&gt;%ggplot(aes(digit,quantity,fill=type))+geom_col(position = "dodge", width = 0.75)+<br/>  xlab("month")+ ylab("quantity")+<br/>  scale_x_continuous(breaks = as.integer(seq(1,5)), labels = c('Jul','Aug','Sep','Oct','Nov'))+<br/>  ggtitle("quantity of marketing emails from BBY, WGN, &amp; WMT in 2018")+theme_classic()+<br/>  theme(<br/>    plot.title = element_text(color="black", size=11, hjust=0.5, face="bold"),<br/>    axis.title.x = element_text(color="black", size=11, face="bold"),<br/>    axis.text.x = element_text(color="black", size=11, face="bold"),<br/>    axis.text.y = element_text(color="black", size=11, face="bold"),<br/>    axis.title.y = element_text(color="black", size=11, face="bold"),<br/>    legend.title = element_blank()<br/>  )</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/668015f4c6b1ea7eed5e74828b4ee587.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*KUHbCHwhBmyed1cXt6qPHw.png"/></div></figure><h1 id="25ea" class="ma mb it bd mc md me mf mg mh mi mj mk ki ml kj mm kl mn km mo ko mp kp mq mr bi translated">3.部分国家2016年GDP柱状图</h1><p id="5ec6" class="pw-post-body-paragraph ld le it lf b lg ms kd li lj mt kg ll lm mu lo lp lq mv ls lt lu mw lw lx ly im bi translated">该代码使用gdp.csv数据集生成选定国家的2016年GDP柱状图，该数据集可从以下网站获得:<a class="ae lz" href="https://data.oecd.org/gdp/gross-domestic-product-gdp.htm" rel="noopener ugc nofollow" target="_blank">https://data.oecd.org/gdp/gross-domestic-product-gdp.htm</a>。</p><p id="104e" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这个例子的代码可以从这个库下载:<a class="ae lz" href="https://github.com/bot13956/GDP_barplot_using_R" rel="noopener ugc nofollow" target="_blank">https://github.com/bot13956/GDP_barplot_using_R</a>。</p><p id="9af6" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">导入必要的库</strong></p><pre class="ks kt ku kv gt mx my mz na aw nb bi"><span id="8385" class="nc mb it my b gy nd ne l nf ng">library(tidyverse)<br/>library(scales)</span></pre><p id="b2a6" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">数据导入和准备</strong></p><pre class="ks kt ku kv gt mx my mz na aw nb bi"><span id="bac2" class="nc mb it my b gy nd ne l nf ng">data&lt;-read.csv("gdp.csv")<br/>head(data)<br/>names(data)[1]="location"<br/>ind&lt;-order(data$Value)<br/>data&lt;-data%&gt;%mutate(location=location[ind],Value=Value[ind])</span></pre><p id="257a" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">为数据可视化生成柱状图</strong></p><pre class="ks kt ku kv gt mx my mz na aw nb bi"><span id="1e0b" class="nc mb it my b gy nd ne l nf ng">data%&gt;%ggplot(aes(reorder(location,Value),Value))+geom_col(fill="blue")+<br/>scale_y_continuous(breaks=seq(0,100000,10000),               labels=c("0","10k","20k","30k","40k","50k","60k","70k","80k","90k","100k"))+<br/>theme(axis.text.x = element_text(angle = 45, hjust = 1,size=6))+<br/>theme(axis.title.x=element_blank())+<br/>theme(axis.title.y=element_blank())+<br/>ggtitle("Gross Domestic Product (GDP), Total, US dollars/Capita, 2016 ")</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/8e33439bc4177ca8f694d264ad0adfad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*8roUlACKsawaz_mbhjo7tA.png"/></div></figure><p id="9da1" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">总之，我们已经展示了如何使用R的ggplot包生成柱状图。</p></div></div>    
</body>
</html>