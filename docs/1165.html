<html>
<head>
<title>Build &amp; Deploy a Telegram Bot with short-term and long-term memory</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建和部署一个具有短期和长期记忆的电报机器人</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/build-deploy-a-python-bot-with-short-term-and-long-term-memory-a3f1cd6254b8?source=collection_archive---------0-----------------------#2020-11-22">https://pub.towardsai.net/build-deploy-a-python-bot-with-short-term-and-long-term-memory-a3f1cd6254b8?source=collection_archive---------0-----------------------#2020-11-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/bf7a59d41b19f964ce71b34753c515bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LgqxDMP5qD1HE_uM33zZrg.png"/></div></div></figure><h2 id="2306" class="jc jd je bd b dl jf jg jh ji jj jk dk jl translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/programming" rel="noopener ugc nofollow" target="_blank">编程</a></h2><div class=""/><div class=""><h2 id="6173" class="pw-subtitle-paragraph kk jn je bd b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dk translated">从头开始创建一个聊天机器人，用Python记住并提醒事件</h2></div><h2 id="8c32" class="lc ld je bd le lf lg dn lh li lj dp lk ll lm ln lo lp lq lr ls lt lu lv lw jk bi translated">摘要</h2><p id="0bba" class="pw-post-body-paragraph lx ly je lz b ma mb ko mc md me kr mf ll mg mh mi lp mj mk ml lt mm mn mo mp im bi translated">在本文中，我将使用Telegram和Python，展示如何构建一个具有多种功能的友好Bot，它可以用问答对话聊天(短期信息)，并存储用户数据以供将来回忆(长期信息)。</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mq"><img src="../Images/988dedfea9a4cb3e9c72dc79f3b19c41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*26NrpUwpE-U2Ijii9RlP-w.gif"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">聊天示例(作者图片)</figcaption></figure><p id="cd4c" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">这一切都是因为我的一个朋友因为我不记得她的生日而对我大喊大叫。我不知道你有没有遇到过这种情况。所以我想我可以假装我记得生日，而实际上我有一个机器人为我做这件事。现在我知道你在想什么了，为什么要从头开始构建一些东西，而不是使用周围数百万个日历应用程序中的一个？你是对的，但是对于像我们这样的书呆子来说…那有什么意思呢？</p><p id="3c3e" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">通过本教程，我将以我的约会提醒机器人<strong class="lz jo"> </strong>(以下链接)为例，一步步讲解<strong class="lz jo">如何用Python和MongoDB构建智能电报机器人以及如何用Heroku和Cron-Job免费部署</strong>、<strong class="lz jo"> </strong>。</p><div class="is it gp gr iu ne"><a href="https://t.me/DatesReminderBot" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jo gy z fp nj fr fs nk fu fw jn bi translated">DatesReminderBot</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">可以马上联系@DatesReminderBot。</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">t.me</p></div></div><div class="nn l"><div class="no l np nq nr nn ns ja ne"/></div></div></a></div><p id="410a" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">我将展示一些有用的Python代码，这些代码可以很容易地应用于其他类似的情况(只需复制、粘贴、运行)，并通过注释遍历每一行代码，以便您可以复制这个示例(下面是完整代码的链接)。</p><div class="is it gp gr iu ne"><a href="https://github.com/mdipietro09/Bot_TelegramDatesReminder" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jo gy z fp nj fr fs nk fu fw jn bi translated">mdipietro 09/Bot _ TelegramDatesReminder</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">GitHub是超过5000万开发者的家园，他们一起工作来管理和…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">github.com</p></div></div><div class="nn l"><div class="nt l np nq nr nn ns ja ne"/></div></div></a></div><p id="b71e" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">特别是，我将经历:</p><ul class=""><li id="1a3c" class="nu nv je lz b ma mz md na ll nw lp nx lt ny mp nz oa ob oc bi translated">设置:架构概述，新<em class="od">电报</em> Bot生成，<em class="od"> MongoDB </em>连接，<em class="od"> Python </em>环境。</li><li id="2f19" class="nu nv je lz b ma oe md of ll og lp oh lt oi mp nz oa ob oc bi translated">前端:编写用户与<em class="od"> pyTelegramBotAPI </em>交互的机器人命令。</li><li id="827f" class="nu nv je lz b ma oe md of ll og lp oh lt oi mp nz oa ob oc bi translated">后端:用<em class="od"> flask </em>和<em class="od"> threading </em>创建服务器端app。</li><li id="fbd2" class="nu nv je lz b ma oe md of ll og lp oh lt oi mp nz oa ob oc bi translated">通过<em class="od"> Heroku </em>和<em class="od"> Cron-Job </em>部署机器人</li></ul></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><h2 id="c333" class="lc ld je bd le lf lg dn lh li lj dp lk ll lm ln lo lp lq lr ls lt lu lv lw jk bi translated">设置</h2><p id="7814" class="pw-post-body-paragraph lx ly je lz b ma mb ko mc md me kr mf ll mg mh mi lp mj mk ml lt mm mn mo mp im bi translated">我想从这个应用程序的总体架构开始，这样我们就能清楚地知道这个短暂而有趣的旅程的最终目的地。我将构建一个Python应用程序，部署在<a class="ae oq" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>上，通过<a class="ae oq" href="https://telegram.org/blog/bot-revolution" rel="noopener ugc nofollow" target="_blank">电报机器人</a>与用户交互，将信息存储到<a class="ae oq" href="https://www.mongodb.com/" rel="noopener ugc nofollow" target="_blank"> MongoDB </a>中，并通过<a class="ae oq" href="https://cron-job.org/en/" rel="noopener ugc nofollow" target="_blank"> Cron-Job </a>向用户发送重复消息。</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi or"><img src="../Images/8905492d272444f1c336c2ed74940d75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*emaE-HmhKVWLKywq5ZwTfA.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">应用架构(图片由作者提供)</figcaption></figure><p id="e2cc" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">这个架构对于网络/移动应用来说是非常标准的。事实上，我们正在开发一个适当的应用程序，它使用Telegram作为前端。</p><p id="99c1" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">在开始编码之前，我们必须用Telegram生成Bot并创建MongoDB实例。</p><p id="ecb7" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">Telegram可以让你在不到一分钟的时间内<strong class="lz jo">生成一个新的机器人</strong>，只需给<a class="ae oq" href="https://telegram.me/botfather" rel="noopener ugc nofollow" target="_blank">机器人父亲</a>发一条消息，然后按照它的指示去做，就像这样:</p><div class="mr ms mt mu gt ab cb"><figure class="os iv ot ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/a8a00d5ad9e7387d8dc1a688bb3e6772.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*51wKuGwHylDdlTg9stTLTA.png"/></div></figure><figure class="os iv oy ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/705226647c6303a0fac229c8d017a857.png" data-original-src="https://miro.medium.com/v2/resize:fit:702/format:webp/1*fHgDhJ4LnTcL7_klzLmyLA.png"/></div></figure><figure class="os iv oz ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/77fbc26b0b8fdb29ccd6b43ed7de3606.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*9IP-Bna86vLEqU8OxmAJuw.png"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk pa di pb pc translated">作者图片</figcaption></figure></div><p id="57db" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">BotFather提供了一个秘密的API令牌，我们稍后会用到它。至于我们的机器人可能的命令，我将设置以下选项:</p><ul class=""><li id="4964" class="nu nv je lz b ma mz md na ll nw lp nx lt ny mp nz oa ob oc bi translated">启动功能(当用户启动机器人时运行)</li><li id="989e" class="nu nv je lz b ma oe md of ll og lp oh lt oi mp nz oa ob oc bi translated">保存和删除事件</li><li id="5496" class="nu nv je lz b ma oe md of ll og lp oh lt oi mp nz oa ob oc bi translated">查看今天的活动并查看我保存的所有活动</li><li id="7c5f" class="nu nv je lz b ma oe md of ll og lp oh lt oi mp nz oa ob oc bi translated">帮助功能</li></ul><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pd"><img src="../Images/472c1aefbedce9be1f5dc3fb71600269.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bb2-0F1X8SNyJdlZeTNXXQ.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">作者图片</figcaption></figure><p id="8208" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">这将使您能够在机器人启动并运行时，在与机器人的聊天中可视化并选择命令:</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pe"><img src="../Images/8c2d7c3543120fd74babeadc9cd34722.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ZIMlQjg_DhqvoNYPv50opQ.gif"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">作者图片</figcaption></figure><p id="0169" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">让我们继续进行<strong class="lz jo"> MongoDB设置</strong>并注册/登录<a class="ae oq" href="https://www.mongodb.com/cloud/atlas" rel="noopener ugc nofollow" target="_blank"> MongoDB Atlas </a>，一个云数据库服务。他们给你一个有500 MB存储空间的免费账户(创建集群时选择M0沙盒选项)。</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pf"><img src="../Images/2339b0566de3f1af6ad1fb1b9aa73523.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xlO9i53gDfqLIWduWLrQOg.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">作者图片</figcaption></figure><p id="33a0" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">在“集合”中，您可以创建您的数据库和集合:</p><div class="mr ms mt mu gt ab cb"><figure class="os iv pg ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/ebebe95ded67829d2d2a8db9551b7a67.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*SYELjsRWi5ZY9Ps9Zqe2SA.png"/></div></figure><figure class="os iv ph ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/18da7dfc413a5cb345ae304cfe320bca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*bV4ugp4GxoZHpHiba4xmqw.png"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk pi di pj pc translated">作者图片</figcaption></figure></div><p id="da2f" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">在“connect”中，您可以创建您的用户并设置您的密码，您应该将密码放入他们提供给您的字符串中，以便将您的应用程序连接到数据库。保存完整的字符串，因为我们以后会用到它。</p><div class="mr ms mt mu gt ab cb"><figure class="os iv pk ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/d8c2fc3fe86821edd892daa7ab35e348.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*DL1U63KiDKtkEZNR2XxIsw.png"/></div></figure><figure class="os iv pl ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/8e13113782f0126a37ea815ea84651b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*EZcSc4IhqbKl3D-s-RAvqA.png"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk pm di pn pc translated">作者图片</figcaption></figure></div><p id="40ea" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">为了编写我们的应用程序，我们需要设置我们的<strong class="lz jo"> Python环境</strong>。我将通过终端安装以下库:</p><pre class="mr ms mt mu gt po pp pq pr aw ps bi"><span id="5348" class="lc ld je pp b gy pt pu l pv pw">pip install <strong class="pp jo">pyTelegramBotAPI<br/></strong>pip install <strong class="pp jo">pymongo<br/></strong>pip install <strong class="pp jo">dnspython</strong><br/>pip install <strong class="pp jo">dateparser</strong><br/>pip install <strong class="pp jo">flask</strong></span></pre><p id="b80e" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">我认为<a class="ae oq" href="https://github.com/eternnoir/pyTelegramBotAPI" rel="noopener ugc nofollow" target="_blank"> <em class="od"> pyTelegramBotAPI </em> </a>是Telegram APIs的最佳Python库，因为它提供了轻松构建复杂聊天机器人的所有工具。人们可以直接使用Telegram APIs，但是这里没有必要重新发明轮子。<em class="od"> pymongo </em>和<em class="od"> dnspython </em>包是用python连接MongoDB所必需的。为了让Bot理解日期，我将使用<a class="ae oq" href="https://dateparser.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"><em class="od">date parser</em></a><em class="od">。</em></p><p id="508b" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">如果你正在阅读这篇文章，我假设你已经知道了<a class="ae oq" href="https://flask.palletsprojects.com/en/1.1.x/" rel="noopener ugc nofollow" target="_blank"><em class="od">flask</em></a><em class="od"/>(请注意，如果你不打算部署你的bot，你就不需要它)。</p><p id="ca60" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">现在都准备好了，让我们开始吧。</p><h2 id="3fa6" class="lc ld je bd le lf lg dn lh li lj dp lk ll lm ln lo lp lq lr ls lt lu lv lw jk bi translated">前端(电报机器人)</h2><p id="965c" class="pw-post-body-paragraph lx ly je lz b ma mb ko mc md me kr mf ll mg mh mi lp mj mk ml lt mm mn mo mp im bi translated">我们可以开始编写机器人了。首先调用<em class="od"> pyTelegramBotAPI </em>实例，插入BotFather提供的Telegram API TOKEN:</p><pre class="mr ms mt mu gt po pp pq pr aw ps bi"><span id="2c6a" class="lc ld je pp b gy pt pu l pv pw">import <strong class="pp jo">telebot</strong></span><span id="5eb4" class="lc ld je pp b gy px pu l pv pw">bot = <strong class="pp jo">telebot</strong>.TeleBot(<strong class="pp jo">"insert the Telegram API TOKEN"</strong>)</span></pre><p id="a098" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">其次，使用<em class="od"> pymongo </em>和从MongoDB Atlas获得的字符串连接到数据库:</p><pre class="mr ms mt mu gt po pp pq pr aw ps bi"><span id="b8b9" class="lc ld je pp b gy pt pu l pv pw">import <strong class="pp jo">pymongo</strong></span><span id="9d7e" class="lc ld je pp b gy px pu l pv pw">client = <strong class="pp jo">pymongo</strong>.MongoClient(<strong class="pp jo">"mongodb+srv://..."</strong>)<br/>db_name = "Telegram_DatesReminderBot"<br/>collection_name = "users"<br/>db = client[db_name][collection_name]</span></pre><p id="2f79" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">然后，我将定义一个空字典，其任务是存储临时用户信息(如用户id):</p><pre class="mr ms mt mu gt po pp pq pr aw ps bi"><span id="f806" class="lc ld je pp b gy pt pu l pv pw">dic_user = {}</span></pre><p id="9ddf" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">现在，我将浏览之前定义的<strong class="lz jo">主命令</strong>(启动、保存……)并为机器人编写适当的动作。让我们从“<em class="od"> /start </em>”开始，这是当你第一次开始与机器人聊天时自动执行的命令。我将让机器人以一条欢迎消息和下一步该做什么的建议开始:</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi py"><img src="../Images/ec42bf715ce6fa7ce9e22076ac78e8de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K-1dKEEJgfR6Kyk6z6YM_Q.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">作者图片</figcaption></figure><pre class="mr ms mt mu gt po pp pq pr aw ps bi"><span id="d2c2" class="lc ld je pp b gy pt pu l pv pw"><strong class="pp jo">@bot.message_handler(commands=['start'])</strong><br/>def <strong class="pp jo">_start</strong>(message):<br/>    msg = "Hello "+str(message.chat.username)+\<br/>          ", I'm a date reminder. Tell me birthdays and events to remind you. To learn how to use me, use \n/help"<br/>    bot.send_message(message.chat.id, msg)</span></pre><p id="bf15" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">有没有你认不出来的细节？让我来帮你:</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pz"><img src="../Images/1ad97491d388c8633925844c9f096a7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lc7-w9hBmV5D-yg0b2TvAA.png"/></div></div></figure><p id="7115" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">简单对吗？但那只是热身。现在“<em class="od"> /save </em>”命令将变得更加棘手，因为它涉及到一个问答对话:</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pe"><img src="../Images/335e091c3eec23fbd960a9b23fee9825.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_KM_dqwBshIWWMws4VXFRQ.gif"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">作者图片</figcaption></figure><pre class="mr ms mt mu gt po pp pq pr aw ps bi"><span id="c8a4" class="lc ld je pp b gy pt pu l pv pw"><strong class="pp jo">@bot.message_handler(commands=['save'])</strong><br/>def <strong class="pp jo">_save</strong>(message):<br/>    msg = "Set an event in the format 'month dd', for example: \n\<br/>            xmas day: Dec 25 \n\<br/>I also understand: \n\<br/>today, tomorrow, in 3 days, in 1 week, in 6 months, yesterday, 3 days ago ... so you can do: \n\<br/>            meeting: tomorrow"<br/>    message = bot.reply_to(message, msg)<br/>    bot.register_next_step_handler(message, <strong class="pp jo">save_event</strong>)</span></pre><p id="7b7c" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">可以看到，这次我用了<em class="od"> bot.reply_to() </em>而不是<em class="od"> bot.send_message()。</em>后者发送一般的聊天消息，前者发送响应特定输入的消息。我使用它是因为这是用户和机器人之间的真实对话:用户请求保存信息，机器人回复并等待用户响应。来自用户的新消息将由<em class="od">bot . register _ next _ step _ handler()</em>处理，作为<em class="od"> save_event() </em>函数的输入，我们现在将定义该函数，然后进行编码。</p><p id="57ac" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">按照上面的例子，我想挽救我妈妈的生日。为此，我输入“<em class="od"> mum: Oct 15 </em>”。机器人必须识别事件的名称，文本中的“<em class="od">妈妈</em>和日期“<em class="od">10月15日</em>”。之后，必须存储信息，考虑返回用户(已经在数据库中，所以我们需要更新用户的事件)和新用户(必须添加到数据库中)两种情况。</p><p id="a29f" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">用Python的术语来说:</p><pre class="mr ms mt mu gt po pp pq pr aw ps bi"><span id="a1ec" class="lc ld je pp b gy pt pu l pv pw">import <strong class="pp jo">dateparser</strong></span><span id="996a" class="lc ld je pp b gy px pu l pv pw">def <strong class="pp jo">save_event</strong>(message):<br/>    dic_user["id"] = str(message.chat.id)</span><span id="3511" class="lc ld je pp b gy px pu l pv pw"><strong class="pp jo">    ## get text</strong><br/>    txt = message.text<br/>    name= txt.split(":")[0].strip() <br/>    date = txt.split(":")[1].strip()</span><span id="d3cc" class="lc ld je pp b gy px pu l pv pw">    <strong class="pp jo">## check date</strong><br/>    date = <strong class="pp jo">dateparser</strong>.parse(date).strftime('%b %d')</span><span id="f78a" class="lc ld je pp b gy px pu l pv pw">    <strong class="pp jo">## save</strong><br/>    lst_users = db.distinct(key="id")<br/>    if dic_user["id"] not in lst_users:<br/>        db.insert_one({"id":dic_user["id"], "events":{name:date}})<br/>    else:<br/>        dic_events = db.find_one({"id":dic_user["id"]})["events"]<br/>        dic_events.update({name:date})<br/>        db.update_one({"id":dic_user["id"]}, {"$set":<br/>                      {"events":dic_events}})<br/>    <br/>    <strong class="pp jo">## send done</strong><br/>    msg = name+": "+date+" saved."<br/>    bot.send_message(message.chat.id, msg)</span></pre><p id="e208" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">注意，我使用了<em class="od"> dateparser </em>来识别人类可读的日期。这允许用户以不同的格式书写日期:</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pe"><img src="../Images/b90a261f421c910a183234e70715bea2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*R1LXa31ZHFASFolI24u0rQ.gif"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">作者图片</figcaption></figure><p id="727b" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">类似地，您可以构建其他函数来检查和删除db中的事件(我将在文章末尾提供完整的代码，或者您可以查看本教程开头的GitHub链接)。</p><p id="6c95" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">如果用户发送一些<strong class="lz jo">随机文本</strong>没有链接到任何特定命令会怎样？如果我们不包括这种事件，机器人将什么也不做。因此，我预计机器人应该正确响应的两种情况(问候和感谢消息)以及机器人用标准消息回答的所有其他情况。</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pe"><img src="../Images/5eee610706e1fbdf3b5d92e27d3df81d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*WsHzmiMPUqDTwssIuwn5aA.gif"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">作者图片</figcaption></figure><pre class="mr ms mt mu gt po pp pq pr aw ps bi"><span id="6ee9" class="lc ld je pp b gy pt pu l pv pw"><strong class="pp jo">@bot.message_handler(func=lambda m: True)</strong><br/>def <strong class="pp jo">chat</strong>(message):<br/>    txt = message.text<br/>    if any(x in txt.lower() for x in [<strong class="pp jo">"thank","thx","cool"</strong>]):<br/>        msg = "anytime"<br/>    elif any(x in txt.lower() for x in [<strong class="pp jo">"hi","hello","yo","hey"</strong>]):<br/>        msg = "yo" if str(message.chat.username) == "none" else <br/>              "yo "+str(message.chat.username)<br/>    else:<br/>        msg = "save a date with \n/save"<br/>    bot.send_message(message.chat.id, msg)</span></pre><p id="0666" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">我保持这部分相当基础，因为它不是本教程的主要焦点，但是人们可以使用更高级的NLP技术来使聊天机器人更加智能和健谈。</p><p id="2b7f" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">话虽如此，我们的机器人已经足够熟练，可以<strong class="lz jo">运行和测试</strong>。您可以在代码的末尾添加下面一行，然后执行整个脚本。</p><pre class="mr ms mt mu gt po pp pq pr aw ps bi"><span id="607e" class="lc ld je pp b gy pt pu l pv pw">bot.infinity_polling(True)</span></pre><p id="7d28" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">现在，您的机器人已经启动并运行，由您的笔记本电脑托管。你可以在电报上玩它。如果您不打算部署您的bot，您可以在这里停下来，因为本文的其余部分解释了部署的步骤。</p><h2 id="f782" class="lc ld je bd le lf lg dn lh li lj dp lk ll lm ln lo lp lq lr ls lt lu lv lw jk bi translated">后端(烧瓶应用程序)</h2><p id="fec0" class="pw-post-body-paragraph lx ly je lz b ma mb ko mc md me kr mf ll mg mh mi lp mj mk ml lt mm mn mo mp im bi translated">我们将首先在<a class="ae oq" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a> <strong class="lz jo">，</strong>云平台即服务上创建一个<strong class="lz jo">新的应用程序项目</strong>，该项目只需一个免费帐户即可部署PoC应用程序。您可以链接您的GitHub项目并部署其中一个分支。</p><div class="mr ms mt mu gt ab cb"><figure class="os iv qa ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/5a8d89ef86f6a1b3ec68ad98d35e325d.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*rW2jXG6Hsf7JELb6v2SXnQ.png"/></div></figure><figure class="os iv qb ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/b70198a35658eca5892172262997f8b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*JI3EP5lQCC1ZaCwfjaiTDg.png"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk qc di qd pc translated">作者图片</figcaption></figure></div><p id="808d" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">目前，我们还没有准备好部署应用程序。我们只需要Heroku生成的app网址。保存它；你很快就会需要它。</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi qe"><img src="../Images/bb33057b5df770d36e21a618443dca2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*459RpIofBoA-4yD4idZGZQ.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">作者图片</figcaption></figure><p id="06e8" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">让我们回到编码上来，从添加一个新的带有<em class="od"> flask </em>的服务器端应用程序到我们已经编辑过的Python脚本<em class="od"> : </em>开始</p><pre class="mr ms mt mu gt po pp pq pr aw ps bi"><span id="1bf0" class="lc ld je pp b gy pt pu l pv pw">import <strong class="pp jo">flask</strong></span><span id="9dbf" class="lc ld je pp b gy px pu l pv pw">server = <strong class="pp jo">flask</strong>.Flask(__name__)</span></pre><p id="2927" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">我们必须<strong class="lz jo">设置一个webhook </strong>，这是web开发中用于将实时信息从一个应用程序传递到另一个应用程序的常用方法。多亏了webhook，Telegram Bot将实时数据推送到Heroku应用程序。</p><pre class="mr ms mt mu gt po pp pq pr aw ps bi"><span id="a056" class="lc ld je pp b gy pt pu l pv pw"><strong class="pp jo">@server.route('/Telegram API TOKEN', methods=['POST'])<br/></strong>def <strong class="pp jo">getMessage</strong>():<br/>   bot.process_new_updates([<strong class="pp jo">telebot</strong>.types.Update.de_json(<br/>      <strong class="pp jo">flask</strong>.request.stream.read().decode("utf-8"))])<br/>   return "!", 200</span><span id="8b0d" class="lc ld je pp b gy px pu l pv pw"><strong class="pp jo">@server.route("/")<br/></strong>def <strong class="pp jo">webhook</strong>():<br/>   bot.remove_webhook()<br/>   bot.set_webhook(url=<strong class="pp jo">'Heroku App Web Address /'</strong><br/>                      +<strong class="pp jo">'Telegram API TOKEN'</strong>)<br/>   return "!", 200</span></pre><p id="3e5c" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">所以现在我们的Bot几乎什么都有了，它还需要最后也是最重要的功能:<strong class="lz jo">提醒</strong>。它聊天并保存信息，但这款应用的主要目的是自动发送警报。因此，我将构建一个调度程序，它会在每次运行时检查今天的事件并发送事件提醒。</p><pre class="mr ms mt mu gt po pp pq pr aw ps bi"><span id="7091" class="lc ld je pp b gy pt pu l pv pw">import <strong class="pp jo">datetime</strong></span><span id="fbe2" class="lc ld je pp b gy px pu l pv pw">def <strong class="pp jo">scheduler</strong>():<br/>    lst_users = db.distinct(key="id")<br/>    for user in lst_users:<br/>        dic_events = db.find_one({"id":user})["events"]<br/>        today = <strong class="pp jo">datetime</strong>.datetime.today().strftime('%b %d')<br/>        res = [k for k,v in dic_events.items() if v == today]<br/>        if len(res) &gt; 0:<br/>            msg = "Today's events: "+", ".join(res)<br/>            bot.send_message(user, msg)</span></pre><p id="be94" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">当应用程序被执行时，这个调度程序将在不同于主<em class="od">烧瓶</em>应用程序的线程上运行。换句话说，这个应用程序将同时发生两件事:聊天机器人功能和日程提醒。你可以把这两个主要动作放在脚本的末尾，当全部代码执行时，它们会让一切正常工作。</p><pre class="mr ms mt mu gt po pp pq pr aw ps bi"><span id="91be" class="lc ld je pp b gy pt pu l pv pw">import <strong class="pp jo">threading</strong><br/>import <strong class="pp jo">os</strong></span><span id="a71b" class="lc ld je pp b gy px pu l pv pw">if __name__ == "__main__":<br/>   <strong class="pp jo">threading</strong>.Thread(target=scheduler).start()<br/>   server.run(host="0.0.0.0", <br/>              port=int(<strong class="pp jo">os</strong>.environ.get("PORT", 5000)))</span></pre><h2 id="5fda" class="lc ld je bd le lf lg dn lh li lj dp lk ll lm ln lo lp lq lr ls lt lu lv lw jk bi translated">部署</h2><p id="1774" class="pw-post-body-paragraph lx ly je lz b ma mb ko mc md me kr mf ll mg mh mi lp mj mk ml lt mm mn mo mp im bi translated">最后，是时候部署应用程序了。在继续之前，我将展示我的存储库的<strong class="lz jo">结构:</strong></p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi qf"><img src="../Images/94fd86c09361c112b5ea1d8ccc302879.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*evBaBmiHVJ0N0WQ0IiLVGw.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">作者图片</figcaption></figure><p id="92a1" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">您不必保持相同的回购结构，但是您肯定需要Heroku需要的两个文件:requirements.txt，您可以从终端创建</p><pre class="mr ms mt mu gt po pp pq pr aw ps bi"><span id="d428" class="lc ld je pp b gy pt pu l pv pw">pip freeze &gt; requirements.txt</span></pre><p id="83a5" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">和<em class="od"> Procfile </em>(没有扩展名)，包含部署后要执行的命令</p><pre class="mr ms mt mu gt po pp pq pr aw ps bi"><span id="2be8" class="lc ld je pp b gy pt pu l pv pw">web: python telegram_bot.py</span></pre><p id="51b6" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">关于<strong class="lz jo">电报和MongoDB密钥</strong>，我们需要将它们作为配置变量放在Heroku上(我将它们命名为“<em class="od"> telegram_key </em>”和“<em class="od"> mongodb_key </em>”):</p><div class="mr ms mt mu gt ab cb"><figure class="os iv qg ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/fb1191512446defb4491484513b03a01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1494/format:webp/1*BwpWXRIyiLxXsGdicnH6Rg.png"/></div></figure><figure class="os iv qh ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/1e0f1d989752df0e28c8345639c213bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:508/format:webp/1*dezc4O46DAJm3R9o8UHtRw.png"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk qi di qj pc translated">作者图片</figcaption></figure></div><p id="7ae4" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">当应用程序在Heroku上运行时，我的<em class="od">设置</em>文件夹中的<em class="od"> config.py </em>文件负责检索和使用密钥。以下是<em class="od"> config.py: </em>中的完整代码</p><pre class="mr ms mt mu gt po pp pq pr aw ps bi"><span id="8a7b" class="lc ld je pp b gy pt pu l pv pw">import <strong class="pp jo">os</strong></span><span id="aac1" class="lc ld je pp b gy px pu l pv pw"><strong class="pp jo">ENV = "PROD"</strong>  <strong class="pp jo">#&lt;--- change here DEV or PROD</strong></span><span id="6d97" class="lc ld je pp b gy px pu l pv pw"><strong class="pp jo">## keys</strong><br/><strong class="pp jo">if ENV == "DEV":</strong><br/> <strong class="pp jo">from settings import keys</strong><br/> telegram_key = <strong class="pp jo">keys</strong>.telegram_key<br/> mongodb_key = <strong class="pp jo">keys</strong>.mongodb_key</span><span id="1af2" class="lc ld je pp b gy px pu l pv pw"><strong class="pp jo">elif ENV == "PROD":</strong><br/> import <strong class="pp jo">ast</strong><br/> telegram_key = <strong class="pp jo">ast</strong>.literal_eval(<strong class="pp jo">os</strong>.environ["telegram_key"])<br/> mongodb_key = <strong class="pp jo">ast</strong>.literal_eval(<strong class="pp jo">os</strong>.environ["mongodb_key"])</span><span id="dd21" class="lc ld je pp b gy px pu l pv pw"><strong class="pp jo">## server</strong><br/>host = "0.0.0.0"<br/>port = int(<strong class="pp jo">os</strong>.environ.get("PORT", 5000))</span></pre><p id="5904" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">这里是<em class="od"> telegram_bot.py </em>中的<strong class="lz jo">完整代码</strong>，这是我们在整个教程中一直在做的机器人和应用程序的主脚本:</p><figure class="mr ms mt mu gt iv"><div class="bz fp l di"><div class="qk ql l"/></div></figure><p id="3904" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">酷，让我们<strong class="lz jo">部署</strong>这个坏小子上Heroku:</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi qm"><img src="../Images/e2960ceb9c0a30c7e5be88611ea551e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_rzJHSYOVZ95GH8c1n3nVA.png"/></div></div></figure><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi qn"><img src="../Images/522f2c85f906c1b1eb01a655229df7e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*beoetCx2dxaOc4R36BogxA.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">作者图片</figcaption></figure><p id="30d8" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">现在，您应该已经安装并运行了Heroku web应用程序，并且能够在Telegram上使用该机器人。试试吧！</p><p id="cf3c" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">最后，我将<strong class="lz jo">设置一个</strong><a class="ae oq" href="https://cron-job.org/en/" rel="noopener ugc nofollow" target="_blank"><strong class="lz jo">Cron-Job</strong></a>来ping Heroku web地址。这将使页面重新加载，应用程序重新启动，预定提醒将在其线程上运行。</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi qo"><img src="../Images/89287599bf511dbc12d84d49ef2c3704.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*upNJuQobezjvxkH1vE7Yxw.png"/></div></div></figure><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi qp"><img src="../Images/8cdb50a1b4235d3736cda3e869d80543.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_x4QGgnu8vkDkGfyIo3ERQ.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">作者图片</figcaption></figure><p id="4c0c" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">所以明天，当我们醒来的时候，我们会发现一条关于今天发生的事情的消息。</p><div class="mr ms mt mu gt ab cb"><figure class="os iv qq ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/9c7cf21e07bccf5348ac87974d85914d.png" data-original-src="https://miro.medium.com/v2/resize:fit:618/format:webp/1*ek5ploguPUWi10X5JaMPxA.png"/></div></figure><figure class="os iv qr ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/a6be8779a0530f025ef778b84c75c706.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/1*26NrpUwpE-U2Ijii9RlP-w.gif"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk qs di qt pc translated">作者图片</figcaption></figure></div><h2 id="50bb" class="lc ld je bd le lf lg dn lh li lj dp lk ll lm ln lo lp lq lr ls lt lu lv lw jk bi translated">结论</h2><p id="c969" class="pw-post-body-paragraph lx ly je lz b ma mb ko mc md me kr mf ll mg mh mi lp mj mk ml lt mm mn mo mp im bi translated">本文是一个教程，展示了如何用Python构建一个漂亮的电报机器人，它将用户数据存储在MongoDB中，并通过Cron-Job检索信息。现在你知道它是如何工作的了，你可以开发你自己的聊天机器人来玩。</p><p id="dbd4" class="pw-post-body-paragraph lx ly je lz b ma mz ko mc md na kr mf ll nb mh mi lp nc mk ml lt nd mn mo mp im bi translated">我希望你喜欢它！如有问题和反馈，或者只是分享您感兴趣的项目，请随时联系我。</p><blockquote class="qu"><p id="3199" class="qv qw je bd qx qy qz ra rb rc rd mp dk translated">👉<a class="ae oq" href="https://linktr.ee/maurodp" rel="noopener ugc nofollow" target="_blank">我们来连线</a>👈</p></blockquote></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><blockquote class="re rf rg"><p id="698a" class="lx ly od lz b ma mz ko mc md na kr mf rh nb mh mi ri nc mk ml rj nd mn mo mp im bi translated">本文是使用Python 开发<strong class="lz jo">应用程序系列的一部分，另请参见:</strong></p></blockquote><div class="is it gp gr iu ne"><a href="https://towardsdatascience.com/web-development-with-python-dash-complete-tutorial-6716186e09b3" rel="noopener follow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jo gy z fp nj fr fs nk fu fw jn bi translated">用Python进行Web开发:Dash(完整教程)</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">用Plotly绘图，嵌入引导CSS，上传和下载文件，选择后改变输入，导航条，微调器，和…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">towardsdatascience.com</p></div></div><div class="nn l"><div class="rk l np nq nr nn ns ja ne"/></div></div></a></div><div class="is it gp gr iu ne"><a href="https://towardsdatascience.com/how-to-embed-bootstrap-css-js-in-your-python-dash-app-8d95fc9e599e" rel="noopener follow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jo gy z fp nj fr fs nk fu fw jn bi translated">如何在你的Python Dash应用中嵌入引导CSS &amp; JS</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">使用Dash Bootstrap组件构建新冠肺炎感染预测应用程序</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">towardsdatascience.com</p></div></div><div class="nn l"><div class="rl l np nq nr nn ns ja ne"/></div></div></a></div><div class="is it gp gr iu ne"><a href="https://towardsdatascience.com/surpass-excel-vlookup-with-python-and-nlp-ab20d56c4a1a" rel="noopener follow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jo gy z fp nj fr fs nk fu fw jn bi translated">字符串匹配:用Python和NLP超越Excel VLOOKUP</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">为所有Excel爱好者(和讨厌者)构建一个字符串匹配应用程序</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">towardsdatascience.com</p></div></div><div class="nn l"><div class="rm l np nq nr nn ns ja ne"/></div></div></a></div></div></div>    
</body>
</html>