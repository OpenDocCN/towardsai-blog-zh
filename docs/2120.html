<html>
<head>
<title>Optimization Case Study: Defining the problem — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">优化案例研究:定义问题—第1部分</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/optimization-case-study-defining-the-problem-part-1-3409b4b75183?source=collection_archive---------0-----------------------#2021-08-25">https://pub.towardsai.net/optimization-case-study-defining-the-problem-part-1-3409b4b75183?source=collection_archive---------0-----------------------#2021-08-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="0ac4" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/optimization" rel="noopener ugc nofollow" target="_blank">优化</a></h2><div class=""/><div class=""><h2 id="5b4b" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">决定每个品牌有多少部智能手机，以及动态定价是否合理</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/906af147ece9a90e40c318dfc413586b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4mriRfYOCQhokOEsX0Cc4Q.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">来自<a class="ae lh" href="https://unsplash.com/photos/a_PDPUPuNZ8?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditShareLink" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="2b23" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="me">这是一个两部分的案例研究，其中</em> <strong class="lk jd"> <em class="me">我们在第一部分定义了优化问题</em> </strong> <em class="me">，而</em> <strong class="lk jd"> <em class="me">我们使用Pulp python库作为工具来解决</em> <a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="/optimization-case-study-solving-the-problem-and-deciding-part-2-71c05521be06"> <em class="me">第二部分</em> </a>中的业务问题 </strong> <em class="me">。</em></p><h2 id="ba7d" class="mf mg it bd mh mi mj dn mk ml mm dp mn lr mo mp mq lv mr ms mt lz mu mv mw iz bi translated"><strong class="ak">简介</strong></h2><p id="e5e4" class="pw-post-body-paragraph li lj it lk b ll mx kd ln lo my kg lq lr mz lt lu lv na lx ly lz nb mb mc md im bi translated">优化问题是任何企业的困境。这可以归结为两种决策:要么最大化，要么最小化，无论是利润还是成本。</p><p id="59b7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">任何优化问题在解决之前都需要定义三件事</p><ol class=""><li id="5a09" class="nc nd it lk b ll lm lo lp lr ne lv nf lz ng md nh ni nj nk bi translated">决策变量s——你能控制什么</li><li id="e2fb" class="nc nd it lk b ll nl lo nm lr nn lv no lz np md nh ni nj nk bi translated">目标函数——我们想要达到的目标</li><li id="0f84" class="nc nd it lk b ll nl lo nm lr nn lv no lz np md nh ni nj nk bi translated">约束条件—我们的资源有多有限</li></ol><p id="08c2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">典型的优化问题可以用本身就是数学的优化方法来解决。因此，我们需要用数学方法来表示我们上面的组件定义。</p><blockquote class="nq nr ns"><p id="ffcf" class="li lj me lk b ll lm kd ln lo lp kg lq nt ls lt lu nu lw lx ly nv ma mb mc md im bi translated">优化方法的目标是在给定约束的情况下找到目标的最优解。</p></blockquote><p id="a3da" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们创造一个场景。</p><blockquote class="nq nr ns"><p id="71d3" class="li lj me lk b ll lm kd ln lo lp kg lq nt ls lt lu nu lw lx ly nv ma mb mc md im bi translated">假设我们被一家智能手机电子商务公司聘为分析师，该公司销售两大品牌的智能手机:三星和苹果。该公司目前有一个天真的动态定价策略，在一天中不断改变同一款手机的价格。该公司想知道是否决定了一个固定价格，每个品牌需要多少库存，以及坚持他们天真的动态定价是否有意义，即，在给定约束的情况下，它是否使收入最大化？</p></blockquote><p id="c285" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">该公司还不想做A/B测试来做这个决定，而是一个优化方法。这能用最优化方法解决吗？大部分情况下，是的。</p><p id="da00" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这里的优化陈述是<strong class="lk jd">每种品牌的手机一天应该卖多少，因为我们一天都有一个固定的价格，我们可以获得最大的收入</strong>。</p><p id="4690" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">第二个商业问题是:<strong class="lk jd">这个最优的最大收入是比我们平均一天的收入多还是少？我们是否应该坚持目前的定价策略？</strong></p><p id="fa07" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们从阐明我们的三个优化组件开始</p><ul class=""><li id="c220" class="nc nd it lk b ll lm lo lp lr ne lv nf lz ng md nw ni nj nk bi translated"><strong class="lk jd">决策变量:</strong>我们可以控制每个品牌的库存数量</li></ul><p id="4fb0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">数学上，</strong></p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="db24" class="mf mg it ny b gy oc od l oe of">Our decision variables can be represented as A and S</span><span id="db34" class="mf mg it ny b gy og od l oe of">where <br/>A is the number of Apple phone stock <br/>S is the number of Samsung phone stock</span></pre><ul class=""><li id="e29b" class="nc nd it lk b ll lm lo lp lr ne lv nf lz ng md nw ni nj nk bi translated"><strong class="lk jd">目标函数:</strong>我们希望在固定价格的情况下实现收入最大化，并找出A和S的最佳组合最符合最优解。<em class="me">(如果这听起来像是线性回归算法的目标，那是因为线性回归算法也被认为是优化算法)。</em></li></ul><p id="f8d2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">数学上，</strong></p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="354a" class="mf mg it ny b gy oc od l oe of">Z = P1 * A + P2 * S</span><span id="7117" class="mf mg it ny b gy og od l oe of">where<br/>Z is the optimal maximum revenue</span><span id="18a9" class="mf mg it ny b gy og od l oe of">P1 and P2 are the fixed prices of the brands respectively</span></pre><ul class=""><li id="e108" class="nc nd it lk b ll lm lo lp lr ne lv nf lz ng md nw ni nj nk bi translated"><strong class="lk jd">约束条件:</strong>假设我们唯一的约束条件是平均每天可以拥有的手机总量</li></ul><p id="7858" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">数学上，</strong></p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="e7d4" class="mf mg it ny b gy oc od l oe of">A + S &lt;= X</span><span id="d9b7" class="mf mg it ny b gy og od l oe of">where<br/>X is the maximum number of phones we can have available. This is should not be confused as the decision variables. Even though we have a maximum capacity constraint, we still have the free will to decide how we want to allocate the quantity available to each of the brands i.e should we have more of apple or less of apple and vice versa</span></pre><p id="8a01" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">很高兴知道优化方法强调的是<strong class="lk jd">最优解决方案</strong>，这意味着业务解决方案可以有三种风格</p><ul class=""><li id="8a62" class="nc nd it lk b ll lm lo lp lr ne lv nf lz ng md nw ni nj nk bi translated">不满足约束的解决方案，即不可行的解决方案</li><li id="eaba" class="nc nd it lk b ll nl lo nm lr nn lv no lz np md nw ni nj nk bi translated">满足约束的解决方案，即可行且可接受的解决方案</li><li id="0405" class="nc nd it lk b ll nl lo nm lr nn lv no lz np md nw ni nj nk bi translated">在可接受的解决方案中，有一个最优的最佳解决方案</li></ul><h2 id="0a73" class="mf mg it bd mh mi mj dn mk ml mm dp mn lr mo mp mq lv mr ms mt lz mu mv mw iz bi translated"><strong class="ak">我来给大家介绍一下数据。</strong></h2><p id="d7f1" class="pw-post-body-paragraph li lj it lk b ll mx kd ln lo my kg lq lr mz lt lu lv na lx ly lz nb mb mc md im bi translated">该数据有4个基本列:时间戳、日期、品牌和每个手机品牌在不同时间的价格。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oh oi l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">由作者在DataPane中创建</figcaption></figure><p id="9a33" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们做一个快速EDA来提取我们需要的重要数字，它们是</p><ul class=""><li id="44e7" class="nc nd it lk b ll lm lo lp lr ne lv nf lz ng md nw ni nj nk bi translated">我们想要使用的固定价格</li><li id="edf6" class="nc nd it lk b ll nl lo nm lr nn lv no lz np md nw ni nj nk bi translated">容量限制</li><li id="6fa1" class="nc nd it lk b ll nl lo nm lr nn lv no lz np md nw ni nj nk bi translated">我们目前平均每天的收入</li></ul><p id="bdb3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">假设该品牌智能手机在2020年的销售价格会有变化</strong>，这取决于一天中的时间。</p><p id="0095" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们通过获得每个手机品牌的平均价格分布并将这些价格用作每个品牌在一天中任何时间的固定价格来简化事情。</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="c5bf" class="mf mg it ny b gy oc od l oe of">def average_price(data):</span><span id="41cf" class="mf mg it ny b gy og od l oe of">"""</span><span id="164b" class="mf mg it ny b gy og od l oe of">Get the average price per brand by summing the unique variation of prices over time and dividing it by the count of variations</span><span id="f96c" class="mf mg it ny b gy og od l oe of">""" </span><span id="3dc2" class="mf mg it ny b gy og od l oe of">   brand_price = {}</span><span id="1a39" class="mf mg it ny b gy og od l oe of">   for i in list(data['brand'].unique()):</span><span id="7426" class="mf mg it ny b gy og od l oe of">   list_price_sum = sum(data[data['brand']==i]['price'].unique())</span><span id="cc2c" class="mf mg it ny b gy og od l oe of">   unique_price_count = data[data['brand']==i]['price'].nunique()</span><span id="1b33" class="mf mg it ny b gy og od l oe of">   avg_price = list_price_sum/unique_price_count</span><span id="c26e" class="mf mg it ny b gy og od l oe of">   brand_price[i] = round(avg_price , 2)</span><span id="416a" class="mf mg it ny b gy og od l oe of">   return(brand_price)</span><span id="e383" class="mf mg it ny b gy og od l oe of">average_price_per_brand = average_price(smartphone_data)</span><span id="d0cc" class="mf mg it ny b gy og od l oe of"><br/>&gt;&gt;&gt;&gt; Output</span><span id="ca51" class="mf mg it ny b gy og od l oe of">{'apple': 788.53, 'samsung': 425.81}</span></pre><p id="0ed0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">从上面的分析中，我们分别得到苹果和三星智能手机的<code class="fe oj ok ol ny b">$788.53</code>和<code class="fe oj ok ol ny b">$425.81</code>。因此，我们可以在我们的目标方程中估算这些数字。</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="f53a" class="mf mg it ny b gy oc od l oe of">Z = 788.53A + 425.81S</span></pre><p id="fdb1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">为了得到容量限制，</strong>让我们简化一下，计算手机总销量，然后除以数据中可用的天数，得到<strong class="lk jd">每天可用的平均手机库存。</strong> <em class="me">(我们假设每天所有的存货都卖完了)</em></p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="2747" class="mf mg it ny b gy oc od l oe of">def average_phone_available(data):</span><span id="f0b1" class="mf mg it ny b gy og od l oe of">"""</span><span id="0e11" class="mf mg it ny b gy og od l oe of">Get the average daily stock of phones by getting all the phones sold so far and dividing it by the number of days recorded</span><span id="8b7e" class="mf mg it ny b gy og od l oe of">"""</span><span id="937d" class="mf mg it ny b gy og od l oe of">   inventory_sold = data.shape[0]</span><span id="8b03" class="mf mg it ny b gy og od l oe of">   days_so_far = data['date'].nunique()</span><span id="88f2" class="mf mg it ny b gy og od l oe of">   average_inventory_available = inventory_sold/days_so_far</span><span id="9046" class="mf mg it ny b gy og od l oe of">   return(round(average_inventory_available,0))</span><span id="8c24" class="mf mg it ny b gy og od l oe of">average_inventory_available = average_phone_available(smartphone_data)</span><span id="a530" class="mf mg it ny b gy og od l oe of">&gt;&gt;&gt; Output</span><span id="498f" class="mf mg it ny b gy og od l oe of">694.0</span></pre><p id="af6d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">从上面的分析中，我们得到了<code class="fe oj ok ol ny b">694.0</code>平均可用库存。这样，我们可以用数学方法完成约束方程，如下所示</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="10d2" class="mf mg it ny b gy oc od l oe of">A + S &lt;= <!-- -->694.0</span></pre><p id="19cc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">谜题的最后一块是知道我们目前每天赚多少钱。<em class="me">(虽然这不是优化问题直接需要的，但在回答第二个问题陈述(是否坚持我们的动态定价)时会需要)</em></p><p id="8206" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">对于这个<strong class="lk jd">(同样，为了简化起见)</strong>，我们将得到迄今为止获得的总收入，并用它除以记录的天数，以近似得到<strong class="lk jd">该公司在该时刻的日收入</strong>。</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="9e29" class="mf mg it ny b gy oc od l oe of">def average_revenue(data):</span><span id="a886" class="mf mg it ny b gy og od l oe of">"""</span><span id="bf52" class="mf mg it ny b gy og od l oe of">Get the average revenue made in a day by getting the sum of revenue made so far divided by the number of days recorded</span><span id="ff09" class="mf mg it ny b gy og od l oe of">"""</span><span id="6268" class="mf mg it ny b gy og od l oe of">   revenue_so_far = sum(data['price'])</span><span id="0b20" class="mf mg it ny b gy og od l oe of">   days_so_far = data['date'].nunique()</span><span id="1ca1" class="mf mg it ny b gy og od l oe of">   average_daily_revenue = revenue_so_far/days_so_far</span><span id="7f14" class="mf mg it ny b gy og od l oe of">   return (round(average_daily_revenue,2))</span><span id="8e21" class="mf mg it ny b gy og od l oe of">revenue_daily_average = average_revenue(smartphone_data)<br/></span><span id="0793" class="mf mg it ny b gy og od l oe of">&gt;&gt;&gt; Output </span><span id="03a9" class="mf mg it ny b gy og od l oe of">247963.17</span></pre><p id="1788" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们开始四处走动。这是该公司目前使用简单的动态定价策略平均每天输出的收入。</p></div><div class="ab cl om on hx oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="im in io ip iq"><p id="09d0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在我们已经定义了所有的变量和方程，让我们使用python来解决优化问题。</p><p id="9d43" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> <em class="me">在下面的文章</em></strong><a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="/optimization-case-study-solving-the-problem-and-deciding-part-2-71c05521be06"><strong class="lk jd"><em class="me">中了解如何使用python库解决这个业务案例问题。</em></strong></a></p><h2 id="44fa" class="mf mg it bd mh mi mj dn mk ml mm dp mn lr mo mp mq lv mr ms mt lz mu mv mw iz bi translated">常见问题解答</h2><ul class=""><li id="6871" class="nc nd it lk b ll mx lo my lr ot lv ou lz ov md nw ni nj nk bi translated"><strong class="lk jd">在哪里可以找到使用的原始数据集？</strong> <em class="me">你可以在</em> <a class="ae lh" href="https://www.kaggle.com/mkechinov/ecommerce-purchase-history-from-electronics-store" rel="noopener ugc nofollow" target="_blank"> <em class="me">中找到数据集</em> </a> <em class="me">。然而，我使用原始版本的一个干净子集来简化案例研究。你可以在Github的</em> <strong class="lk jd"> <em class="me">上</em>  <em class="me">这里找到我的清理程序和分析</em> <a class="ae lh" href="https://github.com/anitaokoh/smartphone-quantity-optimization" rel="noopener ugc nofollow" target="_blank"> <em class="me">。</em> </a></strong></li><li id="5401" class="nc nd it lk b ll nl lo nm lr nn lv no lz np md nw ni nj nk bi translated"><strong class="lk jd">你为什么用苹果和三星？是因为它们一般都是大众品牌吗？</strong> <em class="me">很遗憾，没有，我做了一个快速的探索性分析，看到智能手机是原始数据集中需求最多的，苹果和三星也是最受欢迎的品牌。可以说这些数据很好地代表了现实世界。</em></li><li id="87f6" class="nc nd it lk b ll nl lo nm lr nn lv no lz np md nw ni nj nk bi translated"><strong class="lk jd">优化问题就这么简单？</strong> <em class="me"> Lol，不，不总是。当你需要考虑更多的决策变量和约束时，事情就变得复杂了。</em></li><li id="ba19" class="nc nd it lk b ll nl lo nm lr nn lv no lz np md nw ni nj nk bi translated">我们真的需要约束吗？ <em class="me"> Lol。好主意。资源永远是无限的吗？</em></li></ul></div></div>    
</body>
</html>