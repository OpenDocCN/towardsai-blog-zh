<html>
<head>
<title>Hadoop YARN Architecture</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Hadoop纱线架构</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/hadoop-yarn-architecture-56f910b0b75f?source=collection_archive---------3-----------------------#2020-06-14">https://pub.towardsai.net/hadoop-yarn-architecture-56f910b0b75f?source=collection_archive---------3-----------------------#2020-06-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="6c4a" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/programming" rel="noopener ugc nofollow" target="_blank">编程</a></h2><div class=""/><p id="22d6" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">YARN代表另一种资源谈判者。随着Hadoop 2.x的出现，YARN成为Hadoop生态系统的一部分，随之而来的是Hadoop的主要架构变化。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div class="gh gi ku"><img src="../Images/9c0d61d83c8e010d4593c651b8a63dcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*T6lKK7NMUgNcMhP5V_OHAA.png"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">故事</figcaption></figure><p id="4996" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">YARN管理集群环境中的资源。就这样？在Hadoop 2.x之前我们没有任何资源管理器吗？当然，在Hadoop 2.x之前我们有一个资源管理器，它被称为<strong class="jy ja">作业跟踪器</strong>。</p><p id="f41f" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated"><strong class="jy ja">那么什么是工作追踪系统</strong>？</p><p id="01ff" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">JobTracker (JT)用于管理集群资源和执行MapR或MapReduce作业执行，这意味着数据处理。JT配置和监控每个运行的任务。如果一个任务失败，它会重新分配一个新的插槽，让该任务重新开始。任务完成后，它释放资源并清理内存。</p><p id="2b0b" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">JT用来执行许多任务，这种方法也有一些缺点。我没有在Hadoop 1.x上工作过，但尝试在下面列出其中一些。</p><p id="c7c1" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">上述方法的缺点:</p><ol class=""><li id="71f9" class="lg lh iq jy b jz ka kd ke kh li kl lj kp lk kt ll lm ln lo bi translated">它只有一个组件:JobTracker，用于执行许多活动，如资源管理、作业调度、作业监控、重新调度作业等，这给单个组件带来了很大的压力。</li><li id="794e" class="lg lh iq jy b jz lp kd lq kh lr kl ls kp lt kt ll lm ln lo bi translated">JobTracker是单点故障，这使得JT成为高度可用的资源，因此如果一个JT失败，那么所有任务都将重新启动。</li><li id="f3e0" class="lg lh iq jy b jz lp kd lq kh lr kl ls kp lt kt ll lm ln lo bi translated">静态资源分配，因为map和reduce槽是预定义和保留的，所以即使槽空闲，它们也不能用于其他应用程序。</li></ol><p id="cecb" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">以上是Hadoop 1.x工作方式的一些主要缺点。</p><p id="fe3c" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">所以下一个出现在脑海中的问题是，纱线是如何解决这个问题的？<strong class="jy ja">纱</strong>分离资源管理层和数据处理组件层。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/a93a591c2e5895459388b6f7ebae93b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*M3XJTJVqIy9loWXg7GANKA.png"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">地图1与地图2</figcaption></figure><p id="b08b" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">在MapR1中，所有的资源管理和处理任务都由JobTracker完成，但随着Hadoop 2.x的发布，这两个层都被划分了，对于资源管理层，我们有了<strong class="jy ja"> YARN </strong>。现在Hadoop 2.x说，对于数据处理，使用MapR、Spark、Tez和其他可用的数据处理框架，而YARN负责资源协商。</p><p id="d4e0" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">Hadoop 2.x将MapR组件分离为不同的组件，最终增加了整个生态系统的功能，从而提高了可用性和可扩展性。</p><p id="0510" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated"><strong class="jy ja">纱线及其成分</strong></p><p id="30dd" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated"><strong class="jy ja"> YARN </strong>由两部分组成:<strong class="jy ja">资源管理器</strong>和<strong class="jy ja">节点管理器</strong>。</p><p id="30ae" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated"><strong class="jy ja">详细架构:</strong></p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/d53ad15c2212d1257250fab511a2502c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*0HeNN3j3iExAtBH2sMm7bw.png"/></div></figure><p id="60b0" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated"><strong class="jy ja">让我们了解一下不同的组件:</strong></p><h1 id="9621" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">资源管理程序</h1><p id="932f" class="pw-post-body-paragraph jw jx iq jy b jz mu kb kc kd mv kf kg kh mw kj kk kl mx kn ko kp my kr ks kt ij bi translated">Spark采用主从架构，资源管理器位于主节点。RM是主要的权威，帮助管理诸如RAM、CPU使用、网络带宽等资源。不同的工作。资源管理器维护运行的应用程序列表和可用资源列表。</p><p id="829a" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated"><strong class="jy ja">资源管理器</strong>有两个组件:<strong class="jy ja">调度器</strong>和<strong class="jy ja">应用管理器。</strong></p><ol class=""><li id="13ad" class="lg lh iq jy b jz ka kd ke kh li kl lj kp lk kt ll lm ln lo bi translated"><strong class="jy ja">调度程序:</strong></li></ol><p id="aaaa" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">调度程序代表资源管理器负责资源分配部分。它根据资源的可用性将资源分配给各种MapR或Spark应用程序。</p><p id="599c" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">调度程序纯粹负责资源分配，不参与任何其他活动，如监视或跟踪作业状态等。</p><p id="2ea7" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated"><strong class="jy ja"> 2。应用经理:</strong></p><p id="61f9" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">应用程序管理器在从节点中启动特定于应用程序的<strong class="jy ja">应用程序主机</strong>。</p><p id="f01d" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">注意:<strong class="jy ja">应用管理器</strong>和<strong class="jy ja">应用主机</strong>是不同的组件</p><p id="f606" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">Application Manager为容器协商启动Application Master，并在失败时帮助重新启动。</p><p id="6086" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">简而言之，当资源管理器接受一个新的MapR或Spark应用程序提交时，Scheduler做出的最初决定之一就是选择一个容器来启动该特定应用程序的Application Master，而应用程序管理器负责启动该应用程序。</p><h1 id="02ab" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">节点管理器</h1><p id="3c6b" class="pw-post-body-paragraph jw jx iq jy b jz mu kb kc kd mv kf kg kh mw kj kk kl mx kn ko kp my kr ks kt ij bi translated">在Hadoop 2.x之前，曾经有固定数量的插槽来执行Map和Reduce作业，但在Hadoop 2.x之后，插槽的概念被动态创建/分配<strong class="jy ja">资源容器所取代。</strong></p><p id="4535" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated"><strong class="jy ja">容器</strong>是指CPU、RAM、磁盘或硬盘、网络IO等资源的集合，类似于服务器。</p><p id="2c5c" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">一个<strong class="jy ja">节点管理器</strong>是每台机器的框架代理，负责保存容器，监控它们的资源使用情况(CPU、RAM、磁盘等)。)并将其报告回给<strong class="jy ja">资源管理器中的<strong class="jy ja">调度器</strong>。</strong>节点管理器存在于<strong class="jy ja">从系统</strong>上。</p><p id="2956" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">节点管理器定期对资源执行健康检查，如果任何健康检查失败，节点管理器会将该节点标记为不健康，并将其报告回资源管理器。</p><p id="1b2c" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">资源管理器+节点管理器=计算框架</p><h1 id="e8ea" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">应用程序主机</h1><p id="9af9" class="pw-post-body-paragraph jw jx iq jy b jz mu kb kc kd mv kf kg kh mw kj kk kl mx kn ko kp my kr ks kt ij bi translated">Application master是特定于应用程序或基于应用程序的，由应用程序管理器启动。</p><p id="aa32" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">Application Master从资源管理器协商资源，并与节点管理器一起执行和监控任务。Application Master负责应用程序的整个生命周期。</p><p id="633e" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">Application Master向资源管理器发送资源请求，并请求容器来运行应用程序任务。在接收到来自应用程序主机的请求后，资源管理器验证资源需求并检查资源的可用性，并授予容器以满足资源请求。</p><p id="22f1" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">授予容器后，应用程序主机将请求节点管理器利用资源并启动特定于应用程序的任务。</p><p id="1cc4" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">Application Master监控应用程序及其任务的进度。如果出现故障，它会请求一个新的容器来启动任务并报告故障。</p><p id="784e" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">在应用程序的执行完成后，应用程序主机关闭并释放其容器。因此标志着执行完成。</p><p id="bf5e" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">这就是所有的纱线及其各种成分。</p><h1 id="6204" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">总结:</h1><p id="f663" class="pw-post-body-paragraph jw jx iq jy b jz mu kb kc kd mv kf kg kh mw kj kk kl mx kn ko kp my kr ks kt ij bi translated">什么是纱线</p><p id="d3dc" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">Hadoop 2.x之前和2 . x之后的比较</p><p id="08ef" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">Yarn如何修复2.x之前的问题</p><p id="3147" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">资源管理器、节点管理器、应用程序主机等组件及其功能</p><p id="c5ff" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">Application Master如何工作</p></div></div>    
</body>
</html>