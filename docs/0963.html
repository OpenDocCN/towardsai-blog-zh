<html>
<head>
<title>Solving SUDOKU with Binary Integer Linear Programming(BILP)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用二进制整数线性规划求解数独</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/solving-sudoku-with-binary-integer-linear-programming-bilp-b30c194a9266?source=collection_archive---------0-----------------------#2020-09-23">https://pub.towardsai.net/solving-sudoku-with-binary-integer-linear-programming-bilp-b30c194a9266?source=collection_archive---------0-----------------------#2020-09-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/17cb25c59101be7b64ec9df67ccf86e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:526/format:webp/1*LU_QkIgtlQydw439WmAbYQ.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">二进制整数线性规划数独</figcaption></figure><h1 id="212e" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">背景</h1><p id="2f60" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">数独是一种基于逻辑的谜题，1979年在美国的《戴尔铅笔谜题和文字游戏》杂志上以“数字位置”的标题首次出现[6]。这款游戏是由建筑师霍华德·加恩斯设计的，他退休后转向了拼图创作。20世纪80年代，这款游戏在日本越来越受欢迎，出版商Nikoli将其更名为“suji wa dokushin ni kagiru”，意思是“数字必须保持单一。”这最终被缩短为“数独”或“单一数字”</p><blockquote class="lu lv lw"><p id="5592" class="kw kx lx ky b kz ly lb lc ld lz lf lg ma mb lj lk mc md ln lo me mf lr ls lt ij bi translated">注意—假设读者已经知道线性编程的基础知识</p></blockquote></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="3109" class="jy jz iq bd ka kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv bi translated"><strong class="ak">数独是优化问题吗？</strong></h1><p id="ac8f" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">不。基本上没有。因为没有我们想要最大化或最小化的目标函数。<strong class="ky ir">数独问题</strong>可以称为可满足性或可行性<strong class="ky ir">问题</strong>。</p><h1 id="1a7f" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">让我们从规则开始…</h1><p id="21b5" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">数独最常见的形式是9 ×9矩阵。规则很简单:填充矩阵，使每一行、每一列和3 ×3的子矩阵恰好包含一次数字1到9。每个谜题都有一定数量的已知答案。这些的数量和位置决定了diﬃculty.游戏的水平</p><p id="7590" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">正如我们所知，每个ILP问题都由一个目标函数(不适用于数独，除非有备选方案)、决策变量和约束条件组成。</p><blockquote class="lu lv lw"><p id="3192" class="kw kx lx ky b kz ly lb lc ld lz lf lg ma mb lj lk mc md ln lo me mf lr ls lt ij bi translated">好消息是，我们没有为此编写约束，我们只是从数学上把难题的规则作为约束！</p></blockquote><h1 id="53f8" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><strong class="ak">数独难题的整数规划数学模型</strong></h1><p id="3bda" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">为了便于解释，我将在前面使用一个4x4的矩阵。让我们考虑使用BILP解决以下难题。</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/190b94a2e5fe6fdab27988557d9c86cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:332/format:webp/1*qzzAoMwGjACOeBWGeh6KPQ.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">图1: 4x4数独拼图</figcaption></figure><p id="6dfa" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">更具体地说，我们将为一般的n×n难题制定一个二进制整数程序(BILP)。一旦程序被开发来解决图1的BILP，它可以很容易地适应解决任何数独难题。</p><p id="59e6" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">首先，我们定义我们的决策变量:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/4e985a6c852c410dcfb71f852f56b775.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*8ToIk-QYFlpfEPcO8Bx-hg.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">通用二元决策变量</figcaption></figure><p id="18b7" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">当决策变量的值确定后，我们就知道每个整数k(1 ≤k≤4)是否出现在n×n数独矩阵的每个元素(I，j)中。也就是说，对应的数独谜题的解将被定义。</p><p id="797f" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">我们现在转向非常重要的目标函数和约束集。请注意，这些约束条件只需要了解数独谜题的规则(增加了一个隐式约束条件，这是下面的约束条件(6 )),而不需要具备手动解决此类谜题所需的逻辑能力。适用于数独谜题的BILP公式如下:</p><p id="1643" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated"><strong class="ky ir"> <em class="lx"> Min 0 </em> </strong>(让我们将其定义为常数，因为没有最小化或最大化的函数)</p><p id="6099" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated"><strong class="ky ir"> <em class="lx">服从</em> </strong></p><p id="fcd3" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated"><strong class="ky ir"> <em class="lx">约束1: </em> </strong> <em class="lx">每个单元格包含一个整数k </em></p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi my"><img src="../Images/0758f6fbfe652c8664e43885959359e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*14GBZ-p8RPcPk1i2JEhdFw.png"/></div></figure><p id="ace7" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated"><strong class="ky ir"> <em class="lx">约束2: </em> </strong> <em class="lx">每个整数k在每一行出现一次</em></p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/63326892f7b6d56ef250697e609f490a.png" data-original-src="https://miro.medium.com/v2/resize:fit:844/format:webp/1*yhV0T7ej2jLJ1b0soxLG7w.png"/></div></figure><p id="828f" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated"><strong class="ky ir"> <em class="lx">约束3: </em> </strong> <em class="lx">每个整数k在每列出现一次</em></p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi na"><img src="../Images/4b5b54dc4e2b06b50849d1592979b2aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*ph07MjBAWx1iNYNr97o6UQ.png"/></div></figure><p id="6a41" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated"><strong class="ky ir"> <em class="lx">约束4: </em> </strong> <em class="lx">每个整数k在每个子矩阵中出现一次</em></p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/a7807df6ccec5cf565d00b47db6e31ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*GbK62fi_Ff8BlHdnWFbe0g.png"/></div></figure><p id="973e" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated"><strong class="ky ir"> <em class="lx">约束5: </em> </strong> <em class="lx">给定矩阵中的元素G被设置为“on”</em></p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/c552de841803188dd5f07d80862f51fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*q00UItuHQ7lyVl04NIt9rA.png"/></div></figure><p id="6233" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated"><strong class="ky ir"> <em class="lx">约束6: </em> </strong> <em class="lx">定义整数的可能值</em></p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/7f42d89a8219a8b87a54cb6874d55ce4.png" data-original-src="https://miro.medium.com/v2/resize:fit:208/format:webp/1*3Kps5-o02kSmu2CpJ8htIA.png"/></div></figure><p id="b2d7" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">而且，就是这样！</p><p id="e955" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">让我们使用Excel求解器来解决上面的4x4数独难题(图1)。一个有64个二进制决策变量的4x4拼图的模拟模板如下所示。</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/26430b7a5ec609c82815df54028cb939.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*Nvt8qIwQOkF9wMFq0n2ugw.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">具有64个二元决策变量的数独模拟模板</figcaption></figure><p id="db83" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">现在，让我们解释一下前面提到的约束条件:</p><p id="3c3f" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated"><strong class="ky ir"> <em class="lx">约束1:每个单元格包含一个整数k。绿色的</em> </strong>制表符(<em class="lx"> i，j = 1 </em>之和)将确保每个位置都填充一个整数值。</p><p id="2da5" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated"><strong class="ky ir"> <em class="lx">约束2:每个整数k在每一行出现一次。</em> </strong>砖红色的标签(第1行的总和:4 &gt; = 1)将确保每个k在每一行中只出现一次。</p><p id="1040" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated"><strong class="ky ir"> <em class="lx">约束3:每个整数k在每列出现一次。</em> </strong>橄榄色的制表符(1列之和:16 &gt; = 1)将确保每个k在每一列中只出现一次。</p><p id="f21b" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated"><strong class="ky ir"> <em class="lx">约束4:每个整数k在每个子矩阵中出现一次。</em> </strong>蓝绿色的标签(象限1:4的和&gt; = 1)将确保每个k在每个2x2矩阵中只出现一次。</p><p id="ef6a" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated"><strong class="ky ir"> <em class="lx">约束5:矩阵中给定元素G设置为“开”。</em></strong><em class="lx">k的给定值是硬编码的。</em></p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi nf"><img src="../Images/e51121d3aefa62ef8fa6aadb6e2f3356.png" data-original-src="https://miro.medium.com/v2/resize:fit:212/format:webp/1*cuXd16ns-3a9Oj2s4ZgK7g.png"/></div></div></figure><p id="3f80" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">最后一步是将64个黄色、桃色、灰色和蓝色决策变量单元格中给出的整数规划解转换为所需的4x 4数独网格。然后，每个二进制单元格乘以a<em class="lx">“k”</em>可能取的一组值(即{1，2，3，4})。</p><h1 id="8b99" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">现在让我们得到解决方案…</h1><p id="b690" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">这就是Excel规划求解的外观</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/d5fca1eb53b60c768a3209141af0d435.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*W-_TFxz2vRbaKh2ISzLh4g.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">Excel规划求解</figcaption></figure><p id="17a6" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">…瞧！4x4拼图的解决方案应该是这样的。</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/6a124aaa7f91ebe3e3cd1656184e7434.png" data-original-src="https://miro.medium.com/v2/resize:fit:202/format:webp/1*HQHpz1n_VyTlnIJkWxAgCw.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">图1中难题的解决方案</figcaption></figure><h1 id="7701" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">临终遗言</h1><p id="d8bc" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">上述逻辑不仅可以用来解决任何数独难题，也可以用来创建一个。我希望，你们觉得它很容易掌握，也很有趣！在<a class="ae nm" href="https://www.linkedin.com/in/harjot-kaur-99792118/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>上跟我连线，多聊聊优化。</p></div></div>    
</body>
</html>