<html>
<head>
<title>Titanic Survival Prediction — I</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">泰坦尼克号生存预测— I</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/titanic-survival-prediction-i-bf5a04afff46?source=collection_archive---------1-----------------------#2021-01-13">https://pub.towardsai.net/titanic-survival-prediction-i-bf5a04afff46?source=collection_archive---------1-----------------------#2021-01-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="3a5d" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/data-analysis" rel="noopener ugc nofollow" target="_blank">数据分析</a></h2><div class=""/><div class=""><h2 id="79f3" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">Titanic数据集上的探索性数据分析和特征工程</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/457d3425bb080db762450f30d541e5c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GK23T_ovJ88ZzVn-qX6igg.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated"><a class="ae le" href="https://dribbble.com/ousama_alsaadi" rel="noopener ugc nofollow" target="_blank">图片来源</a></figcaption></figure><p id="39ca" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><a class="ae le" href="https://www.kaggle.com/c/titanic" rel="noopener ugc nofollow" target="_blank"> <em class="mb">泰坦尼克号Kaggle竞赛</em> </a> <em class="mb"> </em>是了解机器学习管道的好地方。在本文中，我们将讨论构建预测模型的初步步骤。我们开始吧！</p></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><p id="d94b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> <em class="mb">比赛总结:</em> </strong></p><p id="2f64" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们的目的是从一系列特征中确定一名乘客是否会在事故中幸存。换句话说，我们将建立一个二进制分类模型，输出‘1’表示乘客在泰坦尼克号沉没时幸存，输出‘0’表示没有幸存。</p><p id="2137" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">下面是所提供的训练数据集中的存活率的可视化。基于这个给定的基础事实的百分比；我们将训练五个典型的分类模型并比较它们的性能:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/098e0f92c2ff48487c139061488f18b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*r5P1GCH1Gyg2JNrIKVqHxg.png"/></div></figure><p id="d862" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> <em class="mb">探索性数据分析:</em> </strong></p><p id="99ab" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">构建机器学习模型的第一步也是最重要的一步是EDA。这包括以下内容:</p><ul class=""><li id="cd52" class="mk ml iq lh b li lj ll lm lo mm ls mn lw mo ma mp mq mr ms bi translated">理解潜在的信息，如行数和列数、数据类型、查看数据中的几个样本、一般数字，如平均众数。</li><li id="3ab1" class="mk ml iq lh b li mt ll mu lo mv ls mw lw mx ma mp mq mr ms bi translated">指出缺失值的比例，并决定如何解决它们。</li><li id="fa45" class="mk ml iq lh b li mt ll mu lo mv ls mw lw mx ma mp mq mr ms bi translated">数据可视化。</li></ul><p id="9a2a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">因此，让我们探索训练集，并建立对我们的数据的理解:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="808c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们从上述代码中收集了以下信息:</p><ul class=""><li id="b902" class="mk ml iq lh b li lj ll lm lo mm ls mn lw mo ma mp mq mr ms bi translated">训练数据包括总共891个例子和12个特征；包括'<em class="mb">幸存下来的</em>旗。</li><li id="e582" class="mk ml iq lh b li mt ll mu lo mv ls mw lw mx ma mp mq mr ms bi translated">我们混合了离散和连续的特征。</li><li id="6d7a" class="mk ml iq lh b li mt ll mu lo mv ls mw lw mx ma mp mq mr ms bi translated">有三列缺少值(年龄、客舱、上船)</li></ul><p id="301a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">继续，现在让我们详细讨论每个特性，以便获得更好的直觉。</p><ol class=""><li id="36df" class="mk ml iq lh b li lj ll lm lo mm ls mn lw mo ma na mq mr ms bi translated"><strong class="lh ja"> <em class="mb"> Pclass </em> </strong></li></ol><p id="939a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们首先要考虑的特性是<strong class="lh ja"> Pclass。这是一个分类特征，代表了乘客的社会经济地位。我们绘制了一张树状图，清楚地表明大多数乘客属于社会经济地位较高的阶层。</strong></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/090d156ecb4e961aefcc1ca382d3dc88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*RxdnfqHRD8BwhOdOpBJ0iw.png"/></div></figure><p id="d5a0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">2.<strong class="lh ja"> <em class="mb">名称</em> </strong></p><p id="969b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">因为乘客姓名不能照原样使用；因此，我们提取了数据中的标题，以便更好地理解这些信息。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="cb50" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">3.<strong class="lh ja"> <em class="mb">着手进行</em> </strong></p><p id="0889" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">此列中有两个值丢失。我们可以删除这些行，或者用模式值替换它们。删除行将最终导致数据丢失，并且给定的数据集已经非常小；因此，我们将采用选项二。我们还注意到大量乘客登上了南安普敦号。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nc"><img src="../Images/907a872501c6b7478ea6d1e1828b5947.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3_pB1swahnfye2nHmlyzRw.jpeg"/></div></div></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="8820" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">4.<strong class="lh ja">号<em class="mb">机舱</em>号</strong></p><p id="9ae0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">虽然这个列中缺少大量的值，但是我们提取了指定客舱类别的字母。我将很快讨论我们如何利用它来重建特性。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="8864" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">5.<strong class="lh ja"> <em class="mb">年龄</em> </strong></p><p id="6d0e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">下面的代码使用<em class="mb">iterative inputr()</em>函数<em class="mb">近似计算缺失的年龄值。</em>稍后，我们将利用本专栏构建更复杂的特性。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><p id="79b8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> <em class="mb">特征工程</em> </strong></p><p id="20d9" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">此方法用于增加现有数据的复杂性；通过在预先存在的柱的顶部构建新的特征。以便更好地表示数据的底层结构；我们可以拆分或合并不同列的信息。这是可以提高我们的模型性能的众多技术之一。</p><p id="ae16" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在Titanic数据集中，我们将使用这种方法包含<strong class="lh ja">六个</strong>附加列。就像我们小心翼翼地把所有乘客的名字转换成他们的头衔<em class="mb">；</em>让我们看看更多的栏目。</p><p id="9a8d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">首先，我们将使用<em class="mb"> Parch </em>和<em class="mb"> SibSp </em>列来统计船上的家庭成员人数，如下所示:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="4dc0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">此外，像<em class="mb">每个家庭的费用</em>这样的属性也有助于理解这两列之间的联系:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="0c1a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><em class="mb"> Ticket </em>列本身似乎并不太有用，因此我们将基于该数据的性质构建一个分类列:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="a237" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">将上面创建的列与我们之前转换的<em class="mb"> Cabin </em>列连接起来，从这些特性中获得更多的价值:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="ae9a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">还可以使用<em class="mb">年龄</em>列构建以下两个特征。对于<em class="mb">年龄组，</em>我们将使用pandas <em class="mb"> qcut() </em>函数将年龄分成四个大小相等的离散时段。</p><p id="7313" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">最后，我们将<em class="mb">年龄</em>乘以<em class="mb">票价</em>得到一个新的<em class="mb">数字</em>列。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="89ef" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">最初，训练数据集包含非常简单的特征，这些特征不足以让算法搜索模式。新构建的要素旨在建立数据集之间的对应关系，最终提高模型的准确性。</p><p id="81e0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在我们的特性已经准备好了，我们可以继续进行数据准备的下一步了。</p></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><p id="3330" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> <em class="mb">分类编码</em> </strong></p><p id="4b73" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">由于许多算法只能解释数字数据，因此，对分类特征进行编码是一个必要的步骤。对这类功能进行编码有三种常见的解决方法:</p><ol class=""><li id="49d3" class="mk ml iq lh b li lj ll lm lo mm ls mn lw mo ma na mq mr ms bi translated">一次热编码(二进制分割)</li><li id="b8ff" class="mk ml iq lh b li mt ll mu lo mv ls mw lw mx ma na mq mr ms bi translated">标签编码(每个类别的数字分配)</li><li id="7640" class="mk ml iq lh b li mt ll mu lo mv ls mw lw mx ma na mq mr ms bi translated">顺序编码(每个类别的有序分配)</li></ol><p id="6ffa" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在我们的例子中，我们将使用sklearn <em class="mb"> LabelEncoder() </em>函数实现<strong class="lh ja">标签编码</strong>。我们将对下面提到的包含单词、字母或字母数字形式的分类信息的列列表进行标签编码。这项任务可以通过使用以下代码来完成:</p><pre class="kp kq kr ks gt nd ne nf ng aw nh bi"><span id="dcc4" class="ni nj iq ne b gy nk nl l nm nn">['Pclass', 'Name', 'Sex', 'SibSp', 'Parch', 'Ticket', 'Fare', 'Embarked', 'familyMembers', 'ticketInfo', 'Cabin', 'Cabin_ticketInfo']</span></pre><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="70d1" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> <em class="mb">标准缩放</em> </strong></p><p id="fa6d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">连续特征可能会发生很大变化，导致收敛速度非常慢，从而影响模型的整体性能。术语缩放表明，我们在固定的范围内重新分配特征值，从而使数据分散标准化。一旦实现了这一点，模型将有效地收敛到全局最小值。</p><p id="6227" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">最初，泰坦尼克号的数据只有一个单一的特征，即需要缩放的票价。在构建新的高级功能时，我们又增加了两个。下面是我们如何对所有连续数据进行标准缩放:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="79ca" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">下面是未缩放值和缩放值<em class="mb">‘Fare’</em>之间的比较。我们可以看到，新的<em class="mb"> x范围</em>已经大约缩小到2，而且数据现在分布在零上<em class="mb">平均值:</em></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi no"><img src="../Images/5accacc6cbec12bcb5ea145c8ec47021.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zH49DYb_cqpM9Azns_KoSw.png"/></div></div></figure></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><p id="8f8f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> <em class="mb">结论</em> </strong></p><p id="7cda" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">既然我们对自己的数据感到有信心，让我们用它来训练一堆模型，并挑选最适合的算法！在下一篇文章中，我们将使用五种二元分类算法对Titanic数据集进行生存预测。</p><p id="567e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">以下是来自最终培训数据的一些示例:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure></div></div>    
</body>
</html>