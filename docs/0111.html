<html>
<head>
<title>Tutorial on Data Visualization: Weather Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据可视化教程:天气数据</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/tutorial-on-data-visualization-weather-data-52efa1bef183?source=collection_archive---------0-----------------------#2019-07-20">https://pub.towardsai.net/tutorial-on-data-visualization-weather-data-52efa1bef183?source=collection_archive---------0-----------------------#2019-07-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="b29b" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/data-visualization" rel="noopener ugc nofollow" target="_blank">数据可视化</a>，<a class="ae ep" href="https://towardsai.net/p/category/programming/python" rel="noopener ugc nofollow" target="_blank"> Python </a></h2><div class=""/><div class=""><h2 id="e643" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用Python的Matplotlib进行气象数据分析和可视化</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi kr"><img src="../Images/f44205c9e95f805f0f5efab71316dbbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*NhGqcE-ffHgZTx8xp-kNUw.png"/></div></figure><p id="23b7" class="pw-post-body-paragraph kz la it lb b lc ld kd le lf lg kg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb jd">数据可视化</strong>与其说是<strong class="lb jd">科学</strong>，不如说是一门<strong class="lb jd">艺术</strong>。为了产生良好的可视化效果，您需要将几段代码放在一起，以获得出色的最终结果。本教程演示了如何通过分析天气数据产生良好的数据可视化。</p><p id="c5cb" class="pw-post-body-paragraph kz la it lb b lc ld kd le lf lg kg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该代码执行以下操作:</p><ol class=""><li id="96c6" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">它返回了2005年至2014年期间一年中每天的最高纪录和最低纪录的折线图。一年中每一天的最高温度和最低温度之间的区域用阴影表示。</li><li id="a16a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">覆盖2015年打破十年记录(2005-2014年)最高或最低记录的任何点(最高和最低)的2015年数据散点。</li></ol><p id="fed5" class="pw-post-body-paragraph kz la it lb b lc ld kd le lf lg kg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb jd">数据集</strong>:本项目使用的NOAA数据集存储在文件<code class="fe mj mk ml mm b">weather_data.csv</code>中。这些数据来自国家环境信息中心(NCEI)每日全球历史气候网络(GHCN-Daily)的一个子集。GHCN-Daily由来自全球数千个地面站的每日气候记录组成。这些数据是从美国密歇根州安阿伯附近的数据站收集的。</p><p id="9544" class="pw-post-body-paragraph kz la it lb b lc ld kd le lf lg kg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文的完整代码可以从这个资源库下载:<a class="ae mn" href="https://github.com/bot13956/weather_pattern" rel="noopener ugc nofollow" target="_blank">https://github.com/bot13956/weather_pattern</a>。</p><h1 id="3546" class="mo mp it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated"><strong class="ak"> 1。导入必要的库和数据集</strong></h1><pre class="ks kt ku kv gt ng mm nh ni aw nj bi"><span id="eac1" class="nk mp it mm b gy nl nm l nn no"><strong class="mm jd">import</strong> <strong class="mm jd">matplotlib.pyplot</strong> <strong class="mm jd">as</strong> <strong class="mm jd">plt</strong><br/><strong class="mm jd">import</strong> <strong class="mm jd">pandas</strong> <strong class="mm jd">as</strong> <strong class="mm jd">pd</strong><br/><strong class="mm jd">import</strong> <strong class="mm jd">numpy</strong> <strong class="mm jd">as</strong> <strong class="mm jd">np</strong><br/>df=pd.read_csv('weather_data.csv')<br/>df.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi np"><img src="../Images/052b6c16bf82039ef0c6a9133034289d.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*Ae82mHbd4RUUwz6a6FjQEw.png"/></div></figure><h1 id="03ed" class="mo mp it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated">2.<strong class="ak">数据准备和分析</strong></h1><pre class="ks kt ku kv gt ng mm nh ni aw nj bi"><span id="a2ae" class="nk mp it mm b gy nl nm l nn no">#convert temperature from tenths of degree C to degree C<br/>df['Data_Value']=0.1*df.Data_Value</span><span id="fc1f" class="nk mp it mm b gy nq nm l nn no">days=list(map(<strong class="mm jd">lambda</strong> x: x.split('-')[-2]+'-'+x.split('-')[-1], df.Date))<br/>years=list(map(<strong class="mm jd">lambda</strong> x: x.split('-')[0], df.Date))</span><span id="2680" class="nk mp it mm b gy nq nm l nn no">df['Days']=days <br/>df['Years']=years</span><span id="f58f" class="nk mp it mm b gy nq nm l nn no">df_2005_to_2014=df[(df.Days!='02-29')&amp;(df.Years!='2015')]<br/>df_2015=df[(df.Days!='02-29')&amp;(df.Years=='2015')]</span><span id="ac6f" class="nk mp it mm b gy nq nm l nn no">df_max=df_2005_to_2014.groupby(['Element','Days']).max()<br/>df_min = df_2005_to_2014.groupby(['Element','Days']).min()<br/>df_2015_max=df_2015.groupby(['Element','Days']).max()<br/>df_2015_min = df_2015.groupby(['Element','Days']).min()</span><span id="f2bd" class="nk mp it mm b gy nq nm l nn no">record_max=df_max.loc['TMAX'].Data_Value<br/>record_min=df_min.loc['TMIN'].Data_Value<br/>record_2015_max=df_2015_max.loc['TMAX'].Data_Value<br/>record_2015_min=df_2015_min.loc['TMIN'].Data_Value</span></pre><h1 id="17d9" class="mo mp it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated">3.生成数据可视化</h1><pre class="ks kt ku kv gt ng mm nh ni aw nj bi"><span id="a63b" class="nk mp it mm b gy nl nm l nn no">plt.figure(figsize=(10,7)) </span><span id="9757" class="nk mp it mm b gy nq nm l nn no">plt.plot(np.arange(len(record_max)),record_max, '--k', label="record high") </span><span id="82a6" class="nk mp it mm b gy nq nm l nn no">plt.plot(np.arange(len(record_max)),record_min, '-k',label="record low") </span><span id="c129" class="nk mp it mm b gy nq nm l nn no">plt.scatter(np.where(record_2015_min &lt; record_min.values),             record_2015_min[record_2015_min &lt; record_min].values,c='b',label='2015 break low')</span><span id="082e" class="nk mp it mm b gy nq nm l nn no">plt.scatter(np.where(record_2015_max &gt; record_max.values),             record_2015_max[record_2015_max &gt; record_max].values,c='r',label='2015 break high') </span><span id="eec1" class="nk mp it mm b gy nq nm l nn no">plt.xlabel('month',size=14) </span><span id="34ce" class="nk mp it mm b gy nq nm l nn no">plt.ylabel('temperature($^\circ C$ )',size=14) </span><span id="3c7f" class="nk mp it mm b gy nq nm l nn no">plt.xticks(np.arange(0,365,31), ['Jan','Feb', 'Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']) </span><span id="fb36" class="nk mp it mm b gy nq nm l nn no">ax=plt.gca() </span><span id="0bce" class="nk mp it mm b gy nq nm l nn no">ax.axis([0,365,-40,40]) </span><span id="ccfa" class="nk mp it mm b gy nq nm l nn no">plt.gca().fill_between(np.arange(0,365),record_min, record_max,                   facecolor='blue',alpha=0.25) </span><span id="0489" class="nk mp it mm b gy nq nm l nn no">plt.title('Record temperatures for different months between 2005-2014',size=14) </span><span id="1651" class="nk mp it mm b gy nq nm l nn no">plt.legend(loc=0) </span><span id="718b" class="nk mp it mm b gy nq nm l nn no">plt.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi kr"><img src="../Images/f44205c9e95f805f0f5efab71316dbbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*NhGqcE-ffHgZTx8xp-kNUw.png"/></div></figure><p id="d99b" class="pw-post-body-paragraph kz la it lb b lc ld kd le lf lg kg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总之，我们已经展示了如何使用Python的Matplotlib库生成简单的数据可视化图。</p><p id="b063" class="pw-post-body-paragraph kz la it lb b lc ld kd le lf lg kg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文的完整代码可以从这个资源库下载:【https://github.com/bot13956/weather_pattern<a class="ae mn" href="https://github.com/bot13956/weather_pattern" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>