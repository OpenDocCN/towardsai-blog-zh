<html>
<head>
<title>AI in Medicine</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">医学中的人工智能</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/ai-in-medicine-e9f5fc8727b7?source=collection_archive---------2-----------------------#2022-01-16">https://pub.towardsai.net/ai-in-medicine-e9f5fc8727b7?source=collection_archive---------2-----------------------#2022-01-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="1e51" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/artificial-intelligence" rel="noopener ugc nofollow" target="_blank">人工智能</a></h2><div class=""/><div class=""><h2 id="3f15" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">使用人工智能实现医学测试自动化</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/fe907cd71f297fe7359c793abf0a24e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wf8dnrBORWaCec-RRm8XQg.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@haloirwan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Irwan iwe </a>在<a class="ae le" href="https://unsplash.com/s/photos/medical-report?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="2175" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">近年来，人工智能已经在全球几乎每个领域实现了几个流程的自动化。具体来说，人工智能最近拥抱了医学科学，因为COVID疫情让世界震惊。从预测病毒的传播到检查胸部和肺部的x光片，AI以各种可能的方式帮助人类。</p><p id="b254" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">但是，当涉及到依赖人工智能和数据科学时，医学仍然被认为是最敏感的领域。原因非常简单:<strong class="lh ja">人工智能的一个小错误可能会导致一条生命的损失</strong>。</p><p id="60c2" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">可能出现两种主要情况:</p><ol class=""><li id="2d3f" class="mb mc iq lh b li lj ll lm lo md ls me lw mf ma mg mh mi mj bi translated">患者被诊断患有该疾病，并且他/她没有受到影响。</li><li id="7c70" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">患者未被诊断患有该疾病，但他/她受到了影响。</li></ol><p id="0377" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这两种情况都将导致大灾难。这个问题的一个解决方案是，人工智能模型必须得到大量高质量的数据，这些数据涵盖了所有独特的测试场景和异常情况。其次，我们应该让人工智能发挥作用，但不要冒着减少人类参与的风险。这是为了监视和观察人工智能运行的本质，并相应地调整它。一旦人工智能模型达到被认为完全可靠的阶段，那么它们应该在真实的病人身上进行测试。行业级别的从业者大多不相信在这种敏感场景下依赖AI模型的准确性。相反，他们信任诸如召回率、精确度和F1分数等指标。</p><p id="402e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这篇博客将描述构建一个web应用程序的端到端过程，该应用程序接受皮肤图像作为输入，检测皮肤病，然后通过WhatsApp messenger向患者和医生发送医疗报告。</p><h1 id="ad5d" class="mp mq iq bd mr ms mt mu mv mw mx my mz kf na kg nb ki nc kj nd kl ne km nf ng bi translated">目录:</h1><ol class=""><li id="f686" class="mb mc iq lh b li nh ll ni lo nj ls nk lw nl ma mg mh mi mj bi translated">数据源</li><li id="e519" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">探索性数据分析</li><li id="ce71" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">模特培训</li><li id="1e13" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">Whatsapp配置</li><li id="4ba4" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">创建Web应用程序</li><li id="0040" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">结论</li></ol><h1 id="87e8" class="mp mq iq bd mr ms mt mu mv mw mx my mz kf na kg nb ki nc kj nd kl ne km nf ng bi translated">数据源</h1><p id="8ecd" class="pw-post-body-paragraph lf lg iq lh b li nh ka lk ll ni kd ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">用于训练模型的数据集是<a class="ae le" href="https://www.kaggle.com/kmader/skin-cancer-mnist-ham10000" rel="noopener ugc nofollow" target="_blank">皮肤癌MNIST: HAM10000 </a>。它包括7类癌症的10015幅图像。超过50%的病变通过组织病理学得到确认，其余病例的基本事实要么是随访检查(跟进<em class="np">)、</em>专家共识(共识)，要么是通过体内共聚焦显微镜(共聚焦)得到确认。数据集的一个问题是它没有我们的应用程序所必需的类“<strong class="lh ja">无疾病</strong>”。我选择了另一种方式来处理这种情况，您将在接下来的部分中看到。</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="21cb" class="mp mq iq bd mr ms nx mu mv mw ny my mz kf nz kg nb ki oa kj nd kl ob km nf ng bi translated">探索性数据分析</h1><ol class=""><li id="0529" class="mb mc iq lh b li nh ll ni lo nj ls nk lw nl ma mg mh mi mj bi translated"><strong class="lh ja">课程频率</strong></li></ol><p id="1d39" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">很明显，数据集是高度不平衡的，其中黑色素细胞痣(nv)的频率大约是最低频率(黑色素瘤)的70倍。这就需要通过对除了具有最大频率的类之外的数据集进行过采样来平衡数据集。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oc od l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/6d08788deb01ea0b5924b9476d31fc8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*pz-epD1RsIMEJu5YwNuTZQ.jpeg"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">来源:图片由所有者提供</figcaption></figure><p id="b93d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> 2。皮肤病的性别分布</strong></p><p id="2b59" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这个饼图描绘了疾病的概率是不分性别的。有一些特定种类的癌症更可能发生在特定的性别身上，但不是在这种情况下。进一步的分析可能包括个别癌症类别的性别分布。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oc od l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi of"><img src="../Images/4717822f2dcbbb09f99ab063cb8ae5d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iqhcYh9SNkWkjZdk3qjpzw.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">疾病在性别上的分布</figcaption></figure><p id="99b9" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> 3。患者年龄直方图</strong></p><p id="4e73" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">使用seaborn的histplot绘制患者年龄直方图。这将揭示受影响最大的年龄组。从图中可以明显看出，40岁到60岁的人受癌症的影响最大。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oc od l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi of"><img src="../Images/d473229eff321f87d90bba295a3f8c02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6MQALi1mNG0uIASFn7ucKg.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">患者年龄直方图</figcaption></figure><p id="fb9d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> 4。超过性别的疾病位置</strong></p><p id="edf3" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">该图将描绘所有性别最常受这些类型癌症影响的身体部位。很明显，男性受“背部”影响最大，女性受“下肢”影响最大。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oc od l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi og"><img src="../Images/d30988aed9a14215c0939970284bcb08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*censJH62fQXZGmAwp81Cpw.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">受癌症影响最大的位置(身体部位)</figcaption></figure></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="140f" class="mp mq iq bd mr ms nx mu mv mw ny my mz kf nz kg nb ki oa kj nd kl ob km nf ng bi translated">模特培训</h1><p id="908d" class="pw-post-body-paragraph lf lg iq lh b li nh ka lk ll ni kd ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">在训练模型之前，我们需要修复不平衡的数据。我使用了过采样技术，它创建了属于少数类的数据点的副本(除了具有最高频率的类)。</p><p id="1c22" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">此外，在将数据集拆分为训练数据集和测试数据集之后，请确保对数据集(训练数据集)进行过采样。在拆分数据集的过程中，为训练分配90%的数据，而剩余的数据则用于在训练数据集上对模型进行训练后对其进行测试。<strong class="lh ja">仅在训练数据集上执行过采样。</strong></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="1c6c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">可以使用两种技术来开发模型架构:定制架构和微调预训练模型。一些著名的预训练模型是VGG-16、Resnet50和InceptionV3。在使用预训练模型时，最后几个图层将被更改，以使其可根据当前数据集进行调整。在这个项目中，我创建了一个自定义架构，包括卷积层、最大池层和密集层的几个堆栈。在从图像中提取特征时，每一层都扮演着特定的角色。</p><p id="43be" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">卷积层</strong>:它在一幅图像上应用内核，提取垂直线、水平线等特征。内核可以被想象成大小为K×K的窗口，其中K通常是奇数。它以步幅S在图像上移动，并且可以在图像的边界放置填充P，以提取图像边界处的重要特征。图像I上卷积层的输出可以计算为:</p><p id="10ba" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">输出大小= (I-K+2P)/S+1</p><p id="d108" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> Max Pooling Layer </strong>:它在图像上移动内核，提取具有最大值的特征。例如，大小为3*3的内核将覆盖九个像素。将考虑具有最大值的像素。</p><p id="b2cc" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">密集层</strong>:密集层是一个简单的神经元层，其中每个神经元接收来自前一层所有神经元的输入。它与人工神经网络中使用的方法相同。该层用于分类。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="7aef" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">虽然我已经创建了一个定制的架构，但是我相信在大多数情况下，预先训练的模型比定制的架构更好。本文末尾提到的Github存储库中提供了模型性能的更多细节。</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="967d" class="mp mq iq bd mr ms nx mu mv mw ny my mz kf nz kg nb ki oa kj nd kl ob km nf ng bi translated">Whatsapp配置</h1><p id="3b5c" class="pw-post-body-paragraph lf lg iq lh b li nh ka lk ll ni kd ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">Whatsapp message被配置为向患者和医生发送医疗报告。Twilio是一个平台，它提供了一组API来通过多种媒介发送可编程的短信。它为每个新用户提供15美元的基本余额。</p><p id="9b0b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">配置WhatsApp messenger的步骤:</p><p id="c39f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">a.登录Twilio，进入“可编程短信”</p><p id="d423" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">b.前往“设置Whatsapp”</p><p id="e976" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">c.遵循平台上提到的一系列步骤。</p><p id="cab0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">注意:</strong>复制并保存首页提到的令牌和账号ID。</p><p id="6c15" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> Twilio </strong>库用于通过Whatsapp发送医疗报告。令牌和帐户ID存储在名为<strong class="lh ja"> credentials.py </strong>的单独文件中</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oc od l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oh"><img src="../Images/a6eb9a944d951d64597dc8f1338bfef9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YBAR8oRwl9Vi1Fe4BbX4eg.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">Whatsapp messenger的配置</figcaption></figure></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="b76b" class="mp mq iq bd mr ms nx mu mv mw ny my mz kf nz kg nb ki oa kj nd kl ob km nf ng bi translated">创建Web应用程序</h1><p id="1647" class="pw-post-body-paragraph lf lg iq lh b li nh ka lk ll ni kd ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">为了创建一个网络应用，我使用了S<a class="ae le" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank">stream lit的</a>开源框架。对于那些不知道streamlit的人来说，它可以在几分钟内将python脚本转换成web应用程序。尤其是对于像我这样对前端技术没有什么经验的人来说。安装时使用，</p><pre class="kp kq kr ks gt oi oj ok ol aw om bi"><span id="531d" class="on mq iq oj b gy oo op l oq or">pip install streamlit</span></pre><p id="9849" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我已经创建了一个基本的web应用程序，它有一个表单，必须填写才能看到结果。它要求用户提供详细信息，如皮肤照片、患者姓名、联系电话、医生姓名和联系电话。如“数据集”部分所述，这个数据集没有一个名为“无疾病”的类，而这个类是非常必要的。所以如果模型的置信度下降到80%以下，那么就认为是“无病类”。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi os"><img src="../Images/17076f269c00b20639eaa27cd407bbad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*uH9iCbylS6GRn6ZW_BSr-A.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">简化web应用程序</figcaption></figure><p id="23b1" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">web应用程序将在屏幕上返回流程的状态，无论是“成功”还是“失败”。此外，它会通过WhatsApp messenger将报告发送到患者和医生的联系电话。信息的快照可以在下面的图片中看到。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/4cf257ec5545e8479cfd5ef1a8515c57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*SyRYAAZH4sBFb0d65BqpCg.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">Whatsapp messenger</figcaption></figure></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="7d8d" class="mp mq iq bd mr ms nx mu mv mw ny my mz kf nz kg nb ki oa kj nd kl ob km nf ng bi translated">结论</h1><p id="e99d" class="pw-post-body-paragraph lf lg iq lh b li nh ka lk ll ni kd ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">在这篇文章中，你一定已经了解了深度学习是如何通过自动化医学皮肤测试来拥抱医学科学的。这是这样一个应用程序的基本原型，但是还有很多需要考虑的。对于数据科学爱好者来说，Streamlit是一个非常简单和灵活的开源软件，使我们能够在没有明确的前端技术知识的情况下开发web应用程序。</p><p id="329e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">您可以在这里找到演示视频和所有资源。</p><div class="ou ov gp gr ow ox"><a href="https://github.com/DhruvGangwani/Streamlit-web-app" rel="noopener  ugc nofollow" target="_blank"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd ja gy z fp pc fr fs pd fu fw iz bi translated">GitHub—DhruvGangwani/Streamlit-we b-app:使用图像分类进行皮肤病检测…</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">content app . py::Flask API test _ images::包含用于测试模型/best_model.h5::训练好的模型进行分类的图像…</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">github.com</p></div></div><div class="pg l"><div class="ph l pi pj pk pg pl ky ox"/></div></div></a></div></div></div>    
</body>
</html>