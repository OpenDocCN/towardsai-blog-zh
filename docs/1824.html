<html>
<head>
<title>Drawing Bounding Box Method in Image Processing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">图像处理中的包围盒绘制方法</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/drawing-bounding-box-method-in-image-processing-ec7487393cfa?source=collection_archive---------0-----------------------#2021-05-07">https://pub.towardsai.net/drawing-bounding-box-method-in-image-processing-ec7487393cfa?source=collection_archive---------0-----------------------#2021-05-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="f2b1" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/computer-vision" rel="noopener ugc nofollow" target="_blank">计算机视觉</a></h2><div class=""/><div class=""><h2 id="cdeb" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">用OpenCV实现图像中物体的标注</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi kr"><img src="../Images/db5a8f9281a2f182955d9faab4ce48ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*4D17gQG3uG9Ag7eBfl1PQg.png"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">边界框对对象进行了注释。作者的照片</figcaption></figure><h2 id="be48" class="ld le it bd lf lg lh dn li lj lk dp ll lm ln lo lp lq lr ls lt lu lv lw lx iz bi translated">介绍</h2><p id="b18d" class="pw-post-body-paragraph ly lz it ma b mb mc kd md me mf kg mg lm mh mi mj lq mk ml mm lu mn mo mp mq im bi translated">在本文中，我们将讨论图像处理中的注释。注释的概念用于突出显示图像中的对象和对象总数。</p><p id="f116" class="pw-post-body-paragraph ly lz it ma b mb mr kd md me ms kg mg lm mt mi mj lq mu ml mm lu mv mo mp mq im bi translated">如下所示，在以下步骤中解释了注释对象的过程:</p><h2 id="bb9c" class="ld le it bd lf lg lh dn li lj lk dp ll lm ln lo lp lq lr ls lt lu lv lw lx iz bi translated">步骤1:阅读和协调RGB</h2><p id="192d" class="pw-post-body-paragraph ly lz it ma b mb mc kd md me mf kg mg lm mh mi mj lq mk ml mm lu mn mo mp mq im bi translated">这一步包括在处理计算机视觉应用的OpenCV库的帮助下读取原始图像。</p><p id="8db4" class="pw-post-body-paragraph ly lz it ma b mb mr kd md me ms kg mg lm mt mi mj lq mu ml mm lu mv mo mp mq im bi translated">导入必要的库</p><pre class="ks kt ku kv gt mw mx my mz aw na bi"><span id="3be3" class="ld le it mx b gy nb nc l nd ne">import numpy as np<br/>import imutils<br/>import cv2</span></pre><p id="a125" class="pw-post-body-paragraph ly lz it ma b mb mr kd md me ms kg mg lm mt mi mj lq mu ml mm lu mv mo mp mq im bi translated"><strong class="ma jd"> <em class="nf"> numpy </em> </strong>用于对图像像素进行数值运算。“<strong class="ma jd"> <em class="nf"> imutils </em> </strong>”用于帮助OpenCV的图像预处理功能。<strong class="ma jd"> <em class="nf"> cv2 </em> </strong>是一个计算机视觉库。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/51a7ebe41ae88c604557633368da1fef.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*etPs5zv7bYUGUUKQ2Ux-kA.png"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">原图。作者的照片</figcaption></figure><p id="7a06" class="pw-post-body-paragraph ly lz it ma b mb mr kd md me ms kg mg lm mt mi mj lq mu ml mm lu mv mo mp mq im bi translated">从工作目录中读取图像文件。</p><pre class="ks kt ku kv gt mw mx my mz aw na bi"><span id="33f4" class="ld le it mx b gy nb nc l nd ne">image = cv2.imread('bg5.png') #reads the image</span></pre><p id="aed6" class="pw-post-body-paragraph ly lz it ma b mb mr kd md me ms kg mg lm mt mi mj lq mu ml mm lu mv mo mp mq im bi translated">OpenCV的要点是它读取BGR格式的图像，我们需要将其转换成RGB格式。</p><pre class="ks kt ku kv gt mw mx my mz aw na bi"><span id="4255" class="ld le it mx b gy nb nc l nd ne">rgb_image = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)</span></pre><h2 id="39f7" class="ld le it bd lf lg lh dn li lj lk dp ll lm ln lo lp lq lr ls lt lu lv lw lx iz bi translated">步骤2:图像处理中的颜色空间和二值阈值</h2><p id="b8cd" class="pw-post-body-paragraph ly lz it ma b mb mc kd md me mf kg mg lm mh mi mj lq mk ml mm lu mn mo mp mq im bi translated">颜色空间用于获得二值化阈值的良好灰度图像。这里，我们使用HSV颜色空间。</p><pre class="ks kt ku kv gt mw mx my mz aw na bi"><span id="e68b" class="ld le it mx b gy nb nc l nd ne">hsv_image = cv2.cvtColor(rgb_image, cv2.COLOR_RGB2HSV)<br/>h, s, v = cv2.split(hsv_image)</span><span id="b170" class="ld le it mx b gy nh nc l nd ne">#it is used to save the h component image<br/>cv2.imwrite('H.jpg',h)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/da8d46b9c009e587c4f542d388f940d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*mdBtTMqr3oY0ZlDWu75AkQ.jpeg"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">H分量图像的灰度图像。作者的照片</figcaption></figure><p id="a113" class="pw-post-body-paragraph ly lz it ma b mb mr kd md me ms kg mg lm mt mi mj lq mu ml mm lu mv mo mp mq im bi translated">现在，我们将做二进制阈值</p><pre class="ks kt ku kv gt mw mx my mz aw na bi"><span id="f0c1" class="ld le it mx b gy nb nc l nd ne">ret, th1 = cv2.threshold(h,180,255, cv2.THRESH_BINARY+cv2.THRESH_OTSU)<br/>kernel = np.ones((1,1), dtype = "uint8")/9<br/>bilateral = cv2.bilateralFilter(th1, 9 , 75, 75)<br/>erosion = cv2.erode(bilateral, kernel, iterations = 1)</span><span id="5882" class="ld le it mx b gy nh nc l nd ne">cv2.imwrite('mask_erosion.jpg',erosion)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/62659164d6904acbc478c58d8df97cb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*uTy7gPEtmwlxStKMi1ImLw.jpeg"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">掩码或二进制图像。作者的照片</figcaption></figure><div class="ni nj gp gr nk nl"><a rel="noopener  ugc nofollow" target="_blank" href="/types-of-binary-image-processing-threshold-in-opencv-with-python-2f9b7f8795f9"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd jd gy z fp nq fr fs nr fu fw jc bi translated">用Python实现OpenCV中二值图像处理阈值的类型</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">图像分割方法分析</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">pub.towardsai.net</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz kx nl"/></div></div></a></div><h2 id="ef16" class="ld le it bd lf lg lh dn li lj lk dp ll lm ln lo lp lq lr ls lt lu lv lw lx iz bi translated">第三步:找到噪声，并将其从图像中移除</h2><p id="e21d" class="pw-post-body-paragraph ly lz it ma b mb mc kd md me mf kg mg lm mh mi mj lq mk ml mm lu mn mo mp mq im bi translated">在上面的图像中，我们可以看到有许多噪声以小白区域的形式出现在图像中，我们需要从图像中移除这些小白区域以获得完美的二值图像。</p><pre class="ks kt ku kv gt mw mx my mz aw na bi"><span id="74fc" class="ld le it mx b gy nb nc l nd ne">#finding the area of all connected white pixels in the image<br/>pixel_components, output, stats, centroids =<br/>        cv2.connectedComponentsWithStats(erosion, connectivity=8)</span></pre><p id="e8a7" class="pw-post-body-paragraph ly lz it ma b mb mr kd md me ms kg mg lm mt mi mj lq mu ml mm lu mv mo mp mq im bi translated">当我们在图像中使用连通分量方法时，它将图像中的白色和黑色对象分开。我们只是希望白色像素对象被删除，并忽略黑色像素。</p><pre class="ks kt ku kv gt mw mx my mz aw na bi"><span id="9d71" class="ld le it mx b gy nb nc l nd ne">area = stats[1:, -1]; pixel_components = pixel_components - 1</span></pre><p id="4a3d" class="pw-post-body-paragraph ly lz it ma b mb mr kd md me ms kg mg lm mt mi mj lq mu ml mm lu mv mo mp mq im bi translated">现在我们将从图像中移除小的白噪声。</p><pre class="ks kt ku kv gt mw mx my mz aw na bi"><span id="9329" class="ld le it mx b gy nb nc l nd ne">min_size = 1000</span><span id="b49c" class="ld le it mx b gy nh nc l nd ne">#your answer image<br/>img2 = np.zeros((output.shape))</span><span id="b1a8" class="ld le it mx b gy nh nc l nd ne">#Removing the small white pixel area below the minimum size<br/>for i in range(0, nb_components):<br/>    if area[i] &gt;= min_size:<br/>        img2[output == i + 1] = 255<br/>        cv2.imwrite('img2.jpg',img2)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/b8e78f4bfb403d7a04bcfe82f32447e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*E8xuEzx3JqgGxuBlvoWCxw.jpeg"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">很好的二值图像。作者的照片</figcaption></figure><h2 id="11e9" class="ld le it bd lf lg lh dn li lj lk dp ll lm ln lo lp lq lr ls lt lu lv lw lx iz bi translated">第四步:找出物体轮廓的面积</h2><p id="8b86" class="pw-post-body-paragraph ly lz it ma b mb mc kd md me mf kg mg lm mh mi mj lq mk ml mm lu mn mo mp mq im bi translated">现在，我们得到了好的二进制图像。是时候找出图像中白色像素的轮廓/面积了，因为我们知道白色像素是我们的目标。</p><pre class="ks kt ku kv gt mw mx my mz aw na bi"><span id="8e12" class="ld le it mx b gy nb nc l nd ne">img3 = img2.astype(np.uint8)       <br/># find contours in the thresholded image<br/>cnts = cv2.findContours(img3.copy(), cv2.RETR_EXTERNAL,<br/>                        cv2.CHAIN_APPROX_SIMPLE)</span><span id="fa1e" class="ld le it mx b gy nh nc l nd ne">cnts = imutils.grab_contours(cnts)<br/>print("[INFO] {} unique contours found".format(len(cnts)))</span></pre><div class="ni nj gp gr nk nl"><a rel="noopener  ugc nofollow" target="_blank" href="/data-preprocessing-concepts-with-python-b93c63f14bb6"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd jd gy z fp nq fr fs nr fu fw jc bi translated">Python中的数据预处理概念</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">一种为机器学习估值器准备数据的稳健方法</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">pub.towardsai.net</p></div></div><div class="nu l"><div class="oa l nw nx ny nu nz kx nl"/></div></div></a></div><div class="ni nj gp gr nk nl"><a rel="noopener  ugc nofollow" target="_blank" href="/understand-time-series-components-with-python-4bc3e2ba1189"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd jd gy z fp nq fr fs nr fu fw jc bi translated">用Python理解时间序列组件</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">机器学习中预测模型的基本概念及实例</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">pub.towardsai.net</p></div></div><div class="nu l"><div class="ob l nw nx ny nu nz kx nl"/></div></div></a></div><h2 id="3691" class="ld le it bd lf lg lh dn li lj lk dp ll lm ln lo lp lq lr ls lt lu lv lw lx iz bi translated">步骤5:注释对象</h2><p id="4731" class="pw-post-body-paragraph ly lz it ma b mb mc kd md me mf kg mg lm mh mi mj lq mk ml mm lu mn mo mp mq im bi translated">在这一步中，我们将用边界框标注对象。</p><pre class="ks kt ku kv gt mw mx my mz aw na bi"><span id="9b4b" class="ld le it mx b gy nb nc l nd ne"># For making box around the Grape Bunch  <br/>for j in cnts:<br/>    rect = cv2.boundingRect(j)<br/>    x,y,w,h = rect<br/>    cv2.rectangle(image, (x,y),(x+w,y+h),(255,0,255),2)<br/> </span><span id="26eb" class="ld le it mx b gy nh nc l nd ne">cv2.imwrite('result.jpg',image)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/3682079f1f9b2ff0647a6671f4661614.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*C_r2riqbkl_qeNG-evC-LQ.jpeg"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">输出图像。作者的照片</figcaption></figure><h2 id="8224" class="ld le it bd lf lg lh dn li lj lk dp ll lm ln lo lp lq lr ls lt lu lv lw lx iz bi translated">结论:</h2><p id="146d" class="pw-post-body-paragraph ly lz it ma b mb mc kd md me mf kg mg lm mh mi mj lq mk ml mm lu mn mo mp mq im bi translated">图像中物体的标注在农业、机器人视觉、环境等领域有着非常有用的应用。</p><p id="9179" class="pw-post-body-paragraph ly lz it ma b mb mr kd md me ms kg mg lm mt mi mj lq mu ml mm lu mv mo mp mq im bi translated">我希望你喜欢这篇文章。通过我的<a class="ae oc" href="https://www.linkedin.com/in/data-scientist-95040a1ab/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae oc" href="https://twitter.com/amitprius" rel="noopener ugc nofollow" target="_blank"> twitter </a>联系我。</p><h1 id="0a4e" class="od le it bd lf oe of og li oh oi oj ll ki ok kj lp kl ol km lt ko om kp lx on bi translated">推荐文章</h1><p id="2b59" class="pw-post-body-paragraph ly lz it ma b mb mc kd md me mf kg mg lm mh mi mj lq mk ml mm lu mn mo mp mq im bi translated"><a class="ae oc" href="https://medium.com/towards-artificial-intelligence/nlp-zero-to-hero-with-python-2df6fcebff6e?sk=2231d868766e96b13d1e9d7db6064df1" rel="noopener"> 1。NLP —零到英雄用Python </a> <br/> 2。<a class="ae oc" href="https://medium.com/towards-artificial-intelligence/python-data-structures-data-types-and-objects-244d0a86c3cf?sk=42f4b462499f3fc3a160b21e2c94dba6" rel="noopener"> Python数据结构数据类型和对象</a> <br/> 3。<a class="ae oc" rel="noopener ugc nofollow" target="_blank" href="/exception-handling-concepts-in-python-4d5116decac3?source=friends_link&amp;sk=a0ed49d9fdeaa67925eac34ecb55ea30">Python中的异常处理概念</a> <br/> 4。<a class="ae oc" rel="noopener ugc nofollow" target="_blank" href="/principal-component-analysis-in-dimensionality-reduction-with-python-1a613006d531?source=friends_link&amp;sk=3ed0671fdc04ba395dd36478bcea8a55">用Python进行主成分分析降维</a> <br/> 5。<a class="ae oc" href="https://medium.com/towards-artificial-intelligence/fully-explained-k-means-clustering-with-python-e7caa573176a?source=friends_link&amp;sk=9c5c613ceb10f2d203712634f3b6fb28" rel="noopener">用Python全面讲解K-means聚类</a> <br/> 6。<a class="ae oc" href="https://medium.com/towards-artificial-intelligence/fully-explained-linear-regression-with-python-fe2b313f32f3?source=friends_link&amp;sk=53c91a2a51347ec2d93f8222c0e06402" rel="noopener">用Python充分解释了线性回归</a> <br/> 7。<a class="ae oc" href="https://medium.com/towards-artificial-intelligence/fully-explained-logistic-regression-with-python-f4a16413ddcd?source=friends_link&amp;sk=528181f15a44e48ea38fdd9579241a78" rel="noopener">用Python </a> <br/>充分解释了Logistic回归8。Nengo:一个新的神经网络构建和部署工具。<a class="ae oc" rel="noopener ugc nofollow" target="_blank" href="/data-wrangling-with-python-part-1-969e3cc81d69?source=friends_link&amp;sk=9c3649cf20f31a5c9ead51c50c89ba0b">与Python的数据角力—第一部分</a>T30】10。<a class="ae oc" href="https://medium.com/analytics-vidhya/confusion-matrix-in-machine-learning-91b6e2b3f9af?source=friends_link&amp;sk=11c6531da0bab7b504d518d02746d4cc" rel="noopener">机器学习中的混淆矩阵</a></p></div></div>    
</body>
</html>