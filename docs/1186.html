<html>
<head>
<title>Lyft Motion Prediction for Autonomous Vehicles: 2020</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动驾驶汽车的Lyft运动预测:2020年</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/lyft-motion-prediction-for-autonomous-vehicles-2020-410e58e703af?source=collection_archive---------3-----------------------#2020-11-27">https://pub.towardsai.net/lyft-motion-prediction-for-autonomous-vehicles-2020-410e58e703af?source=collection_archive---------3-----------------------#2020-11-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/1d9ab502a75158e20d5a33fce40bb9f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fDEPfCXbsDK3pLELgtBTwA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">资料来源:Pexels</figcaption></figure><h2 id="0112" class="jd je jf bd b dl jg jh ji jj jk jl dk jm translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/self-driving-cars" rel="noopener ugc nofollow" target="_blank">自动驾驶汽车</a></h2><div class=""/><div class=""><h2 id="f821" class="pw-subtitle-paragraph kl jo jf bd b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dk translated">自动驾驶汽车的Lyft运动预测挑战</h2></div><h2 id="2f1b" class="ld le jf bd lf lg lh dn li lj lk dp ll lm ln lo lp lq lr ls lt lu lv lw lx jl bi translated">问题描述</h2><p id="22ea" class="pw-post-body-paragraph ly lz jf ma b mb mc kp md me mf ks mg lm mh mi mj lq mk ml mm lu mn mo mp mq ij bi translated">挑战在于预测2020年AV周围交通主体的运动，如汽车、骑自行车的人和行人。与此同时，2019年的比赛专注于检测3D物体，这是检测它们运动之前的重要一步。总体而言，与2019年的问题陈述相比，这需要相当独特的领域技能。</p><blockquote class="mr ms mt"><p id="a2eb" class="ly lz mu ma b mb mv kp md me mw ks mg mx my mi mj mz na ml mm nb nc mo mp mq ij bi translated"><em class="jf">该数据集由170，000个捕捉自动驾驶汽车周围环境的场景组成。每个场景都编码了车辆在给定时间点周围的状态。</em></p></blockquote><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nd"><img src="../Images/1df70668eb68179ed0994494fd883f42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Z1C4q0dOGxqH9cE_.gif"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">资料来源:Kaggle EDA Lyft</figcaption></figure><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nd"><img src="../Images/fbed2fa6334f8c605b4076d452d34fc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lIdeth69zGCfdrcp.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">资料来源:Kaggle EDA Lyft5</figcaption></figure><p id="0db6" class="pw-post-body-paragraph ly lz jf ma b mb mv kp md me mw ks mg lm my mi mj lq na ml mm lu nc mo mp mq ij bi translated"><strong class="ma jp">这个竞赛的目标是预测其他汽车/自行车手/行人(称为“代理”)的运动。</strong></p><p id="a27d" class="pw-post-body-paragraph ly lz jf ma b mb mv kp md me mw ks mg lm my mi mj lq na ml mm lu nc mo mp mq ij bi translated">称为光栅化的数据预处理技术是从其他对象创建图像的过程。例如，下面是我们得到的一个典型的图像，有25个通道，一个通道一个通道地查看。首先，11个图像是其他代理历史的光栅化，接下来的11个图像是考虑中的代理本身，最后3个是语义图光栅化。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ni"><img src="../Images/fbc957fef4d00f8526233651194590e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZeBgrJxo3TGB8I1a.png"/></div></div></figure><p id="c7be" class="pw-post-body-paragraph ly lz jf ma b mb mv kp md me mw ks mg lm my mi mj lq na ml mm lu nc mo mp mq ij bi translated">并且使用光栅化器转换成RGB图像包括:</p><ul class=""><li id="4c69" class="nj nk jf ma b mb mv me mw lm nl lq nm lu nn mq no np nq nr bi translated">图像:(通道，高度，宽度)帧的图像。这是鸟瞰图(BEV)表示。</li><li id="5a7f" class="nj nk jf ma b mb ns me nt lm nu lq nv lu nw mq no np nq nr bi translated">目标位置:(n帧，2)世界坐标中以米为单位的位移</li><li id="86f7" class="nj nk jf ma b mb ns me nt lm nu lq nv lu nw mq no np nq nr bi translated">target_yaws: (n_frames，1)</li><li id="23ad" class="nj nk jf ma b mb ns me nt lm nu lq nv lu nw mq no np nq nr bi translated">质心:(2)中心位置x和y。</li><li id="b6d3" class="nj nk jf ma b mb ns me nt lm nu lq nv lu nw mq no np nq nr bi translated">world_to_image: (3，3) 3x3矩阵，用于变换矩阵。</li></ul><p id="338a" class="pw-post-body-paragraph ly lz jf ma b mb mv kp md me mw ks mg lm my mi mj lq na ml mm lu nc mo mp mq ij bi translated">用于数据处理的L5Kit(Lyft 5 kit)结构示例:</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nx"><img src="../Images/eefcc019f6be0389f29c7e81a30a96dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-3i96CnV2MHUtwrh.png"/></div></div></figure><p id="8aab" class="pw-post-body-paragraph ly lz jf ma b mb mv kp md me mw ks mg lm my mi mj lq na ml mm lu nc mo mp mq ij bi translated">话虽如此，在这场竞赛中，理解光栅化器类并实现定制的光栅化器类一直是一个很大的挑战。因此，下面是如何选择两个重要的配置选项。我们应该仔细考虑</p><ul class=""><li id="2191" class="nj nk jf ma b mb mv me mw lm nl lq nm lu nn mq no np nq nr bi translated"><code class="fe ny nz oa ob b">raster_size</code>以像素为单位的光栅化图像最终尺寸(例如:[300，300]</li><li id="33ff" class="nj nk jf ma b mb ns me nt lm nu lq nv lu nw mq no np nq nr bi translated"><code class="fe ny nz oa ob b">pixel_size</code>栅格的空间分辨率[米/像素]:现实世界中一个像素对应的大小。</li></ul><h1 id="25b5" class="oc le jf bd lf od oe of li og oh oi ll ku oj kv lp kx ok ky lt la ol lb lx om bi translated">光栅尺寸</h1><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi on"><img src="../Images/d8c8cebf6f547ba04ecc0890e9a8596f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fwHp1X7UXTM2iKE0"/></div></div></figure><p id="1a2f" class="pw-post-body-paragraph ly lz jf ma b mb mv kp md me mw ks mg lm my mi mj lq na ml mm lu nc mo mp mq ij bi translated"><code class="fe ny nz oa ob b"><em class="mu">pixel_size = [0.5, 0.5]</em></code></p><p id="9c08" class="pw-post-body-paragraph ly lz jf ma b mb mv kp md me mw ks mg lm my mi mj lq na ml mm lu nc mo mp mq ij bi translated">正如您在图像中看到的，如果增加栅格大小(像素大小不变)，模型(ego/agent)将“看到”周围更多的区域。</p><ul class=""><li id="9c00" class="nj nk jf ma b mb mv me mw lm nl lq nm lu nn mq no np nq nr bi translated">后面/前面有更多区域</li><li id="701f" class="nj nk jf ma b mb ns me nt lm nu lq nv lu nw mq no np nq nr bi translated">较慢的渲染，因为更多的信息(代理，道路等。)</li></ul><h2 id="dc7d" class="ld le jf bd lf lg lh dn li lj lk dp ll lm ln lo lp lq lr ls lt lu lv lw lx jl bi translated"><strong class="ak">什么是好的光栅尺寸？</strong> <br/>我觉得要看车速。</h2><p id="62a8" class="pw-post-body-paragraph ly lz jf ma b mb mc kp md me mf ks mg lm mh mi mj lq mk ml mm lu mn mo mp mq ij bi translated">公里/小时毫秒/5秒像素的距离10 . 281 . 392 . 7851 . 39413 . 89102 . 7813 . 8927 . 78154 . 1720 . 8341 . 5341 . 5555656</p><p id="2e4a" class="pw-post-body-paragraph ly lz jf ma b mb mv kp md me mw ks mg lm my mi mj lq na ml mm lu nc mo mp mq ij bi translated"><em class="mu">假设我一直用</em> <code class="fe ny nz oa ob b"><em class="mu">pixel_size = [0.5, 0.5]</em></code> <em class="mu">进行这些计算。</em></p><p id="214d" class="pw-post-body-paragraph ly lz jf ma b mb mv kp md me mw ks mg lm my mi mj lq na ml mm lu nc mo mp mq ij bi translated">问题是，平均速度是多少。在下图中，你可以看到平均速度。(我假设单位是米/秒)。我排除了所有小于1 m/s的东西，基于这些信息，我们可以选择图像的大小。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/1c9de6b9079ae692401554258defdbad.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/0*yUie_CPYvlAUC7-U"/></div></figure><ul class=""><li id="ae8c" class="nj nk jf ma b mb mv me mw lm nl lq nm lu nn mq no np nq nr bi translated">选择你的最高速度。例如20米/秒</li><li id="66fb" class="nj nk jf ma b mb ns me nt lm nu lq nv lu nw mq no np nq nr bi translated">计算5秒内的最大距离。(100米)</li><li id="37e5" class="nj nk jf ma b mb ns me nt lm nu lq nv lu nw mq no np nq nr bi translated">用它除以像素的大小(100 / 0.5 = 200)</li><li id="f452" class="nj nk jf ma b mb ns me nt lm nu lq nv lu nw mq no np nq nr bi translated">因为ego在图像左侧的<code class="fe ny nz oa ob b">raster_size * 0.25</code>像素处，我们必须添加一些空间。最终尺寸是<code class="fe ny nz oa ob b">200/0.75 = 267</code></li></ul><h1 id="72e7" class="oc le jf bd lf od oe of li og oh oi ll ku oj kv lp kx ok ky lt la ol lb lx om bi translated">像素大小</h1><p id="a444" class="pw-post-body-paragraph ly lz jf ma b mb mc kp md me mf ks mg lm mh mi mj lq mk ml mm lu mn mo mp mq ij bi translated">另一个参数是像素的大小。就世界米而言，一个像素是多少？默认设置下是1px = 0.5m <br/>下图，可以看到不同像素大小的区别。(图像大小为300x300px像素)。例如，因为行人不到半米(从上面的视图看)，所以在最初的2-3幅图像中看不到他们。所以我们必须选择更高的分辨率(更低的pixel_size)。介于0.1和0.25之间。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi op"><img src="../Images/e2c94aa54c997259be0181149c3fb919.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*I833rsyc10uITyEy"/></div></div></figure><p id="c5b9" class="pw-post-body-paragraph ly lz jf ma b mb mv kp md me mw ks mg lm my mi mj lq na ml mm lu nc mo mp mq ij bi translated">如果我们使用不同的像素大小，我们也必须重新计算图像大小。用<code class="fe ny nz oa ob b">pixel_size=0.2</code>重新计算上面的例子:</p><ul class=""><li id="677d" class="nj nk jf ma b mb mv me mw lm nl lq nm lu nn mq no np nq nr bi translated">20米/秒</li><li id="9ac5" class="nj nk jf ma b mb ns me nt lm nu lq nv lu nw mq no np nq nr bi translated">5秒跑完100米</li><li id="f931" class="nj nk jf ma b mb ns me nt lm nu lq nv lu nw mq no np nq nr bi">100/0.2 = 500</li><li id="efd7" class="nj nk jf ma b mb ns me nt lm nu lq nv lu nw mq no np nq nr bi translated">最终图像尺寸:500/0.75 = 667像素</li></ul><figure class="ne nf ng nh gt is gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/ae43c4eeaa7047ec21b710324069b058.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/0*UgUhM2QRVr6uJBbD"/></div></figure><h1 id="005f" class="oc le jf bd lf od oe of li og oh oi ll ku oj kv lp kx ok ky lt la ol lb lx om bi translated">问题</h1><p id="3ae0" class="pw-post-body-paragraph ly lz jf ma b mb mc kp md me mf ks mg lm mh mi mj lq mk ml mm lu mn mo mp mq ij bi translated">随着我们增加image_size和分辨率(减小像素大小)，光栅化器必须做更多的工作。这已经是一个瓶颈，所以我们必须在模型性能和训练时间之间进行平衡。</p><p id="43d1" class="pw-post-body-paragraph ly lz jf ma b mb mv kp md me mw ks mg lm my mi mj lq na ml mm lu nc mo mp mq ij bi translated">计算光栅化器中的误差</p><p id="2e5b" class="pw-post-body-paragraph ly lz jf ma b mb mv kp md me mw ks mg lm my mi mj lq na ml mm lu nc mo mp mq ij bi translated">每一个历史位置，每一条车道，每一个其他代理都被编码成像素，我们的网络只能以像素级的精度预测地图上的下一个位置。<br/>在许多笔记本电脑中，光栅的尺寸为每像素0.50 m(超参数)。因此，对于每个预测位置，每个方向的预期平均误差将是0.50 / 4。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi or"><img src="../Images/e9b0e3b99bd660b28e5bac35fc07a6d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-X0O1pk8O0_D9Pj-.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">来源:栅格化文件错误计算的Github代码</figcaption></figure><figure class="ne nf ng nh gt is gh gi paragraph-image"><div class="gh gi os"><img src="../Images/f2e2183fcac45e3875f52c23af74f20b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/0*reylg1DfEmGJ-r8F.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">来源:栅格化文件错误计算的Github代码</figcaption></figure><p id="0dd4" class="pw-post-body-paragraph ly lz jf ma b mb mv kp md me mw ks mg lm my mi mj lq na ml mm lu nc mo mp mq ij bi translated">本次竞赛的获奖架构包括Resnet(18、34、50)、EDA、计算误差和效率net(b1、b3和b6)。代码请查看Github报告:</p><div class="ip iq gp gr ir ot"><a href="https://github.com/rashmimarganiatgithub/LYFT2020" rel="noopener  ugc nofollow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd jp gy z fp oy fr fs oz fu fw jo bi translated">rashmimarganiatgithub/LYFT2020</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">GitHub是超过5000万开发人员的家园，他们一起工作来托管和审查代码、管理项目和构建…</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">github.com</p></div></div><div class="pc l"><div class="pd l pe pf pg pc ph ix ot"/></div></div></a></div></div></div>    
</body>
</html>