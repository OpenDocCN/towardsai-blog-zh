<html>
<head>
<title>Mean Average Precision for Clients</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">客户的平均精度</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/mean-average-precision-for-clients-aecb0b039ac9?source=collection_archive---------2-----------------------#2020-09-01">https://pub.towardsai.net/mean-average-precision-for-clients-aecb0b039ac9?source=collection_archive---------2-----------------------#2020-09-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="e3d8" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/data-science" rel="noopener ugc nofollow" target="_blank">数据科学</a></h2><div class=""/><div class=""><h2 id="e14c" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">平均精度度量的非技术解释</h2></div><p id="d6e6" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd">免责声明</strong>:这个项目是为我的客户创建的，因为简单地解释这样一个复杂的指标相当具有挑战性，因此不要指望在这里看到太多的数学或方程，请记住我尽量保持简单。</p><h1 id="7ad0" class="ln lo it bd lp lq lr ls lt lu lv lw lx ki ly kj lz kl ma km mb ko mc kp md me bi translated"><strong class="ak">精度</strong></h1><p id="5437" class="pw-post-body-paragraph kr ks it kt b ku mf kd kw kx mg kg kz la mh lc ld le mi lg lh li mj lk ll lm im bi translated">准确性是最普通的衡量标准。想象一下我们在做一个图片里有没有狗的分类。为了测试我们的分类器，我们准备了一个测试集，包括包含狗和不包含狗的图片。然后，我们将我们的分类器应用于每张图片，并获得预测的类别。</p><p id="652f" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们可以用这个简单的公式计算精度。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/55d79f1ed46fdeb882e212502ed476eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:662/0*mZYD9m_0fn1Y5xwA"/></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">准确(性)</figcaption></figure><h1 id="ae94" class="ln lo it bd lp lq lr ls lt lu lv lw lx ki ly kj lz kl ma km mb ko mc kp md me bi translated">精确度和召回率</h1><p id="a5fa" class="pw-post-body-paragraph kr ks it kt b ku mf kd kw kx mg kg kz la mh lc ld le mi lg lh li mj lk ll lm im bi translated">有更多的方法来确定一个模型工作得如何，另外两种方法是<strong class="kt jd">精确</strong>和<strong class="kt jd">回忆</strong>。它们展示的东西有点不同，通常是成对出现的。</p><p id="85d7" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">继续我们的狗识别器，<strong class="kt jd"> precision </strong>显示有多少预测的狗实际上是狗。</p><p id="5345" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">而<strong class="kt jd">召回</strong>是正确预测的狗与我们测试集中狗的数量之比。</p><h2 id="f96a" class="mw lo it bd lp mx my dn lt mz na dp lx la nb nc lz le nd ne mb li nf ng md iz bi translated">例子</h2><p id="495d" class="pw-post-body-paragraph kr ks it kt b ku mf kd kw kx mg kg kz la mh lc ld le mi lg lh li mj lk ll lm im bi translated">假设我们的测试集包含12张有狗的图片和8张没有狗的图片。我们应用我们的分类器，得到8张预测为“狗”的图片，其余12张预测为“不是狗”。在这8个标记为“狗”的单词中，只有5个实际上是“狗”，其余的都是错的。</p><p id="a2b6" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">所以我们的<strong class="kt jd">精度</strong>是</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/1922aad99dcde4f6102ed4b3afb9ead0.png" data-original-src="https://miro.medium.com/v2/resize:fit:360/0*fOT2bwctDhGS6F8w"/></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">精确</figcaption></figure><p id="0f42" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">而我们的<strong class="kt jd">召回</strong>是</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/6c406c8699e3938a58cc3eaa20ec0f9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:322/0*JgXpjOYz52d2tm4H"/></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">回忆</figcaption></figure><p id="8afb" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd">为什么要用精度和召回？</strong></p><p id="a6a4" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">这两个指标让我们对模型产生的错误有了更深入的了解，从而允许我们分析和创建更好的解决方案。由于这种深入的理解，我们坚持他们，而不是准确性指标。</p><h1 id="f995" class="ln lo it bd lp lq lr ls lt lu lv lw lx ki ly kj lz kl ma km mb ko mc kp md me bi translated">并集上的交集</h1><p id="4643" class="pw-post-body-paragraph kr ks it kt b ku mf kd kw kx mg kg kz la mh lc ld le mi lg lh li mj lk ll lm im bi translated">为了充分理解平均精度度量，我们需要知道什么是并集上的交集。</p><p id="f3a5" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">它在我们创建对象检测解决方案时出现，并且需要确定我们在图片中找到对象的程度。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi nj"><img src="../Images/9dd5954a77e4bac5db20fc6d911eaee6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*O5f-vohhQINmMxeF.png"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">分类为检测(<a class="ae no" href="https://bit.ly/34STnIX" rel="noopener ugc nofollow" target="_blank">来源</a>)</figcaption></figure><p id="d08e" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们不仅需要对物体进行分类，还需要对其进行定位。那些彩色的小矩形被称为边界框。</p><p id="1097" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">假设我们有一个物体检测模型，但是我们用什么方法来衡量它的检测能力呢？这就是交集大于并集(IoU)派上用场的时候了。</p><p id="b5c4" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">为了计算这一点，我们需要一个测试集，其中包含所谓的基本事实边界框，当然，首先必须对它们进行标记，以便在进行测试时，我们可以将真实数据与预测数据进行比较。</p><p id="93ea" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">假设绿色框是我们的地面真实边界框(我们事先用手和眼睛标记的框)，红色框是我们的模型预测的。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="gh gi np"><img src="../Images/855cb3ffc9892fdf4b7b1a4507127c40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*B0f3XtdenxW9Li7n.png"/></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">并集上的交集示例(<a class="ae no" href="https://en.wikipedia.org/wiki/Jaccard_index" rel="noopener ugc nofollow" target="_blank">源</a>)</figcaption></figure><p id="b2f1" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">这个公式现在非常简单</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi nq"><img src="../Images/d3edbfcce41f1668ec8ec16bca1afb11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gIc-Dw5Fcuwpnb7F.jpg"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">交集超过联合公式(<a class="ae no" href="https://www.pyimagesearch.com/2018/05/14/a-gentle-guide-to-deep-learning-object-detection/" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><p id="417d" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">澄清一下，它是基础真实边界框和预测边界框之间的重叠(或相交)面积与这两者的联合面积的比率。</p><h1 id="d2e3" class="ln lo it bd lp lq lr ls lt lu lv lw lx ki ly kj lz kl ma km mb ko mc kp md me bi translated">平均精度</h1><p id="44d3" class="pw-post-body-paragraph kr ks it kt b ku mf kd kw kx mg kg kz la mh lc ld le mi lg lh li mj lk ll lm im bi translated">那么什么是<strong class="kt jd">平均精度</strong> (mAP)呢？为了计算它，我们需要为IoU设置一个阈值，例如0.5。这意味着当我们在一个边界框中定位该对象的50%时，我们说该对象被检测到。</p><p id="5670" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">然后我们要做的就是计算精度和召回值。有一种方法可以将这两个值合并成一个值，但是这种方法更高级一些，所以我们不打算在这里讨论。</p><p id="d870" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">之后，我们一小步一小步地改变IoU的阈值。例如，下一个阈值将是0.55。然后再次计算精度和召回值。</p><p id="2497" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">并且再次改变IoU的阈值。现在会是0.6。再次计算精度和召回值。通常，这些阈值从0.5开始，以0.05为步长一直到0.9。</p><p id="8038" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">然后mean average precision是在所有阈值上平均的精度和召回的组合值。</p><h1 id="e4a3" class="ln lo it bd lp lq lr ls lt lu lv lw lx ki ly kj lz kl ma km mb ko mc kp md me bi translated">它显示了什么？</h1><p id="3795" class="pw-post-body-paragraph kr ks it kt b ku mf kd kw kx mg kg kz la mh lc ld le mi lg lh li mj lk ll lm im bi translated">它显示了模型对具有不同检测阈值的对象的分类效果。值越高，模型越好。结果差异很大，但通常情况下，一个工作良好的模型在复杂任务中的mAP为0.45–0.5。</p><p id="751a" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">你可以在COCO数据集上查看一个模特地图的例子:<a class="ae no" href="https://pjreddie.com/darknet/yolo/" rel="noopener ugc nofollow" target="_blank">https://pjreddie.com/darknet/yolo/</a>。</p><p id="2316" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">希望对你有帮助。</p><p id="62ac" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><em class="nr">联系我上</em><a class="ae no" href="https://twitter.com/poddiachyi" rel="noopener ugc nofollow" target="_blank"><em class="nr">Twitter</em></a><em class="nr">，</em><a class="ae no" href="https://www.linkedin.com/in/poddiachyi/" rel="noopener ugc nofollow" target="_blank"><em class="nr">LinkedIn</em></a><em class="nr">，</em> <a class="ae no" href="https://www.facebook.com/poddiachyi" rel="noopener ugc nofollow" target="_blank"> <em class="nr">脸书</em> </a> <em class="nr">，关注我上</em><a class="ae no" href="https://github.com/Poddiachyi" rel="noopener ugc nofollow" target="_blank"><em class="nr">GitHub</em></a><em class="nr">！</em></p></div></div>    
</body>
</html>