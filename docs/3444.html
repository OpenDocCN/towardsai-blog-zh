<html>
<head>
<title>ChatGPT Combined with Graph Database to Predict a FIFA 2022 Winner but Went Wrong</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ChatGPT结合图形数据库预测FIFA 2022冠军，但出了错</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/chatgpt-combined-with-graph-database-to-predict-a-fifa-2022-winner-but-went-wrong-f872c303af63?source=collection_archive---------1-----------------------#2022-12-24">https://pub.towardsai.net/chatgpt-combined-with-graph-database-to-predict-a-fifa-2022-winner-but-went-wrong-f872c303af63?source=collection_archive---------1-----------------------#2022-12-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/78478daafd35339feb3acd47ea33907b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*P3HJthtMNIHs688j.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated"><em class="jd">特征图像来源:图像也是用OpenAI通过DALL-E 2模型&amp; DALL-E 2 Outpainting生成的。参见</em> <a class="ae je" href="https://user-images.githubusercontent.com/1651790/205881462-ff007725-e270-4b1e-9062-7702f01021c1.png" rel="noopener ugc nofollow" target="_blank"> <em class="jd">原图</em> </a> <em class="jd">。</em></figcaption></figure><div class=""/><h1 id="b2a5" class="ke kf jh bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated"><strong class="ak">ChatGPT的炒作</strong></h1><p id="8622" class="pw-post-body-paragraph lc ld jh le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在国际足联2022年世界杯的宣传中，我看到了剑桥情报的一篇博客文章，其中他们利用有限的信息以及球员、球队和俱乐部之间的相关性来预测最终获胜的球队。作为一个图形技术爱好者，我总是喜欢尝试用NebulaGraph做类似的事情，分享图形算法的思想，从社区中的一个图形中的整体连接中提取隐藏的信息。</p><p id="e1ef" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">最初的尝试是在大约2小时内完成，但我注意到需要仔细解析来自维基百科的数据集，而我碰巧不擅长做这项工作，所以我把这个想法搁置了几天。</p><p id="a970" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">与此同时，另一个热潮——open ai ChatGPT也宣布了。由于我已经是DALL-E 2的用户(为我的博客文章生成特征图片)，我也很快尝试了一下。我目睹了其他人(通过Twitter、博客、HackerNews)如何试图说服ChatGPT做许多难以置信的事情:</p><ul class=""><li id="98c8" class="mf mg jh le b lf ma lj mb ln mh lr mi lv mj lz mk ml mm mn bi translated">随时帮助实现一段代码</li><li id="c301" class="mf mg jh le b lf mo lj mp ln mq lr mr lv ms lz mk ml mm mn bi translated">模拟任何提示界面:shell、python、虚拟机，甚至是您创建的语言</li><li id="9728" class="mf mg jh le b lf mo lj mp ln mq lr mr lv ms lz mk ml mm mn bi translated">扮演几乎任何给定的角色，和你聊天</li><li id="80a5" class="mf mg jh le b lf mo lj mp ln mq lr mr lv ms lz mk ml mm mn bi translated">写诗、说唱、散文</li><li id="f44f" class="mf mg jh le b lf mo lj mp ln mq lr mr lv ms lz mk ml mm mn bi translated">在一段代码中找到一个错误</li><li id="3e4f" class="mf mg jh le b lf mo lj mp ln mq lr mr lv ms lz mk ml mm mn bi translated">解释复杂正则表达式/开放密码查询的含义</li></ul><p id="e489" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">ChatGPT的情境化和理解能力前所未有的强大，以至于每个人都在谈论一种新的工作方式:如何掌握询问/说服/触发机器来帮助我们更好更快地完成工作。</p><p id="77e2" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">于是，在尝试让ChatGPT帮我写复杂图数据库查询语句，解释复杂图查询语句的含义，还有一大块Bison代码，他/她都做得很好之后，我意识到:为什么不让ChatGPT帮我写提取数据的代码呢？</p><h1 id="3daa" class="ke kf jh bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">抓取数据</h1><p id="aec7" class="pw-post-body-paragraph lc ld jh le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我真的试过了，结果是…足够好。</p><p id="df9c" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">整个过程基本上就像一个编码面试官，或者一个产品经理，提出我的需求，然后ChatGPT给我代码实现。然后我试着运行代码，找到代码中没有意义的地方，指出来，并给出建议，ChatGPT很快就理解了我指出的要点，并做出适当的修正，比如:</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mt"><img src="../Images/aa9ded94581c1be965cd60d792ae36ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ckU1skeFo1xtw5N2.png"/></div></div></figure><p id="299d" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">这整个过程我就不一一列举了，但是我会在这里分享生成的代码和整个讨论<a class="ae je" href="https://gist.github.com/wey-gu/78cb28bee130966e7d6e9d573b51deff" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="f872" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">最终生成的数据是一个CSV文件。</p><ul class=""><li id="5712" class="mf mg jh le b lf ma lj mb ln mh lr mi lv mj lz mk ml mm mn bi translated">Raw版<a class="ae je" href="https://github.com/siwei-io/talks/files/10152775/world_cup_squads.csv" rel="noopener ugc nofollow" target="_blank"> world_cup_squads.csv </a></li><li id="ac40" class="mf mg jh le b lf mo lj mp ln mq lr mr lv ms lz mk ml mm mn bi translated">手动修改，生日和年龄分开列<a class="ae je" href="https://github.com/siwei-io/talks/files/10152923/world_cup_squads.csv" rel="noopener ugc nofollow" target="_blank">世界杯_球队_v0.csv </a></li><li id="4432" class="mf mg jh le b lf mo lj mp ln mq lr mr lv ms lz mk ml mm mn bi translated">它包含球队、组、号码、位置、球员姓名、生日、年龄、国际比赛次数、进球数和服务的俱乐部的信息/列。</li></ul><pre class="mu mv mw mx gt my mz na bn nb nc bi"><span id="8e6c" class="nd kf jh mz b be ne nf l ng nh">Team,Group,No.,Pos.,Player,DOB,Age,Caps,Goals,Club<br/>Ecuador,A,1,1GK,Hernán Galíndez,(1987-03-30)30 March 1987,35,12,0,Aucas<br/>Ecuador,A,2,2DF,Félix Torres,(1997-01-11)11 January 1997,25,17,2,Santos Laguna<br/>Ecuador,A,3,2DF,Piero Hincapié,(2002-01-09)9 January 2002,20,21,1,Bayer Leverkusen<br/>Ecuador,A,4,2DF,Robert Arboleda,(1991-10-22)22 October 1991,31,33,2,São Paulo<br/>Ecuador,A,5,3MF,José Cifuentes,(1999-03-12)12 March 1999,23,11,0,Los Angeles FC</span></pre><ul class=""><li id="e904" class="mf mg jh le b lf ma lj mb ln mh lr mi lv mj lz mk ml mm mn bi translated">去掉头球的最终版本<a class="ae je" href="https://github.com/siwei-io/talks/files/10152974/world_cup_squads_no_headers.csv" rel="noopener ugc nofollow" target="_blank">world _ cup _ squads _ no _ headers . CSV</a></li></ul><h1 id="b267" class="ke kf jh bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">预测2022年世界杯的图论算法</h1><p id="3fda" class="pw-post-body-paragraph lc ld jh le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在ChatGPT的帮助下，我终于可以尝试用图表魔法预测游戏的赢家，在此之前，我需要将数据映射到图表视图中。</p><p id="9e23" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">如果你不关心过程，直接去<a class="ae je" href="https://www.nebula-graph.io/posts/predict-fifa-world-cup-with-chatgpt-and-nebulagraph#post-result" rel="noopener ugc nofollow" target="_blank">预测结果</a>。</p><h1 id="9c0a" class="ke kf jh bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">图形建模</h1><blockquote class="ni nj nk"><p id="603c" class="lc ld nl le b lf ma lh li lj mb ll lm nm mc lp lq nn md lt lu no me lx ly lz ij bi translated"><em class="jh">先决条件:本文使用</em><a class="ae je" href="https://github.com/vesoft-inc/nebula" rel="noopener ugc nofollow" target="_blank"><em class="jh">nebula graph</em></a><em class="jh">(开源)和</em><a class="ae je" href="https://docs.nebula-graph.io/3.3.0/nebula-explorer/about-explorer/ex-ug-what-is-explorer/" rel="noopener ugc nofollow" target="_blank"><em class="jh">nebula graph Explorer</em></a><em class="jh">(专有)，你可以在</em><a class="ae je" href="https://go.aws/3VZay2I" rel="noopener ugc nofollow" target="_blank"><em class="jh">AWS</em></a><em class="jh">上请求免费试用。</em></p></blockquote><p id="3900" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">图形建模是以“顶点-&gt;边”图形的形式对现实世界信息的抽象和表示。在我们的例子中，我们将把从维基百科解析的信息表示为:</p><p id="ff1a" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated"><strong class="le ji">顶点</strong>:</p><ul class=""><li id="f499" class="mf mg jh le b lf ma lj mb ln mh lr mi lv mj lz mk ml mm mn bi translated">运动员</li><li id="ce94" class="mf mg jh le b lf mo lj mp ln mq lr mr lv ms lz mk ml mm mn bi translated">组</li><li id="8a0f" class="mf mg jh le b lf mo lj mp ln mq lr mr lv ms lz mk ml mm mn bi translated">组</li><li id="c418" class="mf mg jh le b lf mo lj mp ln mq lr mr lv ms lz mk ml mm mn bi translated">俱乐部</li></ul><p id="a61f" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated"><strong class="le ji">边缘</strong>:</p><ul class=""><li id="a877" class="mf mg jh le b lf ma lj mb ln mh lr mi lv mj lz mk ml mm mn bi translated">groupedin(该队属于哪个组)</li><li id="16c0" class="mf mg jh le b lf mo lj mp ln mq lr mr lv ms lz mk ml mm mn bi translated">belongto(球员属于国家队)</li><li id="0edd" class="mf mg jh le b lf mo lj mp ln mq lr mr lv ms lz mk ml mm mn bi translated">发球(球员在俱乐部发球)</li></ul><p id="b341" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">球员的年龄、国家队出场次数和进球数自然适合作为球员标签的属性(顶点的类型)。</p><p id="4df0" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">以下是<strong class="le ji"> NebulaGraph Explorer </strong>中这个模式的截图(我以后就叫它Explorer了)。</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/4da7a8fe5702d04d57bd3a2522b43d89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5INrvEyd1ca8vHBk.png"/></div></div></figure><p id="f822" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">然后，我们可以点击右上角的保存图标和按钮:<code class="fe nq nr ns mz b">Apply to Space</code>用<a class="ae je" href="https://docs.nebula-graph.io/3.3.0/nebula-explorer/db-management/draft/" rel="noopener ugc nofollow" target="_blank">定义的模式</a>创建一个图形空间:</p><h1 id="d780" class="ke kf jh bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">摄入星云图</h1><p id="1797" class="pw-post-body-paragraph lc ld jh le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">通过图形建模，我们可以将<a class="ae je" href="https://github.com/siwei-io/talks/files/10152974/world_cup_squads_no_headers.csv" rel="noopener ugc nofollow" target="_blank"> CSV文件</a>(无头文件版本)上传到Explorer，方法是指向并选择将不同列映射到顶点和边的vid和属性。</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/cefd31c1367d2105b7ea6f42efa14a3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1rSpPvPIXQRVh2MY.png"/></div></div></figure><p id="215c" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">点击导入，我们将整个图形导入到<a class="ae je" href="https://nebula-graph.io" rel="noopener ugc nofollow" target="_blank"> NebulaGraph </a>中，成功后，我们还可以得到完整的CSV → Nebula Importer配置文件:<a class="ae je" href="https://github.com/siwei-io/talks/files/10164014/config_fifa.yml.txt" rel="noopener ugc nofollow" target="_blank">Nebula _ Importer _ config _ FIFA . yml</a>，以便您在将来重新导入相同的数据或与他人共享时重复使用。</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/c6e421254d377891e71caa69e9d71e87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EGz69g4cWEI2rYNG.png"/></div></div></figure><blockquote class="ni nj nk"><p id="a32c" class="lc ld nl le b lf ma lh li lj mb ll lm nm mc lp lq nn md lt lu no me lx ly lz ij bi translated"><em class="jh">注:参见</em> <a class="ae je" href="https://docs.nebula-graph.io/3.3.0/nebula-explorer/db-management/11.import-data/" rel="noopener ugc nofollow" target="_blank"> <em class="jh">导入数据文件</em> </a></p></blockquote><p id="98a5" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">导入后，我们可以在schema view 页面查看<a class="ae je" href="https://docs.nebula-graph.io/3.3.0/nebula-explorer/db-management/10.create-schema/#view_statistics" rel="noopener ugc nofollow" target="_blank">统计数据，显示我们有831名球员参加了2022年卡塔尔世界杯，在295个不同的俱乐部服役。</a></p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/87043427dad1eab77246f2fe47dbd741.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wqth5nY00ZsbmVH-.png"/></div></div></figure><h1 id="4ac4" class="ke kf jh bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">浏览图表</h1><p id="30f6" class="pw-post-body-paragraph lc ld jh le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们看看我们能从图表形式的信息/知识中获得什么样的见解。</p><h2 id="c051" class="nt kf jh bd kg nu nv dn kk nw nx dp ko ln ny nz ks lr oa ob kw lv oc od la oe bi translated">查询数据</h2><p id="df86" class="pw-post-body-paragraph lc ld jh le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们从显示所有数据开始，看看我们会得到什么。</p><p id="e78b" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">首先，在NebulaGraph Explorer的帮助下，我简单地拖放以绘制任何顶点类型(标记)和顶点类型之间的任何类型的边(标记)，这里我们知道所有的顶点都与其他顶点相连接，因此该查询模式不会遗漏任何孤立的顶点:</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/9760641813b48191c079ed8431c7b49e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eWV4uNphyJfUDAvz.png"/></div></div></figure><p id="284e" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">让它为我生成查询语句。这里默认为<code class="fe nq nr ns mz b">LIMIT 100</code>，我们把它改成大一点的(限制10000)，让它在控制台执行。</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/dffc5659b1998a5357a6e24d46a5cf6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vX-hqYNJqjxuDSBZ.png"/></div></div></figure><h2 id="7748" class="nt kf jh bd kg nu nv dn kk nw nx dp ko ln ny nz ks lr oa ob kw lv oc od la oe bi translated">初步观察</h2><p id="66c6" class="pw-post-body-paragraph lc ld jh le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">结果呈现出来是这样的，你可以看到它自然地形成了集群的模式。</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/8b79eabe4454c5ab4963e37b6c7ea7ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gckqOXyioQM2VDjQ.png"/></div></div></figure><p id="4f1f" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">这些外围集群主要由来自传统上并不强大的俱乐部的球员组成(现在我们知道他们可能会赢，但是，谁知道呢！).许多这样的俱乐部只有一两名球员在一个国家队或地区效力，所以他们在某种程度上与其他集群相隔离。</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi of"><img src="../Images/062d26284bb79f2970445bb833fbe12f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8_72wm9L7S_m93Mn.png"/></div></div></figure><h2 id="1330" class="nt kf jh bd kg nu nv dn kk nw nx dp ko ln ny nz ks lr oa ob kw lv oc od la oe bi translated">基于图形算法的分析</h2><p id="2774" class="pw-post-body-paragraph lc ld jh le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我在浏览器中点击了两个按钮(按度数大小，用Louvain算法着色)后(详见<a class="ae je" href="https://docs.nebula-graph.com.cn/3.3.0/nebula-explorer/graph-explorer/graph-algorithm/" rel="noopener ugc nofollow" target="_blank">文档</a>，在浏览器中我们可以看到整个图形变成了这样:</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/7a6b72b38791a421e394d31304422de5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ySOgNw9VcmWzU2oK.png"/></div></div></figure><p id="4ffa" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">这里使用了两种图形算法来分析这些见解。</p><ol class=""><li id="fda7" class="mf mg jh le b lf ma lj mb ln mh lr mi lv mj lz og ml mm mn bi translated">更改顶点的显示大小，以使用它们的度数来突出显示重要性</li><li id="fec9" class="mf mg jh le b lf mo lj mp ln mq lr mr lv ms lz og ml mm mn bi translated">用Louvain算法区分顶点的社区</li></ol><p id="da01" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">你可以看到红色的大圆圈是著名的巴塞罗那，它的球员也用红色标记。</p><h1 id="9188" class="ke kf jh bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">赢家预测算法</h1><p id="48fa" class="pw-post-body-paragraph lc ld jh le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">为了能够充分利用图的魔力(利用图上隐含的条件和信息)，我的想法(<a class="ae je" href="https://cambridge-intelligence.com/fifa-world-cup-2022-prediction/" rel="noopener ugc nofollow" target="_blank">窃自/启发于本帖</a>)是选择一种考虑边的图算法进行节点重要性分析，找出重要性更高的顶点，进行全局迭代和排序，从而得到排名靠前的团队排名。</p><p id="6df7" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">这些方法实际上反映了优秀的玩家同时拥有更大的社群和连接性。同时，为了增加传统强队之间的差异，我将考虑出场和进球的信息。</p><p id="22d5" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">最终，我的算法是:</p><ul class=""><li id="586c" class="mf mg jh le b lf ma lj mb ln mh lr mi lv mj lz mk ml mm mn bi translated">获取所有的<code class="fe nq nr ns mz b">(player)-serve-&gt;(club)</code>关系，过滤掉进球太少和场均进球太少的球员(以平衡来自一些较弱球队的老球员的不成比例的影响)</li><li id="02ab" class="mf mg jh le b lf mo lj mp ln mq lr mr lv ms lz mk ml mm mn bi translated">从所有被过滤的玩家中向外探索以获得国家队</li><li id="7c46" class="mf mg jh le b lf mo lj mp ln mq lr mr lv ms lz mk ml mm mn bi translated">对上述子图运行<a class="ae je" href="https://en.wikipedia.org/wiki/Betweenness_centrality" rel="noopener ugc nofollow" target="_blank">中间中心度</a>算法，计算节点重要性分数</li></ul><h1 id="7d41" class="ke kf jh bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">预测的过程</h1><p id="edca" class="pw-post-body-paragraph lc ld jh le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">首先，我们把进球十个以上，场均进球0.2个以上的，拿出<code class="fe nq nr ns mz b">(player)-serve-&gt;(club)</code>模式的子图。</p><pre class="mu mv mw mx gt my mz na bn nb nc bi"><span id="f16a" class="nd kf jh mz b be ne nf l ng nh">MATCH ()-[e]-&gt;()<br/>WITH e LIMIT 10000<br/>WITH e AS e WHERE e.goals &gt; 10 AND toFloat(e.goals)/e.caps &gt; 0.2<br/>RETURN e</span></pre><blockquote class="ni nj nk"><p id="d90d" class="lc ld nl le b lf ma lh li lj mb ll lm nm mc lp lq nn md lt lu no me lx ly lz ij bi translated"><em class="jh">注意:为了方便起见，我也将进球和盖帽的数量作为属性包含在发球区中。</em></p></blockquote><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/e525d7b0a9d34eae83b1654109947556.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CQY9_U0uwpvd35E5.png"/></div></div></figure><p id="010c" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">然后，我们在左侧工具栏中选择图形上的所有顶点，选择向外方向的<code class="fe nq nr ns mz b">belongto</code>边，向外展开图形(遍历)，并选择将新展开的顶点标记为标志的图标。</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/34d422fb2a3787d05624860adbaffa1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ATEd4VUxrj04u82w.png"/></div></div></figure><p id="902c" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">现在我们有了最终的子图，我们使用浏览器中的图算法功能来执行BNC(中间中心性):</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/3c250c80e368b222ab11a41c06eb9eac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2mWG1INN4PEOHXLx.png"/></div></div></figure><p id="5b9f" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">图形画布看起来像这样:</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/c56975b0625206109362036bf46d21a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aUPhrnwjzIpgJx1P.png"/></div></div></figure><h1 id="3e44" class="ke kf jh bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">结果</h1><p id="df47" class="pw-post-body-paragraph lc ld jh le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">最终，我们根据中间中心性的值进行排序，得到最终获胜的队伍:巴西！🇧🇷，其次是比、德、英、法、阿根延。</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oh"><img src="../Images/b56653e28297a6c2647f15e0cdd0fb37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PUpRtT6IyBVV284tyCYmsA.png"/></div></div></figure><p id="d01e" class="pw-post-body-paragraph lc ld jh le b lf ma lh li lj mb ll lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">结果证明这个结果错得太离谱了…但是值得一试，不是吗？希望你喜欢这个小实验！</p></div></div>    
</body>
</html>