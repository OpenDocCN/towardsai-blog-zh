<html>
<head>
<title>Analyzing CitiBike Data: EDA</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分析CitiBike数据:EDA</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/analyzing-citibike-data-eda-e657409f007a?source=collection_archive---------1-----------------------#2020-09-05">https://pub.towardsai.net/analyzing-citibike-data-eda-e657409f007a?source=collection_archive---------1-----------------------#2020-09-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="715f" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/data-science" rel="noopener ugc nofollow" target="_blank">数据科学</a></h2><div class=""/><div class=""><h2 id="310d" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">充分利用Matplotlib和Seaborn</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/0696ca4986d201179d3042c825091e77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0rZZiqzp0KEXLJst"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">由<a class="ae le" href="https://unsplash.com/@aginsbrook?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">安东尼·福明</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="4d30" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">CitiBike是纽约市著名的自行车租赁公司，也是美国最大的自行车租赁公司。CitiBike于2013年5月推出，现已成为交通网络的重要组成部分。它们让通勤变得有趣、高效、实惠——更不用说健康和环保了。</p><p id="876d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我从<a class="ae le" href="https://www.kaggle.com/sujan97/citibike-system-data" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>得到了2013年6月的城市自行车骑行者数据。我将带您浏览完整的探索性数据分析，回答一些问题，如:</p><ol class=""><li id="2d32" class="mb mc iq lh b li lj ll lm lo md ls me lw mf ma mg mh mi mj bi translated">骑自行车的人去哪里？</li><li id="87b3" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">他们什么时候骑马？</li><li id="850b" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">他们走了多远？</li><li id="760a" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">哪个站最受欢迎？</li><li id="d82b" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">一周中的哪几天最受欢迎？</li><li id="d92a" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">还有更多</li></ol><blockquote class="mp mq mr"><p id="9daa" class="lf lg ms lh b li lj ka lk ll lm kd ln mt lp lq lr mu lt lu lv mv lx ly lz ma ij bi translated"><strong class="lh ja">关键学习:</strong></p><p id="efe4" class="lf lg ms lh b li lj ka lk ll lm kd ln mt lp lq lr mu lt lu lv mv lx ly lz ma ij bi translated">我使用了许多参数来调整Matplotlib和Seaborn的绘图功能。这将是一个很好的阅读实践中学习他们。</p><p id="c104" class="lf lg ms lh b li lj ka lk ll lm kd ln mt lp lq lr mu lt lu lv mv lx ly lz ma ij bi translated"><strong class="lh ja">注:</strong></p><p id="937e" class="lf lg ms lh b li lj ka lk ll lm kd ln mt lp lq lr mu lt lu lv mv lx ly lz ma ij bi translated">这篇文章最好在更大的屏幕上看，比如平板电脑或台式机。在任何时候，如果你发现理解任何东西有困难，我会在本文末尾删除我的Kaggle笔记本的链接，你可以在评论区删除你的quaries。</p></blockquote></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><h2 id="ad91" class="nd ne iq bd nf ng nh dn ni nj nk dp nl lo nm nn no ls np nq nr lw ns nt nu iw bi translated">我们开始吧</h2><p id="621b" class="pw-post-body-paragraph lf lg iq lh b li nv ka lk ll nw kd ln lo nx lq lr ls ny lu lv lw nz ly lz ma ij bi translated">导入必要的库和读取数据。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oc"><img src="../Images/91778c571a49ea410d3b6e6158262f65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7JA9sHGlNi_R9KiaXzi7Sw.png"/></div></div></figure><p id="abd7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们获得更多的数据信息。</p><pre class="kp kq kr ks gt od oe of og aw oh bi"><span id="90e4" class="nd ne iq oe b gy oi oj l ok ol">df.info()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi om"><img src="../Images/f6bf75a88e2f934b9fcd68cee3211fa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*OhSu66ilzaDKXisJFIJW6A.png"/></div></figure><pre class="kp kq kr ks gt od oe of og aw oh bi"><span id="8067" class="nd ne iq oe b gy oi oj l ok ol">#sum of missing values in each column<br/>df.isna().sum()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi on"><img src="../Images/afab14134d220b0a680c1f7eeba0378e.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*a-jiychcTmwvS85pkCmJ9w.png"/></div></figure><p id="6594" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们要处理577703行和15列。还有，相当多的缺失值。让我们先处理缺失值。</p><h2 id="a731" class="nd ne iq bd nf ng nh dn ni nj nk dp nl lo nm nn no ls np nq nr lw ns nt nu iw bi translated">处理缺失值</h2><p id="46e0" class="pw-post-body-paragraph lf lg iq lh b li nv ka lk ll nw kd ln lo nx lq lr ls ny lu lv lw nz ly lz ma ij bi translated">让我们先看看缺失值的百分比，这将有助于我们决定是否删除它们。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/5c3ead252d7d8c8aba8de26aa34011bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*rYw0AGu_PrOUXVt6ffMG0A.png"/></div></figure><p id="ba33" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们不能丢弃缺少的有价值的“出生年份”行。因此，删除“出生年份”整列，并删除“终点桩号id”、“终点桩号名称”、“终点桩号纬度”和“终点桩号经度”缺少值的行。幸运的是，这四行中所有缺少的值(终点桩号id、终点桩号名称、终点桩号纬度和终点桩号经度)都在完全相同的行上，因此从所有四行中删除NaN行仍然只会导致3%的数据丢失。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi op"><img src="../Images/3c8c2f799a4585dd8ef82b4e5138b106.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*BXbV0p9VfaM237spfxfyLA.png"/></div></figure><h2 id="6e3a" class="nd ne iq bd nf ng nh dn ni nj nk dp nl lo nm nn no ls np nq nr lw ns nt nu iw bi translated">让我们来看看我们的数据涉及哪些性别</h2><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oq"><img src="../Images/ad09479ea056e892d85de45d5f55faeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*2iygNFq7mSdybJvFSUaXYw.png"/></div></div></figure><p id="20e9" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在纽约市，我们可以看到男性骑车者比女性多，但由于大量的未知性别，我们无法得出任何具体的结论。填写未知的性别值是可能的，但考虑到骑手没有选择透露他们的性别，我们不会这样做。</p><h2 id="b9d6" class="nd ne iq bd nf ng nh dn ni nj nk dp nl lo nm nn no ls np nq nr lw ns nt nu iw bi translated">订户与客户</h2><p id="faf9" class="pw-post-body-paragraph lf lg iq lh b li nv ka lk ll nw kd ln lo nx lq lr ls ny lu lv lw nz ly lz ma ij bi translated">订户是购买年票的用户，顾客是一次性购买24小时或3天通行证的用户。来看看车友们选择最多的是什么？</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi or"><img src="../Images/17c7b867c8a36fe44a7ea5de2f97631e.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*NBCg2QAcpchRc5jR6F5nZA.png"/></div></figure><p id="6a56" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们可以看到，年订阅用户的数量多于1-3天的客户。但差别并不大，该公司必须专注于通过一些优惠或销售将客户转化为订户。</p><h2 id="207a" class="nd ne iq bd nf ng nh dn ni nj nk dp nl lo nm nn no ls np nq nr lw ns nt nu iw bi translated">骑自行车通常要用几个小时</h2><p id="5ef1" class="pw-post-body-paragraph lf lg iq lh b li nv ka lk ll nw kd ln lo nx lq lr ls ny lu lv lw nz ly lz ma ij bi translated">我们有一个名为“timeduration”的专栏，讨论每次旅行的持续时间，以秒为单位。首先，我们将把它转换成分钟，然后创建箱，把行程分成0-30分钟、30-60分钟、60-120分钟、120分钟和以上的乘车时间。然后，让我们画一张图来看看骑自行车的人通常骑多长时间。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi os"><img src="../Images/d143fed47b920009f7f36b223ac7a823.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*A4fDO0igf1SlVWvG5V7y1A.png"/></div></figure><p id="1279" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">有大量骑行者每次骑行不到半小时，大多数不到1小时。</p><h2 id="350d" class="nd ne iq bd nf ng nh dn ni nj nk dp nl lo nm nn no ls np nq nr lw ns nt nu iw bi translated">相同的开始和结束位置与不同的开始和结束位置</h2><p id="8455" class="pw-post-body-paragraph lf lg iq lh b li nv ka lk ll nw kd ln lo nx lq lr ls ny lu lv lw nz ly lz ma ij bi translated">我们在数据中看到，有些行程在同一地点开始和结束。让我们看看有多少。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/47cb847694d25dff9ace99b2d55b1be0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*ZpCkYgBiPneLGJF4JMTh7A.png"/></div></figure><h2 id="80fe" class="nd ne iq bd nf ng nh dn ni nj nk dp nl lo nm nn no ls np nq nr lw ns nt nu iw bi translated">本月最佳骑行模式</h2><p id="1732" class="pw-post-body-paragraph lf lg iq lh b li nv ka lk ll nw kd ln lo nx lq lr ls ny lu lv lw nz ly lz ma ij bi translated">这部分是我花了很多时间和精力的地方。下图说了很多。从技术上来说，有很多编码。在看代码之前，我将概述一下我们在这里做什么。基本上，我们正在绘制一个时间序列图，以查看每天骑行次数的趋势和每天使用自行车的总时长的趋势。让我们先看看代码，然后我会为你分解它。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="a21b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">通过阅读评论，你可能已经理解了基本的想法，但是让我一步一步地解释这个过程:</p><ol class=""><li id="35bf" class="mb mc iq lh b li lj ll lm lo md ls me lw mf ma mg mh mi mj bi translated">日期时间在字符串中，我们将把它转换成DateTime对象。</li><li id="0560" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">按一个月中的日期对数据进行分组，并计算每天发生的次数以绘制乘车记录。</li><li id="5e61" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">我们只有一行七月份的信息。这是一个离群值，放弃它。</li><li id="89c3" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">重复第2步和第3步，但这次唯一的不同是我们对数据求和，而不是计数，以获得每天旅行的总持续时间。</li><li id="4e34" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">使用双轴方法将两个数据绘制在一个图表上。</li></ol><p id="7897" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我已经在matplotlib上使用了许多调整方法，请务必仔细阅读它们。如果有任何疑问，请在Kaggle笔记本上发表评论，该笔记本的链接将在本文末尾删除。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ou"><img src="../Images/143fb5ec9a9cea84bc6ff6443f90c58c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m4EztHUtD_oQVbC0Rb6ahA.png"/></div></div></figure><p id="9df2" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">临近月底，骑车人的数量大幅增加。这个月的第一个星期天，有微不足道的乘客。接近月末时，骑车人骑车的时间会减少。</p><h2 id="abbc" class="nd ne iq bd nf ng nh dn ni nj nk dp nl lo nm nn no ls np nq nr lw ns nt nu iw bi translated">十大起点站</h2><p id="56b8" class="pw-post-body-paragraph lf lg iq lh b li nv ka lk ll nw kd ln lo nx lq lr ls ny lu lv lw nz ly lz ma ij bi translated">这非常简单，我们使用value_counts()和slice获取每个起点桩号的出现次数，从中获取前10个值，然后绘制相同的图。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ov"><img src="../Images/baf3f0574a2f492ef5cfcf789174096f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-05gX9EuSLIo3Ump0NEBEQ.png"/></div></div></figure><h2 id="f3d6" class="nd ne iq bd nf ng nh dn ni nj nk dp nl lo nm nn no ls np nq nr lw ns nt nu iw bi translated">前10个终端站</h2><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ow"><img src="../Images/efea79cf8c6f07e7a75c7b4926b66887.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G_QSjeZ5NyPYTO17AYau7g.png"/></div></div></figure></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><p id="3ec8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我算出来的卡格尔笔记本。欢迎在评论区提出问题。</p><div class="ox oy gp gr oz pa"><a href="https://www.kaggle.com/sujan97/analyzing-citibike-system-eda" rel="noopener  ugc nofollow" target="_blank"><div class="pb ab fo"><div class="pc ab pd cl cj pe"><h2 class="bd ja gy z fp pf fr fs pg fu fw iz bi translated">分析CitiBike系统:EDA</h2><div class="ph l"><h3 class="bd b gy z fp pf fr fs pg fu fw dk translated">使用Kaggle笔记本探索和运行机器学习代码|使用来自CitiBike系统数据的数据</h3></div><div class="pi l"><p class="bd b dl z fp pf fr fs pg fu fw dk translated">www.kaggle.com</p></div></div><div class="pj l"><div class="pk l pl pm pn pj po ky pa"/></div></div></a></div><p id="7369" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">使用散景学习数据可视化</p><div class="ox oy gp gr oz pa"><a href="https://medium.com/analytics-vidhya/beginners-guide-to-data-visualization-with-bokeh-818cbd5eeebb" rel="noopener follow" target="_blank"><div class="pb ab fo"><div class="pc ab pd cl cj pe"><h2 class="bd ja gy z fp pf fr fs pg fu fw iz bi translated">散景数据可视化初学者指南</h2><div class="ph l"><h3 class="bd b gy z fp pf fr fs pg fu fw dk translated">从头开始用Python构建基于web的可视化</h3></div><div class="pi l"><p class="bd b dl z fp pf fr fs pg fu fw dk translated">medium.com</p></div></div><div class="pj l"><div class="pp l pl pm pn pj po ky pa"/></div></div></a></div></div></div>    
</body>
</html>