<html>
<head>
<title>Predicting and Detecting Traffic Congestion Duration Anomalies</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">预测和检测交通拥堵持续时间异常</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/predicting-and-detecting-traffic-congestion-duration-anomalies-972873feee8a?source=collection_archive---------4-----------------------#2020-06-23">https://pub.towardsai.net/predicting-and-detecting-traffic-congestion-duration-anomalies-972873feee8a?source=collection_archive---------4-----------------------#2020-06-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="3c95" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/machine-learning" rel="noopener ugc nofollow" target="_blank">机器学习</a></h2><div class=""/><figure class="gl gn ka kb kc kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi jz"><img src="../Images/46dde7d4c4d3b7ec2fee7d1593aff141.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_ZYi051n1IK2YyH4UcCivA.jpeg"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">您可以在我的<a class="ae ko" href="https://github.com/opophehu/traffic_congestion_anomaly_detection" rel="noopener ugc nofollow" target="_blank"> <strong class="bd kp"> GitHub资源库</strong> </a>上找到这个项目的代码。</figcaption></figure><h1 id="0c1a" class="kq kr it bd kp ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">语境</h1><p id="dea2" class="pw-post-body-paragraph ln lo it lp b lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">我们都遇到了交通堵塞。大多数都很正常，而且基本上已经成为您日常饮食的一部分。但是，当意外的异常拥堵发生时，它真的会毁了您的计划。</p><p id="3946" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated"><em class="mq">想象。</em></p><figure class="ms mt mu mv gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi mr"><img src="../Images/cd12311abf4b27489b2fefd333682d92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gpfspqo5MqF8V6dsNFXuhg.jpeg"/></div></div></figure><p id="c086" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">下午5:30，在紧张的一天后，您终于下班了。你可能计划了一个晚上放松一下，看你最喜欢的节目来减压。你跳上公共汽车想“我只需要再忍受50分钟，然后我就回家了。”但是高速公路上发生了一些意想不到的事件，让你被困在交通中几个小时。</p><figure class="ms mt mu mv gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi mr"><img src="../Images/f2c4f8a888360f505f3f8bb0139c431b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wkfd9iuNrte8ijWy2XnoAg.jpeg"/></div></div></figure><p id="2d90" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">当你终于到家时，演出已经结束了，你必须早起，所以你必须洗漱后直接上床睡觉。你的夜晚完全被毁了，你在公共汽车上为这个事实浪费了几个小时的恐惧。</p><figure class="ms mt mu mv gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi mr"><img src="../Images/964e5dc6bb5970faf5dc4bb8ab6baede.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Yd6JieNnF8e8VFfmJOgqA.jpeg"/></div></div></figure><p id="edd5" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在去洗澡的路上，你可能会想:“如果我能预测出拥堵会持续多久，并且知道这是不正常的，我会选择另一条路回家，或许情况会有所不同。”</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><p id="1b5a" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">为了防止这样的悲剧，我问:</p><h1 id="2dce" class="kq kr it bd kp ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">问题</h1><ol class=""><li id="3e6d" class="nd ne it lp b lq lr lu lv ly nf mc ng mg nh mk ni nj nk nl bi translated">如果发生这种情况，我能<strong class="lp jd">预测</strong> <strong class="lp jd">充血的持续时间</strong>吗？</li><li id="6b4f" class="nd ne it lp b lq nm lu nn ly no mc np mg nq mk ni nj nk nl bi translated">我能<strong class="lp jd">检测到交通拥堵事件中的异常</strong>吗？</li></ol></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><p id="865f" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">为了解决这些问题，我为公共汽车司机和乘客开发了一个现场公共汽车追踪器:</p><h1 id="70f8" class="kq kr it bd kp ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">产品</h1><figure class="ms mt mu mv gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi nr"><img src="../Images/453e47192dd005257a4d726f8ac27bb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5XiqB30AZWLalF9t6wwiFg.jpeg"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">三辆公共汽车被跟踪以示示范。请注意，像“4316”这样的数字是我从西雅图巴士API获得的巴士ID，它与地图上的标记数字不太相符，但我计划很快修复它。使用<strong class="bd kp">小叶. js </strong>完成，使用<strong class="bd kp"> Apache Kafka </strong>流式传输。</figcaption></figure><p id="43c0" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">这是西雅图地区的现场巴士追踪器。在右侧，我不断进行持续时间预测，并通知拥堵事件。如果没有事件，就没有表格单元格的颜色；如果存在拥塞并且是正常的，则单元颜色是白色，同时将进行拥塞将持续多长时间的预测。但是如果发生异常，它们将被标记为橙色，不幸的是，在我运行跟踪器的时候，这种情况还没有发生。</p><p id="4d0a" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">这使得公共汽车乘客和司机能够向交通当局报告异常情况，以便他们能够在整个过程之前进行干预，防止类似这样的悲剧发生。</p><figure class="ms mt mu mv gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi mr"><img src="../Images/675907ba82e11f368e930acf559b16ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*To8zzbZki2DfKzYfF5ElOA.jpeg"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">这显示了数据在后端是如何移动的。</figcaption></figure></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><p id="e9ad" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">现在，我们来谈谈<strong class="lp jd">模型</strong>是如何训练的:</p><h1 id="d7a1" class="kq kr it bd kp ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">数据</h1><figure class="ms mt mu mv gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi mr"><img src="../Images/02a1d5de2816d603ffd770dca8106bb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yHzmvoTDqjREAyWrvVDE7w.jpeg"/></div></div></figure><p id="f57a" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">主要数据来源于最近发表的一篇研究论文。该数据包含从2016年到2019年全美<strong class="lp jd">2500万交通事件数据</strong>以及<strong class="lp jd">600万天气事件数据</strong>。由于大小的原因，我使用<em class="mq"> pyspark </em>对数据进行了分区，并且因为我住在西雅图地区，所以考虑到可伸缩性，我选择了华盛顿州作为重点。我还从美国人口普查局收集了一些县级人口数据，因为我认为人口密度可能是一个重要的特征。</p><p id="cec4" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">然后通过特征工程，我从最初的24个特征减少到325个，然后使用多项式变换等技术减少到20个。所有的<strong class="lp jd">最终20个特征</strong>都被选中，因为它们<strong class="lp jd">可以</strong> <strong class="lp jd">影响模型性能至少5% </strong>。</p><p id="0d2f" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">如果你想知道这到底是怎么做到的，请访问<a class="ae ko" href="https://github.com/opophehu/traffic_congestion_anomaly_detection" rel="noopener ugc nofollow" target="_blank"> <strong class="lp jd"> GitHub仓库</strong> </a>了解详情。</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="504d" class="kq kr it bd kp ks ns ku kv kw nt ky kz la nu lc ld le nv lg lh li nw lk ll lm bi translated"><strong class="ak">车型</strong></h1><figure class="ms mt mu mv gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi mr"><img src="../Images/41b1248d52164dbef7b411e5e271b4bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ltSx4VNoMWIIKTUQIbEXtw.jpeg"/></div></div></figure><p id="0389" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在获得并清理数据后，我构建了一个监督回归模型，使用<strong class="lp jd"> <em class="mq"> XGboost </em> </strong>预测拥堵持续时间，其中<strong class="lp jd"> R2为0.53 </strong>。从0.19到0.53的跳跃是特征工程和超参数网格搜索相结合的结果。</p><p id="26aa" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">随着持续时间预测器的建立，我们现在可以通过建立异常检测器来查看它是否是一个异常。我的情况是用<a class="ae ko" href="https://towardsdatascience.com/outlier-detection-with-isolation-forest-3d190448d45e" rel="noopener" target="_blank"> <strong class="lp jd"> <em class="mq">隔离林</em> </strong> </a> <strong class="lp jd"> <em class="mq">。我选择它是因为它在解释能力和探测能力之间有一个很好的平衡，并且有最容易调整的超级参数。</em></strong></p><p id="0a6c" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">由于没有度量标准来评估无监督学习，这里我按顺序取出了3个观察值。<strong class="lp jd">同样的地点，相似的时间，但相隔几分钟。</strong>在<strong class="lp jd"> <em class="mq">上午7:33</em></strong>第一次观察到拥堵事件，预测持续41分钟，一分钟后给出相同的预测，认为正常。然而9分钟后在<strong class="lp jd"> <em class="mq">上午7点43分</em> </strong>，拥堵不仅没有好转反而变得更糟，并立即被标记为异常。</p><p id="7338" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">此时，当地交通部门可以在这种异常事件持续整个期间之前进行调查和干预，并在它发生之前防止它造成任何损害。</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="abb4" class="kq kr it bd kp ks ns ku kv kw nt ky kz la nu lc ld le nv lg lh li nw lk ll lm bi translated">调查结果</h1><figure class="ms mt mu mv gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi mr"><img src="../Images/63720f339eab8812de34b3e7a833c7f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kjy1zqX7VrOAP3AYZHRC9g.jpeg"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">分析华盛顿州天气数据的发现。</figcaption></figure><p id="766d" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">总体而言，天气对西澳大利亚交通拥堵持续时间的影响很小。这部分是因为从2016年到2019年，天气一直相当温和，总体上是好天气到温和天气。</p><figure class="ms mt mu mv gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi mr"><img src="../Images/5430dde6d7ce2118cd95cefd74a4f242.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7aeWd61gRqqCH7MdHsGJTA.jpeg"/></div></div></figure><p id="c393" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">通过建立持续时间预测器<em class="mq">(回归)</em>，我发现在夏季、<strong class="lp jd">每月第一个和第二个周末</strong>、周一<strong class="lp jd">、</strong>、<strong class="lp jd">周五</strong>、<strong class="lp jd">上午10点</strong>交通拥堵最严重。、<strong class="lp jd">下午1点</strong>和<strong class="lp jd">晚上9点</strong></p><p id="dd7a" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">我还发现<strong class="lp jd">最有影响力的特征</strong>是如何“<strong class="lp jd"><em class="mq"/></strong>”位置是<em class="mq">(即经度是你所在的东或西，西澳的西部比东部更城市化)</em>。</p><p id="cdec" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">值得注意的是，<strong class="lp jd">严重性</strong>是根据您当前的速度与限速<em class="mq">计算得出的(即，如果您当前的速度为50英里/小时，限速为60英里/小时，相差10，则严重性为1；差20，严重性2等)</em>。</p><figure class="ms mt mu mv gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi mr"><img src="../Images/6ecb4360d1bb9e0a5303be88e191f63a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WkfLq7p7GpPKO_WxeAYzkA.jpeg"/></div></div></figure><p id="a2f8" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">通过构建异常检测器<em class="mq">(分类)</em>，我发现拥塞<strong class="lp jd">异常很可能发生在<strong class="lp jd">低密度县</strong>、<strong class="lp jd">春季</strong>、周一<strong class="lp jd"/>、<strong class="lp jd">周日</strong>、<em class="mq">(特别是周日)</em>、<strong class="lp jd">上午</strong>、<em class="mq">(早上6点到晚上12点)</em>。这对于交通紧急响应部门更有效地分配他们的资源用于早期干预是有价值的。</strong></p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><p id="413a" class="pw-post-body-paragraph ln lo it lp b lq ml ls lt lu mm lw lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">最后，如果你想看代码，请访问这个项目的<a class="ae ko" href="https://github.com/opophehu/traffic_congestion_anomaly_detection" rel="noopener ugc nofollow" target="_blank"> <strong class="lp jd"> GitHub库</strong> </a>。如有任何问题或疑虑，请随时联系我们！</p><figure class="ms mt mu mv gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi mr"><img src="../Images/1bde4b3c223218d0ded3018c080e516f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eNOEcOE8MYBK__rO8GM_bA.png"/></div></div></figure></div></div>    
</body>
</html>