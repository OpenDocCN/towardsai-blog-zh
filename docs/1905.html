<html>
<head>
<title>How To Create An Instagram Profile Analyzer App Using Python And Streamlit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python和Streamlit创建Instagram Profile Analyzer应用程序</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/how-to-create-an-instagram-profile-analyzer-app-using-python-and-streamlit-11107046e85b?source=collection_archive---------1-----------------------#2021-06-09">https://pub.towardsai.net/how-to-create-an-instagram-profile-analyzer-app-using-python-and-streamlit-11107046e85b?source=collection_archive---------1-----------------------#2021-06-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="f089" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/programming" rel="noopener ugc nofollow" target="_blank">编程</a></h2><div class=""/><div class=""><h2 id="4355" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">创建Python应用程序的最简单方法</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/cc4fc2a7bc3a3739878bf3a42bed233d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fxK3GHp3zgtgqmvG.jpg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</figcaption></figure></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><p id="2d37" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">Streamlit 是一个很棒的库，可以帮助我们用最少的努力创建python应用程序。它不仅简单，而且它的用户界面非常漂亮，看起来非常专业。我们对这篇文章的想法是创建一个Instagram仪表板，上面有一些关于用户资料的描述性统计数据，如最常出现的标签、最喜欢的文章、参与度等。话虽如此，我们需要一个应用程序，它将用户名作为输入，并从Instagram中抓取其信息，以返回最终的仪表板。</p><h1 id="fe93" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">从Instagram获取数据</h1><p id="a9df" class="pw-post-body-paragraph lo lp it lq b lr nd kd lt lu ne kg lw lx nf lz ma mb ng md me mf nh mh mi mj im bi translated">这是最难的部分，因为Instagram不喜欢被人刮。幸运的是，有一个名为<a class="ae mk" href="https://github.com/arc298/instagram-scraper" rel="noopener ugc nofollow" target="_blank"> instagram-scraper </a>的库，这是一个用Python编写的命令行应用程序，可以毫无问题地抓取instagram个人资料(只是不要太频繁地使用)。</p><p id="0558" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">安装:</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="cbf5" class="nn mm it nj b gy no np l nq nr">pip install instagram-scraper</span></pre><p id="760a" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">用法:</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="6249" class="nn mm it nj b gy no np l nq nr">instagram-scraper "{username}" --profile-metadata  --media-metadata  --media-types none</span></pre><p id="e478" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">使用上面的命令，将创建一个名为username的文件夹，其中有一个包含我们的数据的JSON文件。请记住，我们需要在命令行中运行代码。</p><p id="65f3" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">让我们用<a class="ae mk" href="https://www.instagram.com/billybonaros" rel="noopener ugc nofollow" target="_blank">我的instagram账户:</a>来运行一个例子</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="cee5" class="nn mm it nj b gy no np l nq nr">instagram-scraper "billybonaros" --profile-metadata  --media-metadata  --media-types none</span></pre><p id="2951" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">我们可以使用python打开JSON文件，看看我们得到了什么。</p><p id="faed" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated"><code class="fe ns nt nu nj b">js <strong class="lq jd">=</strong></code> <code class="fe ns nt nu nj b">json.load(open('billybonaros/billybonaros.json', encoding<strong class="lq jd">=</strong>'utf-8'))</code></p><p id="420a" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated"><code class="fe ns nt nu nj b">js.keys()</code></p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="134f" class="nn mm it nj b gy no np l nq nr">dict_keys(['GraphImages', 'GraphProfileInfo'])</span></pre><p id="6467" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated"><strong class="lq jd">图形图像</strong>包含帖子的数据，如赞、评论等。并且<strong class="lq jd"> GraphProfileInfo </strong>保存用户的信息。</p><p id="a698" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated"><code class="fe ns nt nu nj b">js['GraphProfileInfo']</code></p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="a36d" class="nn mm it nj b gy no np l nq nr">{'created_time': 1286323200,<br/> 'info': {'biography': '</span><span id="1efd" class="nn mm it nj b gy nv np l nq nr">Artist \n</span><span id="2dee" class="nn mm it nj b gy nv np l nq nr">Artificial Intelligence &amp; Data Science\n</span><span id="bcea" class="nn mm it nj b gy nv np l nq nr">predictivehacks.com',<br/>  'followers_count': 3486,<br/>  'following_count': 2681,<br/>  'full_name': 'Billy Bonaros',<br/>  'id': '43176775',<br/>  'is_business_account': False,<br/>  'is_joined_recently': False,<br/>  'is_private': False,<br/>  'posts_count': 221,<br/>  'profile_pic_url': 'https://instagram.fath3-3.fna.fbcdn.net/v/t51.2885-19/s150x150/181615592_215309037065818_7520216790200441065_n.jpg?tp=1&amp;_nc_ht=instagram.fath3-3.fna.fbcdn.net&amp;_nc_ohc=ICw1tUaN_LkAX-GFvSB&amp;edm=ABfd0MgBAAAA&amp;ccb=7-4&amp;oh=062eef9cafacf4056c1d485e86f4b481&amp;oe=60C57270&amp;_nc_sid=7bff83'},<br/> 'username': 'billybonaros'}</span></pre><p id="aed8" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">我们将把<strong class="lq jd">图形图像</strong>数据转换成熊猫数据帧，这样我们可以更容易地使用它。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="e009" class="nn mm it nj b gy no np l nq nr">df<strong class="nj jd">=</strong>pd.DataFrame(js['GraphImages'])</span><span id="3f9c" class="nn mm it nj b gy nv np l nq nr">df</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/346b874d4672fef78405331db780a1cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EzNnFM3pKnuVS8zI.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</figcaption></figure><p id="240b" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">如你所见，我们得到了许多有用的数据。现在，让我们开始构建我们的应用程序。</p><h1 id="77c9" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">构建我们的Streamlit应用</h1><h1 id="5d68" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">发件人</h1><p id="a0ac" class="pw-post-body-paragraph lo lp it lq b lr nd kd lt lu ne kg lw lx nf lz ma mb ng md me mf nh mh mi mj im bi translated">在我们继续之前，确保您已经使用以下命令安装了<a class="ae mk" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="b3ed" class="nn mm it nj b gy no np l nq nr">pip install streamlit</span></pre><p id="2558" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">首先创建一个. py文件并导入这个项目所需的库。让我们把我们的文件叫做<strong class="lq jd"> main.py </strong>。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="b023" class="nn mm it nj b gy no np l nq nr">import streamlit as st<br/> <br/>import requests<br/>import numpy as np<br/>import pandas as pd<br/>import os<br/>import json<br/>import pandas as pd<br/>import numpy as np<br/>import re<br/>from datetime import datetime<br/>import string</span></pre><p id="a911" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">现在，我们必须给我们的应用程序一个标题并创建表单。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="5e07" class="nn mm it nj b gy no np l nq nr">st.title('Instagram Dashboard')<br/> <br/> <br/>with st.form(key='my_form'):<br/> <br/>#st.text_input creates a form that gets a text input<br/>    username = st.text_input(label='Enter User Name')<br/> <br/>#st.form_submit_button creates a submit button<br/>    submit_button = st.form_submit_button(label='Submit')</span></pre><p id="2b8f" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">信不信由你，我们的登陆页面已经准备好了！我们可以添加许多其他类型的表单，但我们只需要一个文本输入和提交按钮。您可以在此备忘单中找到更多信息。</p><p id="640d" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">要运行我们的应用程序，您只需在项目目录中键入以下内容:</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="c019" class="nn mm it nj b gy no np l nq nr">streamlit run main.py</span></pre><p id="23d3" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">如果您得到以下输出，这意味着您的应用程序正在运行。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="e036" class="nn mm it nj b gy no np l nq nr">You can now view your Streamlit app in your browser.</span><span id="51b9" class="nn mm it nj b gy nv np l nq nr">  Local URL: http://localhost:8501<br/>  Network URL: <a class="ae mk" href="http://192.168.1.7:8501" rel="noopener ugc nofollow" target="_blank">http://192.168.1.7:8501</a></span></pre><p id="2325" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">要访问该应用程序，请前往<strong class="lq jd"/><a class="ae mk" href="http://localhost:8501/" rel="noopener ugc nofollow" target="_blank"><strong class="lq jd">http://localhost:8501</strong></a></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/edf8db01f475ad2bc4620a6a6a00140d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Qlxp_kKK5LQIww6k.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</figcaption></figure><p id="eb95" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">很酷，对吧？</p><h1 id="25a6" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">输出</h1><p id="c629" class="pw-post-body-paragraph lo lp it lq b lr nd kd lt lu ne kg lw lx nf lz ma mb ng md me mf nh mh mi mj im bi translated">要继续，我们只需确定提交按钮是否被按下。这可以通过使用if语句来完成，然后我们将在其中添加输出代码。</p><p id="f70d" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">Streamlit允许您添加许多<a class="ae mk" href="https://share.streamlit.io/daniellewisdl/streamlit-cheat-sheet/app.py" rel="noopener ugc nofollow" target="_blank">不同类型的输出</a>，但我们将仅使用以下内容:</p><ul class=""><li id="ab03" class="nw nx it lq b lr ls lu lv lx ny mb nz mf oa mj ob oc od oe bi translated">文本:st.write('文本')</li><li id="a785" class="nw nx it lq b lr of lu og lx oh mb oi mf oj mj ob oc od oe bi translated">标题:st.title('文本')</li><li id="b33f" class="nw nx it lq b lr of lu og lx oh mb oi mf oj mj ob oc od oe bi translated">Header: st.header('Text ')</li><li id="9b11" class="nw nx it lq b lr of lu og lx oh mb oi mf oj mj ob oc od oe bi translated">副标题:st.subheader(“文本”)</li><li id="8a60" class="nw nx it lq b lr of lu og lx oh mb oi mf oj mj ob oc od oe bi translated">数据框架:st.table(数据框架)</li><li id="d89b" class="nw nx it lq b lr of lu og lx oh mb oi mf oj mj ob oc od oe bi translated">Image: st.image('image_path ')</li><li id="7cc1" class="nw nx it lq b lr of lu og lx oh mb oi mf oj mj ob oc od oe bi translated">条形图:条形图表(数据)</li></ul><p id="a07c" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">首先，让我们从<strong class="lq jd"> js['GraphProfileInfo'] </strong>中获取数据，并显示用户的<strong class="lq jd">全名</strong>、<strong class="lq jd">个人简介</strong>、<strong class="lq jd">帖子数量</strong>以及是否为<strong class="lq jd">商业帐户</strong>。然后我们可以从<strong class="lq jd"> profile_pic_url </strong>下载图片并显示用户的个人资料图片。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="f21b" class="nn mm it nj b gy no np l nq nr">if submit_button:<br/> <br/>#before we run the scraping script,<br/>#we are checking if the directory exists so we will not scrape the data<br/>#from a user that we already have the data<br/>#this will help us test the app better because<br/>#the data will load fast and we will not get banned from Instagram<br/>#by scraping too frequently<br/> <br/>    if not os.path.exists(f'{username}'):<br/>        os.system(f'instagram-scraper "{username}" --profile-metadata  --media-metadata  --media-types none')<br/> <br/>    js = json.load(open(f'{username}/{username}.json', encoding='utf-8'))<br/>    df=pd.DataFrame(js['GraphImages'])<br/> <br/> <br/> <br/>#get the profile_pic_url from json<br/>    prof_pic=js['GraphProfileInfo']['info']['profile_pic_url']<br/> <br/> <br/>#download the image in a folder called static I created<br/>    response = requests.get(prof_pic)<br/>    filename="static/image.jpg"<br/>    with open(filename, "wb") as f:<br/>        f.write(response.content)<br/> <br/>#show the full name <br/>    st.write(f"Full Name: {js['GraphProfileInfo']['info']['full_name']}")<br/> <br/> <br/>#we can format the output into as many columns as we want using columns<br/>#and instead of using st. we are using column_name. to show the outputs in the<br/>#selected column. Here we are splitting the outputs into 2 columns<br/>#in col1 one will be the image and in col2 the info.<br/> <br/>    col1, col2 = st.columns(2)<br/>    col1.image(filename)<br/>    col2.write(f"Biography: {js['GraphProfileInfo']['info']['biography']}")<br/>    col2.write(f"Is Business Account: {js['GraphProfileInfo']['info']['is_business_account']}")<br/>    col2.write(f"Number Of Posts: {js['GraphProfileInfo']['info']['posts_count']}")</span></pre><p id="4e6e" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">Streamlit的好处在于，每次更改后，您不必重新运行<strong class="lq jd"> streamlit run main.py </strong>，而是只需在右边的角落按下重新运行即可。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/5ddb60b80143f8e0309c2028f6085e09.png" data-original-src="https://miro.medium.com/v2/resize:fit:602/format:webp/0*jZNKbVEwbrqI9iMd.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</figcaption></figure><p id="399d" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">让我们重新运行应用程序，再次提交用户名。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ol"><img src="../Images/dd53c28d51f0cffb23687afbf88166ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WP_zprdY1SHY6lrH.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</figcaption></figure><p id="703e" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">接下来，我们可以应用一些数据操作技术，从包含帖子信息的数据帧中获取赞、日期、评论和标签。还有，我们可以在col2中加入参与度(<strong class="lq jd">((total _ likes+total _ comments)/posts)/followers</strong>)和每月平均发帖数。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="06b0" class="nn mm it nj b gy no np l nq nr">#number of likes<br/>df['likes']=df['edge_media_preview_like'].apply(lambda x: x['count'])<br/>#number of comments<br/>df['comments']=df['edge_media_to_comment'].apply(lambda x: x['count'])<br/> <br/>#transform the timestamp to datetime object<br/>df['date']=df['taken_at_timestamp'].apply(datetime.fromtimestamp)<br/> <br/>#extract dayofweek, month, week, year, ym <br/>df['dayofweek']=df['date'].dt.dayofweek<br/>df['month']=df['date'].dt.month<br/>df['week']=df['date'].dt.week<br/>df['year']=df['date'].dt.year<br/>df['ym']=df['year'].astype(str)+df['month'].astype(str)<br/> <br/>engagement_rate=(((df['likes'].sum()+df['comments'].sum())/len(df))/js['GraphProfileInfo']['info']['followers_count'])*100<br/> <br/>col2.write(f"Average Posts Per Month: {round(df.groupby('ym').size().mean(),2)}")<br/>col2.write(f"Engagement Rate: {round(engagement_rate,2)}%")</span></pre><p id="5332" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">我们可以在仪表板上添加一些图表，比如每周的文章数量和每月的文章数量。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="1c68" class="nn mm it nj b gy no np l nq nr">x=df.groupby('dayofweek').size()<br/>st.subheader('Number Of Posts Per Week-Day')<br/>st.bar_chart(pd.DataFrame(x).rename(columns={0: 'Number Of Posts'}))<br/> <br/>x=df.groupby('month').size()<br/>st.subheader('Number Of Posts Per Month')<br/>st.bar_chart(pd.DataFrame(x).rename(columns={0: 'Number Of Posts'}))</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi om"><img src="../Images/6b45c85f006a2ed0b3689371cbe02ea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7ORTLERPQyPptEz1.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</figcaption></figure><h1 id="6a4e" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">我的最终应用</h1><p id="741d" class="pw-post-body-paragraph lo lp it lq b lr nd kd lt lu ne kg lw lx nf lz ma mb ng md me mf nh mh mi mj im bi translated">使用我们上面讨论的相同技术，我创建了下面的应用程序。我添加了最频繁和最喜欢的标签和最喜欢的帖子。此外，由于Instagram的限制，当抓取脚本无法工作时，我会添加一条错误消息。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="2fbd" class="nn mm it nj b gy no np l nq nr">import streamlit as st<br/> <br/>import requests<br/>import numpy as np<br/>import pandas as pd<br/>import os<br/>import json<br/>import pandas as pd<br/>import numpy as np<br/>import re<br/>from datetime import datetime<br/>import string<br/> <br/>st.title('Instagram Dashboard')<br/> <br/> <br/>with st.form(key='my_form'):<br/>    username = st.text_input(label='Enter User Name')<br/>    submit_button = st.form_submit_button(label='Submit')<br/>     <br/> <br/>import os<br/> <br/> <br/>if submit_button:<br/>    if not os.path.exists(f'{username}'):<br/>        os.system(f'instagram-scraper "{username}" --profile-metadata  --media-metadata  --media-types none')<br/>    try:<br/>        js = json.load(open(f'{username}/{username}.json', encoding='utf-8'))<br/>         <br/> <br/> <br/>        df=pd.DataFrame(js['GraphImages'])<br/> <br/> <br/>        prof_pic=js['GraphProfileInfo']['info']['profile_pic_url']<br/> <br/>        response = requests.get(prof_pic)<br/>        filename="static/image.jpg"<br/>        with open(filename, "wb") as f:<br/>            f.write(response.content)<br/> <br/>    #data<br/>        df['likes']=df['edge_media_preview_like'].apply(lambda x: x['count'])<br/> <br/>        df['comments']=df['edge_media_to_comment'].apply(lambda x: x['count'])<br/> <br/>        engagement_rate=(((df['likes'].sum()+df['comments'].sum())/len(df))/js['GraphProfileInfo']['info']['followers_count'])*100<br/> <br/>        df['date']=df['taken_at_timestamp'].apply(datetime.fromtimestamp)<br/> <br/>        df['dayofweek']=df['date'].dt.dayofweek<br/>        df['month']=df['date'].dt.month<br/>        df['week']=df['date'].dt.week<br/>        df['year']=df['date'].dt.year<br/>        df['ym']=df['year'].astype(str)+df['month'].astype(str)<br/> <br/>        df['dayofweek']=df['dayofweek'].replace([0,1,2,3,4,5,6],['Mon.', 'Tue.', 'Wed.','Thu.','Fri.','Sat.','Sun.'])<br/> <br/>        col1, col2 = st.columns(2)<br/>        col1.image(filename)<br/>        col2.write(f"Full Name: {js['GraphProfileInfo']['info']['full_name']}")<br/>        col2.write(f"Biography: {js['GraphProfileInfo']['info']['biography']}")<br/>        col2.write(f"Is Business Account: {js['GraphProfileInfo']['info']['is_business_account']}")<br/>        col2.write(f"Number Of Posts: {js['GraphProfileInfo']['info']['posts_count']}")<br/>        col2.write(f"Average Posts Per Month: {round(df.groupby('ym').size().mean(),2)}")<br/>        col2.write(f"Engagement Rate: {round(engagement_rate,2)}%")<br/> <br/> <br/> <br/>        x=df.groupby('dayofweek').size()<br/>        st.subheader('Number Of Posts Per Week-Day')<br/>        st.bar_chart(pd.DataFrame(x).rename(columns={0: 'Number Of Posts'}))<br/> <br/>        x=df.groupby('month').size()<br/>        st.subheader('Number Of Posts Per Month')<br/>        st.bar_chart(pd.DataFrame(x).rename(columns={0: 'Number Of Posts'}))<br/> <br/>        def get_caption(x):<br/>            try:<br/>                return(x['edges'][0]['node']['text'])<br/>            except:<br/>                return('')<br/> <br/>        df['caption']=df['edge_media_to_caption'].apply(get_caption)<br/> <br/>        df['hashtags']=df['caption'].apply(lambda x: re.findall("(#\w+)",x))<br/> <br/> <br/> <br/>        hashtags=df[['hashtags','likes']].explode('hashtags').groupby('hashtags').agg({'likes':['count','mean']})<br/>        hashtags.columns=['count','average_likes']<br/>        most_liked_hashtags=hashtags.query('count&gt;10').sort_values('average_likes',ascending=False)<br/> <br/>        col3, col4 = st.columns(2)<br/>        col3.subheader('Most Frequent Hashtags')<br/>        col3.table(hashtags.sort_values('count',ascending=False)[['count']].head(10))<br/> <br/>        col4.subheader("Most Liked Hashtags")<br/>        col4.table(most_liked_hashtags.sort_values('average_likes',ascending=False)[['average_likes']].head(10))<br/> <br/> <br/>        topurls=list(df.sort_values('likes',ascending=False)['display_url'].head())<br/> <br/>        toplikes=list(df.sort_values('likes',ascending=False)['likes'].head())<br/>        topcomments=list(df.sort_values('likes',ascending=False)['comments'].head())<br/> <br/>        n=1<br/>        for i in topurls:<br/>            response = requests.get(i)<br/>            filename=f"static/{n}.jpeg"<br/>            with open(filename, "wb") as f:<br/>                f.write(response.content)<br/>            n+=1<br/> <br/> <br/>        col5,col6,col7,col8,col9=st.columns(5)<br/>        col5.image("static/1.jpeg")<br/>        col5.write(f"Likes: {toplikes[0]}")<br/>        col5.write(f"Comments: {topcomments[0]}")<br/> <br/>        col6.image("static/2.jpeg")<br/>        col6.write(f"Likes: {toplikes[1]}")<br/>        col6.write(f"Comments: {topcomments[1]}")<br/> <br/>        col7.image("static/3.jpeg")<br/>        col7.write(f"Likes: {toplikes[2]}")<br/>        col7.write(f"Comments: {topcomments[2]}")<br/> <br/>        col8.image("static/4.jpeg")<br/>        col8.write(f"Likes: {toplikes[3]}")<br/>        col8.write(f"Comments: {topcomments[3]}")<br/> <br/>        col9.image("static/5.jpeg")<br/>        col9.write(f"Likes: {toplikes[4]}")<br/>        col9.write(f"Comments: {topcomments[4]}")   <br/>         <br/>    except:<br/>        st.error('Instagram limit is reached.')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi on"><img src="../Images/f0417948f31c54e5822d4dc50ab06d51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LESC2x0CyaS65o1p.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/2043e5ce4bf2d81be614a466518c3cde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*uIe8FDYGaU4aHFLD.gif"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</figcaption></figure><h1 id="925e" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">总结一下</h1><p id="2427" class="pw-post-body-paragraph lo lp it lq b lr nd kd lt lu ne kg lw lx nf lz ma mb ng md me mf nh mh mi mj im bi translated">Streamlit是创建web应用程序的简单而专业的方法。这篇文章的目的是让你发挥你的想象力来创建你自己的强大的应用程序。用它做实验，<a class="ae mk" href="https://predictivehacks.com/feature-importance-in-python/" rel="noopener ugc nofollow" target="_blank">用机器学习</a>，<a class="ae mk" href="https://predictivehacks.com/most-dominant-color-of-an-image/" rel="noopener ugc nofollow" target="_blank">得到帖子图片的主色</a>，<a class="ae mk" href="https://predictivehacks.com/how-to-get-a-sentiment-score-for-words-with-naive-bayes/" rel="noopener ugc nofollow" target="_blank">找到最佳用词</a>等等。</p><p id="88ad" class="pw-post-body-paragraph lo lp it lq b lr ls kd lt lu lv kg lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated"><em class="op">最初发表于</em><a class="ae mk" href="https://predictivehacks.com/how-to-create-an-instagram-profile-analyzer-app-using-python-and-streamlit/" rel="noopener ugc nofollow" target="_blank"><em class="op">https://predictivehacks.com。</em>T11】</a></p></div></div>    
</body>
</html>