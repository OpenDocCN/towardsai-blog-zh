<html>
<head>
<title>Different Ways To Find Outliers in the Data and How To Remove Them Using Interquartile Statistics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">找出数据中异常值的不同方法，以及如何使用四分位间距统计消除异常值</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/how-to-find-outliers-in-the-data-using-interquartile-range-statistics-in-python-266704600964?source=collection_archive---------5-----------------------#2022-10-18">https://pub.towardsai.net/how-to-find-outliers-in-the-data-using-interquartile-range-statistics-in-python-266704600964?source=collection_archive---------5-----------------------#2022-10-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="47e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">离群值是远离其他数据点或与其他数据点非常不同的数据点或观察值。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/f7a15104ad07ad1a49797569ae16a6af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YmewvVPtNXvgDox1sfZBRQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">约书亚·索蒂诺在<a class="ae lb" href="https://unsplash.com/s/photos/data-science?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="bdbb" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">为什么要删除数据中的异常值</h1><p id="9915" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">当我们对数据进行统计时，异常值会导致大量的误算；假设我们有许多异常值的数据，我们取这些数据的平均值，一些数据点比其余的数据点大得多，那么我们的平均值将与实际平均值有很大的不同，例如没有异常值的平均值是5.6。由于离群值，它变成6.1，但这是一个例子。想象一下，当使用不同的统计数据时会得到误算的值，因此检查异常值并尝试删除它们是非常重要的。</p><h1 id="a76b" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">使用箱线图发现数据中的异常值</h1><p id="2c89" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">箱线图是查看数据中大量统计信息的好方法，例如0、25、50、75和100百分位值，也称为五个汇总统计；</p><p id="7092" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">五个汇总统计数据也称为分位数，它们提供数据集的汇总，如数据集的方差、最小值、最大值和中值，还可以帮助我们发现数据中的异常值。</p><p id="e13d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们经常使用平均值来寻找数据的中心，但有时我们的数据集包含如此多的值，这些值与其余的值有很大的不同，这些值也被称为异常值。</p><p id="f9bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设我们有数据2，3，4，6。如果我们找到平均值，它将为我们提供3.75的权重，因此这是一个代表所有数据集的优秀值。尽管如此，如果数据是2，3，4，6，38呢？那么，在这种情况下，平均值在10.6附近。这不是表示数据的好方法，因此在这种类型的数据中，平均值不起作用。我们需要使用中间值。所以让我们看看什么是中位数，中位数如何帮助我们计算另一个四分位数。所以四分位数只是一个值，比如0.25或0.75等。</p><p id="e59c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看看这五个统计数字是什么</p><p id="32b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这五个统计数据是</p><ol class=""><li id="351e" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">0(最小值)</li><li id="cbca" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">0.25(数据前半部分的中值)</li><li id="e9f4" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">0.50(总数据的中位数)</li><li id="0a17" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">0.75(数据后半部分的中值)</li><li id="6847" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">1(最大值)</li></ol><p id="e6e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">三个基本的四分位数是0.25、0.50和0.75，所以让我们讨论一下这些四分位数，以及它如何帮助我们计算数据中的方差。所以有些人可能会想，为什么不用标准差来计算方差呢？我们可以用std来计算，但是这给了我们数据中的方差。我们不想那样。我们只想要第25百分位数据和第75百分位数据之间的方差，因为我们不想在数据中包含异常值。</p><p id="a1d4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你对方差不熟悉，那么方差告诉我们数据集中的值紧密地排列在一起或者彼此相距很远，比如1，2，3，4。这个数据的方差很小，但是在1、3、6和9中，这个数据的方差比前一个数据的方差大。</p><p id="4868" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那么如何计算0.25或25百分位呢？假设我们有之前的数据2，3，4，6，38。中间值4是中间值。然后把数据分成两部分2，3，4和4，6，38。取数据第一部分的中间值。这样我们得到3，所以3是第25个百分位值，取第二部分数据的中间值得到我们6。这个值是第75个百分位数。</p><p id="5264" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">中值代表总数据的中心；第25个百分位数表示数据前半部分的中心，第75个百分位数表示数据后半部分的中心。</p><p id="ede4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还通过简单地从第75个百分点中减去第25个百分点来使用这两个统计量计算四分位间距。这给了我们一个IQR值。如果IQR是一个有意义的值，我们会说方差与IQR成正比。如果IQR值增加，方差也会增加，因此下面的箱线图使用图表显示了我们的汇总统计数据。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mt"><img src="../Images/0e8b88ed200947a84f987d78e47de1d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YLzYYeNySm-jSBkzyg-vVQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">Boxplot |来源:作者图片</figcaption></figure><p id="5b69" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是箱线图的样子。我们可以很容易地发现数据和四分位数值中的异常值，黄色水平线表示中值，其他四分位数值如0.25、0.75、1等。</p><h1 id="c7fd" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">因此，让我们使用四分位数间统计从数据中移除这些异常值。</h1><p id="0934" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">四分位间统计是一种使用第25和第75百分位值来发现数据中异常值的方法，我们已经讨论过了。那么，我们如何找到包含异常值的行呢？</p><p id="9896" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以要提取离群值，我们需要两个值<br/> 1。第25百分位值<br/> 2。第75百分位值</p><p id="3c06" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为什么我们需要这两个值，因为四分位数范围是第25百分位和第75百分位值之间的距离，所以让我们先找出这两个值；我们需要导入Numpy库，它用于在python中做数值工作。</p><pre class="km kn ko kp gt mu mv mw bn mx my bi"><span id="9014" class="mz ld iq mv b be na nb l nc nd"># importing numpy libraries as np<br/>import NumPy as np</span></pre><p id="d519" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在理论上详细讨论了第25和第75个四分位数；让我们看看如何使用NumPy库找到这些值，下面是两个代码。NumPy中有一个方法，叫做quantile()。该方法用于查找四分位数的值，例如，在我们的例子中，我们需要身高列的第25和第75个百分位的值。</p><pre class="km kn ko kp gt mu mv mw bn mx my bi"><span id="f00a" class="mz ld iq mv b be na nb l nc nd"># Finding values of 25th percentile value<br/>Q1 = np.quantile(data['Height'],0.25)<br/># Finding the value of the 75th percentile value<br/>Q3 = np.quantile(data['Height'],0.75)</span></pre><p id="84aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面的语法只是对Height列进行排序，并将第25个百分位值存储在Q1，将第75个百分位值存储在Q3，以找到四分位间统计(IQR)值；我们需要找出Q3和Q1的区别。</p><pre class="km kn ko kp gt mu mv mw bn mx my bi"><span id="5e1e" class="mz ld iq mv b be na nb l nc nd"># Finding the difference between Q3 and Q1<br/>IQR = Q3 - Q1</span></pre><p id="b1c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们计算了(IQR)下一步是计算两个阈值，thresh1和thresh2，使用IQR这些阈值用于发现异常值；任何小于阈值1或大于阈值2的值都被视为异常值。</p><pre class="km kn ko kp gt mu mv mw bn mx my bi"><span id="8eda" class="mz ld iq mv b be na nb l nc nd"># Calculating thresh1 value<br/>thresh1 = Q1 - 1.5*IQR<br/># Calculating thresh2 value<br/>thresh2 = Q3 + 1.5*IQR</span></pre><p id="119f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们得到了阈值1和阈值2的值。下一步是对Height列小于thresh1或大于thresh2的行进行子集划分，就这样</p><pre class="km kn ko kp gt mu mv mw bn mx my bi"><span id="434a" class="mz ld iq mv b be na nb l nc nd"># Extracting the outlier from our data <br/>[( data['Height'] &lt; thresh1 ) | ( data['Height'] &gt; thresh2)]</span></pre><p id="66e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们成功地从数据中提取了异常值。感谢您阅读这篇文章。您也可以在<a class="ae lb" href="https://www.linkedin.com/in/ashbabkhan/" rel="noopener ugc nofollow" target="_blank"> LinkedIn上与我联系。</a></p></div></div>    
</body>
</html>