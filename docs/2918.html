<html>
<head>
<title>A Unique Way Of Visualising Confusion Matrix — Sankey Chart</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">直观混淆矩阵的独特方法——桑基图</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/an-unique-way-of-visualising-confusion-matrix-sankey-chart-de8e4d09b9b?source=collection_archive---------0-----------------------#2022-07-08">https://pub.towardsai.net/an-unique-way-of-visualising-confusion-matrix-sankey-chart-de8e4d09b9b?source=collection_archive---------0-----------------------#2022-07-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5609" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">去桑基减少混乱！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c6be79a7f792407e3183c83f74801ab5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P6TFQzuLjcbDI4_pSrbQMA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="5ecf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">机器学习中的混淆矩阵方便地总结了模型的性能。然而，当与非技术风险承担者交流时，混淆矩阵可能看起来不直观🤔。那么解决办法是什么呢——创建一个桑基图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lu"><img src="../Images/4b13e47f8e64626b5d49a6be2dc00e42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qRj1V0U4z66tseuMQ12fyA.gif"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">表示二元混淆矩阵的桑基图(图片由作者提供</figcaption></figure><p id="065e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上图展示了典型二元混淆矩阵的桑基图。在图表中，</p><ul class=""><li id="1a2c" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt ma mb mc md bi translated">左边的矩形框显示真实的类，而右边的对应框显示预测的类。</li><li id="b0cc" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">绿色表示正确的分类，红色表示错误的分类。</li></ul><h2 id="cc9b" class="mj mk it bd ml mm mn dn mo mp mq dp mr lh ms mt mu ll mv mw mx lp my mz na nb bi translated">故事大纲</h2><ol class=""><li id="1786" class="lv lw it la b lb nc le nd lh ne ll nf lp ng lt nh mb mc md bi translated">简而言之，桑基图是什么？</li><li id="e47e" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt nh mb mc md bi translated"><a class="ae ni" href="#7f52" rel="noopener ugc nofollow">如何从混淆矩阵中创建桑基图？</a></li><li id="4a2f" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt nh mb mc md bi translated"><a class="ae ni" href="#94da" rel="noopener ugc nofollow">奖金🎁</a></li></ol></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h2 id="fb9b" class="mj mk it bd ml mm mn dn mo mp mq dp mr lh ms mt mu ll mv mw mx lp my mz na nb bi translated"><strong class="ak">简而言之，桑基图是什么？</strong></h2><p id="1fca" class="pw-post-body-paragraph ky kz it la b lb nc ju ld le nd jx lg lh nq lj lk ll nr ln lo lp ns lr ls lt im bi translated">桑基图用于显示从源头到汇点的流动或连接。我们用一个简单的例子来了解它的应用。</p><p id="0b5f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">假设我们有一个注册的数据集👨‍🎓👩‍🎓三所大学的数据科学或商业分析课程🏫。在这里，大学可以被视为来源，课程可以被视为汇集。登记的数量表示从源到接收器的<strong class="la iu">连接</strong>。其中一些联系可能比其他联系更重要，例如，从大学A到数据科学的联系比其到业务分析的联系更重要。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/67ee71dee717ecb00ec60176e712c8d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*n14omtc9daUWvEv2zXdOog.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">根据<a class="ae ni" href="https://sankeymatic.com/build/" rel="noopener ugc nofollow" target="_blank">https://sankeymatic.com/build/</a>创建的桑基图</figcaption></figure><p id="fda2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">混淆矩阵的桑基图有以下组成部分:</p><ul class=""><li id="592f" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt ma mb mc md bi translated"><strong class="la iu">来源</strong>:真实类</li><li id="31e0" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated"><strong class="la iu">目标(接收器)</strong>:预测类</li><li id="6c06" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated"><strong class="la iu">连接/流量</strong>:实例数</li></ul><h2 id="7f52" class="mj mk it bd ml mm mn dn mo mp mq dp mr lh ms mt mu ll mv mw mx lp my mz na nb bi translated">如何从混淆矩阵创建桑基图？</h2><p id="c2d3" class="pw-post-body-paragraph ky kz it la b lb nc ju ld le nd jx lg lh nq lj lk ll nr ln lo lp ns lr ls lt im bi translated">我们将按照下图所示的3个步骤来创建桑基图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/226d5c2080e26a7db09969d45006504d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IW_a4jf8oekpdVGGrQY0rw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">从混淆矩阵绘制桑基图的三步方法(图片由作者提供)</figcaption></figure><h2 id="981d" class="mj mk it bd ml mm mn dn mo mp mq dp mr lh ms mt mu ll mv mw mx lp my mz na nb bi translated"><strong class="ak">第一步:获取混淆矩阵</strong></h2><p id="af2a" class="pw-post-body-paragraph ky kz it la b lb nc ju ld le nd jx lg lh nq lj lk ll nr ln lo lp ns lr ls lt im bi translated">在这一步，我们将生成一个混淆矩阵。这可以从<a class="ae ni" href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.confusion_matrix.html" rel="noopener ugc nofollow" target="_blank"> sci-kit学习混淆_矩阵</a>功能中输出。为了简单起见，我们将使用下面的混淆矩阵。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><h2 id="5caf" class="mj mk it bd ml mm mn dn mo mp mq dp mr lh ms mt mu ll mv mw mx lp my mz na nb bi translated"><strong class="ak">步骤2:将混淆矩阵转换为数据帧</strong></h2><p id="015a" class="pw-post-body-paragraph ky kz it la b lb nc ju ld le nd jx lg lh nq lj lk ll nr ln lo lp ns lr ls lt im bi translated">我们将把这一步分成几个小步骤。</p><p id="7be3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">2.1-从混淆矩阵中创建一个数据框架</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="30ca" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> 2.2 —重组数据帧</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="e17f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> 2.3 —添加新列“颜色”</strong></p><p id="1fb2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在我们将添加一个新的“颜色”列来突出预测的真实性。这里的<code class="fe nw nx ny nz b">rgba(211,255,216,0.6)</code>表示<code class="fe nw nx ny nz b">green</code>颜色，它将突出显示<strong class="la iu">正确的预测</strong>。而<strong class="la iu">不正确的预测</strong>将以红色突出显示，即<code class="fe nw nx ny nz b">rgba(245,173,168,0.6)</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="5048" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> 2.4 —将源列和目标列映射到数字索引</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="fd5c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们添加一个新的文本列，当我们将鼠标悬停在图表上时显示。</p><p id="e51f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> 2.5 —添加新列“工具提示”</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="b314" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在我们准备绘制图表。</p><h2 id="fdc4" class="mj mk it bd ml mm mn dn mo mp mq dp mr lh ms mt mu ll mv mw mx lp my mz na nb bi translated">步骤3:创建桑基图表</h2><p id="9d51" class="pw-post-body-paragraph ky kz it la b lb nc ju ld le nd jx lg lh nq lj lk ll nr ln lo lp ns lr ls lt im bi translated">绘图函数<code class="fe nw nx ny nz b">go.Sankey</code>有两个主要参数——节点&amp;链接。节点是类别，即真实类别1、预测类别2等。而链接是真实类和预测类之间的连接/流。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><h2 id="94da" class="mj mk it bd ml mm mn dn mo mp mq dp mr lh ms mt mu ll mv mw mx lp my mz na nb bi translated">奖金</h2><p id="2aec" class="pw-post-body-paragraph ky kz it la b lb nc ju ld le nd jx lg lh nq lj lk ll nr ln lo lp ns lr ls lt im bi translated">感谢您完成所有步骤😀我知道这是一个繁琐的过程，所以为什么不创建一个函数呢？我已经创建了一个方便的函数来绘制任何混淆矩阵(二元和多类)的Sankey图。</p><blockquote class="oa"><p id="c49a" class="ob oc it bd od oe of og oh oi oj lt dk translated">请随意在GitHub 上查看<a class="ae ni" href="https://github.com/hrishi-ds/Medium/tree/main/Visualize-Confusion-Matrix-Using-Sankey-Diagram" rel="noopener ugc nofollow" target="_blank">这款笔记本，了解关于该功能的更多信息！</a></p></blockquote><p id="571b" class="pw-post-body-paragraph ky kz it la b lb ok ju ld le ol jx lg lh om lj lk ll on ln lo lp oo lr ls lt im bi translated"><strong class="la iu">走之前！</strong></p><p id="9f1e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我希望你喜欢这个故事，并发现它很有用。如果你想知道更多类似的故事，请关注我，并请我喝杯咖啡😊。</p><p id="61bf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="op">我的其他故事你可能会喜欢……</em></p><div class="oq or gp gr os ot"><a rel="noopener  ugc nofollow" target="_blank" href="/improve-your-analytical-report-with-conditional-formatting-in-pandas-76039fd3ccb5"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd iu gy z fp oy fr fs oz fu fw is bi translated">如何在Pandas中使用条件格式改进您的分析报告</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">Pandas中使用Styler API的类似Excel的条件格式</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">pub.towardsai.net</p></div></div><div class="pc l"><div class="pd l pe pf pg pc ph ks ot"/></div></div></a></div><div class="oq or gp gr os ot"><a rel="noopener  ugc nofollow" target="_blank" href="/try-these-pandas-display-configurations-in-your-next-analysis-72589648d9a0"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd iu gy z fp oy fr fs oz fu fw is bi translated">在您的下一个分析中尝试这些熊猫显示配置</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">在这些有用的熊猫展示定制后，满怀信心地分享您的分析笔记本</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">pub.towardsai.net</p></div></div><div class="pc l"><div class="pi l pe pf pg pc ph ks ot"/></div></div></a></div></div></div>    
</body>
</html>