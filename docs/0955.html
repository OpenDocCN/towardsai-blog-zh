<html>
<head>
<title>Python DB CRUD operations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python DB CRUD操作</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/python-db-crud-operations-fe1fb5144d58?source=collection_archive---------3-----------------------#2020-09-21">https://pub.towardsai.net/python-db-crud-operations-fe1fb5144d58?source=collection_archive---------3-----------------------#2020-09-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="4fd4" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/programming" rel="noopener ugc nofollow" target="_blank">编程</a></h2><div class=""/><p id="0856" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">本文的目标是了解如何为Oracle DB connectivity编写Python类来执行CRUD操作，包括创建、插入、更新和删除操作。此外，我将触及OOPS <strong class="jy ja">多态操作符重载</strong>的概念。本文中使用的用于Oracle DB连接的Python库是<strong class="jy ja"> cx_Oracle </strong>。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi ku"><img src="../Images/7aef6fccd9c9e05ae7de6021d5148b92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NePjnvnrwdnVBNUwtyT7kA.png"/></div></div></figure><ol class=""><li id="be8a" class="lg lh iq jy b jz ka kd ke kh li kl lj kp lk kt ll lm ln lo bi translated"><strong class="jy ja">创建Oracle表:</strong></li></ol><pre class="kv kw kx ky gt lp lq lr ls aw lt bi"><span id="1789" class="lu lv iq lq b gy lw lx l ly lz">create table emp_t <br/>  (empno number, <br/>   name varchar2(30), <br/>   sal number, <br/>   skill varchar(20));</span></pre><p id="a34d" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated"><strong class="jy ja"> 2。用于DML操作的Python类:</strong></p><p id="f70b" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">创建Python EMP类并定义构造函数__init__()来实例化实例变量，用<strong class="jy ja"> *args </strong>参数给出重载的味道。定义实例方法来执行各种操作。</p><blockquote class="ma mb mc"><p id="c466" class="jw jx md jy b jz ka kb kc kd ke kf kg me ki kj kk mf km kn ko mg kq kr ks kt ij bi translated"><strong class="jy ja"> *args </strong>是非关键字参数，用于向函数传递可变数量的参数。</p></blockquote><pre class="kv kw kx ky gt lp lq lr ls aw lt bi"><span id="d5e3" class="lu lv iq lq b gy lw lx l ly lz">#create class EMP and define a constructor</span><span id="4b7b" class="lu lv iq lq b gy mh lx l ly lz">class Emp:</span><span id="fc44" class="lu lv iq lq b gy mh lx l ly lz">def __init__(self,*args):<br/>      #using *args pass multiple arguments in one command</span><span id="6e69" class="lu lv iq lq b gy mh lx l ly lz">#variable segregation and assignment<br/>      self.user=args[0] &lt;--Instance variable<br/>      self.pswd=args[1]<br/>      self.empid=args[2]<br/>      self.name=args[3]<br/>      self.sal=args[4]<br/>      self.skill=args[5]</span><span id="a01b" class="lu lv iq lq b gy mh lx l ly lz">#Instance method to insert DB records<br/> def emp_insert(self):<br/> <br/> try:<br/> conn=cx_Oracle.connect(self.user+’/’+self.pswd+’<a class="ae mi" href="http://twitter.com/oracle" rel="noopener ugc nofollow" target="_blank">@oracle</a>’)<br/> print(‘Db connection is successful’)<br/> c=conn.cursor()<br/> c.execute(‘insert into emp_t values(:1,:2,:3,:4)’,(self.empid,self.name,self.sal,self.skill))<br/> conn.commit()<br/> <br/> except Exception as e:<br/> print(‘OOPs seems some DB issue Try Again!!!’, e)<br/> finally:<br/> conn.close()</span><span id="077c" class="lu lv iq lq b gy mh lx l ly lz">#Instance method to update DB records</span><span id="680b" class="lu lv iq lq b gy mh lx l ly lz">def emp_sal_update(self):<br/> upd=’update emp_t set sal=:2 where empno=:1'<br/> try:<br/> conn=cx_Oracle.connect(self.user+’/’+self.pswd+’<a class="ae mi" href="http://twitter.com/oracle" rel="noopener ugc nofollow" target="_blank">@oracle</a>’)<br/> print(‘Db connection is successful’)<br/> c=conn.cursor()<br/> c.execute(upd,{‘1’:self.empid,’2':self.sal})<br/> conn.commit()<br/> <br/> except Exception as e:<br/> print(‘OOPs seems some DB issue Try Again!!!’, e)<br/> finally:<br/> conn.close()</span><span id="d515" class="lu lv iq lq b gy mh lx l ly lz">#Instance method to delete DB records</span><span id="9493" class="lu lv iq lq b gy mh lx l ly lz">def emp_del(self):<br/> delete=’delete from emp_t where empno=:1'<br/> try:<br/> conn=cx_Oracle.connect(self.user+’/’+self.pswd+’<a class="ae mi" href="http://twitter.com/oracle" rel="noopener ugc nofollow" target="_blank">@oracle</a>’)<br/> print(‘Db connection is successful’)<br/> c=conn.cursor()<br/> c.execute(delete,{‘1’:self.empid})<br/> conn.commit()<br/> <br/> except Exception as e:<br/> print(‘OOPs seems some DB issue Try Again!!!’, e)<br/> finally:<br/> conn.close()</span></pre><p id="0b6f" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">执行DML操作的Python类被创建，下一步是创建该类的<strong class="jy ja">对象</strong>并调用方法来执行插入、更新或删除数据。</p><p id="8def" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated"><strong class="jy ja"> 3。调用insert()方法:</strong></p><pre class="kv kw kx ky gt lp lq lr ls aw lt bi"><span id="a91b" class="lu lv iq lq b gy lw lx l ly lz">#create object of EMP class and call emp_insert() method</span><span id="3501" class="lu lv iq lq b gy mh lx l ly lz">e1=Emp(‘scott’,’scott’,1234,’vivek’,’3000',’Apache Spark’)<br/>e1.emp_insert()</span></pre><p id="6c07" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">让我们验证插入表中的新数据。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/49a8431f076bdbf8e13735c0e7e29a6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*rWEx8u4phVp_2VVp_SGYbg.png"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">列表数据</figcaption></figure><p id="6275" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated"><strong class="jy ja"> 4。调用update()方法:</strong></p><pre class="kv kw kx ky gt lp lq lr ls aw lt bi"><span id="cd5b" class="lu lv iq lq b gy lw lx l ly lz">#create object of EMP class and emp_sal_update() method</span><span id="6fd5" class="lu lv iq lq b gy mh lx l ly lz">e1_upd=Emp(‘scott’,’scott’,1234,’’,’5000',’’)<br/>e1_upd.emp_sal_update()</span></pre><p id="7811" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">让我们验证更新后的记录:</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi mo"><img src="../Images/fa8e80e881239f8b08b539311a686dfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NbSGv0Z9mlO92EXzAmoaNg.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">更新的数据</figcaption></figure><p id="3c7e" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated"><strong class="jy ja"> 5。调用delete()方法:</strong></p><pre class="kv kw kx ky gt lp lq lr ls aw lt bi"><span id="dbca" class="lu lv iq lq b gy lw lx l ly lz">#create object of EMP class and emp_del() method</span><span id="9127" class="lu lv iq lq b gy mh lx l ly lz">e1_del=Emp(‘scott’,’scott’,1234,’’,’’,’’)<br/>e1_del.emp_del()</span></pre><p id="69d8" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">让我们验证删除是否成功:</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi mp"><img src="../Images/2c649cda0708cb20e93887ed8337627b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3EWwBZoetVIfBdqkbz4VqQ.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">删除的数据</figcaption></figure><h1 id="073c" class="mq lv iq bd mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm bi translated">总结:</h1><p id="879f" class="pw-post-body-paragraph jw jx iq jy b jz nn kb kc kd no kf kg kh np kj kk kl nq kn ko kp nr kr ks kt ij bi translated">Python类创建和方法重载——使用*args</p><p id="9d47" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">使用cx_Oracle的Python-DB连接</p><p id="2c6f" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">调用DML操作的对象创建和实例方法。</p><p id="c0eb" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">感谢所有人阅读我的博客，如果你喜欢我的内容和解释，请在medium上关注我并分享你的反馈，这将永远帮助我们所有人提高我们的知识。</p></div></div>    
</body>
</html>