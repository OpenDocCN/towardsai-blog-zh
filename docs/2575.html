<html>
<head>
<title>Which Apache Spark tool is the best?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Apache Spark工具哪个最好？</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/devops-639e377fffc5?source=collection_archive---------2-----------------------#2022-02-24">https://pub.towardsai.net/devops-639e377fffc5?source=collection_archive---------2-----------------------#2022-02-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="772d" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" rel="noopener ugc nofollow" target="_blank" href="/object-storage-521d5454d2d?source=false---------2">数据工程</a></h2><div class=""/><p id="148a" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">提供使用Apache Spark的不同工具的背景知识</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi kx"><img src="../Images/9fcb2ce5f57a5af779f388261e159ee7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GjqiwuZ5Ig7RZTSV"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated"><a class="ae ln" href="https://unsplash.com/@wflwong?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">王华伦</a>在<a class="ae ln" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="4c8b" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">在您将代码推向舞台以在云中测试它之前，您是在最后一次注视您的代码运行。您会看到一个弹出的错误，显示“连接丢失”“又来了？”你心里想。这还不到我在这些Python作业中需要处理的数据的十分之一。</p><p id="7d4b" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">这种情况对我来说非常熟悉，可能对你也是如此。在今天的文章中，我想讨论Apache Spark —它是什么？我为什么要用它？还有最重要的，我该挑哪个味道的spark平台？</p></div><div class="ab cl lo lp hx lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="im in io ip iq"><p id="c2bb" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">背景</strong></p><p id="452f" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">在我们谈论Spark之前，我需要先谈谈MapReduce框架。</p><p id="a1ad" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">MapReduce是一种编程范式，能够在Hadoop集群中的数百或数千台服务器之间实现巨大的可伸缩性。术语“MapReduce”指的是Hadoop程序执行的两个独立且截然不同的任务。第一个是映射作业，它获取一组数据并将其转换为另一组数据，其中各个元素被分解为元组(键/值对)。reduce作业将映射的输出作为输入，并将这些数据元组组合成一个更小的元组集。尽管这种模式确实大大减少了处理数据集的时间，特别是在Google的PageRank算法和类似的算法中，但是MapReduce的主要限制是它需要在运行每个作业后将整个数据集保存在HDFS中。这个原因激发了Apache Spark的产生。</p><p id="eb02" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">Apache Spark于2009年作为加州大学伯克利分校的一个研究项目启动，并于2010年初开源。Apache Spark并不仅仅使用映射和简化函数，而是拥有一大组称为转换的操作。Apache Spark还会在每次操作之间将数据缓存在内存中，从而加快后面的处理。</p><p id="644b" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">火花的内部工作原理</strong></p><p id="4e3a" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">我们已经介绍了一些关于Spark及其优势的历史。现在让我们来谈谈Apache Spark是如何工作的。下面是一个过于简化的图表，展示了Spark的基础设施。</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/79e1c81559c09891a9cae41e50a994c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/0*KlIi-Yl9aUJC4mih.png"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">design⁴星火建筑</figcaption></figure><p id="8820" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">您有一个与集群管理器对话的SparkContext，集群管理器调度作业。根据您的喜好，集群管理器可以是独立的、Apache Mesos、Hadoop Yarn或Kubernetes。集群管理器将作业分配给工作节点，然后执行。非常类似于现代分布式系统的样子。</p></div><div class="ab cl lo lp hx lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="im in io ip iq"><h1 id="4d32" class="lw lx it bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">设置Spark的方法</h1><p id="0f2e" class="pw-post-body-paragraph jz ka it kb b kc mu ke kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw im bi translated">在您设置这些集群之前，我强烈建议您只设置一个单节点(您的本地笔记本电脑，等等。)使用spark集群并自己完成安装。我知道这是乏味的，但你会看到火花的特点。</p><p id="7867" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">火花独立集群</strong></p><p id="ca11" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">在这种类型的设置中，您将自己设置spark服务器并维护其所有奇妙的复杂性，无论是在云上还是在数据中心。此外，如果您想要使用这种类型的设置，您将不得不投入大量资源来设置这个基础架构和维护这些服务器。</p><p id="9e34" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">设置这个的最好方法是使用<a class="ae ln" href="https://docs.cloudera.com/" rel="noopener ugc nofollow" target="_blank"> Cloudera </a>。他们做了大量的工作，尽可能地使指令简单明了。</p><p id="5ac1" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">云中托管Spark集群(Azure HDInsight、亚马逊Web服务EMR、谷歌云平台Dataproc) </strong></p><p id="49af" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">第二种类型的设置是我所说的中间设置。在这些实例中已经处理了安装和设置，但是这些并不是云不可知的。</p><p id="ccff" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">您可以在设置时添加其他参数或包。</p><p id="8aa6" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">亚马逊网络服务</strong></p><p id="bd6c" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">这是AWS的。我注意到这个服务没有很好地与AWS中的其他服务集成。如果你计划使用任何其他服务作为EMR包的一部分，他们在包升级上落后了。</p><div class="mz na gp gr nb nc"><a href="https://aws.amazon.com/emr/" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd jd gy z fp nh fr fs ni fu fw jc bi translated">大数据平台-亚马逊EMR -亚马逊网络服务</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">Amazon EMR运行大数据应用程序和Pb级数据分析的速度更快，成本不到……</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">aws.amazon.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq lh nc"/></div></div></a></div><p id="1cb4" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">Redshift是AWS的数据仓库，也不容易通过EMR访问；相反，您应该使用Databricks产品，这将在下面讨论。</p><p id="ba46" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">谷歌云平台</strong></p><p id="8a44" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">Dataproc是Google云平台中的托管Spark服务。这是三个服务中与其他服务集成程度最高的一个。</p><div class="mz na gp gr nb nc"><a href="https://cloud.google.com/dataproc" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd jd gy z fp nh fr fs ni fu fw jc bi translated">Dataproc |谷歌云</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">发送反馈了解如何在Google Cloud上的开放式集成数据分析中简化企业分析…</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">cloud.google.com</p></div></div><div class="nl l"><div class="nr l nn no np nl nq lh nc"/></div></div></a></div><p id="753e" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">微软Azure </strong></p><p id="c8e3" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">最后，Azure HDInsight。这是三个中我用得最少的一个。</p><div class="mz na gp gr nb nc"><a href="https://azure.microsoft.com/en-us/services/hdinsight/#overview" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd jd gy z fp nh fr fs ni fu fw jc bi translated">Azure HDInsight - Hadoop、Spark和Kafka |微软Azure</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">Myntra加速其数字化转型Myntra与微软密切合作，将其平台从…</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">azure.microsoft.com</p></div></div><div class="nl l"><div class="ns l nn no np nl nq lh nc"/></div></div></a></div><p id="8e51" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">数据砖块平台</strong></p><p id="48a9" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">这是一整套。说实话，这个平台本身就要求满岗。但是我在本地计算机或虚拟机上使用spark的大部分经验表明，使用Databricks是非凡的，值得付出额外的成本。我是做一站式的，所以什么都做。Databricks允许我在这个平台上做任何事情。当然，当时也有一些小问题，比如git集成和安全性。幸运的是，他们现在增加了增量共享和更紧密的git集成。这是他们最令人钦佩的特点之一——他们如何与其他开源项目紧密集成，并将这些新功能快速实现到他们的代码库中。</p><p id="efa8" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">老实说，出于这些原因，我肯定会选择Databricks及其价格标签，而不是任何其他选择。</p></div><div class="ab cl lo lp hx lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="im in io ip iq"><p id="8974" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">在这里，我写了一个Apache Spark生态系统的快速概述和一些利用这种设置的工具。</p><pre class="ky kz la lb gt nt nu nv nw aw nx bi"><span id="0877" class="ny lx it nu b gy nz oa l ob oc"><strong class="nu jd">Resources<br/>1. </strong><a class="ae ln" href="https://spark.apache.org/history.html" rel="noopener ugc nofollow" target="_blank">https://spark.apache.org/history.html</a><br/>2. <a class="ae ln" href="https://www.ibm.com/topics/mapreduce" rel="noopener ugc nofollow" target="_blank">https://www.ibm.com/topics/mapreduce</a><br/>3. <a class="ae ln" href="https://patents.google.com/patent/CN103279328A/en" rel="noopener ugc nofollow" target="_blank">https://patents.google.com/patent/CN103279328A/en</a><br/>4. <a class="ae ln" href="https://spark.apache.org/docs/latest/cluster-overview.html" rel="noopener ugc nofollow" target="_blank">https://spark.apache.org/docs/latest/cluster-overview.html</a></span></pre></div></div>    
</body>
</html>