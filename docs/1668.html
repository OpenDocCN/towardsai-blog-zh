<html>
<head>
<title>A Complete Guide to Confidence Interval, t-test, and z-test in R for Data Scientists</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学家置信区间、t检验和z检验完全指南</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/a-complete-guide-to-confidence-interval-t-test-and-z-test-in-r-for-data-scientists-cd16dd2d0eec?source=collection_archive---------0-----------------------#2021-03-14">https://pub.towardsai.net/a-complete-guide-to-confidence-interval-t-test-and-z-test-in-r-for-data-scientists-cd16dd2d0eec?source=collection_archive---------0-----------------------#2021-03-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/6ec1448a8eefbd873f6c72bd426a6567.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_4pHIbJZ66MOV5Q0"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">莎拉·沃尔夫在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h2 id="8ca8" class="jh ji jj bd b dl jk jl jm jn jo jp dk jq translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/data-science" rel="noopener ugc nofollow" target="_blank">数据科学</a></h2><div class=""/><div class=""><h2 id="6f97" class="pw-subtitle-paragraph kp js jj bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">大量的实践练习</h2></div><p id="928c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">置信区间、t检验和z检验是推断统计中非常流行和广泛使用的方法。它们之所以如此重要，是因为对于任何研究或数据分析，我们只能使用一个样本来得出关于一个大群体的结论。在这种情况下，这些推断统计方法帮助我们考虑误差，并使用较小的样本为较大的总体推断出更好的估计。</p><p id="b4a1" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你可能认为一篇文章涵盖了很多内容。是的，实际上一天要消化的东西很多。但是正如标题中所提到的，本文将集中于使用R来构造置信区间和执行t检验，或z检验。</p><p id="725f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">r有一些非常丰富的库和强大的功能，可以在一行代码中同时给出置信区间、z或t检验统计量、p值。因此，我决定在这篇文章中讨论所有这些问题。</p><p id="c4d8" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">本文将从置信区间和假设检验的基本概念开始，然后我们将通过例子学习每个概念。</p><blockquote class="md me mf"><p id="6053" class="lh li mg lj b lk ll kt lm ln lo kw lp mh lr ls lt mi lv lw lx mj lz ma mb mc im bi translated"><strong class="lj jt">我们将介绍:</strong></p></blockquote><ol class=""><li id="1648" class="mk ml jj lj b lk ll ln lo lq mm lu mn ly mo mc mp mq mr ms bi translated">什么是置信区间和基本的手工计算</li></ol><p id="8d31" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">2.R中一个样本均值的z检验</p><p id="144a" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">3.R中一个样本均值的t检验</p><p id="d191" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">4.R中两个样本均值的比较</p><p id="94e3" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">5.R中样本均值和置信区间的双边检验</p><p id="db24" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">6.R中一个样本比例和置信区间的检验</p><p id="161a" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">7.R中两样本比例和置信区间的检验</p><blockquote class="mt"><p id="e4c5" class="mu mv jj bd mw mx my mz na nb nc mc dk translated">我先说一些基本的理论观点。如果你不完全理解，没关系。稍后，当我们完成例子并使用R时，就很容易了。但是理解理论上的想法很重要。</p></blockquote><p id="b652" class="pw-post-body-paragraph lh li jj lj b lk nd kt lm ln ne kw lp lq nf ls lt lu ng lw lx ly nh ma mb mc im bi translated">先说置信区间。</p><blockquote class="md me mf"><p id="b4c0" class="lh li mg lj b lk ll kt lm ln lo kw lp mh lr ls lt mi lv lw lx mj lz ma mb mc im bi translated"><strong class="lj jt">什么是置信区间？</strong></p></blockquote><p id="9f90" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们用一个例子来理解一下。假设一个购物中心想要估计工作日上午9点到晚上12点的顾客数量。我们正在谈论购物中心在工作日上午9点到晚上12点之间的平均顾客数量。他们将如何解决这个问题？</p><p id="246e" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">他们可以抽取大约100个工作日的样本，然后计算平均值。假设计算出的平均值是42人。<strong class="lj jt">假设总体标准差为15 </strong>。</p><p id="c472" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">根据中心极限定理(CLT)，样本均值应该接近真实总体均值。这里的样本平均值是使用上述100个样本计算的平均值。这可能不是真实的人口平均数。如果我们取1000或10000个样本，这个样本均值可能是不同的。</p><p id="3317" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如何从这个样本均值推断出真实的总体均值？</p><p id="2393" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">实际上，使用样本大小、样本均值和总体标准差推断出一个范围，并假设真实总体均值落在该区间内。这个区间称为置信区间。</p><p id="43c1" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在本例中，n ≥ 30(其中n是数据的数量)，样本均值假设为正态分布，总体均值(我们不知道)和标准差为:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/41709b8ce5c058d6464410ff0f3bdf0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/1*lupzpoahcX2jv_jBJmPqlQ.png"/></div></figure><p id="eaff" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这里，sigma是总体标准差。</p><p id="e2c9" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这个1.5的标准差意味着95%的样本均值将落在总体均值的2个标准差内(记住68–95–99规则)。这也意味着在95%的时间里，总体均值将落在样本均值的1.5倍标准差之内。</p><p id="014b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">置信区间的一般公式如下:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/8ed001d86b17b5d38ed7adc4bbcf788c.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*kLTNzT2Nvjune3sQjy-f0g.png"/></div></figure><p id="ad3d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">估计值是样本平均值(在上面的例子中，可以从100个工作日的样本中获得)</p><p id="1ad4" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">误差范围告诉您原始总体平均值可能与样本平均值相差多远，并使用以下公式计算:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi no"><img src="../Images/d7f5ac3e1896e5effd04a28a44ff8771.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*NEqXC2hXiiv57XrbXktP6w.png"/></div></figure><p id="5e87" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">其中z是临界值。对于每个置信水平，z-critical的值是固定的。下面是最常用的置信度图表:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi np"><img src="../Images/d2313902e657734c8e3dafd6c65ecbaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:314/format:webp/0*5ogyuEAzMbRnC8JH.png"/></div></div></figure><p id="b86f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">因此，置信区间的总公式变为:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/8f562f10470bd3c3007a8041a514bfe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:286/format:webp/1*_e6qOg6ZocVrmRLz9MK_jg.png"/></div></figure><p id="3074" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">回到我们上面的购物中心的例子，95%置信水平的置信区间的上限是:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/16ebb6130e3a36de12709637b2b293b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:370/format:webp/1*wmGTL2trmFt3JX-x1eAPmA.png"/></div></figure><p id="5d0d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">也就是51.3，下限是:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/6472d28fdfe48a085e14649db53b3acb.png" data-original-src="https://miro.medium.com/v2/resize:fit:350/format:webp/1*8MgunB_y4HyrEgxGuZ3Jtw.png"/></div></figure><p id="6751" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">也就是32.7。置信区间为32.7到51.3。这意味着，我们有95%的把握认为，工作日上午9点至晚上12点期间购物中心顾客人数的真实平均值将在32至51人之间。</p><p id="f5a9" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这里我想给出置信区间的一个基本概念。在本文的后面，我们将看到如何在不同的实践例子中使用R函数来获得置信区间。</p><h2 id="b398" class="nt nu jj bd nv nw nx dn ny nz oa dp ob lq oc od oe lu of og oh ly oi oj ok jp bi translated">假设检验</h2><p id="6cb8" class="pw-post-body-paragraph lh li jj lj b lk ol kt lm ln om kw lp lq on ls lt lu oo lw lx ly op ma mb mc im bi translated">假设检验是一个过程，检验或寻找证据的任何索赔有关的人口。</p><p id="513e" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">和以前一样，通过例子来理解它是一个好主意。假设我声称我可以在一个40英尺长的游泳池里连续游10圈。然后你让我给你看。但是我只跑了4圈就累了。有人会相信我的说法吗？</p><p id="39a6" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在假设检验中，我们试图从特定的主张中收集证据。如果一个关于总体的断言比真实值更罕见，我们拒绝这个断言。概率用于确定索赔的罕见程度。让我们通过一个例子来清楚地了解这个过程。</p><blockquote class="md me mf"><p id="ee40" class="lh li mg lj b lk ll kt lm ln lo kw lp mh lr ls lt mi lv lw lx mj lz ma mb mc im bi translated"><strong class="lj jt">例一</strong></p></blockquote><p id="69f4" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">一位学校老师介绍了一种新的阅读方式。现在他想知道他的新方式是否有助于学生取得更好的成绩。要检查世界上是否所有的学生都适应新的阅读方式是不可能的。所以，他决定抽取60名学生作为样本。平均分数上升到6.5分。总体标准差是11。假设我们想以95%的置信度确定新的阅读技巧是否帮助学生提高了分数。</p><p id="526e" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这里我们将遵循一个五步流程来执行假设检验。</p><p id="60c7" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们将首先使用手动过程，然后使用超快速R函数。先来看看手动流程。</p><p id="ca5c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">第一步:</strong></p><p id="0986" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">陈述假设。零假设和备择假设需要在开头声明。在这个例子中，我们可以陈述零假设，因为在使用这些新的阅读技巧后分数没有变化。零假设可以表示为:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/16e1908b0b69b56aebf944151eb1f7d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:298/format:webp/1*qo5A9ZO44B2uRRsFf9SB7w.png"/></div></figure><p id="512f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果我们没有为零假设找到足够的证据，我们将拒绝零假设，并说替代假设是正确的。但是另一个假设是什么呢？在这里，老师想测试他引入的新技术是否有助于提高学生的分数。所以，另一个假设是，均值大于0。</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi or"><img src="../Images/d8c2688dea6119aeff46108a7824b198.png" data-original-src="https://miro.medium.com/v2/resize:fit:302/format:webp/1*7R0G9WieA1rC0Ham8ONweQ.png"/></div></figure><p id="712b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">第二步:</strong></p><p id="916c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">选择适当的测试统计。在本例中，样本量为60，我们知道总体标准差。当样本量大于60并且总体标准差已知时，z统计量是合适的。</p><blockquote class="mt"><p id="60ff" class="mu mv jj bd mw mx my mz na nb nc mc dk translated">请记住，z统计量不同于我们在置信区间中使用的z临界值。</p></blockquote><p id="a4df" class="pw-post-body-paragraph lh li jj lj b lk nd kt lm ln ne kw lp lq nf ls lt lu ng lw lx ly nh ma mb mc im bi translated">与均值相关的检验统计量提供了在零假设下x-bar(样本均值)与mu(总体均值)的距离。z统计的公式如下:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi os"><img src="../Images/a130b3f051f91ecc2073eb3c387fdc78.png" data-original-src="https://miro.medium.com/v2/resize:fit:310/format:webp/1*4aEWpnhGlB-U9EYCDrXUPg.png"/></div></figure><p id="235c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">z遵循均值为0、标准差为1的正态分布。</p><p id="1b4d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">第三步:</strong></p><p id="5787" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">计算z统计量:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/977a81ce0231d6da9023ae3004a45d19.png" data-original-src="https://miro.medium.com/v2/resize:fit:290/format:webp/1*EbuG_0UjMdzeMZjLNjaGVQ.png"/></div></figure><p id="5d9e" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">计算出z统计值为4.58。我们可以根据z统计量计算p值。</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/e2ac72e02d515047d7d8c6e78c571236.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*gSUIHZFeXK9RNk8zNKhH_g.png"/></div></figure><p id="6315" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">从上图可以看出，检验统计量是点，p值是曲线下的面积。这个p值是我们观察到的检验统计的概率，或者是一个更极端的概率，假设零假设为真。</p><p id="8aad" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">由于z统计量遵循标准正态分布，因此您可以使用R很容易地根据z统计量计算p值。如果你需要复习概率分布，请查看这篇文章(尤其是正态分布部分):</p><div class="is it gp gr iu ov"><a rel="noopener  ugc nofollow" target="_blank" href="/a-complete-overview-of-the-probability-distributions-with-examples-r-implementation-511571b71cb0"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd jt gy z fp pa fr fs pb fu fw js bi translated">概率分布的完整概述，包括示例、实现</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">最流行和广泛使用的离散和连续概率分布</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">pub.towardsai.net</p></div></div><div class="pe l"><div class="pf l pg ph pi pe pj ja ov"/></div></div></a></div><p id="af28" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">z统计:</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="11df" class="nt nu jj pl b gy pp pq l pr ps">1-pnorm(4.58)</span></pre><p id="4c14" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">输出:</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="a57f" class="nt nu jj pl b gy pp pq l pr ps">2.32488e-06</span></pre><p id="0760" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">第四步:</strong></p><p id="afe1" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">陈述决策规则</p><p id="0ce5" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">置信水平为95%，因此显著性水平(α)为5%或0.05。如果α值小于p值，我们将拒绝零假设。否则，我们将无法拒绝零假设。</p><p id="09c8" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">第五步:</strong></p><p id="1265" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">得出结论。我们可以看到，p值是2.325e-06，非常小，比alpha值小很多。所以，我们可以说，我们有足够的证据来拒绝零假设。这意味着新的阅读技巧帮助学生提高了分数。</p><blockquote class="md me mf"><p id="e1bb" class="lh li mg lj b lk ll kt lm ln lo kw lp mh lr ls lt mi lv lw lx mj lz ma mb mc im bi translated">使用R</p></blockquote><p id="b7e6" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果您在RStudio中安装了“asbio”软件包，查找z统计数据和p值就非常简单。“asbio”库中有一个名为one.sample.z的函数，该函数获取零假设下的平均值、样本均值(x-bar)、总体标准差、样本大小(n)和替代假设。</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="3cf1" class="nt nu jj pl b gy pp pq l pr ps">one.sample.z(null.mu = 0, xbar = 6.5, sigma = 11, n = 60, alternative = 'greater')</span></pre><p id="388c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">输出:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi pt"><img src="../Images/bc531f901e1d8d491ff813360fcb8b68.png" data-original-src="https://miro.medium.com/v2/resize:fit:550/format:webp/1*1Cr0qR6G75GnekY0gU4NMA.png"/></div></figure><p id="4d7a" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">输出结果如下表所示。看，z统计量和p值和我们之前计算的差不多。</p><blockquote class="md me mf"><p id="7c7e" class="lh li mg lj b lk ll kt lm ln lo kw lp mh lr ls lt mi lv lw lx mj lz ma mb mc im bi translated"><strong class="lj jt">例二</strong></p></blockquote><p id="840f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">一位科学家想测试大白鲨是否平均有20英尺长。他测量了10条大白鲨。样本平均值计算为22.27，样本标准偏差为3.19。他找到了在α=0.05的显著性水平下大白鲨身长超过20英尺的证据了吗？</p><p id="2595" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们将遵循与示例1相同的5步程序。</p><p id="ce5b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">第一步:</strong></p><p id="fe47" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">设置假设和alpha级别:</p><p id="6428" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">无效假设是白鲨的平均长度是20英尺。</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi pu"><img src="../Images/d186b418dfc76a783da4d5c2b033a350.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*yNPKAqPTq9xOClx875Nyog.png"/></div></figure><p id="da7b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果我们找到足够的证据来否定这个无效假设，那么我们就可以说另一个假设是正确的。这种情况下的另一个假设是:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi pv"><img src="../Images/3486b0c9cbd43e381aa3b30cbbbc7439.png" data-original-src="https://miro.medium.com/v2/resize:fit:304/format:webp/1*xRpk84t7bHNfh2VOk_lEAA.png"/></div></figure><p id="ebfa" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这意味着大白鲨的平均长度超过20英尺。</p><p id="c2a4" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如例题所述，alpha等级为0.05。</p><p id="9250" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">第二步:</strong></p><p id="8f5a" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">选择适当的测试统计。</p><p id="5a75" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这个例子中，样本大小只有10，我们有样本标准偏差。我们不知道总体标准差。</p><blockquote class="mt"><p id="ec14" class="mu mv jj bd mw mx my mz na nb nc mc dk translated">如果样本量小于30，并且总体标准差未知，则合适的检验统计量是t统计量。</p></blockquote><p id="6b87" class="pw-post-body-paragraph lh li jj lj b lk nd kt lm ln ne kw lp lq nf ls lt lu ng lw lx ly nh ma mb mc im bi translated">这是t统计量的公式:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi pw"><img src="../Images/2d3df3e1df328cc8f927fe8fc9053c99.png" data-original-src="https://miro.medium.com/v2/resize:fit:354/format:webp/1*JVXONluAb3aDb-hUTaJdkg.png"/></div></figure><p id="c97d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">第三步:</strong></p><p id="314d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">计算检验统计量</p><p id="e1f5" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">虽然我们有上面的公式。但是我更喜欢使用R，它只用一行代码就给出了t统计量和p值。</p><p id="9a3a" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">以下是保存在变量x中的白鲨长度:</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="463d" class="nt nu jj pl b gy pp pq l pr ps">x = c(21.8, 22.7, 17.3, 26.1, 26.4, 21.1, 19.8, 24.1, 18.3, 25.1)</span></pre><p id="847d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">使用R中的t.test函数，我们现在可以计算t统计量和p值:</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="24e1" class="nt nu jj pl b gy pp pq l pr ps">t.test(x, mu = 20, alternative = "greater")</span></pre><p id="77a9" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">输出:</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="d23f" class="nt nu jj pl b gy pp pq l pr ps">One Sample t-test</span><span id="dc3e" class="nt nu jj pl b gy px pq l pr ps">data:  x<br/>t = 2.2523, df = 9, p-value = 0.02541<br/>alternative hypothesis: true mean is greater than 20<br/>95 percent confidence interval:<br/> 20.42247      Inf<br/>sample estimates:<br/>mean of x <br/>    22.27</span></pre><p id="18e8" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这里t统计量是2.2523，p值是0.02541。自由度是n-1。这里n是10(样本量)。所以自由度是9。</p><p id="d2c2" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">第四步:</strong></p><p id="3869" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">陈述决策规则</p><p id="58fc" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果p值小于或等于α(显著性水平)，则拒绝零假设。否则，不要拒绝零假设。</p><p id="4449" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">第五步:</strong></p><p id="813b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">得出结论</p><p id="e077" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在本例中，p值为0.025，小于显著性水平α(0.1)。所以我们有足够的证据拒绝零假设。这意味着大白鲨的平均长度大于20。</p><p id="8b61" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">上面两个例子是关于一个样本均值的。下一个例子是比较两种方法。</p><p id="dae4" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这个演示中，我们将使用Kaggle著名的心脏病数据集。请随意从该链接下载数据集，以便跟进:</p><div class="is it gp gr iu ov"><a href="https://github.com/rashida048/Datasets/blob/master/Heart.csv" rel="noopener  ugc nofollow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd jt gy z fp pa fr fs pb fu fw js bi translated">rashida 048/数据集</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">在GitHub上创建一个帐户，为rashida048/Datasets开发做出贡献。</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">github.com</p></div></div><div class="pe l"><div class="py l pg ph pi pe pj ja ov"/></div></div></a></div><blockquote class="md me mf"><p id="7432" class="lh li mg lj b lk ll kt lm ln lo kw lp mh lr ls lt mi lv lw lx mj lz ma mb mc im bi translated"><strong class="lj jt">例3 </strong></p></blockquote><p id="9fad" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">使用心脏病数据集中的信息，找出男性人群的胆固醇水平是否在0.05的显著性水平上低于女性人群的胆固醇水平。</p><p id="4a11" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">第一步:</strong></p><p id="0756" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">设置假设和阿尔法水平</p><p id="73ba" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">让我们先假设男性和女性的平均胆固醇水平是相同的。无效假设是:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi pz"><img src="../Images/da93090f6858193eac79ed18905c1a10.png" data-original-src="https://miro.medium.com/v2/resize:fit:306/format:webp/1*jLuh3oFlUa1F64a7KzEeCQ.png"/></div></figure><p id="7f7f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这里，mu1是男性人口的平均胆固醇，mu2是女性人口的平均胆固醇。</p><p id="6fa1" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">根据上述问题陈述，替代假设可以设定为男性人口的平均胆固醇低于女性人口的平均胆固醇。</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi qa"><img src="../Images/b0aa0958016bdb832477afdd78882f03.png" data-original-src="https://miro.medium.com/v2/resize:fit:320/format:webp/1*njicK1C09RIt4yl8DVit_g.png"/></div></figure><p id="2b14" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">显著性水平α为0.05。</p><p id="9bbb" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">第二步:</strong></p><p id="fba0" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">选择适当的测试统计</p><p id="2fdb" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在统计学中，使用t统计量来比较两个平均值是非常常见的:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi qb"><img src="../Images/9e9e25e7c24a930986a623a2f071a23d.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*QG3MMrW3mwe6WlhQFnsrhw.png"/></div></figure><p id="0635" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">自由度的公式可能看起来很吓人。但是不用担心，我们会从r中的t.test函数得到t统计量和自由度。</p><p id="3e34" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">第三步:</strong></p><p id="0713" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">计算t统计量和p值。</p><p id="899c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">首先在RStudio中导入心脏数据集。</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="1226" class="nt nu jj pl b gy pp pq l pr ps">h = read.csv('Heart.csv')</span></pre><p id="78c1" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们将数据集保存在变量“h”中。在数据集中,“性别”值1表示男性人口，0表示女性人口。现在，使用t.test函数:</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="139c" class="nt nu jj pl b gy pp pq l pr ps">t.test(h$Chol[h$Sex=='1'], h$Chol[h$Sex=='0'],<br/>       alternative = 'less' , conf.level = 0.95)</span></pre><p id="6e52" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">输出:</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="7932" class="nt nu jj pl b gy pp pq l pr ps">Welch Two Sample t-test</span><span id="f153" class="nt nu jj pl b gy px pq l pr ps">data:  h$Chol[h$Sex == "1"] and h$Chol[h$Sex == "0"]<br/>t = -3.0643, df = 136.37, p-value = 0.001315<br/>alternative hypothesis: true difference in means is less than 0<br/>95 percent confidence interval:<br/>      -Inf -10.17916<br/>sample estimates:<br/>mean of x mean of y <br/> 239.6019  261.7526</span></pre><p id="1d09" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">根据上面的输出，t统计量为-3.0643，p值为0.001315。</p><p id="0bf3" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">用z测试你会得到几乎相似的结果。库“BSDA”有这个函数z.test。下面是如何使用它:</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="a2e5" class="nt nu jj pl b gy pp pq l pr ps">z.test(h$Chol[h$Sex=='1'], h$Chol[h$Sex=='0'], alternative = "less", mu = 0, sigma.x = sd(h$Chol[h$Sex=='1']), sigma.y = sd(h$Chol[h$Sex=='0']), conf.level = 0.95)</span></pre><p id="04e4" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">输出:</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="9e76" class="nt nu jj pl b gy pp pq l pr ps">Two-sample z-Test</span><span id="5e1c" class="nt nu jj pl b gy px pq l pr ps">data:  h$Chol[h$Sex == "1"] and h$Chol[h$Sex == "0"]<br/>z = -3.0643, p-value = 0.001091<br/>alternative hypothesis: true difference in means is less than 0<br/>95 percent confidence interval:<br/>        NA -10.26048<br/>sample estimates:<br/>mean of x mean of y <br/> 239.6019  261.7526</span></pre><p id="e090" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">看，我们得到了和以前一样的检验统计量和非常接近的p值。</p><p id="abc7" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">z.test函数中传递的所有参数都是不言自明的。将mu设置为0可能会有点混乱。它是零，因为我们的零假设是男性和女性的平均胆固醇水平相等。这意味着两个平均值之差为零。在两个平均值比较的情况下，mu参数取平均值的差。</p><p id="285a" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">第四步:</strong></p><p id="d2f6" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">决策规则</p><p id="ff95" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果p值小于α，我们将拒绝零假设，否则，我们将不拒绝零假设。</p><p id="4dbf" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">第五步:</strong></p><p id="1822" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">得出结论</p><p id="9820" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">由于p值小于α水平，我们有足够的证据来拒绝零假设。所以，男性的胆固醇水平低于女性。</p><p id="fa0f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在我的下一个例子中，我不会经历5个步骤，因为这有点重复。本例将展示如何进行双边均值z检验，并使用r计算置信区间。</p><blockquote class="md me mf"><p id="58f5" class="lh li mg lj b lk ll kt lm ln lo kw lp mh lr ls lt mi lv lw lx mj lz ma mb mc im bi translated"><strong class="lj jt">例4 </strong></p></blockquote><p id="32a6" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">使用来自心脏数据集的数据，检查胆固醇水平的总体均值是否为245，并围绕总体的平均胆固醇水平构建一个置信区间。使用0.05的显著性水平。</p><p id="5db5" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">解决方案</strong></p><p id="5960" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">当我们检查胆固醇水平是否为245时，无效假设为:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi qc"><img src="../Images/4a6909de9d48722cb75a960375cf5e92.png" data-original-src="https://miro.medium.com/v2/resize:fit:372/format:webp/1*XplE0noZJ7NUk0h6MZVmtQ.png"/></div></figure><p id="cd4a" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在问题这里，没有提到小于或大于。我们只会检查平均胆固醇水平是否为245。所以，另一个假设应该是:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi qd"><img src="../Images/fa18cb6a1b7546ccf2f674a5627d0f16.png" data-original-src="https://miro.medium.com/v2/resize:fit:348/format:webp/1*wwVqBKXWHsHrYm6hVhdLdw.png"/></div></figure><p id="ff31" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们将使用z检验，如示例3所示。这将在一行简单的代码中为我们提供z统计量、p值和置信区间。</p><p id="b839" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">因为我们在这里不比较两个平均值，所以我们在这里只传递一个数据，第二个数据将被设置为零。“alternative”参数需要设置为“双边”,因为我们在这里不检查大于或小于。平均值可以更大或更小。所以，它是双面的。</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="ba97" class="nt nu jj pl b gy pp pq l pr ps">z.test(h$Chol, NULL, alternative = "two.sided",<br/>       mu = 245, sigma.x = sd(h$Chol), sigma.y = NULL, conf.level = 0.95)</span></pre><p id="e31c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">输出:</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="7950" class="nt nu jj pl b gy pp pq l pr ps">One-sample z-Test</span><span id="3079" class="nt nu jj pl b gy px pq l pr ps">data:  h$Chol<br/>z = 0.56919, p-value = 0.5692<br/>alternative hypothesis: true mean is not equal to 245<br/>95 percent confidence interval:<br/> 240.8631 252.5230<br/>sample estimates:<br/>mean of x <br/> 246.6931</span></pre><p id="c0b9" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">看，p值是0.5692，不小于或等于显著性水平0.05。所以，我们没有足够的证据来拒绝零假设。所以人口的平均胆固醇水平是245。</p><p id="acc2" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">根据上面的输出，置信区间是240.86到252.52。因此，我们有95%的把握认为，原始人群意味着胆固醇水平将在240.86至252.52之间下降。</p><blockquote class="mt"><p id="fca7" class="mu mv jj bd mw mx my mz na nb nc mc dk translated">通常使用z.test或t.test函数来寻找r中的置信区间。但是请记住，如果您使用这些函数来寻找置信区间，则“替代”参数必须始终设置为“双侧”。</p></blockquote><h2 id="9193" class="nt nu jj bd nv nw qe dn ny nz qf dp ob lq qg od oe lu qh og oh ly qi oj ok jp bi translated">比例测试</h2><p id="be35" class="pw-post-body-paragraph lh li jj lj b lk ol kt lm ln om kw lp lq on ls lt lu oo lw lx ly op ma mb mc im bi translated">在前面所有的例子中，我们只讨论了手段的问题。在接下来的两个例子中，我们将研究人口比例。</p><p id="f16c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">比例检验的概念与手段检验没有太大的不同。它测试一个较大群体的人口比例与样本比例的差距。假设我们要测试10岁以下上过游泳课的孩子的比例。我们不能去问世界上所有的孩子，他们是否在不到10岁的时候上过游泳课。因此，我们将抽取100、1000、5000个样本，或者是我们能够承受的数目，并从这些样本中推断出大量人口的信息。</p><blockquote class="mt"><p id="d152" class="mu mv jj bd mw mx my mz na nb nc mc dk translated">只有当样本量足够大时，比例检验才有效。一个常见的经验法则是n*p0和n*(1-p0)都必须大于10，其中p0是感兴趣的人口比例。</p></blockquote><p id="7823" class="pw-post-body-paragraph lh li jj lj b lk nd kt lm ln ne kw lp lq nf ls lt lu ng lw lx ly nh ma mb mc im bi translated">z统计的公式为:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi qj"><img src="../Images/ab190109b7b40da8cf2611558107bdc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*z5zfIw6roGCwgB3Bp1rX_w.png"/></div></figure><p id="9c12" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这个公式中，p-hat是声称的人口比例，p0是在零假设下的人口比例。n是样本量。</p><p id="461e" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">置信区间的等式为:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi qk"><img src="../Images/92f707975970e5cb81736127a54a3fc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/0*JGAgtTVe-fvIKkAw.png"/></div></figure><p id="3820" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">标准误差计算如下:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi ql"><img src="../Images/0142dce74aafc6f0f7ed714c1178a250.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/0*HEmY-6CaEEQu9nwX.png"/></div></figure><p id="afc5" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我想简单地展示所有的公式，但是正如我在开始提到的，这篇文章将集中在r上。</p><blockquote class="md me mf"><p id="0c98" class="lh li mg lj b lk ll kt lm ln lo kw lp mh lr ls lt mi lv lw lx mj lz ma mb mc im bi translated"><strong class="lj jt">例5: </strong></p></blockquote><p id="821f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">当地医疗保健提供商声称，29至77岁的人口中有50%患有某种类型的心脏病。根据这个心脏数据集，大约46%的29至77岁人口患有心脏病。我们决定计算特定年龄组患心脏病人口比例的90%置信区间。此外，测试该特定年龄组患心脏病的人口比例是否为50%。</p><p id="3bae" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">解决方案</strong></p><p id="2e99" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">首先设置假设和alpha级别</p><p id="3222" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">问题陈述里已经提到了置信区间是90%。所以阿尔法值是0.1。</p><p id="57c3" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">无效假设是:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi qm"><img src="../Images/d0f1629c845cb78df28abc7f6e7f448c.png" data-original-src="https://miro.medium.com/v2/resize:fit:336/format:webp/1*XQBRlEgLKDMVIL6Tj7FaWQ.png"/></div></div></figure><p id="c4e7" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">另一个假设是:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi os"><img src="../Images/2f22e67f0d7eb59edb851dbc59247289.png" data-original-src="https://miro.medium.com/v2/resize:fit:310/format:webp/1*Oep2s1mNC3p_II2X97juZQ.png"/></div></figure><p id="fbeb" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们将使用prop.test函数，它将为我们提供检验统计量、p值和置信区间等所有信息。</p><blockquote class="mt"><p id="6dc8" class="mu mv jj bd mw mx my mz na nb nc mc dk translated">供您参考，在数据集中，样本人群的年龄范围是29到77岁。</p></blockquote><p id="067a" class="pw-post-body-paragraph lh li jj lj b lk nd kt lm ln ne kw lp lq nf ls lt lu ng lw lx ly nh ma mb mc im bi translated">要使用prop.test函数，我们需要知道心脏数据集中的数据总数，以及有多少人患有心脏病。</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="9fe4" class="nt nu jj pl b gy pp pq l pr ps">nrow(h)</span></pre><p id="ae44" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">输出</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="c034" class="nt nu jj pl b gy pp pq l pr ps">303</span></pre><p id="eb07" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">所以，我们总共有303个数据。</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="7768" class="nt nu jj pl b gy pp pq l pr ps">nrow(h[h$AHD == 'Yes',])</span></pre><p id="7975" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">输出:</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="10c4" class="nt nu jj pl b gy pp pq l pr ps">139</span></pre><p id="9ac0" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在数据集中，303人中有139人患有心脏病。</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="e275" class="nt nu jj pl b gy pp pq l pr ps">prop.test(139, 303, p=0.50, alternative = "two.sided",<br/>          conf.level = 0.9)</span></pre><p id="4c48" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">输出:</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="6238" class="nt nu jj pl b gy pp pq l pr ps">1-sample proportions test with continuity correction</span><span id="6077" class="nt nu jj pl b gy px pq l pr ps">data:  139 out of 303, null probability 0.5<br/>X-squared = 1.901, df = 1, p-value = 0.168<br/>alternative hypothesis: true p is not equal to 0.5<br/>90 percent confidence interval:<br/> 0.4106097 0.5076377<br/>sample estimates:<br/>        p <br/>0.4587459</span></pre><p id="f715" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">仔细查看输出。这里我们得到了X平方作为检验统计量，实际上是卡方。如果对卡方统计量求平方根，这就是z统计量。p值为0.168，大于alpha值。我们没有足够的证据来否定无效假设。这意味着29岁至77岁年龄段患心脏病的人口比例为50%，显著性水平为0.1。</p><p id="3c00" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">上面的输出显示置信区间是0.41到0.51。</p><p id="d987" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">如果我们想比较两个比例呢？</strong></p><blockquote class="md me mf"><p id="9330" class="lh li mg lj b lk ll kt lm ln lo kw lp mh lr ls lt mi lv lw lx mj lz ma mb mc im bi translated"><strong class="lj jt">例6: </strong></p></blockquote><p id="b3c3" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在同一个数据集中，让我们检查患有心脏病的男性和女性的人口比例在29岁到77岁之间是否相同。假设显著性水平为0.1。</p><p id="3dd7" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">解决方案</strong></p><p id="7f21" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">无效假设是男性和女性患心脏病的比例相同。</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi os"><img src="../Images/fdc981d540a88fe28712d40abf66e802.png" data-original-src="https://miro.medium.com/v2/resize:fit:310/format:webp/1*WEiCZ4bo7_rbJ4wBnkA5oA.png"/></div></div></figure><p id="224b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">另一个假设应该是在特定年龄范围内患心脏病的男性和女性的人口比例不相同:</p><figure class="nj nk nl nm gt iv gh gi paragraph-image"><div class="gh gi qn"><img src="../Images/04f37239d1600c97545792edfe2f16f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:316/format:webp/1*0iK4F1LXlHbALoe5IB_7MQ.png"/></div></figure><p id="4eb1" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们可以使用和之前完全一样的函数。唯一的变化是，我们需要将患有心脏病的男性人数和患有心脏病的女性人数都作为第一个参数传递。在第二个参数中，我们需要使用男性总数和女性总数。</p><p id="df9d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们可以使用R中的一个表函数获得所有信息:</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="9c67" class="nt nu jj pl b gy pp pq l pr ps">table(h$Sex, h$AHD)</span></pre><p id="878d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">输出:</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="a708" class="nt nu jj pl b gy pp pq l pr ps">   No Yes<br/>0  72  25<br/>1  92 114</span></pre><p id="798d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在，我们可以使用prop.test函数:</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="4227" class="nt nu jj pl b gy pp pq l pr ps">prop.test(c(114, 25), c(206, 97), alternative = "two.sided",<br/>          conf.level = 0.9, correct =FALSE)</span></pre><p id="c760" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">输出:</p><pre class="nj nk nl nm gt pk pl pm pn aw po bi"><span id="1aa5" class="nt nu jj pl b gy pp pq l pr ps">2-sample test for equality of proportions without continuity correction</span><span id="e84c" class="nt nu jj pl b gy px pq l pr ps">data:  c(114, 25) out of c(92 + 114, 72 + 25)<br/>X-squared = 23.218, df = 1, p-value = 1.446e-06<br/>alternative hypothesis: two.sided<br/>95 percent confidence interval:<br/> 0.1852803 0.4060519<br/>sample estimates:<br/>   prop 1    prop 2 <br/>0.5533981 0.2577320</span></pre><p id="5b5c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">从输出中可以看出，p值小于alpha值0.1。所以我们有足够的证据拒绝零假设。这意味着男性和女性患心脏病的比例是不同的。</p><p id="1d52" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">置信区间为0.19和0.41。这意味着我们有90%的把握认为男性和女性患心脏病的人口比例差异在0.8到0.4之间。</p><h2 id="2408" class="nt nu jj bd nv nw nx dn ny nz oa dp ob lq oc od oe lu of og oh ly oi oj ok jp bi translated">结论</h2><p id="6228" class="pw-post-body-paragraph lh li jj lj b lk ol kt lm ln om kw lp lq on ls lt lu oo lw lx ly op ma mb mc im bi translated">在这篇文章中，我尝试了使用置信区间、t检验和z检验的不同类型问题的例子。使用R的几个功能来执行所有这些统计推断。在每个例子之后，结果的解释被清楚地讨论。这些不是唯一的测试。还有其他假设检验方法可用。但是我相信这些测试应该对你日常工作中的很多问题有帮助。</p><p id="f880" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">欢迎在推特上关注我，喜欢我的T2脸书页面。</p><h2 id="e407" class="nt nu jj bd nv nw nx dn ny nz oa dp ob lq oc od oe lu of og oh ly oi oj ok jp bi translated">更多阅读:</h2><div class="is it gp gr iu ov"><a href="https://towardsdatascience.com/detail-explanation-of-simple-linear-regression-assessment-and-inference-with-anova-bb12ff4604d3" rel="noopener follow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd jt gy z fp pa fr fs pb fu fw js bi translated">简单线性回归的详细解释，评估，和用ANOVA的推断</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">一步一步的讨论和例子，手动实现和R</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">towardsdatascience.com</p></div></div><div class="pe l"><div class="qo l pg ph pi pe pj ja ov"/></div></div></a></div><div class="is it gp gr iu ov"><a href="https://towardsdatascience.com/do-you-need-a-masters-degree-to-become-a-data-scientist-ab894c2a8d41" rel="noopener follow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd jt gy z fp pa fr fs pb fu fw js bi translated">成为数据科学家需要硕士学位吗？</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">我作为波士顿大学数据分析专业硕士学生的经历和体会</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">towardsdatascience.com</p></div></div><div class="pe l"><div class="qp l pg ph pi pe pj ja ov"/></div></div></a></div><div class="is it gp gr iu ov"><a href="https://towardsdatascience.com/an-ultimate-cheat-sheet-for-data-visualization-in-pandas-f7bc239c9937" rel="noopener follow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd jt gy z fp pa fr fs pb fu fw js bi translated">熊猫数据可视化的终极备忘单</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">熊猫的所有基本视觉类型和一些非常高级的视觉…</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">towardsdatascience.com</p></div></div><div class="pe l"><div class="qq l pg ph pi pe pj ja ov"/></div></div></a></div><div class="is it gp gr iu ov"><a href="https://towardsdatascience.com/a-complete-beginners-guide-to-data-visualization-in-ggplot2-121f1eee23cd" rel="noopener follow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd jt gy z fp pa fr fs pb fu fw js bi translated">ggplot2中数据可视化的完全初学者指南</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">这是一个丰富的图书馆。今天就开始使用吧</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">towardsdatascience.com</p></div></div><div class="pe l"><div class="qr l pg ph pi pe pj ja ov"/></div></div></a></div><div class="is it gp gr iu ov"><a href="https://towardsdatascience.com/an-ultimate-cheatsheet-of-data-visualization-in-seaborn-be8ed13a3697" rel="noopener follow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd jt gy z fp pa fr fs pb fu fw js bi translated">用Python的Seaborn库实现数据可视化的终极指南</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">对学习者来说也是一个很好的资源</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">towardsdatascience.com</p></div></div><div class="pe l"><div class="qs l pg ph pi pe pj ja ov"/></div></div></a></div><div class="is it gp gr iu ov"><a href="https://towardsdatascience.com/a-full-length-machine-learning-course-in-python-for-free-f2732954f35f" rel="noopener follow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd jt gy z fp pa fr fs pb fu fw js bi translated">免费的Python全长机器学习课程</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">吴恩达用Python写的机器学习教程</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">towardsdatascience.com</p></div></div><div class="pe l"><div class="qt l pg ph pi pe pj ja ov"/></div></div></a></div></div></div>    
</body>
</html>