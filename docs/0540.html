<html>
<head>
<title>How To Develop A Game Using Computer Vision</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用计算机视觉开发游戏</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/how-i-developed-a-game-using-computer-vision-18409a39a1f3?source=collection_archive---------1-----------------------#2020-05-31">https://pub.towardsai.net/how-i-developed-a-game-using-computer-vision-18409a39a1f3?source=collection_archive---------1-----------------------#2020-05-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="1244" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">计算机视觉</h2><div class=""/><div class=""><h2 id="0bd9" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">玩赛车游戏使用手跟踪，人工智能</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/2934233d27f03a44eb3f174c05fd340d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*inK55Q7cEUaGlib5Zfds5g.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">使用Canva制作的图片</figcaption></figure><p id="ed70" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果你是一个兴奋的极客，热爱计算机视觉，AI在这里是一个有趣的应用程序。在人工智能中使用CV开发游戏。我使用深度学习库和python游戏开发工具——Pygame开发了一个简单的游戏。让我们来了解如何使用手动跟踪或任何用户定义的对象来控制计算机屏幕上的移动。</p><p id="e066" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">下面是我如何用手控制游戏的短片。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/c76b0a05d65f7d1bbcd9b12babd54660.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*oziHfKR2kO-BRZsTDovUAw.gif"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">作者提供的视频</figcaption></figure><div class="mc md gp gr me mf"><a href="https://drive.google.com/file/d/1tIsIdCmm731XzsasVtaAyDDBmWNHheL3/view?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ja gy z fp mk fr fs ml fu fw iz bi translated">VideoGame1.mp4</h2><div class="mm l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">游戏—集成手势控制</p></div></div><div class="mn l"><div class="mo l mp mq mr mn ms ky mf"/></div></div></a></div><h2 id="21bc" class="mt mu iq bd mv mw mx dn my mz na dp nb ln nc nd ne lr nf ng nh lv ni nj nk iw bi translated">使用Python实现</h2><p id="adcc" class="pw-post-body-paragraph le lf iq lg b lh nl ka lj lk nm kd lm ln nn lp lq lr no lt lu lv np lx ly lz ij bi translated">让我们开始使用OpenCV和Numpy逐步实现算法。首先，我们建立一个模型，并在其中定义我们想要控制的对象的颜色范围。下面的代码是用来识别一个红色的物体，你可以通过改变亮度值来识别任何想要的颜色。要检测红色，您可以使用下面的HSV颜色阈值脚本。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/1dffb9916f0c6cdd9e59f8bfa98b2407.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*nA-xWvzuayEcxqb2KsRirQ.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">输入图像(使用Canva制作)</figcaption></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">检测帧中的红色对象</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/292d88472b0275f7da57813fbb03f006.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*Xv3hnA_U5R9gM7twk0S50Q.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">检测到红色的结果(作者提供照片)</figcaption></figure><p id="903b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><em class="ma">我们可以通过多次应用不同范围的遮罩，并使用从我们想要找到的对象中采样的不同模型来获得更好的结果。也可以实现多重反投影版本(直方图反投影)。如果你想从头开始写代码，你可以使用CNN图书馆Deepgaze。</em></p><h2 id="388a" class="mt mu iq bd mv mw mx dn my mz na dp nb ln nc nd ne lr nf ng nh lv ni nj nk iw bi translated">检测多个轮廓</h2><p id="aa6a" class="pw-post-body-paragraph le lf iq lg b lh nl ka lj lk nm kd lm ln nn lp lq lr no lt lu lv np lx ly lz ij bi translated">我们都知道，视频不过是一系列快速显示的图像(帧)。这个游戏反复使用同一个画面(背景中的道路)。我们试图在每一帧上找到想要的物体(这里是人)的轮廓，一旦确定了表演动作(如果需要)，我们就继续下一帧。如果没有找到，这个人很可能已经死了。</p><p id="2328" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">下面的代码将返回轮廓的数量。由于我们一个接一个地运行框架(滑动窗口),如果框架中没有轮廓，我们不想将框架处理到下一步。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">寻找等高线的数量</figcaption></figure><h2 id="61a0" class="mt mu iq bd mv mw mx dn my mz na dp nb ln nc nd ne lr nf ng nh lv ni nj nk iw bi translated">检测具有最大面积的轮廓</h2><p id="38ef" class="pw-post-body-paragraph le lf iq lg b lh nl ka lj lk nm kd lm ln nn lp lq lr no lt lu lv np lx ly lz ij bi translated">在识别每一帧中的对象后，将选择在图像阵列中占据最大部分的轮廓，以避免面积较小的轮廓，可能是噪声<em class="ma">(你可以看到在上面的汽车图像中，不需要的部分也被视为白色部分，但我们不希望我们的模型误解它并对结果产生负面影响)。</em></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">检测具有最大面积的轮廓</figcaption></figure><p id="1409" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">一旦我们得到了具有最大面积的轮廓，我们就给它指定一个参考点——我们称之为节点。该节点有助于跟踪该轮廓，因此无论何时对象移动，该节点都会随之移动。我认为矩形的中心是一个节点。您可以根据您的应用选择任意数量的节点。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">得到节点</figcaption></figure><p id="3e4b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们现在的主要目标是获得节点的像素值(x，y)。可以优选任何方法来进行该步骤。例如，您可以使用一个分类器来检测人脸，并在模型检测到帧中的人脸时控制操作。在这种情况下，节点将位于检测到的面部的中心区域。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/22f407733ea7433fe7a8f0187780fe1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*e4G-NiuimNButvEx3tUQWA.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">绿点是我们的节点(作者照片)</figcaption></figure><h2 id="bc30" class="mt mu iq bd mv mw mx dn my mz na dp nb ln nc nd ne lr nf ng nh lv ni nj nk iw bi translated">游戏</h2><p id="c36d" class="pw-post-body-paragraph le lf iq lg b lh nl ka lj lk nm kd lm ln nn lp lq lr no lt lu lv np lx ly lz ij bi translated">现在我们有了节点，我们需要写一个算法来移动游戏中的玩家。在我的例子中，当检测到我的肤色/红色物体时，我希望播放器左右移动。为了控制键盘动作，我们在python中有一个工具——Pynput。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">要执行的键盘操作</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/02fd4d311ba45b6f0feacd5df2eea201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*2iWIvxJHjRLg9ytT6-SA6Q.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">检测到的对象与阈值线进行比较(作者提供照片)</figcaption></figure><p id="6bf6" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">两条红线之间的区域L1(左)、L2(右)代表关键区域。</p><ul class=""><li id="85ef" class="nt nu iq lg b lh li lk ll ln nv lr nw lv nx lz ny nz oa ob bi translated">当节点位于L1线左侧的区域时，键盘向左动作被触发，通知应用程序用户想要将<strong class="lg ja">播放器</strong>移动到左侧。</li><li id="8bbf" class="nt nu iq lg b lh oc lk od ln oe lr of lv og lz ny nz oa ob bi translated">类似地，当节点位于L2线右侧的区域时，玩家将向右移动。</li><li id="80b9" class="nt nu iq lg b lh oc lk od ln oe lr of lv og lz ny nz oa ob bi translated">如果节点位于L1和L2之间，即在偏移区域(偏移= L2-L1)，将不执行任何操作。<br/>盔甲！</li></ul><blockquote class="oh oi oj"><p id="c8dd" class="le lf ma lg b lh li ka lj lk ll kd lm ok lo lp lq ol ls lt lu om lw lx ly lz ij bi translated">再次为我的游戏这些约束，你可以执行任何你自己的行动。</p></blockquote><p id="5a88" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这就是我们要做的！游戏准备好了，我们已经完成了设置<em class="ma">手势控制应用程序</em>所需的每个步骤，该程序负责处理游戏中的<strong class="lg ja">玩家</strong>。我们可以将这个模型集成到任何其他应用程序中，比如控制我们的笔记本电脑屏幕、游戏开发等。我用过Deepgaze，一个CNN的人机交互库。</p><p id="6a90" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">完整代码可以在GitHub上找到，从这里<a class="ae on" href="https://github.com/developers-cosmos/COVID-Race-Game" rel="noopener ugc nofollow" target="_blank"><strong class="lg ja"/></a>。下载代码并运行下面的命令。我已经包括了设置游戏和如何玩游戏的清晰说明。</p><pre class="kp kq kr ks gt oo op oq or aw os bi"><span id="98fe" class="mt mu iq op b gy ot ou l ov ow">pip install -r requirements.txt<br/>python "Race Game.py"</span></pre><blockquote class="oh oi oj"><p id="1792" class="le lf ma lg b lh li ka lj lk ll kd lm ok lo lp lq ol ls lt lu om lw lx ly lz ij bi translated">你可以在这里查看游戏的短片。</p></blockquote><div class="mc md gp gr me mf"><a href="https://drive.google.com/file/d/12Ho6bXNPRIipf2Y_74sIV3LeYQje-g5v/view?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ja gy z fp mk fr fs ml fu fw iz bi translated">VideoGame.mp4</h2><div class="ox l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">Pygame</h3></div></div><div class="mn l"><div class="oy l mp mq mr mn ms ky mf"/></div></div></a></div><div class="mc md gp gr me mf"><a href="https://drive.google.com/file/d/1tIsIdCmm731XzsasVtaAyDDBmWNHheL3/view?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ja gy z fp mk fr fs ml fu fw iz bi translated">VideoGame1.mp4</h2><div class="mm l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">游戏—集成手势控制</p></div></div><div class="mn l"><div class="mo l mp mq mr mn ms ky mf"/></div></div></a></div><blockquote class="oh oi oj"><p id="4b01" class="le lf ma lg b lh li ka lj lk ll kd lm ok lo lp lq ol ls lt lu om lw lx ly lz ij bi translated">要下载手势控制应用的可执行文件，<a class="ae on" href="https://bit.ly/COVID-Race-Game-GestureControlAIapplication" rel="noopener ugc nofollow" target="_blank">点击此处</a>。</p></blockquote><h2 id="71b2" class="mt mu iq bd mv mw mx dn my mz na dp nb ln nc nd ne lr nf ng nh lv ni nj nk iw bi translated">结论</h2><p id="52e3" class="pw-post-body-paragraph le lf iq lg b lh nl ka lj lk nm kd lm ln nn lp lq lr no lt lu lv np lx ly lz ij bi translated">我们学习了如何构建运动跟踪应用程序，以及如何使用Pygame将它与游戏集成。我希望你喜欢这个过程，并且现在明白如何开始开发简单而有趣的游戏。如果你发现有改进的地方，请随时提出修改建议。我很快会再赶上你的。在那之前，呆在家里，注意安全！<br/>如果您想联系，<strong class="lg ja">在</strong> <a class="ae on" href="https://www.linkedin.com/in/ritheesh-baradwaj-yellenki-8a6988173/" rel="noopener ugc nofollow" target="_blank"> <strong class="lg ja"> LinkedIn </strong> </a> <strong class="lg ja">上联系我。</strong></p></div></div>    
</body>
</html>