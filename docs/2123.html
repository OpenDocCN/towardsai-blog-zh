<html>
<head>
<title>Optimization Case Study: Solving the problem and deciding — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">优化案例研究:解决问题和决策—第二部分</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/optimization-case-study-solving-the-problem-and-deciding-part-2-71c05521be06?source=collection_archive---------3-----------------------#2021-08-25">https://pub.towardsai.net/optimization-case-study-solving-the-problem-and-deciding-part-2-71c05521be06?source=collection_archive---------3-----------------------#2021-08-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="647f" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/optimization" rel="noopener ugc nofollow" target="_blank">优化</a></h2><div class=""/><div class=""><h2 id="a4bd" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">如何使用Pulp python库作为优化方法来决定动态定价是否有意义</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/a67b1be9caef2102c5855acd8147ab7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D7Qws5GQotTW_uzLkPrzGg.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">来自<a class="ae lh" href="https://unsplash.com/photos/LPckxbrqE5w?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditShareLink" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="0f21" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="me">这是一个两部分的案例研究，其中</em> <strong class="lk jd"> <em class="me">我们在</em> <a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="/optimization-case-study-defining-the-problem-part-1-3409b4b75183"> <em class="me">第一部分</em></a><em class="me"/><strong class="lk jd"><em class="me">中定义了优化问题</em> </strong> <em class="me">，在第二部分</em>中我们使用Pulp python库作为工具来解决业务问题 </strong> <em class="me">。</em></p><h2 id="3cdb" class="mf mg it bd mh mi mj dn mk ml mm dp mn lr mo mp mq lv mr ms mt lz mu mv mw iz bi translated"><strong class="ak">简介</strong></h2><p id="673e" class="pw-post-body-paragraph li lj it lk b ll mx kd ln lo my kg lq lr mz lt lu lv na lx ly lz nb mb mc md im bi translated">从<a class="ae lh" href="https://medium.com/@anitaokoh/optimization-case-study-defining-the-problem-part-1-3409b4b75183" rel="noopener">之前的文章</a>中，我们能够定义决策变量、目标函数和约束条件。让我们快速复习一下数学。</p><ul class=""><li id="3f25" class="nc nd it lk b ll lm lo lp lr ne lv nf lz ng md nh ni nj nk bi translated"><strong class="lk jd">决策变量</strong></li></ul><pre class="ks kt ku kv gt nl nm nn no aw np bi"><span id="5877" class="mf mg it nm b gy nq nr l ns nt">Our decision variables can be represented as A and S</span><span id="db34" class="mf mg it nm b gy nu nr l ns nt">where <br/>A is the number of Apple phone stock <br/>S is the number of Samsung phone stock</span></pre><ul class=""><li id="39a7" class="nc nd it lk b ll lm lo lp lr ne lv nf lz ng md nh ni nj nk bi translated"><strong class="lk jd">目标函数</strong></li></ul><pre class="ks kt ku kv gt nl nm nn no aw np bi"><span id="42b5" class="mf mg it nm b gy nq nr l ns nt">Z = 788.53A + 425.81S</span><span id="5fc0" class="mf mg it nm b gy nu nr l ns nt">where <br/>Z is the optimal maximum revenue<br/>788.53 and 425.81 are the fixed prices of the brands respectively</span></pre><ul class=""><li id="459d" class="nc nd it lk b ll lm lo lp lr ne lv nf lz ng md nh ni nj nk bi translated"><strong class="lk jd">约束</strong></li></ul><pre class="ks kt ku kv gt nl nm nn no aw np bi"><span id="af8c" class="mf mg it nm b gy nq nr l ns nt">A + S &lt;= <!-- -->694.0</span><span id="e5d0" class="mf mg it nm b gy nu nr l ns nt">where<br/>X is the maximum number of phones we can have available.</span></pre><p id="b85c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">要添加的其他简单约束<strong class="lk jd">有</strong></p><pre class="ks kt ku kv gt nl nm nn no aw np bi"><span id="3d29" class="mf mg it nm b gy nq nr l ns nt">A &gt;= 0<br/>S &gt;= 0</span><span id="afa3" class="mf mg it nm b gy nu nr l ns nt">i.e the number of each brand phones available can’t be negative</span></pre><p id="dfd7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="me">请注意，根据您的业务问题，需要考虑的约束可能不止一个</em></p><p id="aacf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">优化语句通常是这样写的</p><pre class="ks kt ku kv gt nl nm nn no aw np bi"><span id="d8b4" class="mf mg it nm b gy nq nr l ns nt">The Objective is to maximize revenue<br/>Z = 788.53A + 425.81S</span><span id="ee2e" class="mf mg it nm b gy nu nr l ns nt">Subject to:<br/>A &gt;= 0<br/>S &gt;= 0<br/>A + S &lt;= <!-- -->694.0</span></pre><p id="4984" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">知道我们的决策变量本质上是整数而不是连续的也很好，也就是说，一个电话不可能是两半的。<em class="me">(这些信息在应用于python时会很有用)</em></p><h2 id="7653" class="mf mg it bd mh mi mj dn mk ml mm dp mn lr mo mp mq lv mr ms mt lz mu mv mw iz bi translated">一头扎进解决方案</h2><p id="bc1d" class="pw-post-body-paragraph li lj it lk b ll mx kd ln lo my kg lq lr mz lt lu lv na lx ly lz nb mb mc md im bi translated">正如上一篇文章中提到的，我们将使用python来解决这个优化问题，这要归功于一个叫做Pulp的python库。</p><blockquote class="nv nw nx"><p id="b869" class="li lj me lk b ll lm kd ln lo lp kg lq ny ls lt lu nz lw lx ly oa ma mb mc md im bi translated">Pulp是一个用python编写的线性和整数编程问题的建模框架。</p></blockquote><p id="8acb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">对于像我这样懒惰的程序员，我更喜欢<strong class="lk jd">简单易用的</strong>库，使用Pulp解决优化问题非常简单。</p><p id="c2fc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="me">(然而，代码可能会变得复杂。同样，这只会是因为你的优化变量变得复杂)</em></p><p id="cc6e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">纸浆建模过程分为5个步骤</p><ol class=""><li id="0687" class="nc nd it lk b ll lm lo lp lr ne lv nf lz ng md ob ni nj nk bi translated">初始化模型(很明显)</li><li id="4ce5" class="nc nd it lk b ll oc lo od lr oe lv of lz og md ob ni nj nk bi translated">定义决策变量</li><li id="d824" class="nc nd it lk b ll oc lo od lr oe lv of lz og md ob ni nj nk bi translated">定义目标函数</li><li id="75d3" class="nc nd it lk b ll oc lo od lr oe lv of lz og md ob ni nj nk bi translated">定义约束</li><li id="d39c" class="nc nd it lk b ll oc lo od lr oe lv of lz og md ob ni nj nk bi translated">求解模型</li></ol><p id="a821" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">让我们从安装包和导入库</strong>开始</p><pre class="ks kt ku kv gt nl nm nn no aw np bi"><span id="b3e8" class="mf mg it nm b gy nq nr l ns nt">!pip install pulp</span><span id="936a" class="mf mg it nm b gy nu nr l ns nt">from pulp import *</span></pre><p id="640d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="me">关于纸浆的更多信息，这里的</em><a class="ae lh" href="https://www.coin-or.org/PuLP/pulp.html" rel="noopener ugc nofollow" target="_blank"><em class="me"/></a><em class="me">是足够好的文档</em></p><p id="191e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们<strong class="lk jd">通过命名问题来初始化模型</strong>。<em class="me">(这可以是任何名称。良好的做法是描述清楚)</em>然后指定目标:是<strong class="lk jd">最小化</strong>还是<strong class="lk jd">最大化</strong></p><pre class="ks kt ku kv gt nl nm nn no aw np bi"><span id="d99f" class="mf mg it nm b gy nq nr l ns nt">Model = LpProblem(name=’Find the optimal brand smartphone quantity’, sense= LpMaximize)</span></pre><p id="c179" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们通过在库中指定四个主要参数来定义决策变量</p><ul class=""><li id="ff11" class="nc nd it lk b ll lm lo lp lr ne lv nf lz ng md nh ni nj nk bi translated"><code class="fe oh oi oj nm b">name</code> —变量的名称，即苹果或三星<em class="me">(也可以表示为A和S)。</em></li><li id="8092" class="nc nd it lk b ll oc lo od lr oe lv of lz og md nh ni nj nk bi translated"><code class="fe oh oi oj nm b">lowbound</code> / <code class="fe oh oi oj nm b">upbound</code> —即什么是可接受的最低/最高数量的决策变量。在这种情况下，我们可以有零个电话号码，但不能低于。</li><li id="313e" class="nc nd it lk b ll oc lo od lr oe lv of lz og md nh ni nj nk bi translated"><code class="fe oh oi oj nm b">cat</code> —变量类型<em class="me">(整数、二进制或连续)</em>。在这种情况下，它是一个整数变量，因为我们不能卖半部手机。</li></ul><p id="7687" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">注意，<code class="fe oh oi oj nm b">lowbound</code>和<code class="fe oh oi oj nm b">upbound</code>参数的默认值是<code class="fe oh oi oj nm b">None</code>，即如果没有指定，则默认为<code class="fe oh oi oj nm b">None</code>。这同样适用于默认为<code class="fe oh oi oj nm b">continuous</code>的<code class="fe oh oi oj nm b">cat</code>a参数</p><p id="eb43" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在Pulp中，我们这样定义每个决策变量</p><pre class="ks kt ku kv gt nl nm nn no aw np bi"><span id="99d6" class="mf mg it nm b gy nq nr l ns nt">A = LpVariable('Apple', lowBound=0, cat='Integer')</span><span id="dd19" class="mf mg it nm b gy nu nr l ns nt">S = LpVariable('Samsung', lowBound=0, cat='Integer')</span></pre><p id="a033" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">通过使用名为<strong class="lk jd"> model </strong>的初始化模型变量和名为<strong class="lk jd"> A </strong>和<strong class="lk jd"> S. </strong>的决策变量，在模型中定义目标函数相当简单</p><pre class="ks kt ku kv gt nl nm nn no aw np bi"><span id="34cd" class="mf mg it nm b gy nq nr l ns nt">model += average_price_per_brand['apple'] * A + average_price_per_brand['samsung'] * S</span></pre><p id="51a9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="me">注意，我们只是复制了模型</em>中的目标方程</p><p id="ee7c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在模型中定义约束的<strong class="lk jd">也是如此</strong></p><pre class="ks kt ku kv gt nl nm nn no aw np bi"><span id="7a4c" class="mf mg it nm b gy nq nr l ns nt">model += 1* A + 1 * S &lt;= average_inventory_available</span></pre><p id="d750" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最后，我们<strong class="lk jd">求解模型</strong></p><pre class="ks kt ku kv gt nl nm nn no aw np bi"><span id="d44e" class="mf mg it nm b gy nq nr l ns nt">model.solve()</span></pre><p id="9019" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们来看看一天中收入最大化的品牌手机的最佳数量</p><pre class="ks kt ku kv gt nl nm nn no aw np bi"><span id="beaa" class="mf mg it nm b gy nq nr l ns nt">print("Stock {} Apple ".format(A.varValue))</span><span id="77a1" class="mf mg it nm b gy nu nr l ns nt">print("Stock {} Samsung".format(S.varValue))</span><span id="7f09" class="mf mg it nm b gy nu nr l ns nt">&gt;&gt;&gt; Output</span><span id="2d4f" class="mf mg it nm b gy nu nr l ns nt">Stock 694.0 Apple Phones<br/>Stock 0.0 Samsung Phones</span></pre><p id="ba99" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这是整个优化代码的样子</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ok ol l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">由作者创建</figcaption></figure><p id="4080" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用这些数字，让我们来计算我们可以获得的最大收益。</p><pre class="ks kt ku kv gt nl nm nn no aw np bi"><span id="3b6c" class="mf mg it nm b gy nq nr l ns nt">maximum_revenue = average_price_per_brand['apple'] * A.varValue + average_price_per_brand['samsung'] * S.varValue</span><span id="6f2c" class="mf mg it nm b gy nu nr l ns nt">print('$' + str(maximum_revenue))</span><span id="b085" class="mf mg it nm b gy nu nr l ns nt">&gt;&gt;&gt; Output<br/>$547239.82</span></pre><p id="5165" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">根据我们当前的定价策略，通过快速比较新的最大化收入与当前日均收入，我们可以看到，如果我们将每部品牌手机的价格固定在<strong class="lk jd"> 120.69% </strong>之前，我们会赚更多的钱。(<em class="me">参见下面的代码。还要记住，当前的日平均收入是</em> <code class="fe oh oi oj nm b"><em class="me">247963.17)</em></code></p><pre class="ks kt ku kv gt nl nm nn no aw np bi"><span id="fc3d" class="mf mg it nm b gy nq nr l ns nt">print(str(round(((maximum_revenue - current_revenue)/ current_revenue) * 100.0,2)) + '%')</span><span id="4d6d" class="mf mg it nm b gy nu nr l ns nt">&gt;&gt;&gt; Output <br/>120.69%</span></pre><p id="105b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你可以在Github的中找到完整的代码<a class="ae lh" href="https://github.com/anitaokoh/smartphone-quantity-optimization" rel="noopener ugc nofollow" target="_blank"/></p><blockquote class="nv nw nx"><p id="f03e" class="li lj me lk b ll lm kd ln lo lp kg lq ny ls lt lu nz lw lx ly oa ma mb mc md im bi translated">对该公司的建议是转向固定定价策略。</p></blockquote><p id="10a0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> <em class="me">免责声明:这是一个简单的解决方案，因为还可以考虑其他因素，如需求的季节性、每个品牌的手机类型、定价对客户流失或客户行为的影响等。，这会影响定价策略的使用。</em>T3】</strong></p><h2 id="75a0" class="mf mg it bd mh mi mj dn mk ml mm dp mn lr mo mp mq lv mr ms mt lz mu mv mw iz bi translated">让我们以一个常见问题来结束。</h2><ul class=""><li id="c25f" class="nc nd it lk b ll mx lo my lr om lv on lz oo md nh ni nj nk bi translated"><strong class="lk jd">除了python，还有其他解决优化问题的方法吗？</strong> <em class="me">有，有。事实上，不使用库也可以用图形解决上面的简单问题。这取决于问题的复杂程度和你喜欢使用的工具/程序/求解器。为3个基本组成部分(决策变量、目标函数和约束)建立正确的定义是关键。</em></li><li id="288a" class="nc nd it lk b ll oc lo od lr oe lv of lz og md nh ni nj nk bi translated"><strong class="lk jd">优化问题是不是只存在于业务问题中？</strong> <em class="me">绝对不行。也可以识别日常生活中的优化问题。例如，考虑到你有限的资源，决定是否现在就辞职，去追求你梦想中的工作，同时考虑年龄和收入限制，或者决定投资什么样的投资组合。</em> <a class="ae lh" href="https://www.youtube.com/watch?v=7yZ5xxdkTb8" rel="noopener ugc nofollow" target="_blank"> <em class="me">这里的</em> </a> <em class="me">是一个youtube视频，讲述了使用纸浆应用优化程序的其他令人兴奋的方法。</em></li></ul></div></div>    
</body>
</html>