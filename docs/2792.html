<html>
<head>
<title>Manage ML Automation Workflow with DagsHub, GitHub Action, and CML</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用DagsHub、GitHub Action和CML管理ML自动化工作流</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/manage-ml-automation-workflow-with-dagshub-github-action-and-cml-a37fb50d5cb0?source=collection_archive---------1-----------------------#2022-05-27">https://pub.towardsai.net/manage-ml-automation-workflow-with-dagshub-github-action-and-cml-a37fb50d5cb0?source=collection_archive---------1-----------------------#2022-05-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9d70" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">机器学习自动化是数据科学家工作的一部分</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/15ed911beee7f404e67ebfcc4fae2e9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VkhHq-bk_OfQjT9j"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@possessedphotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">附身摄影</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="682c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">机器学习只有在投入生产时才有价值，然而这个过程并没有就此结束。我们的机器学习模型需要不断地被监控和自动控制。在生产中部署和维护机器学习模型的实践是MLOps。</p><p id="c648" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">MLOps的叙述来自旧的IT实践，叫做<a class="ae ky" href="https://en.wikipedia.org/wiki/DevOps" rel="noopener ugc nofollow" target="_blank"> DevOps </a>，那时我们自动维护软件以提供持续的集成和交付。但是，我们把软件改成了MLOps的机器学习模型。</p><p id="c624" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">MLOps可能很难实现，但是已经开发了各种工具来实现我们自动化项目的自动化工作流。在本文中，我想介绍一组开源工具，我们可以用它们来快速实现机器学习生产自动化。</p><p id="43f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们开始吧。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6a86" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">简介</strong></h1><p id="b2c0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在本文中，我们将学习如何构建一个机器学习自动化项目，在这个项目中，我们将使用DagsHub、GitHub Action和CML自动进行模型再训练和实验跟踪。</p><p id="349c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在高级别中，<strong class="lb iu">我们将使用以下工具</strong>:</p><p id="d92e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> DagsHub </strong>作为一门数据科学，我们可以利用这些平台来:</p><ul class=""><li id="aea8" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">存储实验结果，</li><li id="c1dd" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">创建数据管道，</li><li id="77ee" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">存储库镜像，</li></ul><p id="d651" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> GitHub动作</strong>为了在GitHub仓库上自动化工作流开发，</p><p id="b41e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> CML </strong>在每个GitHub Pull请求中自动生成带有指标和图表的报告。</p><p id="a031" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将采取步骤<strong class="lb iu">启动ML项目</strong>包括:</p><ol class=""><li id="1c34" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu nn nf ng nh bi translated">用模型再训练代码和数据集初始化GitHub存储库，</li><li id="961b" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nn nf ng nh bi translated">用DagsHub镜像GitHub存储库使用DagsHub连接并构建DVC管道，</li><li id="0857" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nn nf ng nh bi translated">当推送事件发生时，用GitHub动作设置ML模型再训练工作流，</li><li id="0df6" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nn nf ng nh bi translated">使用CML在Pull请求时设置度量模型再训练输出，并在DagsHub上打开一个Pull请求，</li><li id="5819" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nn nf ng nh bi translated">使用GitHub操作在DagsHub上设置实验跟踪，</li></ol><p id="f536" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我详细解释一下我们在开发ML工作流自动化时使用的工具。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="eab7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">DagsHub连接</h1><p id="1234" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">DagsHub是一个类似于GitHub的网络平台，但是它使用各种开源平台为数据科学家提供价值。</p><p id="7104" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">DagsHub中有许多令人兴奋的特性，对于<strong class="lb iu">建立ML项目和ML自动化</strong>非常有用，其中之一就是<strong class="lb iu"> DagsHub连接。</strong></p><h2 id="f368" class="no md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated">DagsHub连接</h2><p id="ca69" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">什么是DagsHub connect？DagsHub的一个特性是连接DagsHub和GitHub库，在这里平台可以相互镜像。这种连接将确保使用两个平台的ML工作流更加顺畅，包括动作。</p><p id="8deb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Connect不同于Migration，因为它允许您的GitHub存储库与DagsHub存储库相关联。你的GitHub库中的每一个变化都会反映在DagsHub中。让我们试着镜像回购。</p><p id="cd30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们需要选择Connect a Repo选项，我们将获得以下选择。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/d35f5b6efaa69f51222bbf94244e10a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fY7Y9tG337h8Uta_.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="9b7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的连接可能来自GitHub存储库或另一个git远程对象。在这种情况下，我们将使用标准的GitHub连接作为常用连接。</p><p id="84f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在连接我们的存储库之前，我们需要允许DagsHub访问我们的GitHub帐户。我们可以通过选择Add Access to Repository并遵循安装过程来实现。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/50a4c06da1614f8b0a64291aa0e9bb7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/format:webp/0*1OteyvMyNDXQdsp6.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="d66a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">访问完成后，连接表单会显示所有的GitHub存储库，如下图所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/b71ae473255b7e6465b14e01a8604c13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YtRIoQOpxeBj3LcQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="0d5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的表单中，您可以选择想要镜像到DagsHub存储库的GitHub存储库。该列表不仅限于您的公共GitHub库，还可以扩展到您的私有库。让我们选择任何存储库并将其镜像到DagsHub平台。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/6a58d5548120dbabe001fabc3b27114e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lv_fy0S-4sHk9RP0-Nvwmw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="3cf3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您进行存储库迁移，连接的GitHub存储库与您的存储库类似，但有更多的细节。如果你看一下repo的名字，你会意识到有信息表明我们的存储库是GitHub存储库的镜像。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/a64c204cb1fdb946ba3b88237627bdd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1086/format:webp/1*Fq08DCUIAeS_VN9OfOvO6A.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="fae7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的GitHub库中的每一个变化都会在其他库中反映出来。</p><p id="747e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">利用DagsHub connects power的一个例子是实时自动比较文件差异。每当您在GitHub存储库中更改数据或文件时，它都会反映在DagsHub中，我们可以对其进行评估。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/64ab560d3123276b8cf943185ba02f18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ScO_no2t0IumCU1BvPD8cg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="dfd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">利用DagsHub connect的另一个示例包括:</p><ul class=""><li id="aa3a" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">使用GitHub动作和DagsHub实验跟踪来建模部署自动化，</li><li id="dcd9" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">DagsHub DVC存储与GitHub加载数据的操作相关联，</li><li id="d6b5" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">在GitHub操作执行期间在DagsHub中记录输出，并在CML支持下获得相同的输出</li></ul><p id="0265" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，在我们的例子中，我们将通过使用GitHub动作允许ML工作流自动化来进一步连接。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d77f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak"> GitHub动作</strong></h1><p id="a780" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">什么是<a class="ae ky" href="https://docs.github.com/en/actions" rel="noopener ugc nofollow" target="_blank"> GitHub动作</a>？它是GitHub存储库中使用的工具，用于在GitHub环境中自动化、定制和执行软件开发工作流。</p><p id="9295" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">GitHub动作允许用户简化任何重复动作，以在工作流中提供CI/CD。要执行或自动化的事件可以是任何事情，例如:</p><ul class=""><li id="0e5e" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">启动新的推送请求时部署代码</li><li id="e0f4" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">创建新问题时自动发送消息</li><li id="543f" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">推送新的实验代码时，删除旧的实验代码</li></ul><p id="c2bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以上是我们可以定制GitHub动作的一个例子。</p><p id="647c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，我们为什么需要了解GitHub的动作呢？难道不是用于软件开发而不是机器学习模型吗？。</p><p id="0e8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们将讨论实现GitHub动作的工具，但重点是MLOps。工具是CML。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a404" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">currentmodelogic电流型逻辑的</h1><p id="7c67" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><a class="ae ky" href="https://cml.dev/" rel="noopener ugc nofollow" target="_blank"> CML </a>或称连续机器学习，是iterative.ai提供的开源工具，用于在机器学习项目中实现CI/CD。CML提供了支持机器学习自动化开发工作流的能力——例如，模型训练和评估、ML实验比较和监控数据集变化。</p><p id="d034" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CML很容易在GitHub或GitLab上使用，因为它依赖于<a class="ae ky" href="https://docs.github.com/en/actions" rel="noopener ugc nofollow" target="_blank"> GitHub动作</a>来提供ML自动化工作流。让我们试着快速回顾一下如何在我们的工作中使用CML。在下面的教程中，我假设读者知道GitHub存储库是如何工作的。</p><p id="1b37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的例子中，我们将使用来自<a class="og oh ep" href="https://medium.com/u/719c90f475df?source=post_page-----a37fb50d5cb0--------------------------------" rel="noopener" target="_blank"> Vytautas Bielinskas </a>的CML <a class="ae ky" href="https://github.com/vb100/ml-ops-ci" rel="noopener ugc nofollow" target="_blank"> Git示例库</a>。您可以克隆或派生存储库，然后我们就可以开始教程了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/5a1c52800904399c98f5ac4e9ac1c663.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sluYC8_2QU8fEyh2iGhe_w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="db58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了理解CML的概念，我们需要想象我们想要在工作流程中实现什么。</p><p id="f403" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们希望在发起新的推送请求时进行模型训练，并且每次训练模型时模型信息都是可用的。</p><p id="fceb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要为上面的工作流准备模型训练脚本和所有必需的包。在上面的例子中，我们的模型脚本训练存储在<code class="fe oj ok ol om b">model.py</code>文件中，而包需求存储在<code class="fe oj ok ol om b">requirements.txt</code>中。</p><p id="f327" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该模型是一个简单的张量流回归，我们将使用MAE作为我们的度量。我不会深入训练过程，但是请稍后参考<code class="fe oj ok ol om b">model.py</code>文件来检查训练代码。</p><p id="8304" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了开始创建我们的CML工作流，我们需要在存储库中创建一个新文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/8ecdea698fee6056a6a4aff87881d07c.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*bG7gGjZ3bsUXmEXjyvqsZw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="3f7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CML在它们的文件和位置中只取一个特定的名称，所以我们需要确保正确的路径名。我们需要键入类似下图的文件名<code class="fe oj ok ol om b">.github/workflows/cml.yaml</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/9ef1c26f960a163d2447b83ca38f22de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*MdVGxGAl3uoHCWS31UXhUA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="caff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要在新文件中编写与下面代码类似的基本工作流结构。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="ecb9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在上面的代码中用几个步骤定义了ML培训工作流。让我们稍微分析一下代码做了什么。</p><ul class=""><li id="5bd2" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">第1行，我们设置了工作流名称，</li><li id="4369" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">在第2行，我们设置了触发工作流的条件。在这种情况下，我们在[推送]发生时设置它，</li><li id="d84a" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">第5–6行是代码的环境，</li><li id="a6bc" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">第8行，我们使用action/checkout来签出存储库，这样我们的工作流就可以访问它，</li><li id="8908" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">第12行，我们设置了ML工作流，</li><li id="405b" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">第14–15行是我们安装需求和执行模型训练(<code class="fe oj ok ol om b">model.py</code>)的地方，</li><li id="716e" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">第17–23行将度量结果和模型性能发送到拉请求注释，</li><li id="531e" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">第25行，我们发布评论的地方。</li></ul><p id="2022" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们上面的代码中有两个特定的CML命令:</p><ul class=""><li id="a94d" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated"><code class="fe oj ok ol om b">cml-publish</code>(第23行)用于在CML报告中存放图像</li><li id="9e6d" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><code class="fe oj ok ol om b">cml-send-comments</code>(第25行)用于以降价格式发布报告</li></ul><p id="eb17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建新文件时，提交新文件，但要在不同于主文件的分支中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/de45ca8855addea647eaf77236cdce7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*siwj4aUVHNSOOpL7Zy5AMw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="90d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">成功提交新文件后，CML工作流会立即执行，因为我们在推送发生时设置了实验触发器。让我们检查一下Action选项卡，您将在这里找到您的跑步模型的完整摘要。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/5de3ba67e851170751f0e80bab68581d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k-a2ZanmDU84XglVi-8TKA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="654f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于我们设置的注释，它将显示在conversation部分的Pull requests选项卡上。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/9560f7cc8d316708700e58ce566db424.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-gJcjajFFp7Kkx_mS3R9rw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="802e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很有意思吧？GitHub action提供了自动化ML工作流的能力，CML通过给出ML工作流输出的命令来支持GitHub action。</p><p id="310e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要了解GitHub Action和CML的更多信息，请参考以下文档:</p><div class="ou ov gp gr ow ox"><a href="https://cml.dev/doc/usage" rel="noopener  ugc nofollow" target="_blank"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd iu gy z fp pc fr fs pd fu fw is bi translated">使用</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">任何CML项目中的关键文件都是。github/workflows/cml.yaml:上面的例子在pull中生成可视化报告…</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">cml.dev</p></div></div><div class="pg l"><div class="ph l pi pj pk pg pl ks ox"/></div></div></a></div><div class="ou ov gp gr ow ox"><a href="https://github.com/iterative/setup-dvc" rel="noopener  ugc nofollow" target="_blank"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd iu gy z fp pc fr fs pd fu fw is bi translated">GitHub -迭代/设置-dvc: DVC GitHub动作</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">DVC GitHub行动。通过在GitHub上创建一个帐户，为迭代/设置-dvc开发做出贡献。</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">github.com</p></div></div><div class="pg l"><div class="pm l pi pj pk pg pl ks ox"/></div></div></a></div><div class="ou ov gp gr ow ox"><a href="https://github.com/iterative/cml" rel="noopener  ugc nofollow" target="_blank"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd iu gy z fp pc fr fs pd fu fw is bi translated">GitHub -迭代/cml: ♾️ CML -连续机器学习|用于ml的CI/CD</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">什么是CML？持续机器学习(CML)是一个开源的CLI工具，用于实现持续集成和</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">github.com</p></div></div><div class="pg l"><div class="pn l pi pj pk pg pl ks ox"/></div></div></a></div></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7863" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">使用DagsHub进一步增强工作流程</h1><p id="321c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们知道DagsHub Connect将允许存储库镜像，GitHub actions将使我们能够自动化开发自动化工作流，CML支持ML自动化。让我们把所有的工具放在一起。</p><p id="5a5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你读了我以前的文章，你就会知道DagsHub和GitHub很相似。尽管如此，它们提供了许多数据科学家可以使用的功能，例如，实验跟踪和实时日志记录。你可以在我下面的文章中进一步阅读介绍。</p><div class="ou ov gp gr ow ox"><a href="https://towardsdatascience.com/introducing-dagshub-complete-data-science-project-integration-platform-c3bec84e4e7c" rel="noopener follow" target="_blank"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd iu gy z fp pc fr fs pd fu fw is bi translated">DagsHub简介:完整的数据科学项目集成平台</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">一个屋檐下代码、实验、模型和数据集成</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">towardsdatascience.com</p></div></div><div class="pg l"><div class="po l pi pj pk pg pl ks ox"/></div></div></a></div><h2 id="7955" class="no md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated"><strong class="ak"> CML输出拉请求镜像</strong></h2><p id="e5e3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">GitHub和DagsHub连接不仅允许连接存储库，还允许记录两个平台之间的所有动作。让我们看看GitHub和DagsHub之间是如何工作的。</p><p id="bfbc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这个例子，我将使用额外的库来镜像DagsHub。下面是我的GitHub上的存储库。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pp"><img src="../Images/618ee9b8a9b817e305916bcd5bfb4c79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MsuxYQwRz1nlBCbeVv1fjw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="a7b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个存储库中，我设置了一个GitHub动作，用于在push事件发生时对心脏病预测模型进行再训练，并在Pull请求中使用CML绘制度量图输出。</p><p id="5ead" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用DagsHub connect，我会将示例GitHub存储库镜像到我的DagsHub存储库中。此外，我将利用DagsHub的数据管道可视化功能，向我的所有同事通报实验是如何进行的。</p><p id="181b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">DVC管道对我们的工作流很有帮助，尤其是在应用GitHub动作时，因为我们知道哪个文件或工作流想要触发动作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/6a58d5548120dbabe001fabc3b27114e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lv_fy0S-4sHk9RP0-Nvwmw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="ca06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我已经在我的GitHub存储库中触发了GitHub操作，CML输出显示在GitHub Pull请求上。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pq"><img src="../Images/d068caa7924067099cf519352eee4efb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hel7s7E9Qk_MMa8QOFzNdg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="392e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于DagsHub connect，我已经提到过两个平台之间的所有操作都是连接的，包括Pull请求。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pr"><img src="../Images/bd9510a63ac0a0ef0f11d8e75ed8ca6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e9mXqjkH1PyF7YwVw7GUzQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="9e4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，我们需要设置连接设置来链接所有PR注释，以便在pull请求中显示我们的注释。这将允许GitHub PR中的CML输出显示在DagsHub PR上。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/801d65c0ad27be3e2c789143487a8722.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y_EZnOIgNI-cMBysBs9TUA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="8fc0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每当我们触发GitHub动作时，活动输出会在DagsHub Pull请求上被镜像。两个平台之间的所有信息都是可用的，这样，我们可以更好地利用两个平台的功能。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pt"><img src="../Images/ea2d96c3e1c384a09cc77acbc5fc7670.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l2ueJXRkK67wmmNoO0_O6w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="86ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> ML实验跟踪</strong></p><p id="8326" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我举一个用例的例子，用GitHub Action和DagsHub来启发您的活动。</p><p id="9cd8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们前面的例子中，我们已经使用GitHub action在每次push活动发生时启动训练，CML将为pull请求生成一个报告。让我们采取进一步的步骤<strong class="lb iu">,在每次GitHub动作运行时，使用DagsHub存储库</strong>中的MLFlow记录实验。</p><p id="640c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于上面的例子，我们需要修改一些文件。首先，我们必须通过添加额外的MLFlow包来更改requirements.txt文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pu"><img src="../Images/6f306d35c5c9631d0f302fbb70cbf77c.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*lf-BKAd5QaAsWfVIos6bQg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="b4e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们需要导入MLFlow包，并在model.py文件中设置DagsHub凭据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pv"><img src="../Images/e79fc1d0d13c197c8270a2cc1fe2b94f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*KQ0pmcjpGKXyNZiHg6o9cA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="d3da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，在拟合模型之前，我们添加了MLFlow logger跟踪器。因为我们使用TensorFlow来训练我们的模型，所以我们可以使用<code class="fe oj ok ol om b">mlflow.tensorflow.autolog()</code>来获取模型参数信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pw"><img src="../Images/b0f40b0ad433139dc8296f2589557c1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*MSiIQGsOFRd4Fq8KXbl0KQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</figcaption></figure><p id="529d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">GitHub action和MLFlow在DagsHub存储库上的结合将导致每次发生推送事件时实验日志记录的自动化。所有的实验日志都存储在实验选项卡中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi px"><img src="../Images/d4ee43392e9e8134afb76113e3aa15d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LOyOQJ5mLAHjD0rhl4vZDg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="1d85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们更详细地研究结果，我们可以看到在我们的实验和指标中发生了什么。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi py"><img src="../Images/b0bded501eb2d747cda4486c4694bead.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lPWxDBJDHcz_R2PeNHK4YQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bfed" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">结论</strong></h1><p id="5732" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">GitHub Actions是软件开发人员使用的工具，通过在GitHub存储库中提供CI/CD功能来自动化开发工作流。</p><p id="8ef6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用CML(连续机器学习),我们可以为GitHub动作工作流提供ML支持，尤其是工作流输出。</p><p id="f6b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们更进一步，我们可以将GitHub与DagsHub连接起来，使用DagsHub的特性来增强GitHub的操作能力。</p><p id="bb56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">希望有帮助！</p></div></div>    
</body>
</html>