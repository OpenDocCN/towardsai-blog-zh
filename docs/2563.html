<html>
<head>
<title>Sentiment Analysis Without Modeling: TextBlob vs. VADER vs. Flair</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">无建模的情感分析:文本斑点vs. VADER vs .天赋</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/sentiment-analysis-without-modeling-textblob-vs-vader-vs-flair-657b7af855f4?source=collection_archive---------0-----------------------#2022-02-21">https://pub.towardsai.net/sentiment-analysis-without-modeling-textblob-vs-vader-vs-flair-657b7af855f4?source=collection_archive---------0-----------------------#2022-02-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="655b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">情感预测准确度比较</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/694486b327ddadb83985fecbb747a46f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Edi8HCp8QrRaLCL1"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated"><a class="ae le" href="https://unsplash.com/@gbaudusseau?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Guillaume bauduseau</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="4b35" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">情感分析可以在建立或不建立机器学习模型的情况下进行。本文将介绍TextBlob、VADER和用于非模型情感分析的Flair的Python实现。</p><p id="7a01" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">读完这篇文章，你会了解到</p><ul class=""><li id="49a9" class="lf lg it js b jt ju jx jy kb lh kf li kj lj kn lk ll lm ln bi translated">什么是TextBlob？</li><li id="608f" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">什么是VADER？</li><li id="356c" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">什么是天赋？</li><li id="0f88" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">如何使用Python库TextBlob进行情感分析？</li><li id="8a3f" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">如何使用Python库VADER进行情感分析？</li><li id="0227" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">如何使用Flair在Python中预先训练好的模型进行情感分析？</li><li id="e107" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">文本斑点与VADER和天赋的比较。</li></ul><p id="1f15" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">本帖资源:</strong></p><ul class=""><li id="f480" class="lf lg it js b jt ju jx jy kb lh kf li kj lj kn lk ll lm ln bi translated"><a class="ae le" href="https://www.youtube.com/watch?v=NNe2OrRnhRc&amp;list=PLVppujud2yJpx5r8GFeJ81fyek8dEDMX-&amp;index=3" rel="noopener ugc nofollow" target="_blank"> YouTube上的视频教程</a></li><li id="9090" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">Python代码在帖子最后。点击<a class="ae le" href="https://mailchi.mp/a5a7c93dcb89/ikn9jq0hm8" rel="noopener ugc nofollow" target="_blank">此处</a>获取笔记本。</li><li id="99ca" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">关于<a class="ae le" href="https://www.youtube.com/playlist?list=PLVppujud2yJpx5r8GFeJ81fyek8dEDMX-" rel="noopener ugc nofollow" target="_blank"> NLP </a>的更多视频教程</li><li id="bfa0" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">在<a class="ae le" href="https://medium.com/@AmyGrabNGoInfo/list/nlp-49340193610f" rel="noopener"> NLP </a>上的更多博文</li></ul><p id="5f4f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们开始吧！</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="5809" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">步骤1:安装并导入Python库</h1><p id="5087" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">第一步是安装和导入Python库。我们需要为VADER安装<code class="fe nd ne nf ng b">vaderSentiment</code>包，为flair安装<code class="fe nd ne nf ng b">flair</code>包。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="a6ee" class="nl mb it ng b gy nm nn l no np"># Install vaderSentiment package for VADER<br/>pip install vaderSentiment</span><span id="2ddc" class="nl mb it ng b gy nq nn l no np"># Install flair<br/>pip install flair</span></pre><p id="487f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">安装完包之后，让我们导入Python库。我们需要导入<code class="fe nd ne nf ng b">pandas</code>和<code class="fe nd ne nf ng b">numpy</code>进行数据处理。</p><p id="5d41" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了进行情感分析，我们需要从<code class="fe nd ne nf ng b">vaderSentiment</code>导入<code class="fe nd ne nf ng b">TextBlob</code>，从<code class="fe nd ne nf ng b">flair</code>导入<code class="fe nd ne nf ng b">SentimentIntensityAnalyzer</code>，从<code class="fe nd ne nf ng b">TextClassifier</code>。我们还需要从<code class="fe nd ne nf ng b">TextClassifier</code>加载英语情感数据，并导入<code class="fe nd ne nf ng b">Sentence</code>用于flair预训练模型的文本处理。</p><p id="cd59" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了检查情感预测的准确性，我们需要从<code class="fe nd ne nf ng b">sklearn</code>导入<code class="fe nd ne nf ng b">accuracy_score</code>。</p><p id="11ce" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后但同样重要的是，我们将<code class="fe nd ne nf ng b">pandas</code>数据框的列宽设置为1000，这将允许我们从评论中看到更多的内容。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="3a6f" class="nl mb it ng b gy nm nn l no np"># Data processing<br/>import pandas as pd<br/>import numpy as np</span><span id="b6a3" class="nl mb it ng b gy nq nn l no np"># Import TextBlob<br/>from textblob import TextBlob</span><span id="5896" class="nl mb it ng b gy nq nn l no np"># Import VADER sentiment<br/>from vaderSentiment.vaderSentiment import SentimentIntensityAnalyzer</span><span id="b557" class="nl mb it ng b gy nq nn l no np"># Import flair pre-trained sentiment model<br/>from flair.models import TextClassifier<br/>classifier = TextClassifier.load<strong class="ng iu">(</strong>'en-sentiment'<strong class="ng iu">)</strong></span><span id="53e0" class="nl mb it ng b gy nq nn l no np"># Import flair Sentence to process input text<br/>from flair.data import Sentence</span><span id="86d2" class="nl mb it ng b gy nq nn l no np"># Import accuracy_score to check performance<br/>from sklearn.metrics import accuracy_score</span><span id="ae3c" class="nl mb it ng b gy nq nn l no np"># Set a wider colwith<br/>pd.set_option<strong class="ng iu">(</strong>'display.max_colwidth', 1000<strong class="ng iu">)</strong></span></pre><h1 id="d5ea" class="ma mb it bd mc md nr mf mg mh ns mj mk ml nt mn mo mp nu mr ms mt nv mv mw mx bi translated">第二步:下载并读入数据</h1><p id="980d" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">第二步是下载和读取数据集。</p><p id="8512" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">imdb.com、Amazon.com和yelp.com三个网站的评论数据都在UCI机器学习知识库中。在本教程中，我们将使用来自Amazon.com的综述数据。请按照这些步骤下载数据。</p><ol class=""><li id="87a5" class="lf lg it js b jt ju jx jy kb lh kf li kj lj kn nw ll lm ln bi translated">转到:<a class="ae le" href="https://archive.ics.uci.edu/ml/datasets/Sentiment+Labelled+Sentences" rel="noopener ugc nofollow" target="_blank">https://archive . ics . UCI . edu/ml/datasets/情操+标签+句子</a></li><li id="b06e" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn nw ll lm ln bi translated">点击“数据文件夹”</li><li id="195e" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn nw ll lm ln bi translated">下载“情绪标签句子. zip”</li><li id="3f00" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn nw ll lm ln bi translated">解压“情绪标签句子. zip”</li><li id="0956" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn nw ll lm ln bi translated">将文件“amazon_cells_labelled.txt”复制到项目文件夹中</li></ol><p id="302f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">那些使用Google Colab进行分析的人需要安装Google Drive来读取数据集。如果你没有使用Google Colab，你可以忽略下面的代码。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="93c1" class="nl mb it ng b gy nm nn l no np"># Mount Google Drive<br/>from google.colab import drive<br/>drive.mount<strong class="ng iu">(</strong>'/content/drive'<strong class="ng iu">)</strong></span><span id="6383" class="nl mb it ng b gy nq nn l no np"># Change directory<br/>import os<br/>os.chdir<strong class="ng iu">(</strong>"drive/My Drive/contents/sentiment_analysis"<strong class="ng iu">)</strong></span><span id="f37b" class="nl mb it ng b gy nq nn l no np"># Print out the current directory<br/>!pwd</span></pre><p id="d11f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">输出:</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="8660" class="nl mb it ng b gy nm nn l no np">Mounted at /content/drive<br/>/content/drive/My Drive/contents/sentiment_analysis</span></pre><p id="37e8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在让我们将数据读入一个<code class="fe nd ne nf ng b">pandas</code>数据框，看看数据集是什么样子。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="dd28" class="nl mb it ng b gy nm nn l no np"># Read in data<br/>amz_review = pd.read_csv<strong class="ng iu">(</strong>'sentiment labelled sentences/amazon_cells_labelled.txt', sep='\t', names=<strong class="ng iu">[</strong>'review', 'label'<strong class="ng iu">])</strong></span><span id="f25e" class="nl mb it ng b gy nq nn l no np"># Take a look at the data<br/>amz_review.head<strong class="ng iu">()</strong></span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nx"><img src="../Images/9630655e4a49f1626a7d16bd85bcb50a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5_HqTb_8E7znw5LP.png"/></div></div></figure><p id="3c1f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe nd ne nf ng b">.info</code>帮助我们获得关于数据集的信息。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="dca2" class="nl mb it ng b gy nm nn l no np"># Get the dataset information<br/>amz_review.info<strong class="ng iu">()</strong></span></pre><p id="3fc8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">从输出中，我们可以看到这个数据集有两列，1000条记录，没有丢失数据。“审查”栏为<code class="fe nd ne nf ng b">object</code>型，“标签”栏为<code class="fe nd ne nf ng b">int64</code>型。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="a114" class="nl mb it ng b gy nm nn l no np">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 1000 entries, 0 to 999<br/>Data columns (total 2 columns):<br/>#   Column  Non-Null Count  Dtype<br/>---  ------  --------------  -----<br/>0   review  1000 non-null   object<br/>1   label   1000 non-null   int64<br/>dtypes: int64(1), object(1)<br/>memory usage: 15.8+ KB</span></pre><p id="3866" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，让我们检查标签的分布。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="fc0b" class="nl mb it ng b gy nm nn l no np"># Check the label distribution<br/>amz_review<strong class="ng iu">[</strong>'label'<strong class="ng iu">]</strong>.value_counts<strong class="ng iu">()</strong></span></pre><p id="b47a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">数据集中有500个正面和500个负面评论，所以我们有一个平衡的数据集。对于平衡的数据集，我们可以使用准确性作为性能指标。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="8ffb" class="nl mb it ng b gy nm nn l no np">1    500<br/>0    500<br/>Name: label, dtype: int64</span></pre><p id="a81b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您对不平衡数据集分类感兴趣，请查看我的不平衡分类和异常检测文章。</p><ul class=""><li id="9d9d" class="lf lg it js b jt ju jx jy kb lh kf li kj lj kn lk ll lm ln bi translated"><a class="ae le" href="https://grabngoinfo.com/four-oversampling-and-under-sampling-methods-for-imbalanced-classification-using-python/" rel="noopener ugc nofollow" target="_blank">使用Python实现不平衡分类的四种过采样和欠采样方法</a></li><li id="bac9" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated"><a class="ae le" href="https://grabngoinfo.com/neural-network-model-balanced-weight-for-imbalanced-classification-in-keras/" rel="noopener ugc nofollow" target="_blank">Keras中不平衡分类的神经网络模型平衡权重</a></li><li id="65a5" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated"><a class="ae le" href="https://grabngoinfo.com/isolation-forest-for-anomaly-detection-and-imbalanced-classification/" rel="noopener ugc nofollow" target="_blank">用于异常检测的隔离林</a></li><li id="a853" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated"><a class="ae le" href="https://grabngoinfo.com/one-class-support-vector-machine-svm-for-anomaly-detection/" rel="noopener ugc nofollow" target="_blank">单类支持向量机(SVM)异常检测链接正文</a></li><li id="c22d" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated"><a class="ae le" href="https://grabngoinfo.com/autoencoder-for-anomaly-detection-using-tensorflow-keras/" rel="noopener ugc nofollow" target="_blank">使用Tensorflow Keras进行异常检测的自动编码器</a></li></ul><h1 id="9ade" class="ma mb it bd mc md nr mf mg mh ns mj mk ml nt mn mo mp nu mr ms mt nv mv mw mx bi translated">第三步:什么是TextBlob？</h1><p id="76d5" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">TextBlob是一个用于自然语言处理(NLP)的Python库。情感分析是TextBlob支持的许多NLP任务之一。</p><p id="8bdc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">TextBlob中的情感属性返回输入文本的极性得分和主观性得分。</p><ul class=""><li id="567d" class="lf lg it js b jt ju jx jy kb lh kf li kj lj kn lk ll lm ln bi translated">极性分值范围从-1到1，其中-1表示极负，1表示高度正。接近0的分数表示中性情绪。</li><li id="73d1" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">主观评分范围从0到1，其中0表示非常客观，1表示高度主观。</li></ul><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="2e2e" class="nl mb it ng b gy nm nn l no np"># Example text<br/>text = 'GrabNGoInfo.com is a great machine learning tutorial website.'</span><span id="b52a" class="nl mb it ng b gy nq nn l no np"># TextBlob sentiment<br/>textBlob_sentiment = TextBlob<strong class="ng iu">(</strong>text<strong class="ng iu">)</strong>.sentiment<br/>textBlob_sentiment</span></pre><p id="d816" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本例中，示例文本“GrabNGoInfo.com是一个很好的机器学习教程网站。”极性得分为0.8，主观性得分为0.75，这意味着TextBlob将句子解释为具有主观积极情绪。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="2194" class="nl mb it ng b gy nm nn l no np">Sentiment(polarity=0.8, subjectivity=0.75)</span></pre><p id="88d2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以使用<code class="fe nd ne nf ng b">.polarity</code>来提取情感得分。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="b659" class="nl mb it ng b gy nm nn l no np"># Extract sentiment score<br/>textBlob_sentiment.polarity</span></pre><p id="3cce" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">输出:</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="02ee" class="nl mb it ng b gy nm nn l no np">0.8</span></pre><h1 id="92a3" class="ma mb it bd mc md nr mf mg mh ns mj mk ml nt mn mo mp nu mr ms mt nv mv mw mx bi translated">第四步:什么是VADER？</h1><p id="fca7" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">VADER (Valence Aware字典和情感推理机)是一个专注于社交媒体情感的Python库。它有一个内置的算法，可以根据标点符号、俚语、表情符号和首字母缩写来改变情绪强度。</p><p id="ab24" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">VADER的输出包括四个分数:复合分数、负分数、神经分数和正分数。</p><ul class=""><li id="1028" class="lf lg it js b jt ju jx jy kb lh kf li kj lj kn lk ll lm ln bi translated">pos、neu和neg表示属于每个类别的令牌的百分比，因此它们加起来是100%。</li><li id="f329" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">复合分数是衡量文本情感的单一分数。类似于TextBlob，范围从-1(极负)到1(极正)。接近0的分数代表神经情绪分数。</li><li id="387f" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">复合得分不是pos、neu和neg得分的简单汇总。相反，它包含了基于规则的增强功能，如标点符号放大器。</li></ul><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="833a" class="nl mb it ng b gy nm nn l no np"># Example text<br/>text = 'GrabNGoInfo.com is a great machine learning tutorial website.'</span><span id="93c7" class="nl mb it ng b gy nq nn l no np"># VADER Sentiment<br/>vader = SentimentIntensityAnalyzer<strong class="ng iu">()<br/></strong>vader_sentiment = vader.polarity_scores<strong class="ng iu">(</strong>text<strong class="ng iu">)<br/></strong>vader_sentiment</span></pre><p id="98b9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">VADER给出了示例文本“GrabNGoInfo.com是一个很棒的机器学习教程网站。”0.6249的综合得分。句子中没有否定词，所以neg分值为0。句子中有63.1%的中性词和36.9%的肯定性词。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="15aa" class="nl mb it ng b gy nm nn l no np">{'compound': 0.6249, 'neg': 0.0, 'neu': 0.631, 'pos': 0.369}</span></pre><p id="616e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">VADER的输出被保存为字典。我们可以通过关键字“复合”来提取复合情感得分。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="f280" class="nl mb it ng b gy nm nn l no np"># Extract sentiment score<br/>vader_sentiment<strong class="ng iu">[</strong>'compound'<strong class="ng iu">]</strong></span></pre><p id="0db9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">输出:</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="a224" class="nl mb it ng b gy nm nn l no np">0.6249</span></pre><h1 id="de95" class="ma mb it bd mc md nr mf mg mh ns mj mk ml nt mn mo mp nu mr ms mt nv mv mw mx bi translated">第五步:什么是天赋？</h1><p id="5440" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">Flair是建立在PyTorch基础上的最先进的NLP框架。它结合了最近的研究，并提供了一种简单的方法来结合不同的NLP任务的不同嵌入。预训练的情感模型提供了一种无需训练定制模型的情感分析工具。</p><p id="b941" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">与TextBlob和VADER输出-1到1之间的情感得分不同，flair情感输出带有置信度得分的预测标签。信心得分从0到1，1表示非常自信，0表示非常不自信。</p><p id="33a8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在预测文本的情感之前，需要对输入文本进行<code class="fe nd ne nf ng b">Sentence()</code>标记。之后，我们可以看到样本文本被分成了九个标记。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="2263" class="nl mb it ng b gy nm nn l no np"># Example text<br/>text = 'GrabNGoInfo.com is a great machine learning tutorial website.'</span><span id="fde3" class="nl mb it ng b gy nq nn l no np"># Flair tokenization<br/>sentence = Sentence<strong class="ng iu">(</strong>text<strong class="ng iu">)<br/></strong>sentence</span></pre><p id="c1ad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">输出:</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="e8ad" class="nl mb it ng b gy nm nn l no np">Sentence: "GrabNGoInfo.com is a great machine learning tutorial website ."   [− Tokens: 9]</span></pre><p id="2109" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，我们使用<code class="fe nd ne nf ng b">.predict</code>来预测情绪。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="2779" class="nl mb it ng b gy nm nn l no np"># Flair sentiment prediction<br/>classifier.predict<strong class="ng iu">(</strong>sentence<strong class="ng iu">)<br/></strong>sentence</span></pre><p id="0b96" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">示例文本“GrabNGoInfo.com是一个很好的机器学习教程网站。”具有正面的预测情绪和0.9895的置信度得分。由于0.9895接近1，flair对预测非常有信心。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="72b9" class="nl mb it ng b gy nm nn l no np">Sentence: "GrabNGoInfo.com is a great machine learning tutorial website ."   [− Tokens: 9  − Sentence-Labels: {'label': [POSITIVE (0.9895)]}]</span></pre><p id="747b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">预测标签保存为一个值，预测置信度保存为一个分数。我们可以分别使用<code class="fe nd ne nf ng b">sentence.labels[0].value</code>和<code class="fe nd ne nf ng b">sentence.labels[0].score</code>来提取值。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="f59b" class="nl mb it ng b gy nm nn l no np"># Extract sentiment prediction score<br/>print<strong class="ng iu">(</strong>f'Flair classified the review as {sentence.labels[0].value} with the score of {sentence.labels[0].score:.2f}'<strong class="ng iu">)</strong></span></pre><p id="475c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">输出:</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="9783" class="nl mb it ng b gy nm nn l no np">Flair classified the review as POSITIVE with the score of 0.99</span></pre><h1 id="be78" class="ma mb it bd mc md nr mf mg mh ns mj mk ml nt mn mo mp nu mr ms mt nv mv mw mx bi translated">步骤6:如何使用TextBlob进行情感分析</h1><p id="112f" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">在第6步中，我们将把TextBlob应用到Amazon review数据集，看看它的表现如何。</p><p id="9130" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们首先获取每个评论的情感极性，并将值保存到名为“scores_TextBlob”的列中。然后检查极性得分是否为正。如果分数大于或等于零，则评论的预测情绪是积极的(标记为1)。否则，评论的预测情绪是负面的(标记为0)。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="3b70" class="nl mb it ng b gy nm nn l no np"># Get sentiment score for each review<br/>amz_review<strong class="ng iu">[</strong>'scores_TextBlob'<strong class="ng iu">]</strong> = amz_review<strong class="ng iu">[</strong>'review'<strong class="ng iu">]</strong>.apply<strong class="ng iu">(</strong>lambda s: TextBlob<strong class="ng iu">(</strong>s<strong class="ng iu">)</strong>.sentiment.polarity<strong class="ng iu">)</strong></span><span id="3088" class="nl mb it ng b gy nq nn l no np"># Predict sentiment label for each review<br/>amz_review<strong class="ng iu">[</strong>'pred_TextBlob'<strong class="ng iu">]</strong> = amz_review<strong class="ng iu">[</strong>'scores_TextBlob'<strong class="ng iu">]</strong>.apply<strong class="ng iu">(</strong>lambda x: 1 if x <strong class="ng iu">&gt;</strong>=0 else 0<strong class="ng iu">)</strong></span><span id="6e03" class="nl mb it ng b gy nq nn l no np">amz_review.head<strong class="ng iu">()</strong></span></pre><p id="6b7d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">从TextBlob获得预测后，让我们检查预测的准确性。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="88c7" class="nl mb it ng b gy nm nn l no np"># Compare Actual and Predicted<br/>accuracy_score<strong class="ng iu">(</strong>amz_review<strong class="ng iu">[</strong>'label'<strong class="ng iu">]</strong>,amz_review<strong class="ng iu">[</strong>'pred_TextBlob'<strong class="ng iu">])</strong></span></pre><p id="ac07" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将实际标签与TextBlob预测进行比较，我们得到0.688的准确度分数，这意味着TextBlob在68.8%的时间里预测了评论情感。</p><h1 id="97d8" class="ma mb it bd mc md nr mf mg mh ns mj mk ml nt mn mo mp nu mr ms mt nv mv mw mx bi translated">步骤7:如何使用VADER进行情感分析</h1><p id="00ed" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">在第7步中，我们将把VADER应用于亚马逊评论数据集，看看它的表现如何。</p><p id="206a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们首先获得每个评论的情感复合得分，并将这些值保存到名为“scores_VADER”的列中。然后检查复合分数是否为正。如果分数大于或等于零，则评论的预测情绪是积极的(标记为1)。否则，评论的预测情绪是负面的(标记为0)。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="b2b9" class="nl mb it ng b gy nm nn l no np"># Get sentiment score for each review<br/>vader_sentiment = SentimentIntensityAnalyzer<strong class="ng iu">()<br/></strong>amz_review<strong class="ng iu">[</strong>'scores_VADER'<strong class="ng iu">]</strong> = amz_review<strong class="ng iu">[</strong>'review'<strong class="ng iu">]</strong>.apply<strong class="ng iu">(</strong>lambda s: vader_sentiment.polarity_scores<strong class="ng iu">(</strong>s<strong class="ng iu">)[</strong>'compound'<strong class="ng iu">])</strong></span><span id="0031" class="nl mb it ng b gy nq nn l no np"># Predict sentiment label for each review<br/>amz_review<strong class="ng iu">[</strong>'pred_VADER'<strong class="ng iu">]</strong> = amz_review<strong class="ng iu">[</strong>'scores_VADER'<strong class="ng iu">]</strong>.apply<strong class="ng iu">(</strong>lambda x: 1 if x <strong class="ng iu">&gt;</strong>=0 else 0<strong class="ng iu">)</strong></span><span id="e4c8" class="nl mb it ng b gy nq nn l no np">amz_review.head<strong class="ng iu">()</strong></span></pre><p id="4ddd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">得到VADER的预测后，让我们检查一下预测的准确性。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="abae" class="nl mb it ng b gy nm nn l no np"># Compare Actual and Predicted<br/>accuracy_score<strong class="ng iu">(</strong>amz_review<strong class="ng iu">[</strong>'label'<strong class="ng iu">]</strong>,amz_review<strong class="ng iu">[</strong>'pred_VADER'<strong class="ng iu">])</strong></span></pre><p id="8d44" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">输出:</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="85c0" class="nl mb it ng b gy nm nn l no np">0.768</span></pre><p id="495b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将实际标签与VADER预测进行比较，我们得到0.768的准确度分数，这意味着VADER在76.8%的时间里预测了评论情绪。</p><p id="ffce" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于相同的数据集，TextBlob的预测精度为68.8%，因此VADER比TextBlob预测提高了8%。</p><h1 id="3650" class="ma mb it bd mc md nr mf mg mh ns mj mk ml nt mn mo mp nu mr ms mt nv mv mw mx bi translated">步骤8:如何使用天赋进行情感分析</h1><p id="a8d3" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">在第8步中，我们将应用flair预训练情感模型来预测亚马逊评论的情感。</p><p id="c319" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，让我们定义一个函数，将评论作为输入，将预测的标签和置信度作为输出。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="5785" class="nl mb it ng b gy nm nn l no np"># Define a function to get Flair sentiment prediction score<br/>def score_flair<strong class="ng iu">(</strong>text<strong class="ng iu">)</strong>:<br/>  sentence = Sentence<strong class="ng iu">(</strong>text<strong class="ng iu">)<br/>  </strong>classifier.predict<strong class="ng iu">(</strong>sentence<strong class="ng iu">)<br/>  </strong>score = sentence.labels<strong class="ng iu">[</strong>0<strong class="ng iu">]</strong>.score<br/>  value = sentence.labels<strong class="ng iu">[</strong>0<strong class="ng iu">]</strong>.value<br/>  return score, value</span></pre><p id="6f18" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后将该函数应用于数据集中的每个评论。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="cb12" class="nl mb it ng b gy nm nn l no np"># Get sentiment score for each review<br/>amz_review<strong class="ng iu">[</strong>'scores_flair'<strong class="ng iu">]</strong> = amz_review<strong class="ng iu">[</strong>'review'<strong class="ng iu">]</strong>.apply<strong class="ng iu">(</strong>lambda s: score_flair<strong class="ng iu">(</strong>s<strong class="ng iu">)[</strong>0<strong class="ng iu">])</strong></span><span id="a920" class="nl mb it ng b gy nq nn l no np"># Predict sentiment label for each review<br/>amz_review<strong class="ng iu">[</strong>'pred_flair'<strong class="ng iu">]</strong> = amz_review<strong class="ng iu">[</strong>'review'<strong class="ng iu">]</strong>.apply<strong class="ng iu">(</strong>lambda s: score_flair<strong class="ng iu">(</strong>s<strong class="ng iu">)[</strong>1<strong class="ng iu">])</strong></span><span id="ea78" class="nl mb it ng b gy nq nn l no np"># Check the distribution of the score<br/>amz_review<strong class="ng iu">[</strong>'scores_flair'<strong class="ng iu">]</strong>.describe<strong class="ng iu">()</strong></span></pre><p id="2f64" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以看到，汇总统计数据显示，大多数flair得分接近1，这意味着flair情感模型总体上对预测非常有信心。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="c8ff" class="nl mb it ng b gy nm nn l no np">count    1000.000000<br/>mean        0.988019<br/>std         0.046841<br/>min         0.533640<br/>25%         0.996153<br/>50%         0.999167<br/>75%         0.999887<br/>max         0.999999<br/>Name: scores_flair, dtype: float64</span></pre><p id="58ae" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">标签的分布非常均衡。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="1f86" class="nl mb it ng b gy nm nn l no np"># Check the counts of labels<br/>amz_review<strong class="ng iu">[</strong>'pred_flair'<strong class="ng iu">]</strong>.value_counts<strong class="ng iu">()</strong></span></pre><p id="0907" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">输出:</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="21eb" class="nl mb it ng b gy nm nn l no np">POSITIVE    504<br/>NEGATIVE    496<br/>Name: pred_flair, dtype: int64</span></pre><p id="2249" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在检查预测准确性之前，我们需要将“负”值映射到0，将“正”值映射到1，因为Amazon review数据集具有0和1的真实标签。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="06af" class="nl mb it ng b gy nm nn l no np"># Change the label of flair prediction to 0 if negative and 1 if positive<br/>mapping = <strong class="ng iu">{</strong>'NEGATIVE': 0, 'POSITIVE': 1<strong class="ng iu">}<br/></strong>amz_review<strong class="ng iu">[</strong>'pred_flair'<strong class="ng iu">]</strong> = amz_review<strong class="ng iu">[</strong>'pred_flair'<strong class="ng iu">]</strong>.map<strong class="ng iu">(</strong>mapping<strong class="ng iu">)</strong></span></pre><p id="6daa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将flair预测与实际情绪标签进行对比后，我们可以看到flair预测情绪的正确率为94.8%！预测准确率从VADER提高了18%，从TextBlob提高了26%！</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="372b" class="nl mb it ng b gy nm nn l no np"># Compare Actual and Predicted<br/>accuracy_score<strong class="ng iu">(</strong>amz_review<strong class="ng iu">[</strong>'label'<strong class="ng iu">]</strong>,amz_review<strong class="ng iu">[</strong>'pred_flair'<strong class="ng iu">])</strong></span></pre><p id="7e28" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">输出:</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="95e4" class="nl mb it ng b gy nm nn l no np">0.948</span></pre><h1 id="637c" class="ma mb it bd mc md nr mf mg mh ns mj mk ml nt mn mo mp nu mr ms mt nv mv mw mx bi translated">步骤9:将所有代码放在一起</h1><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="9afd" class="nl mb it ng b gy nm nn l no np">###### Step 1: Install And Import Python Libraries</span><span id="418b" class="nl mb it ng b gy nq nn l no np"># Install vaderSentiment package for VADER<br/>pip install vaderSentiment</span><span id="8436" class="nl mb it ng b gy nq nn l no np"># Install flair<br/>pip install flair</span><span id="2fec" class="nl mb it ng b gy nq nn l no np"># Data processing<br/>import pandas as pd<br/>import numpy as np</span><span id="957c" class="nl mb it ng b gy nq nn l no np"># Import TextBlob<br/>from textblob import TextBlob</span><span id="e9dd" class="nl mb it ng b gy nq nn l no np"># Import VADER sentiment<br/>from vaderSentiment.vaderSentiment import SentimentIntensityAnalyzer</span><span id="53aa" class="nl mb it ng b gy nq nn l no np"># Import flair pre-trained sentiment model<br/>from flair.models import TextClassifier<br/>classifier = TextClassifier.load<strong class="ng iu">(</strong>'en-sentiment'<strong class="ng iu">)</strong></span><span id="6c7a" class="nl mb it ng b gy nq nn l no np"># Import flair Sentence to process input text<br/>from flair.data import Sentence</span><span id="0bed" class="nl mb it ng b gy nq nn l no np"># Import accuracy_score to check performance<br/>from sklearn.metrics import accuracy_score</span><span id="1ffc" class="nl mb it ng b gy nq nn l no np"># Set a wider colwith<br/>pd.set_option<strong class="ng iu">(</strong>'display.max_colwidth', 1000<strong class="ng iu">)</strong></span><span id="e356" class="nl mb it ng b gy nq nn l no np">###### Step 2: Download And Read In Data</span><span id="259d" class="nl mb it ng b gy nq nn l no np"># Mount Google Drive (only if you are using Google Colab)<br/>from google.colab import drive<br/>drive.mount<strong class="ng iu">(</strong>'/content/drive'<strong class="ng iu">)</strong></span><span id="b6ef" class="nl mb it ng b gy nq nn l no np"># Change directory (only if you are using Google Colab)<br/>import os<br/>os.chdir<strong class="ng iu">(</strong>"drive/My Drive/contents/sentiment_analysis"<strong class="ng iu">)</strong> # Change to your project directory</span><span id="774c" class="nl mb it ng b gy nq nn l no np"># Print out the current directory (only if you are using Google Colab)<br/>!pwd</span><span id="f726" class="nl mb it ng b gy nq nn l no np"># Read in data<br/># Change the path to where your dataset is saved<br/>amz_review = pd.read_csv<strong class="ng iu">(</strong>'sentiment labelled sentences/amazon_cells_labelled.txt', sep='\t', names=<strong class="ng iu">[</strong>'review', 'label'<strong class="ng iu">])</strong></span><span id="a9b7" class="nl mb it ng b gy nq nn l no np"># Take a look at the data<br/>amz_review.head<strong class="ng iu">()</strong></span><span id="cd95" class="nl mb it ng b gy nq nn l no np"># Get the dataset information<br/>amz_review.info<strong class="ng iu">()</strong></span><span id="61bc" class="nl mb it ng b gy nq nn l no np"># Check the label distribution<br/>amz_review<strong class="ng iu">[</strong>'label'<strong class="ng iu">]</strong>.value_counts<strong class="ng iu">()</strong></span><span id="4924" class="nl mb it ng b gy nq nn l no np">###### Step 3: What is TextBlob?</span><span id="cc99" class="nl mb it ng b gy nq nn l no np"># Example text<br/>text = 'GrabNGoInfo.com is a great machine learning tutorial website.'</span><span id="e3e2" class="nl mb it ng b gy nq nn l no np"># TextBlob sentiment<br/>textBlob_sentiment = TextBlob<strong class="ng iu">(</strong>text<strong class="ng iu">)</strong>.sentiment<br/>textBlob_sentiment</span><span id="c5fd" class="nl mb it ng b gy nq nn l no np"># Extract sentiment score<br/>textBlob_sentiment.polarity</span><span id="125d" class="nl mb it ng b gy nq nn l no np">###### Step 4: What is VADER?</span><span id="3c93" class="nl mb it ng b gy nq nn l no np"># Example text<br/>text = 'GrabNGoInfo.com is a great machine learning tutorial website.'</span><span id="077f" class="nl mb it ng b gy nq nn l no np"># VADER Sentiment<br/>vader = SentimentIntensityAnalyzer<strong class="ng iu">()<br/></strong>vader_sentiment = vader.polarity_scores<strong class="ng iu">(</strong>text<strong class="ng iu">)<br/></strong>vader_sentiment</span><span id="6fca" class="nl mb it ng b gy nq nn l no np"># Extract sentiment score<br/>vader_sentiment<strong class="ng iu">[</strong>'compound'<strong class="ng iu">]</strong></span><span id="c7e0" class="nl mb it ng b gy nq nn l no np">###### Step 5: What is Flair</span><span id="bbbf" class="nl mb it ng b gy nq nn l no np"># Example text<br/>text = 'GrabNGoInfo.com is a great machine learning tutorial website.'</span><span id="3089" class="nl mb it ng b gy nq nn l no np"># Flair tokenization<br/>sentence = Sentence<strong class="ng iu">(</strong>text<strong class="ng iu">)<br/></strong>sentence</span><span id="c339" class="nl mb it ng b gy nq nn l no np"># Flair sentiment prediction<br/>classifier.predict<strong class="ng iu">(</strong>sentence<strong class="ng iu">)<br/></strong>sentence</span><span id="ca01" class="nl mb it ng b gy nq nn l no np"># Extract sentiment prediction score<br/>print<strong class="ng iu">(</strong>f'Flair classified the review as {sentence.labels[0].value} with the score of {sentence.labels[0].score:.2f}'<strong class="ng iu">)</strong></span><span id="8f4e" class="nl mb it ng b gy nq nn l no np">###### Step 6: How To Use TextBlob For Sentiment Analysis</span><span id="c6b9" class="nl mb it ng b gy nq nn l no np"># Get sentiment score for each review<br/>amz_review<strong class="ng iu">[</strong>'scores_TextBlob'<strong class="ng iu">]</strong> = amz_review<strong class="ng iu">[</strong>'review'<strong class="ng iu">]</strong>.apply<strong class="ng iu">(</strong>lambda s: TextBlob<strong class="ng iu">(</strong>s<strong class="ng iu">)</strong>.sentiment.polarity<strong class="ng iu">)</strong></span><span id="aaa7" class="nl mb it ng b gy nq nn l no np"># Predict sentiment label for each review<br/>amz_review<strong class="ng iu">[</strong>'pred_TextBlob'<strong class="ng iu">]</strong> = amz_review<strong class="ng iu">[</strong>'scores_TextBlob'<strong class="ng iu">]</strong>.apply<strong class="ng iu">(</strong>lambda x: 1 if x <strong class="ng iu">&gt;</strong>=0 else 0<strong class="ng iu">)<br/></strong>amz_review.head<strong class="ng iu">()</strong></span><span id="11b8" class="nl mb it ng b gy nq nn l no np"># Compare Actual and Predicted<br/>accuracy_score<strong class="ng iu">(</strong>amz_review<strong class="ng iu">[</strong>'label'<strong class="ng iu">]</strong>,amz_review<strong class="ng iu">[</strong>'pred_TextBlob'<strong class="ng iu">])</strong></span><span id="bf1d" class="nl mb it ng b gy nq nn l no np">###### Step 7: How To Use VADER For Sentiment Analysis</span><span id="1325" class="nl mb it ng b gy nq nn l no np"># Get sentiment score for each review<br/>vader_sentiment = SentimentIntensityAnalyzer<strong class="ng iu">()<br/></strong>amz_review<strong class="ng iu">[</strong>'scores_VADER'<strong class="ng iu">]</strong> = amz_review<strong class="ng iu">[</strong>'review'<strong class="ng iu">]</strong>.apply<strong class="ng iu">(</strong>lambda s: vader_sentiment.polarity_scores<strong class="ng iu">(</strong>s<strong class="ng iu">)[</strong>'compound'<strong class="ng iu">])</strong></span><span id="594b" class="nl mb it ng b gy nq nn l no np"># Predict sentiment label for each review<br/>amz_review<strong class="ng iu">[</strong>'pred_VADER'<strong class="ng iu">]</strong> = amz_review<strong class="ng iu">[</strong>'scores_VADER'<strong class="ng iu">]</strong>.apply<strong class="ng iu">(</strong>lambda x: 1 if x <strong class="ng iu">&gt;</strong>=0 else 0<strong class="ng iu">)<br/></strong>amz_review.head<strong class="ng iu">()</strong></span><span id="f6f1" class="nl mb it ng b gy nq nn l no np"># Compare Actual and Predicted<br/>accuracy_score<strong class="ng iu">(</strong>amz_review<strong class="ng iu">[</strong>'label'<strong class="ng iu">]</strong>,amz_review<strong class="ng iu">[</strong>'pred_VADER'<strong class="ng iu">])</strong></span><span id="cf55" class="nl mb it ng b gy nq nn l no np">###### Step 8: How To Use Flair For Sentiment Analysis</span><span id="df54" class="nl mb it ng b gy nq nn l no np"># Define a function to get Flair sentiment prediction score<br/>def score_flair<strong class="ng iu">(</strong>text<strong class="ng iu">)</strong>:<br/>  sentence = Sentence<strong class="ng iu">(</strong>text<strong class="ng iu">)<br/>  </strong>classifier.predict<strong class="ng iu">(</strong>sentence<strong class="ng iu">)<br/>  </strong>score = sentence.labels<strong class="ng iu">[</strong>0<strong class="ng iu">]</strong>.score<br/>  value = sentence.labels<strong class="ng iu">[</strong>0<strong class="ng iu">]</strong>.value<br/>  return score, value</span><span id="4223" class="nl mb it ng b gy nq nn l no np"># Get sentiment score for each review<br/>amz_review<strong class="ng iu">[</strong>'scores_flair'<strong class="ng iu">]</strong> = amz_review<strong class="ng iu">[</strong>'review'<strong class="ng iu">]</strong>.apply<strong class="ng iu">(</strong>lambda s: score_flair<strong class="ng iu">(</strong>s<strong class="ng iu">)[</strong>0<strong class="ng iu">])</strong></span><span id="202c" class="nl mb it ng b gy nq nn l no np"># Predict sentiment label for each review<br/>amz_review<strong class="ng iu">[</strong>'pred_flair'<strong class="ng iu">]</strong> = amz_review<strong class="ng iu">[</strong>'review'<strong class="ng iu">]</strong>.apply<strong class="ng iu">(</strong>lambda s: score_flair<strong class="ng iu">(</strong>s<strong class="ng iu">)[</strong>1<strong class="ng iu">])</strong></span><span id="fb9c" class="nl mb it ng b gy nq nn l no np"># Check the distribution of the score<br/>amz_review<strong class="ng iu">[</strong>'scores_flair'<strong class="ng iu">]</strong>.describe<strong class="ng iu">()</strong></span><span id="ee1c" class="nl mb it ng b gy nq nn l no np"># Check the counts of labels<br/>amz_review<strong class="ng iu">[</strong>'pred_flair'<strong class="ng iu">]</strong>.value_counts<strong class="ng iu">()</strong></span><span id="d955" class="nl mb it ng b gy nq nn l no np"># Check sample records<br/>amz_review.head<strong class="ng iu">()</strong></span><span id="9ba1" class="nl mb it ng b gy nq nn l no np"># Change the label of flair prediction to 0 if negative and 1 if positive<br/>mapping = <strong class="ng iu">{</strong>'NEGATIVE': 0, 'POSITIVE': 1<strong class="ng iu">}<br/></strong>amz_review<strong class="ng iu">[</strong>'pred_flair'<strong class="ng iu">]</strong> = amz_review<strong class="ng iu">[</strong>'pred_flair'<strong class="ng iu">]</strong>.map<strong class="ng iu">(</strong>mapping<strong class="ng iu">)</strong></span><span id="ad7f" class="nl mb it ng b gy nq nn l no np"># Check counts<br/>amz_review<strong class="ng iu">[</strong>'pred_flair'<strong class="ng iu">]</strong>.value_counts<strong class="ng iu">()</strong></span><span id="cea8" class="nl mb it ng b gy nq nn l no np"># Compare Actual and Predicted<br/>accuracy_score<strong class="ng iu">(</strong>amz_review<strong class="ng iu">[</strong>'label'<strong class="ng iu">]</strong>,amz_review<strong class="ng iu">[</strong>'pred_flair'<strong class="ng iu">])</strong></span></pre></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="e9c3" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">总结:文本斑点对VADER对天赋</h1><p id="f4bf" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">在本文中，我们比较了TextBlob、VADER和Flair在情感分析方面的表现。</p><ul class=""><li id="fff8" class="lf lg it js b jt ju jx jy kb lh kf li kj lj kn lk ll lm ln bi translated">方法学<br/> - VADER和文本块是基于词典和规则的。<br/> -天赋是基于模型的。</li><li id="4a89" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">分数的含义<br/>——VADER和TextBlob的情绪分数在-1到1之间，其中-1表示非常负面，1表示非常正面，0表示中性。<br/> - Flair的评分范围为0到1，其中0表示对预测非常不自信，1表示对预测非常有信心。</li><li id="bdab" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">速度表现<br/> - Flair比TextBlob和VADER慢，因为计算算法更复杂。</li><li id="7b78" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">准确性表现<br/> -根据该项目的结果，flair的预测准确性最好，VADER次之，TextBlob第三。</li></ul><p id="81ab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">读完这篇文章后，你学会了</p><ul class=""><li id="bfcf" class="lf lg it js b jt ju jx jy kb lh kf li kj lj kn lk ll lm ln bi translated">什么是TextBlob？</li><li id="bd0b" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">什么是VADER？</li><li id="6a24" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">什么是天赋？</li><li id="92ab" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">如何使用Python库TextBlob进行情感分析？</li><li id="93df" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">如何使用Python库VADER进行情感分析？</li><li id="8524" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">如何使用Python中的flair预训练模型进行情感分析？</li><li id="ae25" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">文本斑点与VADER和天赋的比较。</li></ul><p id="4b41" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你对TextBlob和VADER之间的细微差别感兴趣，请参考我的文章<a class="ae le" href="https://grabngoinfo.com/textblob-vs-vader-for-sentiment-analysis-using-python/" rel="noopener ugc nofollow" target="_blank"> TextBlob VS VADER使用Python进行情感分析</a></p><p id="d5e6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你对教程的视频版本感兴趣，请查看下面的视频。访问<a class="ae le" href="https://grabngoinfo.com/tutorials/" rel="noopener ugc nofollow" target="_blank"> GrabNGoInfo网站</a>或<a class="ae le" href="https://www.youtube.com/channel/UCmbA7XB6Wb7bLwJw9ARPcYg/playlists" rel="noopener ugc nofollow" target="_blank"> GrabNGoInfo YouTube频道</a>获取更多机器学习教程。</p><h1 id="ba5e" class="ma mb it bd mc md nr mf mg mh ns mj mk ml nt mn mo mp nu mr ms mt nv mv mw mx bi translated">推荐教程</h1><ul class=""><li id="6427" class="lf lg it js b jt my jx mz kb ny kf nz kj oa kn lk ll lm ln bi translated"><a class="ae le" href="https://medium.com/grabngoinfo/grabngoinfo-machine-learning-tutorials-inventory-9b9d78ebdd67" rel="noopener"> GrabNGoInfo机器学习教程盘点</a></li><li id="ceb5" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated"><a class="ae le" href="https://medium.com/p/one-class-svm-for-anomaly-detection-6c97fdd6d8af" rel="noopener">用于异常检测的单级SVM</a></li><li id="31fc" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated"><a class="ae le" href="https://medium.com/p/3-ways-for-multiple-time-series-forecasting-using-prophet-in-python-7a0709a117f9" rel="noopener">使用Python中的Prophet进行多时间序列预测的3种方式</a></li><li id="297c" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated"><a class="ae le" href="https://medium.com/p/four-oversampling-and-under-sampling-methods-for-imbalanced-classification-using-python-7304aedf9037" rel="noopener">使用Python实现不平衡分类的四种过采样和欠采样方法</a></li><li id="f0f5" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated"><a class="ae le" href="https://medium.com/p/multivariate-time-series-forecasting-with-seasonality-and-holiday-effect-using-prophet-in-python-d5d4150eeb57" rel="noopener">利用Python中的Prophet进行具有季节性和假日效应的多元时间序列预测</a></li><li id="be0c" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated"><a class="ae le" href="https://medium.com/p/how-to-detect-outliers-data-science-interview-questions-and-answers-1e400284f6b4" rel="noopener">如何检测离群值|数据科学面试问答</a></li><li id="725f" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated"><a class="ae le" href="https://medium.com/p/time-series-anomaly-detection-using-prophet-in-python-877d2b7b14b4" rel="noopener">利用Python中的Prophet进行时间序列异常检测</a></li><li id="aada" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated"><a class="ae le" href="https://medium.com/p/how-to-use-r-with-google-colab-notebook-610c3a2f0eab" rel="noopener">如何配合谷歌Colab笔记本使用R</a></li></ul><div class="ob oc gp gr od oe"><a href="https://medium.com/@AmyGrabNGoInfo/membership" rel="noopener follow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">通过我的推荐链接加入媒体-艾米GrabNGoInfo</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">medium.com</p></div></div><div class="on l"><div class="oo l op oq or on os ky oe"/></div></div></a></div></div></div>    
</body>
</html>