<html>
<head>
<title>Sentiment Analysis on News Headlines and Stock Price Changes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">新闻标题与股票价格变化的情感分析</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/sentiment-analysis-on-news-headlines-and-stock-price-changes-69978b5bf2a6?source=collection_archive---------1-----------------------#2022-02-17">https://pub.towardsai.net/sentiment-analysis-on-news-headlines-and-stock-price-changes-69978b5bf2a6?source=collection_archive---------1-----------------------#2022-02-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="720d" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/machine-learning" rel="noopener ugc nofollow" target="_blank">机器学习</a></h2><div class=""/><p id="9e01" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">"在市场中，感知比现实更有力量."</p><p id="04a5" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">纳维德·阿布达里</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi kx"><img src="../Images/4066cce52e40be264658c7c11b02f2dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wk3Fm6qCm9AcYoAfoz7yJg.jpeg"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">来自<a class="ae ln" href="https://www.pexels.com/photo/smartphone-on-the-table-7887815/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae ln" href="https://www.pexels.com/@olyakobruseva?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Olya Kobruseva </a>的照片</figcaption></figure><h1 id="c71e" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated"><strong class="ak">简介</strong></h1><p id="7b61" class="pw-post-body-paragraph jz ka it kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw im bi translated">你有没有想过是什么驱动了股票市场，或者是什么因素影响了股票的价格？影响股价价值的变量有很多，包括但不限于经济、利率、市场情绪、内部购买、财务预测、收入增长和收益、股息和股票回购。这些变量使得任何个人或股市专业人士都极难准确预测股价的涨跌。</p><p id="d3ee" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">股票价格是由多种因素驱动的，但最终任何给定时刻的价格都是由市场中该时刻的供求关系决定的。供给是人们想要出售的股票数量，需求是人们想要购买的股票数量。如果买方的数量多于卖方，买方就会抬高股票价格，以鼓励卖方卖出更多股票。如果卖家比买家多，价格就会下降，直到达到吸引买家的水平。</p><p id="ee1c" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">Investopedia的David R. Harper总结了推动股票上涨或下跌的力量。这些力量分为三类:基本面因素、技术面因素和市场情绪。</p><ul class=""><li id="2c42" class="mr ms it kb b kc kd kg kh kk mt ko mu ks mv kw mw mx my mz bi translated">基本面因素推动股价的基础是公司生产和销售商品和服务的收益和盈利能力。</li><li id="b671" class="mr ms it kb b kc na kg nb kk nc ko nd ks ne kw mw mx my mz bi translated">与市场中股票价格历史相关的技术因素，包括图表模式、动量以及交易者和投资者的行为因素。</li><li id="45b6" class="mr ms it kb b kc na kg nb kk nc ko nd ks ne kw mw mx my mz bi translated">市场情绪是指投资者对特定证券或金融市场的总体态度。它是一个市场的感觉或基调，或大众心理，通过该市场中交易的证券的活动和价格运动来揭示。从广义上讲，价格上涨表明市场情绪看涨，而价格下跌表明市场情绪看跌。</li></ul><p id="136e" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">随着机器学习及其许多高级算法的引入，最近的市场研究和股票市场预测进步已经开始将机器学习方法包括在分析股票市场数据和预测未来股票价格中。</p><p id="9fa6" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">路线图</strong></p><p id="54d9" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">本文的剩余部分将介绍一个根据新闻标题来判断市场情绪的程序。然后，我们将某家公司的情绪与一段时间内的价格涨跌进行比较。以下步骤将使用机器学习和Python来执行。</p><p id="e033" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">1.导入所需的软件库。</p><p id="01f6" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">2.收集和分析数据。</p><p id="afbd" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">3.应用情感分析。</p><p id="b36d" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">4.想象情绪。</p><p id="f522" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">5.比较情绪和价格差异。</p><p id="83ac" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">6.得出结论。</p><p id="120e" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">程序</strong></p><p id="d839" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">目标:根据新闻标题确定情绪，并将情绪与股票价格进行比较。</p><p id="82c9" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">导入所需软件库</strong></p><pre class="ky kz la lb gt nf ng nh ni aw nj bi"><span id="0c39" class="nk lp it ng b gy nl nm l nn no"><strong class="ng jd">from</strong> urllib.request <strong class="ng jd">import</strong> urlopen, Request<br/><strong class="ng jd">from</strong> bs4 <strong class="ng jd">import</strong> BeautifulSoup<br/><strong class="ng jd">from</strong> nltk.sentiment.vader <strong class="ng jd">import</strong> SentimentIntensityAnalyzer<br/><strong class="ng jd">import</strong> nltk<br/>nltk<strong class="ng jd">.</strong>download('vader_lexicon')<br/><strong class="ng jd">import</strong> pandas <strong class="ng jd">as</strong> pd<br/><strong class="ng jd">import</strong> matplotlib.pyplot <strong class="ng jd">as</strong> plt</span></pre><p id="522f" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">收集并解析数据</strong></p><p id="5ffd" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">FinViz是一个免费网站，让投资者可以轻松获取股票数据。我们将从FinViz收集特定股票代码的股票数据。例如，下面显示的是一段时间内亚马逊(Amazon)价格的网页。</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi np"><img src="../Images/82599d264e72cb77deb982ef979658ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vjgVNt2_8VY6x07UbZj28w.png"/></div></div></figure><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi nq"><img src="../Images/27236b977cfeb176351d7ac8ac6472d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pAiz4HG6_tXKzqtZrb_rGA.png"/></div></div></figure><p id="8d6d" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">当你向下滚动时，你会看到亚马逊的新闻文章列表。</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/1faceb9da513c2020c28f453d30213a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*85JXHWmp4uCYNHCJz6M58g.png"/></div></figure><p id="b953" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">当您查看源代码时，您会看到包含股票文章名称和发表日期的HTML代码。</p><p id="7fa2" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><a href="”https://www.investopedia.com/amazon-q4-fy2021-earnings-report-preview-5217866?utm_campaign=quote-yahoo&amp;utm_source=yahoo&amp;utm_medium=referral&quot;" target="”_blank”" class="”tab-link-news”">亚马逊收益:从AMZN中寻找什么</a></p><p id="e702" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">我们现在将创建一个股票符号数组和FinViz URL，从中解析数据。</p><pre class="ky kz la lb gt nf ng nh ni aw nj bi"><span id="13dd" class="nk lp it ng b gy nl nm l nn no">symbols <strong class="ng jd">=</strong> ['MSFT', 'FB', 'NVDA']<br/>finviz_url <strong class="ng jd">=</strong> 'https://finviz.com/quote.ashx?t='</span></pre><p id="e7bf" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">我们将使用Python中的请求模块来发送HTTP请求。<br/>HTTP请求返回一个包含所有响应数据的响应对象。<br/>响应对象然后被输入到BeautifulSoup，在那里它将被解析。<br/>id为“news-table”的HTML元素包含所有的新闻文章，并且<br/>我们将该元素保存到一个字典中。</p><p id="c36c" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">Beautiful Soup是一个Python库，用于web抓取目的，从HTML文件中提取数据。它从页面源代码中创建了一个解析树，可用于以层次化和可读性更强的方式提取数据。</p><pre class="ky kz la lb gt nf ng nh ni aw nj bi"><span id="041d" class="nk lp it ng b gy nl nm l nn no">news_tables <strong class="ng jd">=</strong> {}<br/><strong class="ng jd">for</strong> symbol <strong class="ng jd">in</strong> symbols:<br/>    url <strong class="ng jd">=</strong> finviz_url <strong class="ng jd">+</strong> symbol<br/><br/>    request <strong class="ng jd">=</strong> Request(url<strong class="ng jd">=</strong>url, headers<strong class="ng jd">=</strong>{'user-agent': 'my-app'})<br/>    response <strong class="ng jd">=</strong> urlopen(request)<br/><br/>    html <strong class="ng jd">=</strong> BeautifulSoup(response, features<strong class="ng jd">=</strong>'html.parser')<br/>    news_table <strong class="ng jd">=</strong> html<strong class="ng jd">.</strong>find(id<strong class="ng jd">=</strong>'news-table')<br/>    news_tables[symbol] <strong class="ng jd">=</strong> news_table</span></pre><p id="ac82" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">我们现在将使用上面保存的新闻表，并解析出我们需要的特定值。我们在新闻文章的表格中寻找所有的表格行，并收集每篇文章发表的标题、日期和时间。一旦我们有了这些值，我们就可以将每一段数据保存到我们解析的数据数组中。</p><pre class="ky kz la lb gt nf ng nh ni aw nj bi"><span id="5d2f" class="nk lp it ng b gy nl nm l nn no">parsed_data <strong class="ng jd">=</strong> []<br/><strong class="ng jd">for</strong> symbol, news_table <strong class="ng jd">in</strong> news_tables<strong class="ng jd">.</strong>items():<br/>    <strong class="ng jd">for</strong> row <strong class="ng jd">in</strong> news_table<strong class="ng jd">.</strong>findAll('tr'):<br/>        title <strong class="ng jd">=</strong> row<strong class="ng jd">.</strong>a<strong class="ng jd">.</strong>text<br/>        date_data <strong class="ng jd">=</strong> row<strong class="ng jd">.</strong>td<strong class="ng jd">.</strong>text<strong class="ng jd">.</strong>split(' ')<br/><br/>        <strong class="ng jd">if</strong> len(date_data) <strong class="ng jd">==</strong> 1:<br/>            time <strong class="ng jd">=</strong> date_data[0]<br/>        <strong class="ng jd">else</strong>:<br/>            date <strong class="ng jd">=</strong> date_data[0]<br/>            time <strong class="ng jd">=</strong> date_data[1]<br/><br/>        parsed_data<strong class="ng jd">.</strong>append([symbol, date, time, title])</span></pre><p id="0621" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">我们将把解析后的数据数组转换为Pandas数据框，并将日期列设置为Python Datetime格式。这将允许我们轻松地应用情感分析，并使用MatPlotLib可视化数据。</p><pre class="ky kz la lb gt nf ng nh ni aw nj bi"><span id="2120" class="nk lp it ng b gy nl nm l nn no">news <strong class="ng jd">=</strong> pd<strong class="ng jd">.</strong>DataFrame(parsed_data, columns<strong class="ng jd">=</strong>['symbol', 'date', 'time', 'title'])<br/>news['date'] <strong class="ng jd">=</strong> pd<strong class="ng jd">.</strong>to_datetime(news<strong class="ng jd">.</strong>date)<strong class="ng jd">.</strong>dt<strong class="ng jd">.</strong>date</span></pre><p id="5b80" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">应用情感分析</strong></p><p id="55a8" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">情感分析是一种文本分析方法，它检测文本中的极性(正面或负面观点)。我们将使用NLTK(自然语言工具包)子模块VADER进行文本情感分析。</p><p id="fb5c" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">VADER(情感推理的效价感知词典)是一个用于文本情感分析的模块，它对情感的极性(积极/消极)和强度(强度)都敏感。它直接应用于未标记的文本数据。</p><p id="75f1" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">VADER的SentimentIntensityAnalyzer()接受一个字符串，并返回以下每个类别的得分字典:</p><ul class=""><li id="0880" class="mr ms it kb b kc kd kg kh kk mt ko mu ks mv kw mw mx my mz bi translated">否定的；消极的；负面的；负的</li><li id="a487" class="mr ms it kb b kc na kg nb kk nc ko nd ks ne kw mw mx my mz bi translated">中立的</li><li id="e893" class="mr ms it kb b kc na kg nb kk nc ko nd ks ne kw mw mx my mz bi translated">积极的</li><li id="9f7d" class="mr ms it kb b kc na kg nb kk nc ko nd ks ne kw mw mx my mz bi translated">复合(通过标准化上述得分计算)</li></ul><p id="659f" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">例如，以下文本将返回这些输出分数:<br/>‘这是有史以来最好、最棒的电影！！!'<br/>输出-{'neg': 0.0，' neu': 0.425，' pos': 0.575，' compound': 0.8877}</p><p id="9ff6" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">分数范围在-1到1之间，其中-1表示非常消极，+1表示非常积极。我们将使用复合得分来确定一只股票的文章是正面还是负面的。</p><p id="0a9d" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">我们将创建一个lambda函数，它接受一个标题字符串，对其应用<br/> vader.polarity_scores()函数以获得结果，然后<br/>返回复合分数。使用Pandas，<br/>中的应用功能，我们可以在数据框中创建一个新的“复合”列，包含每个标题的所有复合分数。</p><pre class="ky kz la lb gt nf ng nh ni aw nj bi"><span id="f2da" class="nk lp it ng b gy nl nm l nn no"># initialize the SentimentIntensityAnalyzer.<br/>vader <strong class="ng jd">=</strong> SentimentIntensityAnalyzer()</span><span id="11fb" class="nk lp it ng b gy ns nm l nn no">function <strong class="ng jd">=</strong> <strong class="ng jd">lambda</strong> title: vader<strong class="ng jd">.</strong>polarity_scores(title)['compound']<br/>news['compound'] <strong class="ng jd">=</strong> news['title']<strong class="ng jd">.</strong>apply(function)<br/>news<strong class="ng jd">.</strong>head(5)</span></pre><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi nt"><img src="../Images/b479286b687a7b3d5c9ccd9e1f2aacef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*icIa8t4QpEoRfVziqfIDCw.png"/></div></div></figure><p id="46e8" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">将情绪可视化</strong></p><p id="160e" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">我们将根据每行的符号和日期对数据框进行分组，然后可视化每天的平均复合得分。我们取“复合”行的横截面，翻转数据框，使日期在x轴上，然后将其绘制成条形图。</p><pre class="ky kz la lb gt nf ng nh ni aw nj bi"><span id="b5a3" class="nk lp it ng b gy nl nm l nn no">plt<strong class="ng jd">.</strong>rcParams['figure.figsize'] <strong class="ng jd">=</strong> [9, 6]<br/>news_mean <strong class="ng jd">=</strong> news<strong class="ng jd">.</strong>groupby(['symbol', 'date'])<strong class="ng jd">.</strong>mean()<strong class="ng jd">.</strong>unstack()<br/>news_mean <strong class="ng jd">=</strong> news_mean<strong class="ng jd">.</strong>xs('compound', axis<strong class="ng jd">=</strong>"columns")<strong class="ng jd">.</strong>transpose()<br/>news_mean<strong class="ng jd">.</strong>plot(kind<strong class="ng jd">=</strong>'bar')<br/>plt<strong class="ng jd">.</strong>show()</span></pre><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi nu"><img src="../Images/fefd06ede9a0c387ef0fcc3d6c4e28d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ojeF_ZBBBo_zeQcTjQFI-A.png"/></div></div></figure><p id="8ae5" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">比较情绪和价格差异</strong></p><p id="d32c" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">现在让我们看看情绪得分(复合)，并将它们与每天的价格差异(收盘价和开盘价之间的差异)进行比较。回想一下，复合分数是通过标准化负分数、中性分数和正分数来计算的。价格差异代表当天的美元收益或损失。我们将选择Nvidia股票价格进行分析。我们将忽略2022年2月5日和2022年2月6日，因为这两天是周六和周日，市场关闭。</p><p id="02a6" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">我们将使用雅虎！金融市场下载器获取Nvidia股票的数据。</p><pre class="ky kz la lb gt nf ng nh ni aw nj bi"><span id="a585" class="nk lp it ng b gy nl nm l nn no"># Install yfinance.<br/>!pip install yfinance<br/><strong class="ng jd">import</strong> yfinance <strong class="ng jd">as</strong> yf</span><span id="3271" class="nk lp it ng b gy ns nm l nn no"># Get data for Nvidia.<br/>nvidia <strong class="ng jd">=</strong> yf<strong class="ng jd">.</strong>download('NVDA',start<strong class="ng jd">=</strong>'2022-02-02',  end<strong class="ng jd">=</strong>'2022-02-09',progress<strong class="ng jd">=False</strong>)[['Open', 'Close', 'Volume']]<br/>nvidia<strong class="ng jd">.</strong>reset_index(inplace<strong class="ng jd">=True</strong>)</span><span id="6a6f" class="nk lp it ng b gy ns nm l nn no">nvidia<strong class="ng jd">.</strong>head(5)</span></pre><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi nv"><img src="../Images/f36a8c714642572d1f40a91b766214ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8bl5-KP-mIq8fEjkCAYDGA.png"/></div></div></figure><p id="d905" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">为包含每天的<br/>收盘价和开盘价之差的方差创建一个新变量。</p><pre class="ky kz la lb gt nf ng nh ni aw nj bi"><span id="5199" class="nk lp it ng b gy nl nm l nn no">nvidia['Variance'] <strong class="ng jd">=</strong> nvidia['Close'] <strong class="ng jd">-</strong> nvidia['Open']</span></pre><p id="9869" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">为复合变量创建一个新变量，并加载每天的复合得分。</p><pre class="ky kz la lb gt nf ng nh ni aw nj bi"><span id="6763" class="nk lp it ng b gy nl nm l nn no">compound <strong class="ng jd">=</strong> ['0.12', '0.10', '0.30', '0.04', '0.02']<br/>nvidia['Compound'] <strong class="ng jd">=</strong> compound<br/>nvidia<strong class="ng jd">.</strong>head(5)</span></pre><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi nw"><img src="../Images/02c4389d33a595cc62a400316e8788e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ulE7huv99GClq58ohE4XHA.png"/></div></div></figure><p id="da49" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">通过平均情绪得分直观显示股票价格的美元收益/损失。每个情绪得分代表从2022年2月2日到2022年2月8日的一个交易日。2022年2月5日和2022年2月6日不包括在内，因为它们发生在周六和周日闭市时。</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi nx"><img src="../Images/b6189b88dd7bcbb18d2d37310227ac45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6F9iS4kKqLDL-xa817HTYQ.png"/></div></div></figure><p id="9dfd" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">观察结果:</p><ul class=""><li id="ad08" class="mr ms it kb b kc kd kg kh kk mt ko mu ks mv kw mw mx my mz bi translated">当平均情绪得分稍为正值(0.12，0.10)时，损失略高于5.00美元。</li><li id="4556" class="mr ms it kb b kc na kg nb kk nc ko nd ks ne kw mw mx my mz bi translated">当平均情绪得分为中度正值(0.30)时，有3.47美元的收益。</li><li id="6c53" class="mr ms it kb b kc na kg nb kk nc ko nd ks ne kw mw mx my mz bi translated">当平均情绪得分勉强为正(0.04)时，有3.55美元的收益。</li><li id="3ea4" class="mr ms it kb b kc na kg nb kk nc ko nd ks ne kw mw mx my mz bi translated">当平均情绪得分勉强为正(0.02)时，有7.49美元的收益。</li></ul><p id="da24" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">结论:对于英伟达来说，在比较平均情绪得分和每日股价涨跌时，结果是不一致的。当情绪得分稍微为正时，就有损失。当情绪得分是适度积极的时候。当情绪得分勉强为正时，收益相当可观。我认为需要更多的研究来更好地理解情绪和股票价格之间的关系。</p><p id="4209" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">非常感谢你阅读我的文章！如果您有任何意见或反馈，请在下面添加。</p><p id="0dd2" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑报名成为一名媒体成员。会员资格让你可以无限制地接触媒体上的故事。你可以使用此链接<a class="ae ln" href="https://medium.com/@dniggl/membership" rel="noopener">https://medium.com/@dniggl/membership</a>注册</p></div></div>    
</body>
</html>