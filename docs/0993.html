<html>
<head>
<title>Building an End to End Search Engine Chatbot for the website using Amazon Lex, Google Knowledge Graph, and CloudFront</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Amazon Lex、Google Knowledge Graph和CloudFront为网站构建端到端搜索引擎聊天机器人</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/building-end-to-end-search-engine-chatbot-for-the-website-using-amazon-lex-google-knowledge-graph-60b001c7d2fb?source=collection_archive---------2-----------------------#2020-10-01">https://pub.towardsai.net/building-end-to-end-search-engine-chatbot-for-the-website-using-amazon-lex-google-knowledge-graph-60b001c7d2fb?source=collection_archive---------2-----------------------#2020-10-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="3bd5" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/cloud-computing" rel="noopener ugc nofollow" target="_blank">云计算</a>，<a class="ae ep" href="https://towardsai.net/p/category/programming" rel="noopener ugc nofollow" target="_blank">编程</a></h2><div class=""/><figure class="gl gn ka kb kc kd gh gi paragraph-image"><div class="gh gi jz"><img src="../Images/853d1f17471924e810d123ee0ecba510.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*Xm-b96uKj9RCJpPnuyHTMg.png"/></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">图片提供:AWS</figcaption></figure><p id="c4b3" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">Chabot一词是从1994年创造的原始术语“ChatterBot”中创造出来的，该术语本身表示可以进行人类对话的机器。虽然学习聊天机器人很有趣，但它的真正力量在于解决实际的商业世界用例，在这些用例中，你可以自动化大部分由人类进行的体力劳动。</p><p id="5fc5" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">想象一下，今天你正与一个智能扬声器互动，为你预订机票或点餐，十年前没有人会想到用同样的便利做这些事情。想象一下今天的客户支持，自动聊天机器人通过自动回复来处理客户。做同样的工作需要多少时间和金钱。这就是对话人工智能的力量，无论是基于语音的系统还是基于聊天的系统。</p><p id="d613" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">亚马逊提供了一个强大的服务，可以创建对话AI聊天机器人的亚马逊Lex，现在亚马逊Lex使用了与亚马逊Alexa(基于语音的系统)相同的对话引擎。</p><p id="3e05" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">今天，我们将使用Amazon Lex创建一个搜索机器人，它可以从web上为我们找到信息，并使用基于web的UI和AWS CloudFront上托管的web应用程序来部署它。</p><p id="ccf9" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">在我们深入构建对话人工智能聊天机器人之前，让我们首先了解对话人工智能领域中使用的重要术语。</p><p id="5a7a" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">重要术语:</p><ol class=""><li id="4f9c" class="li lj it km b kn ko kr ks kv lk kz ll ld lm lh ln lo lp lq bi translated"><strong class="km jd">意图:</strong>用户想要执行的动作。比如预订航班，我们称之为<strong class="km jd">预订航班</strong>意向。</li><li id="cb66" class="li lj it km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated"><strong class="km jd">话语:</strong>为了实现这一意图，用户可以通过哪些方式进行对话，例如，我想预订机票，你能帮我预订机票吗，等等。</li><li id="8347" class="li lj it km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated"><strong class="km jd"> Slot: </strong>这些是在任何对话中，当用户发声执行意图时的参数。例如，预订一张上午<strong class="km jd"> 10点</strong>从<strong class="km jd">纽约</strong>到<strong class="km jd">巴黎</strong>的机票。这里我们有3个时隙:时间、源和目的地。</li><li id="eac2" class="li lj it km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated"><strong class="km jd">时间段类型:</strong>每个时间段需要有一个数据类型，例如上午10点是<strong class="km jd">日期</strong>，来源和目的地是<strong class="km jd">城市</strong>。</li><li id="7e2e" class="li lj it km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated"><strong class="km jd">评分卡:</strong>Bot生成的响应卡，信息为卡片UI格式，底部有按钮。该卡使用图像以视觉格式提供背景。对订购产品的查询返回产品的照片。</li><li id="9d62" class="li lj it km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated"><strong class="km jd">知识图</strong> : <strong class="km jd"> </strong>这个术语不是聊天机器人专用的，而是更接近于实体关系建模，涉及到互连实体的集合或网络。</li><li id="037c" class="li lj it km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated"><strong class="km jd">云形成</strong>:不特定于对话式人工智能，但这种AWS服务允许将整个基础设施创建为代码(如web应用程序)，可以在几分钟内部署到任何地方。</li><li id="2f5b" class="li lj it km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated"><strong class="km jd"> CloudFront: </strong>不要将其与云形成混淆，它是一种内容交付网络服务，在离用户最近的边缘位置缓存静态数据(图像、视频或页面)，使应用程序快速加载。</li></ol><p id="7925" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">我们将按照以下步骤创建一个端到端的解决方案。</p><ol class=""><li id="ff06" class="li lj it km b kn ko kr ks kv lk kz ll ld lm lh ln lo lp lq bi translated">我们将从构建聊天机器人蓝图开始。</li><li id="472b" class="li lj it km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated">然后我们将建立知识图服务</li><li id="22e8" class="li lj it km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated">添加AWS lambda函数来实现响应</li><li id="939c" class="li lj it km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated">使用用于Bot UI的Cloudformation堆栈部署网站</li></ol><p id="b5af" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">让我们从第一步开始:</p><ol class=""><li id="60b3" class="li lj it km b kn ko kr ks kv lk kz ll ld lm lh ln lo lp lq bi translated"><strong class="km jd">构建聊天机器人蓝图:</strong></li></ol><p id="acb4" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">如果你是AWS的新手，那么你可以注册一个AWS账户，否则，AWS用户可以在AWS控制台内的机器学习服务下搜索Amazon Lex。</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi lw"><img src="../Images/a82b2a5553c6ce4ca7f0ddf1917e8b06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1EhW8V9Dy6XaWE2WBqxYBQ.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图1</figcaption></figure><p id="3f9b" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">您可以选择预定义的模板，但是对于我们的用例，我们将创建一个自定义bot。</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mf"><img src="../Images/d20edd963f3d43f8ffbc1d9ba8bf3e60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3vmp_-Drjr-Q9uDsqa-j7g.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图2</figcaption></figure><p id="ca85" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">对于其他信息，我将它们保留为默认值。</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mg"><img src="../Images/46b6a359de13e5a28a585d568217a62b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1gYOTS1zq78tW1MQHauTAQ.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图3</figcaption></figure><p id="4bab" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">第一步是为用户可以执行的特定操作创建意图。在这种情况下，我们将为问候用户创建WelcomeIntent。</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mh"><img src="../Images/c62554c079cf0388228987cc56bf8995.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uuEIagvsKwgKs_PHIl7gCA.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图4</figcaption></figure><p id="0ab4" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">现在我们将注意到用户可以要求调用这个意图的所有可能的话语(在我们的例子中是问候)</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mi"><img src="../Images/473e705995d51b8ef4ed59ed02fb71c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j5u3i5xoa4OG_ZCJTlEIdg.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图5</figcaption></figure><p id="65a8" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">一旦您记录了所有的话语，您将使用响应选项添加您希望您的聊天机器人给出的响应:</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mj"><img src="../Images/e4a3b83f4ccc507378f85271a0f4be69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pESVCdrf8MFyo1aLe9PirA.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图6</figcaption></figure><p id="fdaa" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">让我们来测试聊天机器人的第一个意图。为此，您必须构建bot并使用test bot部分。</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mk"><img src="../Images/8c8dbc6a34b3e97d456facb4cd8d3655.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fI0dUSd9-20eVLXoO67UnA.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图7</figcaption></figure><p id="992b" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">现在我们已经有了一个简单的bot基础，让我们更进一步添加新的意图:SearchCountry。这种意图允许用户请求聊天机器人搜索关于该国家的信息。</p><p id="3626" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated"><strong class="km jd"> 2。设置Google知识图服务:</strong></p><p id="d15c" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">现在，我们还需要一个搜索引擎，可以为我们搜索有关国家的信息。我们将使用Google知识图API服务。</p><p id="c9ca" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">为此，谷歌已经建立了一个关于如何开始谷歌知识图搜索API服务的详细记录的部分。</p><div class="ml mm gp gr mn mo"><a href="https://developers.google.com/knowledge-graph" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd jd gy z fp mt fr fs mu fu fw jc bi translated">谷歌知识图搜索API |谷歌开发者</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">知识图搜索API允许您在Google知识图中查找实体。API使用标准的schema.org…</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">developers.google.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc ke mo"/></div></div></a></div><p id="53fa" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">本质上，我们将获得一个API键来使用知识图服务API，并使用任何编程语言来发送带有查询字符串参数的HTTP请求(当在google search上搜索任何内容时，相同的机制起作用，observer address URL bar)。</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi nd"><img src="../Images/ea5da072ec5301f99480b34fed8dad0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*04CwNhYGomH0Vq1V6KnFZw.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">截图8:谷歌提供</figcaption></figure><p id="61ab" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated"><strong class="km jd"> 3。添加AWS lambda函数以实现响应</strong></p><p id="1762" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">一旦我们可以访问该服务，我们将添加一个新的意图，并将该意图与谷歌服务联系起来。</p><p id="3cb7" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">为此，我们将为用户搜索操作创建一个新的意图:SearchQuery</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi ne"><img src="../Images/09d4c9a100dc7af2741492ffe84bcc35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-R879d5TsMM8Y9uAnP-Oxw.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图9</figcaption></figure><p id="f635" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">现在我们必须在用户查询中标识<strong class="km jd">槽(实体)</strong>，在本例中，目的是搜索国家信息，因此我们可以得出结论，国家是槽之一。我们将添加一个名为country的插槽，并选择类型为AMAZON.country。</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi nf"><img src="../Images/78eaaad76e6fb4ae9e26fbd17afa33e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6nUqrjEFf-4YVkLWXMUj2A.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">截图10</figcaption></figure><p id="1f13" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">现在我们将添加话语，但这一次我们将用位置占位符替换实际的查询词，在我们的例子中是<strong class="km jd">国家</strong>。</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi ng"><img src="../Images/db02b471bad7ad1fbf03dbcbb41dc17d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6yXw0FkCnwtot-VD4gRYHA.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图11</figcaption></figure><p id="f4c6" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">到目前为止，我们已经创建了一个捕获国家值的机制，但是我们将如何返回搜索结果。为此，我们将使用AWS lambda函数通过调用知识图API服务来获取相关信息。</p><p id="818a" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">我们将前往搜索控制台，在计算服务下，我们将选择AWS lambda。</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi nh"><img src="../Images/c213fbdfa2dab4206a76848742f2cf4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xRx2Wjcc4MlAIKyPC3KLNw.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图12</figcaption></figure><p id="077c" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">我们将使用右上角的create function按钮创建一个新的AWS Lambda函数。</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi ni"><img src="../Images/c8a08800a405de70a1b8ed5e1bead742.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0VbGUS4X1dFRwBLqzbfvcQ.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图13</figcaption></figure><p id="2b7d" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">让我们从预定义的模板中选择一个用python编程的模板，如下所示:</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/8793e20d6c8f64725deaf80fea9fb472.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*C0kvxq2zrQJcy7sq70MHqw.png"/></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图14</figcaption></figure><p id="ee27" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">接下来，我们将填充相关信息来创建我们的函数</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/6bc3a98b31fe851616224a715cf5f406.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*3GwQQv71H_XgSZs5C37CEw.png"/></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图15</figcaption></figure><p id="4574" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">一旦创建了函数，让我们添加以下代码并注释现有的函数定义。</p><blockquote class="nk nl nm"><p id="3450" class="kk kl nn km b kn ko kp kq kr ks kt ku no kw kx ky np la lb lc nq le lf lg lh im bi translated">def search _ query(intent _ request):<br/><br/>query = get _ slots(intent _ request)[" Country "]<br/>params = {<br/>' query ':query，<br/> 'limit': 10，<br/> 'indent': True，<br/> 'key': api_key，<br/>}<br/><br/># URL = service _ URL+'？'+URL lib . parse . urlencode(params)<br/># response = JSON . loads(URL lib . request . URL open(URL))。read())<br/><br/># response = JSON . loads(requests . get(URL))<br/>URL = service _ URL<br/>response = JSON . loads(requests . get(URL，params=params)。内容)<br/>尝试:<br/>信息=响应['itemListElement'][0]['结果']['详细描述']['文章正文']</p><p id="9b01" class="kk kl nn km b kn ko kp kq kr ks kt ku no kw kx ky np la lb lc nq le lf lg lh im bi translated">除了:<br/> information= '对不起，找不到您要找的东西。'<br/> <br/>返回关闭(intent _ request[' session attributes ']，<br/>'已履行'，<br/> {'contentType ':'明文'，<br/>'内容':信息})</p><p id="66fa" class="kk kl nn km b kn ko kp kq kr ks kt ku no kw kx ky np la lb lc nq le lf lg lh im bi translated">def dispatch(intent _ request):<br/>" "<br/>当用户为这个机器人指定一个意图时调用。<br/>" " "</p><p id="d34f" class="kk kl nn km b kn ko kp kq kr ks kt ku no kw kx ky np la lb lc nq le lf lg lh im bi translated">logger . debug(' dispatch userId = { }，intentName={} '。格式(intent_request['userId']，intent _ request[' current ent '][' name ']))</p><p id="d714" class="kk kl nn km b kn ko kp kq kr ks kt ku no kw kx ky np la lb lc nq le lf lg lh im bi translated">intent _ name = intent _ request[' current ent '][' name ']</p><p id="9732" class="kk kl nn km b kn ko kp kq kr ks kt ku no kw kx ky np la lb lc nq le lf lg lh im bi translated">#如果intent _ name = = ' search query ':<br/>返回search_query(intent_request ),则分派给机器人的意图处理程序<br/></p><p id="b855" class="kk kl nn km b kn ko kp kq kr ks kt ku no kw kx ky np la lb lc nq le lf lg lh im bi translated">引发异常(“不支持名为“+ intent_name +”的意图”)</p><p id="90d9" class="kk kl nn km b kn ko kp kq kr ks kt ku no kw kx ky np la lb lc nq le lf lg lh im bi translated">" " " "— ——主处理程序——" " "</p><p id="2cb8" class="kk kl nn km b kn ko kp kq kr ks kt ku no kw kx ky np la lb lc nq le lf lg lh im bi translated">def lambda_handler(事件，上下文):<br/> """ <br/>根据意图路由传入的请求。<br/>请求的JSON主体在事件槽中提供。<br/> """ <br/> #默认情况下，将用户请求视为来自美洲/纽约时区。<br/> os.environ['TZ'] = '美洲/纽约'<br/>time . tz set()<br/>logger . debug(' event . bot . name = { } '。格式(事件['bot']['name']))</p><p id="69f7" class="kk kl nn km b kn ko kp kq kr ks kt ku no kw kx ky np la lb lc nq le lf lg lh im bi translated">退货派遣(事件)</p></blockquote><p id="c3f4" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">你可以在这里找到完整的lambda函数。</p><p id="1564" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">一旦函数准备就绪，单击deploy按钮来部署lambda函数。</p><p id="738d" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">部署lambda函数后，我们可以选择特定的lambda函数来完成聊天机器人的响应。</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi ns"><img src="../Images/d0a6f3f4f6d5e9b863607868b5a303f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x-xV_duksqTy4vurKtluhw.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图16</figcaption></figure><p id="5cbe" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">现在，让我们再次构建机器人，现在是时候测试我们的机器人是否可以搜索任何国家相关的信息。</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/becebd5dfe3090103fef6b0ee65351a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*6gpm5RWHM04JXbC-sUcalg.png"/></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图17</figcaption></figure><p id="317f" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated"><strong class="km jd"> 4。使用Cloudformation stack for Bot UI部署网站</strong></p><p id="1db8" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">现在我们已经准备好了搜索机器人，但我们必须考虑托管这个机器人的用户界面，最简单的方法是使用预定义的模板作为来自亚马逊<a class="ae nr" href="https://aws.amazon.com/blogs/machine-learning/deploy-a-web-ui-for-your-chatbot/" rel="noopener ugc nofollow" target="_blank">链接</a>的参考。</p><p id="ffe9" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">在这个活动中，我们将创建一个AWS云结构堆栈，只需点击几下鼠标就可以部署整个web应用程序。这种类型的部署方法被称为基础设施即代码。</p><p id="b008" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">确保您选择的区域与我们的bot相同:</p><p id="e0dd" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">北弗吉尼亚:<a class="ae nr" href="https://us-east-1.console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/create/review?templateURL=https://s3.amazonaws.com/aws-bigdata-blog/artifacts/aws-lex-web-ui/artifacts/templates/master.yaml&amp;stackName=lex-web-ui&amp;param_BootstrapBucket=aws-bigdata-blog" rel="noopener ugc nofollow" target="_blank">链接</a></p><p id="2ef9" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">俄勒冈州:<a class="ae nr" href="https://us-west-2.console.aws.amazon.com/cloudformation/home?region=us-west-2#/stacks/create/review?templateURL=https://s3.amazonaws.com/aws-bigdata-blog-replica-us-west-2/artifacts/aws-lex-web-ui/artifacts/templates/master.yaml&amp;stackName=lex-web-ui&amp;param_BootstrapBucket=aws-bigdata-blog-replica-us-west-2" rel="noopener ugc nofollow" target="_blank">链接</a></p><p id="03ce" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">爱尔兰:<a class="ae nr" href="https://eu-west-1.console.aws.amazon.com/cloudformation/home?region=eu-west-1#/stacks/create/review?templateURL=https://s3.amazonaws.com/aws-bigdata-blog-replica-eu-west-1/artifacts/aws-lex-web-ui/artifacts/templates/master.yaml&amp;stackName=lex-web-ui&amp;param_BootstrapBucket=aws-bigdata-blog-replica-eu-west-1" rel="noopener ugc nofollow" target="_blank">链接</a></p><p id="8b4b" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">悉尼:<a class="ae nr" href="https://ap-southeast-2.console.aws.amazon.com/cloudformation/home?region=ap-southeast-2#/stacks/create/review?templateURL=https://s3.amazonaws.com/aws-bigdata-blog-replica-ap-southeast-2/artifacts/aws-lex-web-ui/artifacts/templates/master.yaml&amp;stackName=lex-web-ui&amp;param_BootstrapBucket=aws-bigdata-blog-replica-ap-southeast-2" rel="noopener ugc nofollow" target="_blank">链接</a></p><p id="c5d7" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">你还必须填写如下所述的机器人的一些细节:</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi nu"><img src="../Images/b641ae8a67373ccd94407602c4a2ddf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SWNJE2G_hvCNgEdDlY-pPw.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图18</figcaption></figure><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi nv"><img src="../Images/6e8d3aff504c0a6f091898d9db85e509.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SA-6aF0UEQVo7r7l3Sh3jQ.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图19</figcaption></figure><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi nw"><img src="../Images/10289295d57639fe595d7e92a645a77b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VvOXDnQvfN8Cx_qYNTqAlw.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">截图20</figcaption></figure><p id="faa2" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">单击“创建”按钮将为我们创建一个堆栈。一旦创建并部署了堆栈，我们将会看到屏幕截图中提到的以下条目。</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi nx"><img src="../Images/049e23fa5ca4f38ae4735438e75ef2e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pzElcKaLdR1RFafMTLd1yg.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图21</figcaption></figure><p id="b61c" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">现在让我们来看看部署的CloudFront端点的域名(这是一种在离用户最近的边缘位置托管静态数据的服务)。</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi ny"><img src="../Images/7f74eeebef603e2ff6428d8c554dd1f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iExdXdgDLZFiL3D4TWIJ3g.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图22</figcaption></figure><p id="2c76" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">现在让我们来玩一下我们部署的搜索机器人。在一个新标签中打开URL，你会看到你的聊天机器人作为一个完整的页面展开。</p><figure class="lx ly lz ma gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi nz"><img src="../Images/4ba2f8ed3a1da249f89069cce25fe699.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3EptuyNfawPY0UdOCF_yvw.png"/></div></div><figcaption class="kg kh gj gh gi ki kj bd b be z dk translated">屏幕截图23</figcaption></figure><p id="1603" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">恭喜你。您已经准备好了一个基本的工作搜索机器人，现在您可以通过使用Iframe作为UI并使用一个比全屏小的对话框屏幕来进一步增强它。您可以在<strong class="km jd"> SnippetUrl </strong>查看更多代码片段。此外，您可以启用AWS匿名服务，为谁可以访问web应用程序提供一个安全层，但这超出了本文的范围。如果你想了解更多，请在回复部分告诉我你的想法。</p><p id="a626" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">如果你真的喜欢这篇文章，请继续关注更多关于人工智能/机器学习、数据分析和商业智能的教程。</p><p id="3c2a" class="pw-post-body-paragraph kk kl it km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">在<a class="ae nr" href="https://www.linkedin.com/in/anurag-bisht-39935a59/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上查看我</p></div></div>    
</body>
</html>