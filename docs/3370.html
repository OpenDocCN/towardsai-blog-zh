<html>
<head>
<title>Text Analysis with Pandas Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫指南文本分析</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/text-analysis-with-pandas-guide-af8b12873b04?source=collection_archive---------0-----------------------#2022-12-05">https://pub.towardsai.net/text-analysis-with-pandas-guide-af8b12873b04?source=collection_archive---------0-----------------------#2022-12-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7fb8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">关于如何使用Pandas对文本数据进行分析的实践指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d38b7bebb9166bd965c1e212682d8461.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*an7U3DkPajxIITNe"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@stonewyq?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">斯通王</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="33c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">大多数情况下，原始数据的形式使得分析变得困难。Python提供了许多内置函数来操作字符串对象。</p><p id="f425" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以编写自己的函数来操作字符串，并使用<code class="fe ls lt lu lv b">DataFrame.apply()</code>来应用它们，但这有时可能会很慢。</p><p id="cf34" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">相反，我们可以使用pandas函数，有些函数在本文中有介绍，但是如果您需要更多的函数，您可以查看文档。</p><h1 id="38d4" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">目录</h1><p id="59ad" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated"><a class="ae kv" href="#8f70" rel="noopener ugc nofollow"> 1。操纵案例</a> <br/> <a class="ae kv" href="#9de6" rel="noopener ugc nofollow"> 2。分割琴弦</a> <br/> <a class="ae kv" href="#cc83" rel="noopener ugc nofollow"> 3。替换字符串</a> <br/> <a class="ae kv" href="#8859" rel="noopener ugc nofollow"> 4。串联</a> <br/> <a class="ae kv" href="#5831" rel="noopener ugc nofollow"> 5。附加方法:</a> <br/> <a class="ae kv" href="#d189" rel="noopener ugc nofollow"> 6。从文本中提取信息</a></p><h1 id="8f70" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">1.操纵案例</h1><p id="d6f1" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">熊猫为字符串操作提供了几个功能:</p><ul class=""><li id="ae67" class="mt mu iq ky b kz la lc ld lf mv lj mw ln mx lr my mz na nb bi translated"><code class="fe ls lt lu lv b">.lower():</code>将DataFrame中字符串中的所有大写字符转换为小写，并在结果中返回小写字符串。</li><li id="e5af" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><code class="fe ls lt lu lv b">.upper():</code>将数据帧中字符串中的所有小写字符转换为大写，并在结果中返回大写字符串。</li><li id="7677" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><code class="fe ls lt lu lv b">.strip():</code>如果字符串的开头或结尾有空格，我们应该使用strip()修剪字符串以消除空格，或者删除数据帧中字符串包含的多余空格。</li><li id="b6ff" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><code class="fe ls lt lu lv b">.islower():</code>检查<code class="fe ls lt lu lv b">DataFrame</code>的索引中每个字符串的所有字符是否都是小写，并返回一个布尔值。</li><li id="9ffa" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><code class="fe ls lt lu lv b">.isupper():</code>检查<code class="fe ls lt lu lv b">DataFrame</code>索引中每个字符串的所有字符是否都是大写，并返回一个布尔值。</li><li id="fb28" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><code class="fe ls lt lu lv b">.isnumeric():</code>检查<code class="fe ls lt lu lv b">DataFrame</code>索引中每个字符串的所有字符是否都是数字，并返回一个布尔值。</li><li id="4752" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><code class="fe ls lt lu lv b">.swapcase():</code>它将表壳从下往上调换，反之亦然。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><pre class="kg kh ki kj gt nj lv nk bn nl nm bi"><span id="aea0" class="nn lx iq lv b be no np l nq nr">Lowercase all letters:<br/>0        lev gor'kov<br/>1                NaN<br/>2          brillouin<br/>3    albert einstein<br/>4     carl m. bender<br/>dtype: object</span></pre><pre class="ns nj lv nk bn nl nm bi"><span id="1722" class="nn lx iq lv b be no np l nq nr">Uppercase all letters:<br/>0        LEV GOR'KOV<br/>1                NaN<br/>2          BRILLOUIN<br/>3    ALBERT EINSTEIN<br/>4     CARL M. BENDER<br/>dtype: object</span></pre><pre class="ns nj lv nk bn nl nm bi"><span id="fdd6" class="nn lx iq lv b be no np l nq nr">Uppercase the first letter:<br/>0        Lev gor'kov<br/>1                NaN<br/>2          Brillouin<br/>3    Albert einstein<br/>4     Carl m. bender<br/>dtype: object</span></pre><pre class="ns nj lv nk bn nl nm bi"><span id="1020" class="nn lx iq lv b be no np l nq nr">Uppercase the first letter of each word:<br/>0        Lev Gor'Kov<br/>1                NaN<br/>2          Brillouin<br/>3    Albert Einstein<br/>4     Carl M. Bender<br/>dtype: object</span></pre><h1 id="9de6" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">2.拆分字符串</h1><p id="f41e" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated"><code class="fe ls lt lu lv b">.split(‘ ‘)</code>:按照给定的模式分割每个字符串。在下面的例子中，我们有一系列物理学家的名字，我们想把它们分成名和姓，并很好地格式化它们(给它们加标题)。使用<code class="fe ls lt lu lv b">expand=True</code>将返回结果<code class="fe ls lt lu lv b">DataFrame</code>，该结果很容易与另一个<code class="fe ls lt lu lv b">DataFrame</code>连接。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><pre class="kg kh ki kj gt nj lv nk bn nl nm bi"><span id="a6de" class="nn lx iq lv b be no np l nq nr">Before Splitting:<br/>0        lev gor'kov<br/>1                NaN<br/>2          brillouin<br/>3    albert einstein<br/>4     carl m. bender<br/>dtype: object</span></pre><pre class="ns nj lv nk bn nl nm bi"><span id="6736" class="nn lx iq lv b be no np l nq nr">After Splitting:<br/>  First Name  Last Name<br/>0        Lev    Gor'Kov<br/>1        NaN        NaN<br/>2  Brillouin       None<br/>3     Albert   Einstein<br/>4       Carl  M. Bender</span></pre><h1 id="cc83" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">3.替换字符串</h1><p id="0741" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">当处理文本数据时，您通常会想要从文本中删除一些字符或单词。<code class="fe ls lt lu lv b">.replace(a,b)</code>用值b替换值a。在下面的例子中，我们用空字符串替换<code class="fe ls lt lu lv b">Dr.</code>和<code class="fe ls lt lu lv b">Pr.</code>。</p><p id="1fb8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果要删除或替换的文本不清楚，可以使用正则表达式。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><pre class="kg kh ki kj gt nj lv nk bn nl nm bi"><span id="b900" class="nn lx iq lv b be no np l nq nr">Before Replacing:<br/>0            lev gor'kov<br/>1                    NaN<br/>2          Dr. brillouin<br/>3    Pr. albert einstein<br/>4         carl m. bender<br/>dtype: object</span></pre><pre class="ns nj lv nk bn nl nm bi"><span id="3f28" class="nn lx iq lv b be no np l nq nr">After Replacing:<br/>  First Name  Last Name<br/>0        Lev    Gor'Kov<br/>1        NaN        NaN<br/>2  Brillouin       None<br/>3     Albert   Einstein<br/>4       Carl  M. Bender</span></pre><h1 id="8859" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">4.连锁的</h1><p id="8944" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">如果您正在处理文本数据，连接两列是一项常见的任务。这可以使用<code class="fe ls lt lu lv b">.cat()</code>方法来完成。</p><ul class=""><li id="f17e" class="mt mu iq ky b kz la lc ld lf mv lj mw ln mx lr my mz na nb bi translated"><code class="fe ls lt lu lv b">cat(sep=’ ‘)</code>:它用一个给定的分隔符连接<code class="fe ls lt lu lv b">DataFrame</code>中的<code class="fe ls lt lu lv b">DataFrame</code>索引元素或每个字符串。在下面的例子中，我们有两个熊猫系列(名和姓),我们想把它们连接成一个熊猫系列。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><pre class="kg kh ki kj gt nj lv nk bn nl nm bi"><span id="5b06" class="nn lx iq lv b be no np l nq nr">Concatinate and ignore missing values:<br/>0      Albert Doe<br/>1      John Piter<br/>2    Robert David<br/>3            &lt;NA&gt;<br/>4       Jack Carl<br/>dtype: string</span></pre><pre class="ns nj lv nk bn nl nm bi"><span id="684a" class="nn lx iq lv b be no np l nq nr">Concatinate and replace missing values with "-":<br/>0      Albert Doe<br/>1      John Piter<br/>2    Robert David<br/>3          - Eden<br/>4       Jack Carl<br/>dtype: string</span></pre><h1 id="5831" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">5.其他方法:</h1><ul class=""><li id="a754" class="mt mu iq ky b kz mo lc mp lf nt lj nu ln nv lr my mz na nb bi translated"><code class="fe ls lt lu lv b">.startswith(pattern)</code>:如果DataFrame索引中的元素或字符串以模式开头，则返回true。</li><li id="5c7f" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><code class="fe ls lt lu lv b">.endswith(pattern)</code>:如果DataFrame索引中的元素或字符串以模式结束，则返回true。</li><li id="44be" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><code class="fe ls lt lu lv b">.repeat(value)</code>:它以给定的次数重复每个元素，如下例所示，每个字符串在DataFrame中出现两次。</li><li id="9980" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><code class="fe ls lt lu lv b">.find(pattern)</code>:返回模式第一次出现的第一个位置。</li></ul><h1 id="d189" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">6.文本信息抽取</h1><p id="cab6" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">在处理数据时，尤其是在NLP任务中，你需要对你的数据做一些基本的数据分析(查找长文本、干净文本、计算字数……)。</p><ul class=""><li id="3d71" class="mt mu iq ky b kz la lc ld lf mv lj mw ln mx lr my mz na nb bi translated"><code class="fe ls lt lu lv b">.len():</code>在<code class="fe ls lt lu lv b">len()</code>的帮助下，我们可以计算数据帧中每个字符串的长度&amp;，如果数据帧中有空数据，它返回<code class="fe ls lt lu lv b">NaN</code>。</li><li id="6b6f" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><code class="fe ls lt lu lv b">.count(pattern):</code>它返回<code class="fe ls lt lu lv b">DataFrame</code>中每个元素的模式出现次数，如下例所示，它计算<code class="fe ls lt lu lv b">DataFrame</code>中每个字符串的空格数，并返回每个字符串的总字数。</li><li id="2229" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">它返回该模式所有出现的列表。在下面的例子中，我们传递了一个正则表达式来查找数据中的时间。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/c2c7b33ab4e131a037b7bfaff06b08a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Q8PKE5aszTfrje1Q4m0lg.png"/></div></div></figure><p id="d5a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们使用链接，而不是直接为<code class="fe ls lt lu lv b">DataFrame</code>创建新列。方法链是一种编程风格，它按顺序调用多个方法调用，每个调用对同一个对象执行一个操作并返回它。方法链接大大增加了代码的可读性。</p><h1 id="2f37" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">结论</h1><ul class=""><li id="4a0f" class="mt mu iq ky b kz mo lc mp lf nt lj nu ln nv lr my mz na nb bi translated">我们已经介绍了熊猫操纵文本数据的一些功能。所有这些都很有用，在特殊情况下会派上用场。</li><li id="5513" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">Pandas是一个强大的数据分析和操作库。它提供了许多函数和方法来处理表格形式的数据。和其他工具一样，了解熊猫的最好方法是通过练习。</li></ul><p id="1afa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您的阅读。如果您有任何反馈或建议，请告诉我。</p></div></div>    
</body>
</html>