<html>
<head>
<title>Deep Dive Into Event-Driven Architecture</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">深入探究事件驱动的架构</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/software-engineering-baa4e7a8015c?source=collection_archive---------0-----------------------#2021-08-11">https://pub.towardsai.net/software-engineering-baa4e7a8015c?source=collection_archive---------0-----------------------#2021-08-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="210d" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/software-engineering" rel="noopener ugc nofollow" target="_blank">软件工程</a></h2><div class=""/><h1 id="1dfb" class="jw jx iq bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">介绍</h1><p id="4978" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事件驱动架构模式是一种著名的分布式异步架构模式，用于构建高度可伸缩的应用程序。这种架构应用事件来触发解耦服务并在其中进行交互，在使用微服务开发的现代应用程序中非常流行。在一个电子商务网站的购物车中可以看到事件驱动架构。它包含几个事件，如在购物车中添加商品、产品价格变化、结帐、付款、发货、交货通知等。这种体系结构有助于应用程序在高处理时间对来自各种来源的变化做出反应，而不会影响应用程序或过度配置资源。</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi ls"><img src="../Images/a97b731b51986f873b731411cf6ff5df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p5skI7I1EcXoEnL3M1Ca8w.png"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">图1:事件驱动的架构</figcaption></figure><p id="c570" class="pw-post-body-paragraph ku kv iq kw b kx mi kz la lb mj ld le lf mk lh li lj ml ll lm ln mm lp lq lr ij bi translated">事件驱动的体系结构有多种好处。它促进了跨多个服务的事件的实现，并提供了最终的一致性。一个额外的好处是，它还允许应用程序维护物化视图。</p><h1 id="1aa4" class="jw jx iq bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">事件驱动架构的拓扑结构</h1><p id="d0ba" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">理解事件驱动架构的拓扑对于深入研究事件驱动架构的各种子模式非常重要。这种架构模式基于两种主要的拓扑结构:</p><ul class=""><li id="bac9" class="mn mo iq kw b kx mi lb mj lf mp lj mq ln mr lr ms mt mu mv bi translated">调解人</li><li id="9b30" class="mn mo iq kw b kx mw lb mx lf my lj mz ln na lr ms mt mu mv bi translated">经纪人</li></ul><h1 id="572e" class="jw jx iq bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">中介拓扑</h1><p id="6139" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">中心介体在介体拓扑中起着重要作用。当需要通过一个中心中介协调一个事件的各个步骤时，通常使用它。这对于具有多个事件并且需要某种程度的编排来处理事件的事件很有帮助。</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi nb"><img src="../Images/785faea8364fcf4db0dbfbf125e37f01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cKToGfRrRIacq1VXZTr2mQ.png"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">图2:中介拓扑</figcaption></figure><p id="a816" class="pw-post-body-paragraph ku kv iq kw b kx mi kz la lb mj ld le lf mk lh li lj ml ll lm ln mm lp lq lr ij bi translated"><strong class="kw ja">示例:设计车辆中的GPS程序</strong></p><p id="a0c1" class="pw-post-body-paragraph ku kv iq kw b kx mi kz la lb mj ld le lf mk lh li lj ml ll lm ln mm lp lq lr ij bi translated">对于整个车辆安全、导航和成本估算计划，GPS数据被认为是为车辆设计合适的GPS的起点。它们旨在提供适当的业务和安全目标。它包括以下几个步骤:</p><ul class=""><li id="9f6e" class="mn mo iq kw b kx mi lb mj lf mp lj mq ln mr lr ms mt mu mv bi translated"><strong class="kw ja">越野车追踪→ </strong>越野车<strong class="kw ja"> </strong>被认为是能够熟练地在铺砌路面或砾石路面上行驶和驶离的任何类型的车辆。GPS数据可以提供车辆数据，且相应的信道将被触发以分析进一步的细节。</li><li id="d721" class="mn mo iq kw b kx mw lb mx lf my lj mz ln na lr ms mt mu mv bi translated"><strong class="kw ja">行程时间估算→ </strong> GPS提供从一个地点到另一个地点的行程时间估算，该数据可进一步用于分析与时间相关的业务影响。</li><li id="9bfe" class="mn mo iq kw b kx mw lb mx lf my lj mz ln na lr ms mt mu mv bi translated"><strong class="kw ja">导航到目的地</strong> →这对物流公司真的很有帮助。物流公司实施远程信息处理系统来提高司机的工作效率和安全性。这一概念可用于支持路线优化、燃油效率、驾驶员安全和协议</li></ul><p id="19aa" class="pw-post-body-paragraph ku kv iq kw b kx mi kz la lb mj ld le lf mk lh li lj ml ll lm ln mm lp lq lr ij bi translated">所有这些步骤都需要一定程度的协调来确定健身目标步骤，并且可以串行和并行完成。</p><p id="3485" class="pw-post-body-paragraph ku kv iq kw b kx mi kz la lb mj ld le lf mk lh li lj ml ll lm ln mm lp lq lr ij bi translated">中介拓扑中包含四个组件:</p><ul class=""><li id="d6b5" class="mn mo iq kw b kx mi lb mj lf mp lj mq ln mr lr ms mt mu mv bi translated">调解人</li><li id="94e9" class="mn mo iq kw b kx mw lb mx lf my lj mz ln na lr ms mt mu mv bi translated">长队</li><li id="c0b7" class="mn mo iq kw b kx mw lb mx lf my lj mz ln na lr ms mt mu mv bi translated">频道</li><li id="3671" class="mn mo iq kw b kx mw lb mx lf my lj mz ln na lr ms mt mu mv bi translated">处理器</li></ul><h2 id="632d" class="nc jx iq bd jy nd ne dn kc nf ng dp kg lf nh ni kk lj nj nk ko ln nl nm ks iw bi translated">调解人</h2><p id="233b" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">中介组件充当每个初始步骤的协调器。它识别事件类型或数据类型，并将其发送到特定通道。</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi nn"><img src="../Images/6e411e505398b87549ef012ad0fcc886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BvQ7sA8X_iJIrL9J86GJUg.png"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">图3:调解人</figcaption></figure><p id="32a1" class="pw-post-body-paragraph ku kv iq kw b kx mi kz la lb mj ld le lf mk lh li lj ml ll lm ln mm lp lq lr ij bi translated">有几种工具可以处理中介拓扑。例子——jBPM、Mule ESB、Apache Camel、Spring Integration等。</p><h2 id="472c" class="nc jx iq bd jy nd ne dn kc nf ng dp kg lf nh ni kk lj nj nk ko ln nl nm ks iw bi translated">长队</h2><p id="ca99" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事件队列用于将事件传送到事件中介器。这是一种企业消息队列系统。有几个消息传递系统，如RabbitMQ、Kafka等。</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi no"><img src="../Images/b643b8d67b5f572b22242d7ac58ed385.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EvVp6GbXLpyRX9E6ygyGTQ.png"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">图4:事件队列</figcaption></figure><h2 id="4bf4" class="nc jx iq bd jy nd ne dn kc nf ng dp kg lf nh ni kk lj nj nk ko ln nl nm ks iw bi translated">频道</h2><p id="ba4e" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事件通道由事件调解器用来将与初级事件中的每个步骤相关的特定事件传递给事件处理器。它可以是消息主题或消息队列。</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi np"><img src="../Images/efda19be9f55845b563c1beb6d24f4c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1rBxNBiqowNhclWXDaCGpA.png"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">图5:事件通道</figcaption></figure><h2 id="3b61" class="nc jx iq bd jy nd ne dn kc nf ng dp kg lf nh ni kk lj nj nk ko ln nl nm ks iw bi translated">处理器</h2><p id="6c0b" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它是一个组件或服务应用程序，包含在接收事件时执行业务需求的业务逻辑。如今，这些都是基于微服务的组件。它也可以是通道队列使用者。</p><h1 id="1f1e" class="jw jx iq bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">代理拓扑</h1><p id="6f9f" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在代理拓扑中，消息流在收到事件时分布在事件处理器中。它不同于中介，因为它不是中心。它在链式加工中很有用。小口喝；怎么了</p><p id="a940" class="pw-post-body-paragraph ku kv iq kw b kx mi kz la lb mj ld le lf mk lh li lj ml ll lm ln mm lp lq lr ij bi translated"><strong class="kw ja">举例:设计网上订餐系统</strong></p><p id="020e" class="pw-post-body-paragraph ku kv iq kw b kx mi kz la lb mj ld le lf mk lh li lj ml ll lm ln mm lp lq lr ij bi translated">在线订餐是从网站或应用程序订购食物的过程。每当用户从应用程序或网站在线订购食物时，它都会生成一个事件和不同事件的消息流来完成订购过程。这是一系列不同的流动:</p><ul class=""><li id="cd00" class="mn mo iq kw b kx mi lb mj lf mp lj mq ln mr lr ms mt mu mv bi translated">用户选择餐馆并点餐。</li><li id="fe48" class="mn mo iq kw b kx mw lb mx lf my lj mz ln na lr ms mt mu mv bi translated">支付点的食物。</li><li id="af72" class="mn mo iq kw b kx mw lb mx lf my lj mz ln na lr ms mt mu mv bi translated">餐厅收到通知</li><li id="68f6" class="mn mo iq kw b kx mw lb mx lf my lj mz ln na lr ms mt mu mv bi translated">交货合作伙伴收到通知</li><li id="2a19" class="mn mo iq kw b kx mw lb mx lf my lj mz ln na lr ms mt mu mv bi translated">餐厅将食物移交给送货伙伴</li><li id="ac32" class="mn mo iq kw b kx mw lb mx lf my lj mz ln na lr ms mt mu mv bi translated">送货伙伴将食物送到用户手中</li></ul><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi nq"><img src="../Images/8f9653f665ac37cc0155c2f94ffb7a09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3FRN8OByaUdVpv2d8x-8JA.png"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">图6:食品订购系统的代理拓扑</figcaption></figure><p id="1369" class="pw-post-body-paragraph ku kv iq kw b kx mi kz la lb mj ld le lf mk lh li lj ml ll lm ln mm lp lq lr ij bi translated">在上面的架构设计中，链接可用于满足业务功能。还引入了排队机制，使其更具可扩展性和精确性。当应用程序正在发展或提供未来的功能和扩展时，这种类型的拓扑结构很常见。</p><h1 id="86f4" class="jw jx iq bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">结论</h1><p id="4dfe" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">目前，事件驱动架构因其高可扩展性和分布式异步行为而非常流行。它非常适合微服务架构，并提供了一个高度解耦的系统。</p></div></div>    
</body>
</html>