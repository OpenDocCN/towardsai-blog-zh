<html>
<head>
<title>How to Use scikit-learn ‘eli5’ Library to Compute Permutation Importance?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用scikit-learn 'eli5 '库计算排列重要性？</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/how-to-use-scikit-learn-eli5-library-to-compute-permutation-importance-9af131ece387?source=collection_archive---------0-----------------------#2019-07-07">https://pub.towardsai.net/how-to-use-scikit-learn-eli5-library-to-compute-permutation-importance-9af131ece387?source=collection_archive---------0-----------------------#2019-07-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="e1e1" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">“eli5”|<a class="ae ep" href="https://towardsai.net/" rel="noopener ugc nofollow" target="_blank">对AI </a>的特征排列重要性</h2><div class=""/><div class=""><h2 id="cb29" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">了解scikit-learn的“eli5”库的工作原理，以计算样本房屋数据集的特征重要性并解释其结果</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/bf3ea124c5333c1e4ebdd50f7029677f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U1LPRoodN_CLmwq2SnFhPQ.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">抄送:福布斯</figcaption></figure><p id="d9e7" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi ma translated"><span class="l mb mc md bm me mf mg mh mi di">大多数数据科学家(ML guys)将他们的机器学习模型视为黑盒。他们不知道引擎盖下发生了什么事情。<br/>他们加载数据，进行手动数据清理&amp;准备他们的数据以适应ml模型。然后训练他们的模型&amp;预测目标值(回归问题)。</span></p><p id="2489" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">但是他们不知道，他们的模型认为哪些特性是重要的？</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/66cf973fa65501d0e62002c2bb90f1a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*TBnt_U1s-X_f9Eham_plCQ.jpeg"/></div></figure><p id="ddbd" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">为了回答上述问题，排列的重要性就显现出来了。</p><h1 id="fc57" class="mk ml iq bd mm mn mo mp mq mr ms mt mu kf mv kg mw ki mx kj my kl mz km na nb bi translated">这是什么？</h1><p id="843e" class="pw-post-body-paragraph le lf iq lg b lh nc ka lj lk nd kd lm ln ne lp lq lr nf lt lu lv ng lx ly lz ij bi translated">置换重要性是一种算法，它为数据集的每个特征变量计算重要性分数<br/>，<br/>通过计算模型对特征值随机置换的敏感度来确定重要性度量。</p><h1 id="983d" class="mk ml iq bd mm mn mo mp mq mr ms mt mu kf mv kg mw ki mx kj my kl mz km na nb bi translated">它是如何工作的？</h1><p id="78cd" class="pw-post-body-paragraph le lf iq lg b lh nc ka lj lk nd kd lm ln ne lp lq lr nf lt lu lv ng lx ly lz ij bi translated">这个概念非常简单:<br/>我们通过计算置换特征后模型预测误差的增加来衡量特征的重要性。<br/>如果打乱某个特征的值会增加模型误差，则该特征是“重要的”,因为在这种情况下，模型依赖于该特征进行预测。<br/>如果混洗某个特征的值而不改变模型误差，则该特征“不重要”,因为在这种情况下，模型会忽略该特征进行预测。</p><h1 id="aee6" class="mk ml iq bd mm mn mo mp mq mr ms mt mu kf mv kg mw ki mx kj my kl mz km na nb bi translated">我应该计算训练或测试数据(验证数据)的重要性吗？</h1><p id="f41a" class="pw-post-body-paragraph le lf iq lg b lh nc ka lj lk nd kd lm ln ne lp lq lr nf lt lu lv ng lx ly lz ij bi translated">这个问题的答案是，我们总是在测试数据上测量排列的重要性。<br/>基于训练数据的排列重要性是垃圾。基于训练数据的排列重要性使我们错误地认为特征对于预测是重要的，而实际上模型只是过度拟合，特征根本不重要。</p><h1 id="6153" class="mk ml iq bd mm mn mo mp mq mr ms mt mu kf mv kg mw ki mx kj my kl mz km na nb bi translated">Eli 5—scikit-learn库:-</h1><p id="a9fc" class="pw-post-body-paragraph le lf iq lg b lh nc ka lj lk nd kd lm ln ne lp lq lr nf lt lu lv ng lx ly lz ij bi translated">eli5是一个scikit学习库，用于计算排列重要性。</p><h2 id="ac2d" class="nh ml iq bd mm ni nj dn mq nk nl dp mu ln nm nn mw lr no np my lv nq nr na iw bi translated">使用eli5前要小心:-</h2><p id="0437" class="pw-post-body-paragraph le lf iq lg b lh nc ka lj lk nd kd lm ln ne lp lq lr nf lt lu lv ng lx ly lz ij bi translated"><strong class="lg ja"> 1。</strong>模型拟合后，计算排列重要性。<br/> <br/> <strong class="lg ja"> 2。</strong>我们总是计算测试数据(验证数据)的排列重要性。</p><p id="5319" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja"> 3。</strong>Eli 5的输出是HTML格式。所以，我们只能在ipython笔记本(即Jupiter笔记本，google collab &amp; kaggle内核等)中使用它。</p><h1 id="879a" class="mk ml iq bd mm mn mo mp mq mr ms mt mu kf mv kg mw ki mx kj my kl mz km na nb bi translated">现在，让我们对代码进行一些测试😋</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/31ac12c030527c9e988d1dc181097cc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*FKiXevC6N5GwuurghctByw.gif"/></div></figure><p id="afd9" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我构建了一个基本模型(RandomForestRegressor)来预测房屋数据集的销售价格。<br/>这是一个很好的数据集示例，用于显示排列的重要性，因为该数据集有许多特征。<br/>因此，我们可以看到哪些特性在预测值时会产生影响，哪些不会。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="df3e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><em class="nv">现在，我们使用‘Eli 5’库来计算排列重要性。</em></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="5286" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><em class="nv">你可以在下面看到上面代码的输出:- </em></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/573758931ba787f64447c24d4efa511e.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*8uCcJc3BZrJ1QdIGXPpXDQ.png"/></div></figure><h1 id="4dcd" class="mk ml iq bd mm mn mo mp mq mr ms mt mu kf mv kg mw ki mx kj my kl mz km na nb bi translated">解释结果:-</h1><p id="a8c3" class="pw-post-body-paragraph le lf iq lg b lh nc ka lj lk nd kd lm ln ne lp lq lr nf lt lu lv ng lx ly lz ij bi translated">功能的重要性自上而下递减。<br/>每一行中的第一个数字显示了由于该特征的重组而导致的模型性能的降低。<br/>第二个数字是对特征列的不同重组的性能降低的随机性的度量。<br/>在预测销售价格时，房屋数据集的总体质量特征对模型的影响最大。</p><h2 id="318a" class="nh ml iq bd mm ni nj dn mq nk nl dp mu ln nm nn mw lr no np my lv nq nr na iw bi translated"><em class="nx">你可以把住房数据设置进去。来自我的GitHub个人资料的csv格式</em> <br/>链接:-<a class="ae ny" href="https://github.com/abhinavsp0730/housing_data/blob/master/home-data-for-ml-course.zip" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/abhinavsp 0730/housing _ data/blob/master/home-data-for-ml-course . zip</a></h2><h2 id="9179" class="nh ml iq bd mm ni nj dn mq nk nl dp mu ln nm nn mw lr no np my lv nq nr na iw bi translated">你也可以得到。我的GitHub概要文件中的ipnyb文件(kaggle内核)链接:-</h2><h2 id="875a" class="nh ml iq bd mm ni nj dn mq nk nl dp mu ln nm nn mw lr no np my lv nq nr na iw bi translated"><a class="ae ny" href="https://github.com/abhinavsp0730/housing_data/blob/master/kernel659579854a(2).ipynb" rel="noopener ugc nofollow" target="_blank">https://github . com/abhinavsp 0730/housing _ data/blob/master/kernel 659579854 a(2)。ipynb </a></h2><h2 id="bceb" class="nh ml iq bd mm ni nj dn mq nk nl dp mu ln nm nn mw lr no np my lv nq nr na iw bi translated">谢谢你</h2><h2 id="dfb9" class="nh ml iq bd mm ni nj dn mq nk nl dp mu ln nm nn mw lr no np my lv nq nr na iw bi translated">如果你喜欢我的文章，那么鼓掌，跟我来，❤️.</h2><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/61ee3c58d4b040be8643e984391dfde0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*HnhqbqJ1vlHFEZmO5oEtqQ.gif"/></div></figure></div></div>    
</body>
</html>