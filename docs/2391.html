<html>
<head>
<title>Building a Search Engine using Elasticsearch in 15 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Elasticsearch在15分钟内建立一个搜索引擎</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/building-a-search-engine-using-elasticsearch-in-15-minutes-69b010ea420?source=collection_archive---------0-----------------------#2021-12-03">https://pub.towardsai.net/building-a-search-engine-using-elasticsearch-in-15-minutes-69b010ea420?source=collection_archive---------0-----------------------#2021-12-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="5b74" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/nlp" rel="noopener ugc nofollow" target="_blank">自然语言处理</a></h2><div class=""/><div class=""><h2 id="d986" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">著名板球运动员的搜索引擎(小索引)</h2></div><p id="b40a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">大家好😉,</p><p id="7b82" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">今天我们将在15分钟内了解如何在Elasticsearch中构建一个搜索引擎。还有多种开源技术也可以用来构建搜索引擎(也可以称为索引)，比如SOLR。但是我用了Elasticsearch。我最初的选择没有理由。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lk"><img src="../Images/78389a7cb64b91477924fb196ddd4513.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*35FdDpx2fC4pReRq"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">由<a class="ae ma" href="https://unsplash.com/@johnmcclane?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">安德烈斯·西蒙</a>在<a class="ae ma" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="733d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">为了便于理解，搜索引擎的构建可以分为多个步骤。为了更好的理解，我将一一解释。首先，我们需要了解什么是搜索引擎？？？简单说一下。搜索引擎基本上会为用户的查询提供合适的结果。比如我们可以想到谷歌。这是一个巨大的搜索引擎。谷歌将基本上给我们所有我们执行的搜索。将会有多个按顺序排列的结果。最适合查询的文档将按最上面的顺序给出。我相信你在这一点上理解搜索引擎的意义。谷歌、雅虎、必应、问问都是搜索引擎。所以我们的目的也是一样的，只是规模小。我会告诉你如何建立一个著名板球运动员的搜索引擎索引。</p><p id="7823" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在继续之前，我们必须了解一些术语以便更好地理解。我在下面列出了这样的术语。这些术语主要与信息检索有关。</p><h2 id="eb40" class="mb mc iq bd md me mf dn mg mh mi dp mj kx mk ml mm lb mn mo mp lf mq mr ms iw bi translated">弹性搜索</h2><p id="6fbc" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">Elasticsearch是一个分布式、开放的分析引擎。Elasticsearch结合了索引术语的倒排索引。Elasticsearch使用术语频率/逆向文档频率作为评分机制。它支持许多不同类型的索引查询。</p><ul class=""><li id="8c16" class="my mz iq kq b kr ks ku kv kx na lb nb lf nc lj nd ne nf ng bi translated">Kibana:基于Elasticsearch的可视化引擎</li><li id="c423" class="my mz iq kq b kr nh ku ni kx nj lb nk lf nl lj nd ne nf ng bi translated">Index:类似于MYSQL这样的数据库，它将数据和结果存储在输出中供用户查询。</li><li id="a9ad" class="my mz iq kq b kr nh ku ni kx nj lb nk lf nl lj nd ne nf ng bi translated">文档:数据库的行。个人数据记录</li></ul><blockquote class="nm nn no"><p id="7950" class="ko kp np kq b kr ks ka kt ku kv kd kw nq ky kz la nr lc ld le ns lg lh li lj ij bi translated">让我们立即开始建设吧。</p></blockquote><ol class=""><li id="3aa3" class="my mz iq kq b kr ks ku kv kx na lb nb lf nc lj nt ne nf ng bi translated"><strong class="kq ja">数据采集</strong></li></ol><p id="682d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">对于任何与数据相关的工作来说，最主要也是最困难的工作之一就是数据收集。因为我们是在小范围内做的，工作的一个维度会减少，但无论如何还有另一个维度。我用Cricbuzz网站删除了指数的原始数据。当我用泰米尔语做索引时，也有一个预处理步骤。抓取的元数据包含球员姓名、年龄、国家、球员类型、击球风格、保龄球风格、得分和三柱门。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi nu"><img src="../Images/c36938e0b696bd260061983f89cc2426.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hjjd-Y_29G4E0qg2"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">米卡·鲍梅斯特在<a class="ae ma" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="5018" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">2.<strong class="kq ja">数据预处理</strong></p><p id="c95d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">从Cricbuzz搜集的数据是英文的。我使用<a class="ae ma" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank"> beautifulsoup </a> python库从网络上抓取数据。由于搜索引擎将在泰米尔语，我们需要翻译成Unicode和将有一些不需要的字符在刮原始数据。在这一步中，我们需要清理数据。数据简化也在这一步完成。数据抓取和预处理python笔记书籍<a class="ae ma" href="https://github.com/sthenusan/SearchEngine-IR/blob/main/NoteBook/Web%20Scraping%20Cricbuzz%20for%20a%20player.ipynb" rel="noopener ugc nofollow" target="_blank">这里有</a>。所以完成这两个步骤后，经过预处理的关于板球运动员的数据就掌握在我们手中了。下面给出了预处理数据的例子。数据在抓取后没有更新。所以有些数据以后在现实世界中可能会改变。我已经为搜索引擎收集了100名球员的详细资料。年龄、Wickets和Runs只是数据集中的数字数据，而其他数据是文本数据。</p><pre class="ll lm ln lo gt nv nw nx ny aw nz bi"><span id="4f2a" class="mb mc iq nw b gy oa ob l oc od">{<br/>“பெயர்”: “விராட் கோலி”, <br/>“வயது”: 33, <br/>“வகை”: “துடுப்பாட்டவீரர்”, <br/>“துடுப்பாட்டம்”: “வலதுகை துடுப்பாட்டம்”,<br/>“பந்துவீச்சு”: “வலதுகை வேகபந்துவீச்சு”,<br/>“அணி”: “இந்தியா”, <br/>“இலக்குகள்”: 4, <br/>“ஓட்டங்கள்”: 12169,<br/>“விபரம்”:”இவர் தற்போது அணித் தலைவராக உள்ளார். வலது கை மட்டையாளரான இவர் சர்வதேச சிறந்த துடுப்பாட வீரர்களில் ஒருவராகக் கருதப்படுகிறார்”<br/>}</span></pre><p id="5198" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">3.<strong class="kq ja">安装所需软件</strong></p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi oe"><img src="../Images/187a2f414529a5131b02404e1ebafe6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Bvpg5uxf2qx4n5cJ"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">山姆·克拉克在<a class="ae ma" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="7fe7" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">当我们使用Elasticsearch进行索引时，我们必须首先安装Elasticsearch。您可以在此下载Elasticsearch <a class="ae ma" href="https://www.elastic.co/start" rel="noopener ugc nofollow" target="_blank">并按照说明进行安装。我计划使用Kibana作为可视化工具来检查来自Elasticsearch的查询结果。你可以从</a><a class="ae ma" href="https://www.elastic.co/start" rel="noopener ugc nofollow" target="_blank">这里</a>下载安装。您也可以使用postman来验证来自/发往Elasticsearch的请求。在安装了这两者之后，我们可以通过在浏览器中访问服务器的URL来简单地验证安装。在运行URL之前，您必须启动两个引擎的服务器。您只需在bin文件夹中打开终端，并为kibana服务器输入Kibana，为Elasticsearch服务器输入Elasticsearch。服务器启动后，我们可以在浏览器中检查URL。在默认设置中，Elasticsearch在<a class="ae ma" href="http://localhost:9200/" rel="noopener ugc nofollow" target="_blank"> http://localhost:9200/ </a>上运行，Kibana在<a class="ae ma" href="http://localhost:9200/" rel="noopener ugc nofollow" target="_blank"> http://localhost:5601/ </a>上运行。如果Elasticsearch安装成功，浏览器将显示类似下面的消息，而当您在浏览器中尝试URL时，成功安装Kibana将打开仪表板。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi of"><img src="../Images/2f2c444a01fb48f8f2a8cfcacf6e6adc.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/1*-UMz3yRY7q1X4nY5cSGJlg.png"/></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">作者图片</figcaption></figure><p id="2bd0" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">4.<strong class="kq ja">建筑指数</strong></p><p id="949b" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">由于我们已经成功地搭建了舞台，我们可以开始构建索引了。在创建索引之前，我们需要在Elasticsearch中设置我们的分析器。Analyzer意味着它将分析用户查询，并产生索引可以理解的重要术语。例如，Analyzer将标记用户查询中的术语，并删除停用词以获得更好的结果。我还提供了停用词检测、同义词支持和词干分析。为了更好地理解这些术语，你可以到<a class="ae ma" href="https://docs.enterprise.shopware.com/search/developer/stopwords_stemmer/" rel="noopener ugc nofollow" target="_blank">这里</a>。所有这些都依赖于语言。互联网上有很多词干分析器、停用词词典、同义词映射。你可以很容易地找到它们，并用它们来学习英语。但是对于泰米尔人来说，资源更少。因此，我为此手动创建了它们。当您提高分析器的质量时，自然会提高对索引的查询质量。要将分析器添加到索引中，我们必须将所有三个(<code class="fe og oh oi nw b">stopwords.txt, stem.txt and synonym.txt</code>)文件<a class="ae ma" href="https://github.com/sthenusan/SearchEngine-IR/tree/main/Stem_Stop_Synonym" rel="noopener ugc nofollow" target="_blank">复制到Elasticsearch config文件夹中名为(或创建)analysis的文件夹中。这必须在创建索引之前完成。我将我的索引命名为<code class="fe og oh oi nw b">cricsearch</code>。(您可以随意命名，但需要坚持下去，所有章节都在后面)我们将在Kibana dev tools仪表板中运行每个设置和查询。所有的查询和设置都使用特定于领域的语言。复制分析器后，您必须运行以下查询，将分析器添加到服务器。基本上，这将使用自定义分析器创建一个空索引(这里将使用Elasticsearch中默认的倒排索引)。这将包括自定义空白标记，自定义停用词检测，自定义词干分析器和自定义同义词。</a></p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="653d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">4.<strong class="kq ja">向索引添加文档</strong></p><p id="3ad6" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">可以通过<a class="ae ma" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html" rel="noopener ugc nofollow" target="_blank"> BULK API </a>将文档添加到索引中。主要可以通过两种方式来实现。第一种方法是使用Python Elasticsearch库。你可以在这里找到python实现<a class="ae ma" href="https://github.com/sthenusan/SearchEngine-IR/blob/main/NoteBook/bulkdata.py" rel="noopener ugc nofollow" target="_blank">的代码</a>。第二种方法是通过Kibana Dev工具控制台直接将文档添加到Elasticsearch索引中。你可能会发现特定领域语言脚本在这里是<a class="ae ma" href="https://github.com/sthenusan/SearchEngine-IR/blob/main/elasticsearch/datascript_es.txt" rel="noopener ugc nofollow" target="_blank"/>。我已经给了下面的脚本样本格式。</p><pre class="ll lm ln lo gt nv nw nx ny aw nz bi"><span id="e278" class="mb mc iq nw b gy oa ob l oc od">POST /_bulk<br/>{ "index" : { "_index" : "cricsearch", "_type" : "_doc", "_id" :1 }}<br/>{"பெயர்": "விராட் கோலி", "வயது": 33, "வகை": "துடுப்பாட்டவீரர்", "துடுப்பாட்டம்": "வலதுகை துடுப்பாட்டம்", "பந்துவீச்சு": "வலதுகை வேகபந்துவீச்சு", "அணி": "இந்தியா", "இலக்குகள்": 4, "ஓட்டங்கள்": 12169,"விபரம்":"இவர் தற்போது அணித் தலைவராக உள்ளார். வலது கை மட்டையாளரான இவர் சர்வதேச சிறந்த துடுப்பாட வீரர்களில் ஒருவராகக் கருதப்படுகிறார்."}</span></pre><p id="3779" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在成功添加文档后，我们的索引几乎是使用Elasicsearch构建的。我们将在下一节通过采石来验证我们的指数。</p><p id="8243" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">5.<strong class="kq ja">查询索引</strong></p><p id="dbd5" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">质疑建立索引的主要目的。索引(搜索引擎)必须为用户查询提供最合适的结果。我们还可以通过根据查询结果查询和修改分析器来提高索引质量。我将使用Kibana Dev工具控制台来查询和检查查询的结果。这里你也可以用邮递员。</p><p id="94cc" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">Elasticsearch支持大量的查询类型。我们会用例子一个一个看。在此之前，你可以在这里查看<a class="ae ma" href="https://github.com/sthenusan/SearchEngine-IR" rel="noopener ugc nofollow" target="_blank">我也在这里测试了我的分析器(停用词、词干和同义词支持)。</a></p><p id="d9b0" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">简单查询</strong></p><ul class=""><li id="5f27" class="my mz iq kq b kr ks ku kv kx na lb nb lf nc lj nd ne nf ng bi translated">下面我给出了一个简单的范围查询。它基本上给出了总积分(ஓட்டங்கள்)超过10000的玩家的详细信息。这里<code class="fe og oh oi nw b">range</code>表示范围查询，<code class="fe og oh oi nw b">gte</code>表示更大。</li></ul><pre class="ll lm ln lo gt nv nw nx ny aw nz bi"><span id="7369" class="mb mc iq nw b gy oa ob l oc od">GET /cricsearch/_search<br/>{<br/>    "query": {<br/>        "range": {<br/>            "ஓட்டங்கள்" : {<br/>                "gte" : "10000"<br/>            }<br/>        }<br/>    }<br/>}</span></pre><ul class=""><li id="6e14" class="my mz iq kq b kr ks ku kv kx na lb nb lf nc lj nd ne nf ng bi translated">下面是一个用于拼写错误处理的模糊多匹配查询的例子。这里的查询将给出விராட் கோலி).的详细信息当<code class="fe og oh oi nw b">fuzziness</code>被设置为<code class="fe og oh oi nw b">AUTO</code>时，即使有一定程度的拼写错误，它也会给出正确的结果</li></ul><pre class="ll lm ln lo gt nv nw nx ny aw nz bi"><span id="d600" class="mb mc iq nw b gy oa ob l oc od">GET /cricsearch/_search<br/>{<br/>   "size":1,<br/>   "query": {<br/>       "multi_match" : {<br/>           "query" : "விராட் கோலி",<br/>           "fuzziness": "AUTO",<br/>       "analyzer": "my_analyzer"<br/>       }<br/>   }<br/>}</span></pre><p id="7bec" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">布尔查询</strong></p><ul class=""><li id="3a30" class="my mz iq kq b kr ks ku kv kx na lb nb lf nc lj nd ne nf ng bi translated">在Elasticsearch中，不同的术语支持布尔查询。<strong class="kq ja">或</strong>拼写为<code class="fe og oh oi nw b">should</code><strong class="kq ja"/>拼写为<code class="fe og oh oi nw b">must</code>，NOT拼写为<code class="fe og oh oi nw b">must_not</code>。我给出了一个相对简单的查询，如下例所示。</li><li id="6dca" class="my mz iq kq b kr nh ku ni kx nj lb nk lf nl lj nd ne nf ng bi translated">该查询要求玩家是一个全能(சகலதுறைவீரர்) <strong class="kq ja">或</strong>保龄球手(பந்துவீச்சாளர்)，拥有超过60个三柱门(இலக்குகள்) <strong class="kq ja">和</strong>他的保龄球类型(பந்துவீச்சு)must匹配右臂快速保龄球(வலதுகை வேகபந்துவீச்சு)，他必须<strong class="kq ja">不是</strong>来自澳大利亚(அஸ்திரேலியா).</li></ul><pre class="ll lm ln lo gt nv nw nx ny aw nz bi"><span id="8b32" class="mb mc iq nw b gy oa ob l oc od">GET /cricsearch/_search<br/>{<br/> "query": {<br/>   "bool": {<br/>     "must": {<br/>       "bool" : { <br/>         "should": [<br/>           { "match": { "வகை": "சகலதுறைவீரர்" }},<br/>           { "match": { "வகை": "பந்துவீச்சாளர்" }} <br/>         ],<br/>         "filter": [ <br/>       {<br/>         "range": {<br/>           "இலக்குகள்" : {<br/>               "gte" : "60"<br/>           }<br/>         }<br/>       }<br/>     ],<br/>         "must": { "match": { "பந்துவீச்சு": "வலதுகை வேகபந்துவீச்சு" }} <br/>       }<br/>     },<br/>     "must_not": { "match": {"அணி": "அஸ்திரேலியா" }}<br/>   }<br/> }<br/>}</span></pre><p id="a9c2" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">通配符查询</strong></p><ul class=""><li id="609a" class="my mz iq kq b kr ks ku kv kx na lb nb lf nc lj nd ne nf ng bi translated">通配符查询意味着基于指定的模式匹配获取数据。当我们不知道该术语的确切拼写时，这很有帮助。Elasticsearch也支持这类查询。下面我将展示一些不同类型的通配符查询。</li><li id="d79b" class="my mz iq kq b kr nh ku ni kx nj lb nk lf nl lj nd ne nf ng bi translated">下面的查询将导致球员姓名(பெயர்)以“லி”字母结尾。</li></ul><pre class="ll lm ln lo gt nv nw nx ny aw nz bi"><span id="f161" class="mb mc iq nw b gy oa ob l oc od">GET /cricsearch/_search<br/>{<br/>    "query": {<br/>        "wildcard" : {<br/>	        "பெயர்" : "*லி"     <br/>	 }<br/>    }<br/>}</span></pre><ul class=""><li id="4d24" class="my mz iq kq b kr ks ku kv kx na lb nb lf nc lj nd ne nf ng bi translated">搜索以“லி”开头的球员名字，可以很容易地通过将上面查询中的<code class="fe og oh oi nw b">"பெயர்" : "*லி"</code>改为<code class="fe og oh oi nw b">"பெயர்" : "லி*"</code>来查询。</li><li id="e280" class="my mz iq kq b kr nh ku ni kx nj lb nk lf nl lj nd ne nf ng bi translated">在上面的查询中，将<code class="fe og oh oi nw b">"பெயர்" : "*லி"</code>改为<code class="fe og oh oi nw b">"பெயர்" : "*ர்ன*"</code>，可以找到名字中间有“ர்ன”字母的玩家名字。你可以在这里找到所有不同类型的通配符查询<a class="ae ma" href="https://github.com/sthenusan/SearchEngine-IR" rel="noopener ugc nofollow" target="_blank">。</a></li></ul><p id="5097" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">更像这样的查询</strong></p><ul class=""><li id="27e5" class="my mz iq kq b kr ks ku kv kx na lb nb lf nc lj nd ne nf ng bi translated">这是弹性搜索中的一种高级查询方法。它使用文本挖掘来获得索引中文档的正确结果。</li><li id="a167" class="my mz iq kq b kr nh ku ni kx nj lb nk lf nl lj nd ne nf ng bi translated">以下查询使用文本挖掘在每个文档的bio (விபரம்)字段中搜索了<code class="fe og oh oi nw b">"இவர் ஐசிசியின் ஒருநாள் பன்னாட்டுத் துடுப்பாட்டத்தின் பன்முக ஆட்டக்காரர்கள்"</code>句子。这将从文档的bio (விபரம்)字段的上述句子中检索至少有一个术语(如我在查询中指定的<code class="fe og oh oi nw b">"min_term_freq" : 1</code>)的所有文档。</li></ul><pre class="ll lm ln lo gt nv nw nx ny aw nz bi"><span id="b1a9" class="mb mc iq nw b gy oa ob l oc od">GET /cricsearch/_search<br/>{<br/>  "query": {<br/>    "more_like_this" : {<br/>      "fields" : ["விபரம்"],  <br/>      "like" : "இவர் ஐசிசியின் ஒருநாள் பன்னாட்டுத் துடுப்பாட்டத்தின்   பன்முக ஆட்டக்காரர்கள்",<br/>      "min_term_freq" : 1,<br/>      "max_query_terms" : 12<br/>    }<br/>  }<br/>}</span></pre><p id="0aeb" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">分桶查询</strong></p><ul class=""><li id="463d" class="my mz iq kq b kr ks ku kv kx na lb nb lf nc lj nd ne nf ng bi translated">这种类型的查询将有助于根据某些字段对文档进行分组。在下面的例子中，我用球队(அணி)作为场地来分组球员。该查询将输出包含玩家数量的球队列表。</li></ul><pre class="ll lm ln lo gt nv nw nx ny aw nz bi"><span id="55a8" class="mb mc iq nw b gy oa ob l oc od">GET /cricsearch/_search <br/>{<br/>  "aggs": {<br/>    "group_by_team": {<br/>      "terms": { "field": "<!-- -->அணி<!-- -->.keyword" }<br/>    }<br/>  }<br/>}</span></pre><p id="4867" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这里有一些更复杂的查询<a class="ae ma" href="https://github.com/sthenusan/SearchEngine-IR" rel="noopener ugc nofollow" target="_blank"/>。你也可以试试。所以在过去的几分钟里，我们成功地在Elasticsearch中建立了一个搜索，并通过多种不同类型的查询对其进行了检查。看看我的GitHub repo，其中包含这些代码，以进一步澄清。学习新事物的最佳实践总是我们自己去尝试。经验永远是更好的老师。因此，请关注这篇博客，尝试一下吧。在进步中你会学到更多。</p></div><div class="ab cl ol om hu on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="ij ik il im in"><p id="ecf6" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我相信你已经理解了上面讨论的关于弹性搜索和索引的所有问题。如果您有任何问题或任何澄清，不要犹豫，通过回复部分与我联系。感谢您花费宝贵的时间阅读本博客，我相信这将激励您继续学习更多关于弹性搜索和信息检索的知识。</p><p id="8780" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja"> <em class="np">欣赏文章？成为</em> </strong> <a class="ae ma" href="https://sthenusan.medium.com/membership" rel="noopener"> <strong class="kq ja"> <em class="np">中等会员</em> </strong> </a> <strong class="kq ja"> <em class="np">继续无限制学习。如果你使用上面的链接，我会收到你的一部分会员费，不需要你额外付费。提前感谢。</em>T13】</strong></p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi os"><img src="../Images/2f2acfe3058078835ebcbf3563f76e81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*obaZs2rtDUUBMzdg"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">乔恩·泰森在<a class="ae ma" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure></div></div>    
</body>
</html>