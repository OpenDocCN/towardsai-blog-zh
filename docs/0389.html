<html>
<head>
<title>Marketing Analytics (Part 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">营销分析(第一部分)</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/marketing-analytics-part-1-3cf5891b8dbd?source=collection_archive---------1-----------------------#2020-04-05">https://pub.towardsai.net/marketing-analytics-part-1-3cf5891b8dbd?source=collection_archive---------1-----------------------#2020-04-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="e60e" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">简单线性回归</h2><div class=""/><div class=""><h2 id="2d68" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">客户终身价值(CLV)</h2></div><p id="f302" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在市场营销中，<strong class="kq ja">客户终身价值</strong> ( <strong class="kq ja"> CLV </strong>或通常的CLTV)、<strong class="kq ja">客户终身价值</strong> (LCV)或终身价值<strong class="kq ja">价值</strong> (LTV)是对与<strong class="kq ja">客户的整个未来关系所产生的净利润的预测。</strong> <a class="ae lk" href="https://en.wikipedia.org/wiki/Customer_lifetime_value" rel="noopener ugc nofollow" target="_blank">维基百科</a></p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/3819e6d42cbebceab1f3f03edf965ecc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*UQtk_b6durwhxhO0PhHJkQ.jpeg"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">礼貌:Slidegeek.com</figcaption></figure><p id="13e9" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">为什么我们需要了解CLV？</p><ul class=""><li id="1210" class="lx ly iq kq b kr ks ku kv kx lz lb ma lf mb lj mc md me mf bi translated">CLV描述了公司通过与客户的关系积累的<strong class="kq ja"> <em class="mg">【预计未来净利润】</em> </strong>。</li><li id="a9a3" class="lx ly iq kq b kr mh ku mi kx mj lb mk lf ml lj mc md me mf bi translated">帮助识别潜在的有前途的客户，他们将产生更高的净利润</li><li id="f918" class="lx ly iq kq b kr mh ku mi kx mj lb mk lf ml lj mc md me mf bi translated">根据未来利润，帮助锁定客户或确定客户优先级</li></ul><p id="069c" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">净利润，也称为利润率，是利息的衡量标准。为此，我们必须找到影响利润幅度的驱动因素。</p><p id="fcc0" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这有一个棘手的方面。我们必须利用当时仅有的数据来预测未来的利润。因此，我们需要一个使用当前信息来预测未来利润的模型。</p><h2 id="3db3" class="mm mn iq bd mo mp mq dn mr ms mt dp mu kx mv mw mx lb my mz na lf nb nc nd iw bi translated">两步程序。</h2><p id="ad95" class="pw-post-body-paragraph ko kp iq kq b kr ne ka kt ku nf kd kw kx ng kz la lb nh ld le lf ni lh li lj ij bi translated">我们必须采用两步程序。我们必须从<code class="fe nj nk nl nm b">Year 1</code>中提取解释变量，并用它们来预测<code class="fe nj nk nl nm b">Year 2.</code>的因变量，我们称之为模型规范。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/b62b07646b2956e8e2fdbd87386950b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*u7A-Dkv27Nf8IG02ebFAEg.png"/></div></figure><p id="1107" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">指定模型后，我们将从<code class="fe nj nk nl nm b">Year 2</code>获取解释变量，并对<code class="fe nj nk nl nm b">Year 3</code>的未来利润进行预测</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div class="gh gi no"><img src="../Images/cc164e185951ec6d4ddadd5ed915415a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/format:webp/1*vo05Zb00wwx2ZA24LIFTSQ.png"/></div></figure><h2 id="b659" class="mm mn iq bd mo mp mq dn mr ms mt dp mu kx mv mw mx lb my mz na lf nb nc nd iw bi translated">典型的CLV数据集</h2><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div class="gh gi np"><img src="../Images/3a085dd8b7a393456145db874f6409ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:434/format:webp/1*jxKjTLc3idfkK0I-GOTjCg.png"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">数据集标题</figcaption></figure><h2 id="d598" class="mm mn iq bd mo mp mq dn mr ms mt dp mu kx mv mw mx lb my mz na lf nb nc nd iw bi translated">寻找关系</h2><p id="b461" class="pw-post-body-paragraph ko kp iq kq b kr ne ka kt ku nf kd kw kx ng kz la lb nh ld le lf ni lh li lj ij bi translated">首先，我们应该找到<code class="fe nj nk nl nm b">Year 1 </code>变量和预测<code class="fe nj nk nl nm b">futureMargin</code>变量之间的关系。</p><p id="986e" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们可以从<code class="fe nj nk nl nm b">stats</code>包中的<code class="fe nj nk nl nm b">cor()</code>函数中找到相关性，并使用<code class="fe nj nk nl nm b">corrplot</code>包中的<code class="fe nj nk nl nm b">corrplot()</code>函数创建一个相关性图来可视化这种关系</p><pre class="lm ln lo lp gt nq nm nr ns aw nt bi"><span id="a565" class="mm mn iq nm b gy nu nv l nw nx">library(corrplot)<br/> <br/>clv_data1 %&gt;% <br/>        select(nOrders, nItems, ... margin, futureMargin) %&gt;%<br/>        cor() %&gt;%<br/>        corrplot()</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/ca1f14933e4c110de2d6e1cc53cc9668.png" data-original-src="https://miro.medium.com/v2/resize:fit:814/format:webp/1*I6z--cWz2dOhO75uPPjFpw.png"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">相关图</figcaption></figure><p id="f4be" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">请注意，蓝色标出的是:</p><ul class=""><li id="2005" class="lx ly iq kq b kr ks ku kv kx lz lb ma lf mb lj mc md me mf bi translated">订单数量<code class="fe nj nk nl nm b">nOrders</code>、</li><li id="03c1" class="lx ly iq kq b kr mh ku mi kx mj lb mk lf ml lj mc md me mf bi translated">物品的数量<code class="fe nj nk nl nm b">nItems</code></li><li id="2726" class="lx ly iq kq b kr mh ku mi kx mj lb mk lf ml lj mc md me mf bi translated">未来保证金<code class="fe nj nk nl nm b">futureMargin</code></li></ul><p id="37b5" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们发现当前年份<code class="fe nj nk nl nm b">margin</code>和<code class="fe nj nk nl nm b">futureMargin</code>之间存在某种程度上更强的正相关性。</p><p id="f428" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><code class="fe nj nk nl nm b">daySinceLastOrder</code>和<code class="fe nj nk nl nm b">returnRatio</code>与<code class="fe nj nk nl nm b">futureMargin</code>呈中度负相关，用橙色标出。</p><h1 id="0a66" class="nz mn iq bd mo oa ob oc mr od oe of mu kf og kg mx ki oh kj na kl oi km nd oj bi translated">简单线性回归</h1><p id="cf70" class="pw-post-body-paragraph ko kp iq kq b kr ne ka kt ku nf kd kw kx ng kz la lb nh ld le lf ni lh li lj ij bi translated">既然我们已经检查了各种变量的相关性，我们将借助<code class="fe nj nk nl nm b">Year 1.</code>中的利润来预测未来的利润</p><p id="8470" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">既然我们已经研究了各种变量的相关性，我们将借助<code class="fe nj nk nl nm b">Year 1</code>边际来估算未来的边际。</p><p id="5c26" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><em class="mg">我们选择保证金是因为两个变量之间的相关性最高</em>。</p><blockquote class="ok"><p id="a3ea" class="ol om iq bd on oo op oq or os ot lj dk translated">当我们仅使用一个独立变量进行预测时，我们称该模型为简单线性回归。</p></blockquote><blockquote class="ou ov ow"><p id="0c5d" class="ko kp mg kq b kr ox ka kt ku oy kd kw oz pa kz la pb pc ld le pd pe lh li lj ij bi translated">事实上，完美线性相关的理想情况，即我们可以用给定的X值准确预测Y，是非常不可能的。</p></blockquote><p id="813b" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">大多数时候，数据点是分散的。我们通过拟合一条穿过散乱数据点的直线来确定X和Y之间关系的方向。</p><p id="f485" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们使用<a class="ae lk" href="https://www.mathsisfun.com/data/least-squares-regression.html" rel="noopener ugc nofollow" target="_blank">最小二乘估计(LSE) </a>程序来帮助我们找到回归线并返回其系数。</p><p id="26f0" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">预测值、线上的一个点和实际值、分散的数据点上的一个数据点之差，叫做<strong class="kq ja"><em class="mg"/></strong>预测误差或<strong class="kq ja"><em class="mg"/></strong>。</p><p id="e059" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们可以在<code class="fe nj nk nl nm b">stats</code>包的<code class="fe nj nk nl nm b">lm</code>函数中使用一个公式对象来指定线性回归的顺序。</p><pre class="lm ln lo lp gt nq nm nr ns aw nt bi"><span id="9c07" class="mm mn iq nm b gy nu nv l nw nx">slm &lt;- lm(futureMargin ~ margin, data = clv_data1) <br/>summary(slm)</span></pre><p id="0296" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">请注意，我们将使用clv数据来预测作为利润函数的未来利润。我们将模型存储为<code class="fe nj nk nl nm b">slm</code>，然后使用summary函数来获得结果的概述。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="pg ph di pi bf pj"><div class="gh gi pf"><img src="../Images/7d529252b5136cc1f1abe5cf852ecca5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cP4Vv5lT2A-pAs4Z82CCOw.png"/></div></div></figure><p id="cd33" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">查看利润率的系数估计值，其值大约为0.65(大于“零”)，这意味着利润率越高，我们对未来利润率的预期就越高。</p><p id="1844" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">另外，看一下<em class="mg">倍数R平方，</em>值约为0.32意味着，中的利润率可以解释未来利润率中约30%的变化<code class="fe nj nk nl nm b">Year 1.</code></p><h2 id="cb61" class="mm mn iq bd mo mp mq dn mr ms mt dp mu kx mv mw mx lb my mz na lf nb nc nd iw bi translated">关系的可视化</h2><p id="0c97" class="pw-post-body-paragraph ko kp iq kq b kr ne ka kt ku nf kd kw kx ng kz la lb nh ld le lf ni lh li lj ij bi translated">下面的<code class="fe nj nk nl nm b">ggplot</code>图让我们更好地了解了<code class="fe nj nk nl nm b">year 1</code>余量和<code class="fe nj nk nl nm b">year2</code>余量之间的关系</p><pre class="lm ln lo lp gt nq nm nr ns aw nt bi"><span id="a65a" class="mm mn iq nm b gy nu nv l nw nx">ggplot(clv_data1,aes(margin,futureMargin)) +<br/>geom_point() +<br/>geom_smooth(method=lm,se=FALSE) +<br/>xlab("Marginyear1") +<br/>ylab("Marginyear2")</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/9ebec9817cc94824280dfa6b34f4d2e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*8L9sg07wWxwtS3_kJLHBHA.png"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">第一年利润和第二年利润的散点图</figcaption></figure><p id="a74d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">如果要使用线性回归建模方法，我们需要做一些假设。</p><h1 id="333e" class="nz mn iq bd mo oa ob oc mr od oe of mu kf og kg mx ki oh kj na kl oi km nd oj bi translated">假设(简单线性回归模型)</h1><ul class=""><li id="4f23" class="lx ly iq kq b kr ne ku nf kx pl lb pm lf pn lj mc md me mf bi translated">因变量和自变量之间的线性关系。</li><li id="b26f" class="lx ly iq kq b kr mh ku mi kx mj lb mk lf ml lj mc md me mf bi translated">自变量不应包含任何测量误差(弱外生性)</li><li id="3181" class="lx ly iq kq b kr mh ku mi kx mj lb mk lf ml lj mc md me mf bi translated">残差应该是不相关的</li><li id="1981" class="lx ly iq kq b kr mh ku mi kx mj lb mk lf ml lj mc md me mf bi translated">残差应该在零附近随机变化，并且它们的期望值应该等于零</li><li id="3a51" class="lx ly iq kq b kr mh ku mi kx mj lb mk lf ml lj mc md me mf bi translated">预测误差的方差应该是常数(同质方差)</li><li id="0c4a" class="lx ly iq kq b kr mh ku mi kx mj lb mk lf ml lj mc md me mf bi translated">在进行统计显著性检验时，我们必须假设误差是正态分布的</li></ul><h1 id="b64a" class="nz mn iq bd mo oa ob oc mr od oe of mu kf og kg mx ki oh kj na kl oi km nd oj bi translated">未完待续…</h1><p id="9a40" class="pw-post-body-paragraph ko kp iq kq b kr ne ka kt ku nf kd kw kx ng kz la lb nh ld le lf ni lh li lj ij bi translated">让我们在下一篇文章中看看如何使用多元线性回归模型更好地预测未来的利润。</p></div></div>    
</body>
</html>