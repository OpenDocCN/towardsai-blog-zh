<html>
<head>
<title>Basics of Time Series with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python时间序列基础</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/basic-of-time-series-with-python-a2f7cb451a76?source=collection_archive---------0-----------------------#2021-01-08">https://pub.towardsai.net/basic-of-time-series-with-python-a2f7cb451a76?source=collection_archive---------0-----------------------#2021-01-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="3ded" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/data-visualization" rel="noopener ugc nofollow" target="_blank">数据可视化</a></h2><div class=""/><div class=""><h2 id="67c8" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">熊猫时间序列的工作函数和基本原理</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/83f34b8fb7fd4db9a98b84f7fa88ffcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wyifYvBs62uqwT0s"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@isaacmsmith?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">艾萨克·史密斯</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="0d2e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">时间序列分析是我们周围发生的关于时间的日常活动的一部分。随着日、月、年的流逝，我们周围的观察留下了一些信息。为了获得这些信息，我们从统计分析中获得帮助，以某些格式制作数据/信息并进行分析。现在，随着越来越多的数据在任何地方生成，很难使用简单的低级工具进行分析。因此，新的工具和算法被开发出来，使得大量的数据以合适的格式存在，并解决我们获取信息的目的。</p><p id="6e70" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">时间序列数据的收集和存储方式有助于我们预测未来，并通过每年增加的收入稳定业务增长。</p><p id="5ce9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们在时间序列数据中处理什么？简单地说，我们处理时间和日期。哦！等一下，但这不仅仅是时间和日期。它由时间中的秒、分和小时以及日期中的日、周、月和年组成。</p><p id="bbec" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">时间序列在许多领域都有应用，如天气预报、股票市场、信号系统、数据传输管理等。</p><div class="me mf gp gr mg mh"><a href="https://medium.com/towards-artificial-intelligence/time-series-analysis-with-python-6002ec6d5aa4" rel="noopener follow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd jd gy z fp mm fr fs mn fu fw jc bi translated">用Python进行时间序列分析</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">熊猫数据框的日期和时间分析</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">medium.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv lb mh"/></div></div></a></div><p id="00d8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们将逐步用python对时间序列进行分析和实践。python中处理数据和时间的基本功能是<code class="fe mw mx my mz b">datetime</code>。</p><pre class="ks kt ku kv gt na mz nb nc aw nd bi"><span id="f18c" class="ne nf it mz b gy ng nh l ni nj">#first we have to import the datetime object in python<br/>from datetime import datetime <br/>datetime(year=2020, month=12, day=30)</span><span id="6093" class="ne nf it mz b gy nk nh l ni nj">#Output: <br/>datetime.datetime(2020, 12, 30, 0, 0)</span></pre><p id="6012" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们在输出中注意到的一件事是两个零，这些零指的是三个参数年、月和日之后的小时和分钟，这是必需的。</p><pre class="ks kt ku kv gt na mz nb nc aw nd bi"><span id="7d48" class="ne nf it mz b gy ng nh l ni nj">#lets give other arguments also</span><span id="e765" class="ne nf it mz b gy nk nh l ni nj">datetime(year=2020, month=12, day=30, hour=2, minute=3, second=15,<br/>         microsecond=45)</span><span id="ae74" class="ne nf it mz b gy nk nh l ni nj">#output:</span><span id="fcbc" class="ne nf it mz b gy nk nh l ni nj">datetime.datetime(2020, 12, 30, 2, 3, 15, 45)</span></pre><p id="f146" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">嗯，我们看到用<code class="fe mw mx my mz b">datetime</code>对象创建数据和时间。在我们深入探讨之前，让我们先了解一下python中对时间序列的一些定义。</p><ul class=""><li id="b69e" class="nl nm it lk b ll lm lo lp lr nn lv no lz np md nq nr ns nt bi translated"><strong class="lk jd"> <em class="nu"> Datetime: </em> </strong>用于python中时间和序列的基本功能。</li><li id="a6d9" class="nl nm it lk b ll nv lo nw lr nx lv ny lz nz md nq nr ns nt bi translated"><strong class="lk jd"> <em class="nu"> Dateutils: </em> </strong>也是一个基本的函数对象但是作为第三方模块。如果您的python环境中没有安装<code class="fe mw mx my mz b">dateutils</code>，您可以通过pip命令安装它。</li></ul><pre class="ks kt ku kv gt na mz nb nc aw nd bi"><span id="b625" class="ne nf it mz b gy ng nh l ni nj">pip install python-dateutil</span></pre><ul class=""><li id="c013" class="nl nm it lk b ll lm lo lp lr nn lv no lz np md nq nr ns nt bi translated"><strong class="lk jd"> <em class="nu">时间戳:</em> </strong>用来知道物体在特定时刻的确切参照物。</li><li id="7cb4" class="nl nm it lk b ll nv lo nw lr nx lv ny lz nz md nq nr ns nt bi translated"><strong class="lk jd"> <em class="nu">时间增量:</em> </strong>它是一个<code class="fe mw mx my mz b">datetime</code>类中两个时间戳之间以天、小时、分钟或秒为单位的持续时间。</li><li id="aa27" class="nl nm it lk b ll nv lo nw lr nx lv ny lz nz md nq nr ns nt bi translated"><strong class="lk jd"> <em class="nu">日历:</em> </strong>类Calendar对象包含了很多与日历相关的功能。通过使用calendar类，我们可以访问许多方法，如<em class="nu">日历</em>、<em class="nu">弱日</em>、<em class="nu">月范围</em>、<em class="nu">月</em>、<em class="nu"> HTML日历</em>等等。</li><li id="3cb3" class="nl nm it lk b ll nv lo nw lr nx lv ny lz nz md nq nr ns nt bi translated"><strong class="lk jd"> <em class="nu">时间间隔:</em> </strong>是一个间隔时间点，即起点和终点。</li><li id="455f" class="nl nm it lk b ll nv lo nw lr nx lv ny lz nz md nq nr ns nt bi translated"><strong class="lk jd"> <em class="nu"> Time: </em> </strong>它是<code class="fe mw mx my mz b">datetime</code>类中的一个方法，我们可以在其中访问和使用很多时间功能。</li></ul><p id="8e72" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">日期和时间功能也在<strong class="lk jd"> NumPy </strong>库中。它们的名字分别是<code class="fe mw mx my mz b">datetime64</code>和<code class="fe mw mx my mz b">timedelta64</code>。</p><p id="d786" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们还可以在<strong class="lk jd">熊猫</strong>库中看到数据和时间的初级创建方法。它们如下所示:</p><p id="fdcf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在日期时间→ <code class="fe mw mx my mz b">to_datetime</code>，<code class="fe mw mx my mz b">to_range</code></p><p id="41ac" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">时间增量→ <code class="fe mw mx my mz b">to_timedelta</code>、<code class="fe mw mx my mz b">timedelta_range</code></p><p id="11b9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在时间跨度上→ <code class="fe mw mx my mz b">period</code>，<code class="fe mw mx my mz b">period_range</code></p><p id="68fa" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">时间序列分析中日期和时间的良好用途是当我们在序列或数据帧中使用日期或时间组件作为索引时。系列是单个列，而数据框是矩阵形式的多个列的组合。</p><div class="me mf gp gr mg mh"><a href="https://medium.com/towards-artificial-intelligence/fully-explained-linear-regression-with-python-fe2b313f32f3" rel="noopener follow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd jd gy z fp mm fr fs mn fu fw jc bi translated">用Python全面解释线性回归</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">如何用一个真实的例子解决回归问题。</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">medium.com</p></div></div><div class="mq l"><div class="oa l ms mt mu mq mv lb mh"/></div></div></a></div><p id="5d0d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe mw mx my mz b">dateutils</code>使用处理部分字符串的解析。下面给出的例子说明了如何解析用来从日期和时间格式的字符串中获取日期时间格式。</p><pre class="ks kt ku kv gt na mz nb nc aw nd bi"><span id="ec81" class="ne nf it mz b gy ng nh l ni nj">#import the parser function from the dateutil library<br/>from dateutil import parser</span><span id="6a69" class="ne nf it mz b gy nk nh l ni nj">date = parser.parse("10th of July, 2015")<br/>date</span><span id="423f" class="ne nf it mz b gy nk nh l ni nj">#output:<br/>datetime.datetime(2015, 7, 10, 0, 0)<br/>-------------------------------------------------------------------</span><span id="343a" class="ne nf it mz b gy nk nh l ni nj">#import the parse for string <br/>from dateutil.parser import parse</span><span id="fa0a" class="ne nf it mz b gy nk nh l ni nj">parse("Yesterday was January 4, 2021", fuzzy_with_tokens=True)</span><span id="ab9f" class="ne nf it mz b gy nk nh l ni nj">#output:<br/>(datetime.datetime(2021, 1, 4, 0, 0), ('Yesterday was ', ' ', ' '))</span></pre><p id="1437" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，我们将讨论pandas的日期和时间，因为使用pandas，我们可以处理具有大量数据的序列或数据帧，并且使用python可以轻松地将日期/时间作为索引。</p><p id="6f1c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">熊猫的时间序列示例:</p><pre class="ks kt ku kv gt na mz nb nc aw nd bi"><span id="bc53" class="ne nf it mz b gy ng nh l ni nj">#import pandas library<br/>import pandas as pd</span><span id="4afb" class="ne nf it mz b gy nk nh l ni nj">pd.Timedelta("2 days")</span><span id="9e7f" class="ne nf it mz b gy nk nh l ni nj">#output: Timedelta('2 days 00:00:00')</span></pre><p id="26d6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了在pandas中制作一系列日期并将其用作索引，我们使用<code class="fe mw mx my mz b">DatetimeIndex</code>。</p><pre class="ks kt ku kv gt na mz nb nc aw nd bi"><span id="8cb3" class="ne nf it mz b gy ng nh l ni nj">index = pd.DatetimeIndex(['2020-1-20', '2020-02-01','2021-01-01', <br/>                          '2021-02-01'])<br/>index</span><span id="4ed6" class="ne nf it mz b gy nk nh l ni nj">#output:<br/>DatetimeIndex(['2020-01-20', '2020-02-01', '2021-01-01', <br/>               '2021-02-01'], dtype='datetime64[ns]', freq=None)</span></pre><p id="858c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">假设我们要制作另一个系列，并将该索引系列作为另一个系列的索引。因此，将形成两列，我们也可以称之为数据帧。要用一个列制作一个系列，我们使用<code class="fe mw mx my mz b">pd.series</code>。</p><pre class="ks kt ku kv gt na mz nb nc aw nd bi"><span id="36eb" class="ne nf it mz b gy ng nh l ni nj">data = pd.Series([0, 1, 2, 3], index=index)<br/>print(data)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/8c962950c6f85152a31a51fc278d9a29.png" data-original-src="https://miro.medium.com/v2/resize:fit:292/format:webp/1*t13Yu-W5HtzwZfnbbJjoxQ.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">一个数据帧中的两个系列。作者图片</figcaption></figure><p id="55e8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了制作一个数据框架，我们可以用熊猫的数据框架</p><pre class="ks kt ku kv gt na mz nb nc aw nd bi"><span id="2ce2" class="ne nf it mz b gy ng nh l ni nj">df = pd.DataFrame({'year': [2020, 2021], 'month': [1, 2], 'day': [1,<br/>                   1]})<br/>print(df)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/52e479095ae68be86594d2f151489830.png" data-original-src="https://miro.medium.com/v2/resize:fit:328/format:webp/1*2hXTrTe7OVhZve-E0Y5GlA.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">日期的数据框。作者图片</figcaption></figure><p id="650a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们可以通过使用<code class="fe mw mx my mz b">to_datetime</code>将该数据帧转换为<code class="fe mw mx my mz b">datetime</code>格式</p><pre class="ks kt ku kv gt na mz nb nc aw nd bi"><span id="9d88" class="ne nf it mz b gy ng nh l ni nj">pd.to_datetime(df)</span><span id="bfca" class="ne nf it mz b gy nk nh l ni nj">#output:<br/>0   2020-01-01<br/>1   2021-02-01<br/>dtype: datetime64[ns]</span></pre><p id="cd2b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们可以使用pd.series创建日期列的序列</p><pre class="ks kt ku kv gt na mz nb nc aw nd bi"><span id="74b0" class="ne nf it mz b gy ng nh l ni nj">series_date = pd.Series(['2020-1-20', '2020-1-21', '2020-1-22',<br/>              '2020-1-23', '2020-1-24', '2020-1-25', '2020-1-26'])<br/>print(series_date)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi od"><img src="../Images/521855949c98494a62ba522f322729b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:262/format:webp/1*_O34H4XJ6gbnOn1J1ymvxQ.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">一系列日期。作者图片</figcaption></figure><p id="65d4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">了解熊猫的时差。</p><pre class="ks kt ku kv gt na mz nb nc aw nd bi"><span id="5b8f" class="ne nf it mz b gy ng nh l ni nj">pd.Timedelta("2 days 00:00:00")</span><span id="1dfa" class="ne nf it mz b gy nk nh l ni nj">#output:<br/>Timedelta('2 days 00:00:00')<br/>----------------------------------------------<br/>pd.Timedelta("2 days 2 hours")</span><span id="4cfd" class="ne nf it mz b gy nk nh l ni nj">#output:<br/>Timedelta('2 days 02:00:00')<br/>----------------------------------------------<br/>pd.Timedelta(days=2, seconds=2)</span><span id="8924" class="ne nf it mz b gy nk nh l ni nj">#output:<br/>Timedelta('2 days 00:00:02')<br/>----------------------------------------------<br/># integers with a unit, 1 is specify for day<br/>pd.Timedelta(2, unit="d")</span><span id="d644" class="ne nf it mz b gy nk nh l ni nj">#output:<br/>Timedelta('2 days 00:00:00')<br/>----------------------------------------------<br/># a NaT<br/>pd.Timedelta("nan")</span><span id="4019" class="ne nf it mz b gy nk nh l ni nj">#output:<br/>NaT<br/>----------------------------------------------<br/>pd.Timedelta("nat")</span><span id="b1ab" class="ne nf it mz b gy nk nh l ni nj">#output:<br/>NaT<br/>----------------------------------------------<br/># ISO 8601 Duration strings<br/>pd.Timedelta("P0DT0H1M0S")</span><span id="3374" class="ne nf it mz b gy nk nh l ni nj">#output:<br/>Timedelta('0 days 00:01:00')</span></pre><p id="ba5a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在我们将添加两个新参数，即周期和频率。周期取决于频率。周期是数据根据每年、每月或每天的频率变化的次数。</p><pre class="ks kt ku kv gt na mz nb nc aw nd bi"><span id="711f" class="ne nf it mz b gy ng nh l ni nj">#period change as per Year<br/>s_year = pd.Series(pd.date_range("2020-1-1", periods=5, freq="Y"))<br/>s_year</span><span id="9b9a" class="ne nf it mz b gy nk nh l ni nj">#period change as per Month<br/>s_month = pd.Series(pd.date_range("2020-1-1", periods=5, freq="M"))<br/>s_month</span><span id="7fd4" class="ne nf it mz b gy nk nh l ni nj">#period change as per day<br/>s_day = pd.Series(pd.date_range("2020-1-1", periods=5, freq="D"))<br/>s_day</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/61102f562fac5ed5a943134d116c2206.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*9fqsuMSLA8ebJxWy0qmjRg.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">周期根据频率而变化。作者图片</figcaption></figure><p id="5948" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">结论:</p><p id="81cb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">时间序列的基础主要是用日期和时间数据框架进行分析。制作一个日期和时间的索引对分析数据和时间记录有很大的帮助。</p><p id="3d8d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我希望你喜欢这篇文章。通过我的<a class="ae lh" href="https://www.linkedin.com/in/data-scientist-95040a1ab/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae lh" href="https://twitter.com/amitprius" rel="noopener ugc nofollow" target="_blank"> twitter </a>联系我。</p><h1 id="8f68" class="of nf it bd og oh oi oj ok ol om on oo ki op kj oq kl or km os ko ot kp ou ov bi translated">推荐文章</h1><ol class=""><li id="5f8d" class="nl nm it lk b ll ow lo ox lr oy lv oz lz pa md pb nr ns nt bi translated"><a class="ae lh" href="https://medium.com/towards-artificial-intelligence/nlp-zero-to-hero-with-python-2df6fcebff6e?sk=2231d868766e96b13d1e9d7db6064df1" rel="noopener"> NLP —用Python从零到英雄</a></li></ol><p id="97e2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">2.<a class="ae lh" href="https://medium.com/towards-artificial-intelligence/python-data-structures-data-types-and-objects-244d0a86c3cf?sk=42f4b462499f3fc3a160b21e2c94dba6" rel="noopener"> Python数据结构数据类型和对象</a></p><p id="4c4f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">3.<a class="ae lh" href="https://medium.com/towards-artificial-intelligence/mysql-zero-to-hero-with-syntax-of-all-topics-92e700762c7b?source=friends_link&amp;sk=35a3f8dc1cf1ebd1c4d5008a5d12d6a3" rel="noopener"> MySQL:零到英雄</a></p></div></div>    
</body>
</html>