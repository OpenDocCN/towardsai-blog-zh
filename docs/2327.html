<html>
<head>
<title>How to Detect Image Differences With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python检测图像差异</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/how-to-detect-image-differences-with-python-9ea04859084c?source=collection_archive---------0-----------------------#2021-11-12">https://pub.towardsai.net/how-to-detect-image-differences-with-python-9ea04859084c?source=collection_archive---------0-----------------------#2021-11-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="099d" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/computer-science" rel="noopener ugc nofollow" target="_blank">计算机科学</a></h2><div class=""/><figure class="gl gn ka kb kc kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi jz"><img src="../Images/71947b5661c7905832a66407ed21ed20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rzSlhm0LALcb6W7wSeMMxg.jpeg"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">由<a class="ae ko" href="https://unsplash.com/@coffeegeek?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">咖啡极客</a>在<a class="ae ko" href="https://unsplash.com/s/photos/compare?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h2 id="a4ae" class="kp kq it bd kr ks kt dn ku kv kw dp kx ky kz la lb lc ld le lf lg lh li lj iz bi translated">I .下载您的图像</h2><h2 id="d8b7" class="kp kq it bd kr ks kt dn ku kv kw dp kx ky kz la lb lc ld le lf lg lh li lj iz bi translated">二。导入您的数据</h2><h2 id="14d3" class="kp kq it bd kr ks kt dn ku kv kw dp kx ky kz la lb lc ld le lf lg lh li lj iz bi translated">二。侦查</h2><h2 id="cf1a" class="kp kq it bd kr ks kt dn ku kv kw dp kx ky kz la lb lc ld le lf lg lh li lj iz bi translated">三。结论</h2></div><div class="ab cl lk ll hx lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="im in io ip iq"><h2 id="fad8" class="kp kq it bd kr ks kt dn ku kv kw dp kx ky kz la lb lc ld le lf lg lh li lj iz bi translated">I .下载您的图像</h2><p id="0705" class="pw-post-body-paragraph lr ls it lt b lu lv lw lx ly lz ma mb ky mc md me lc mf mg mh lg mi mj mk ml im bi translated">请点击此链接下载图片。</p><div class="mm mn gp gr mo mp"><a href="https://unsplash.com/photos/iIrB37J5yfA" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd jd gy z fp mu fr fs mv fu fw jc bi translated">迈克尔·香农在Unsplash上拍摄的照片</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">下载这个免费的高清照片的道路，阿瑟的通行证，山和新西兰在阿瑟的通行证，新西兰由迈克尔…</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">unsplash.com</p></div></div><div class="my l"><div class="mz l na nb nc my nd ki mp"/></div></div></a></div><p id="2a47" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">我下载了它，并在我的电脑上保存为roadimage.jpg。一旦我打开它，它看起来是这样的:</p><figure class="nk nl nm nn gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi nj"><img src="../Images/b629342c1de3830db641bf5635787785.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JMxppt_xuMgXM1Dykqe1Dg.png"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">道路图像</figcaption></figure><p id="70d9" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">然后我拍了这张照片，并复制了一份。然后我把它保存为roadimage_Li。</p><p id="1633" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">此时，我通过在上面画一个点来编辑图像:</p><figure class="nk nl nm nn gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi no"><img src="../Images/f6c08b8142a13e1e5393edbcb03792fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T5_QK0B0R3lJWfizPCeZLA.png"/></div></div></figure><h2 id="12fd" class="kp kq it bd kr ks kt dn ku kv kw dp kx ky kz la lb lc ld le lf lg lh li lj iz bi translated">二。导入您的数据</h2><p id="ffdb" class="pw-post-body-paragraph lr ls it lt b lu lv lw lx ly lz ma mb ky mc md me lc mf mg mh lg mi mj mk ml im bi translated">启动您的Python编辑器。</p><p id="6a77" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">您将要用来导入图像的包是cv2。</p><p id="fe8e" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">为了安装这个包，我使用了一条蟒蛇。使用anaconda时，我必须打开anaconda命令提示符并键入:</p><pre class="nk nl nm nn gt np nq nr ns aw nt bi"><span id="b7ad" class="kp kq it nq b gy nu nv l nw nx">conda install -c menpo opencv</span></pre><p id="55a7" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">如果使用另一个python编辑器，可以使用常规命令提示符和以下语法:</p><pre class="nk nl nm nn gt np nq nr ns aw nt bi"><span id="ee09" class="kp kq it nq b gy nu nv l nw nx">pip install opencv-python</span></pre><p id="017d" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">现在，返回Python编辑器，键入以下内容来导入包:</p><pre class="nk nl nm nn gt np nq nr ns aw nt bi"><span id="b628" class="kp kq it nq b gy nu nv l nw nx">import cv2</span></pre><p id="cd5a" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">最后，是时候引入图像了:</p><pre class="nk nl nm nn gt np nq nr ns aw nt bi"><span id="57ee" class="kp kq it nq b gy nu nv l nw nx">img = cv2.imread(r'C:\...\Pictures\roadimage.jpg')<br/>img2 = cv2.imread(r'C:\...\Pictures\roadimage_LI.jpg')</span></pre><h2 id="4d44" class="kp kq it bd kr ks kt dn ku kv kw dp kx ky kz la lb lc ld le lf lg lh li lj iz bi translated">二。侦查</h2><p id="95cd" class="pw-post-body-paragraph lr ls it lt b lu lv lw lx ly lz ma mb ky mc md me lc mf mg mh lg mi mj mk ml im bi translated">好的，现在让我们开始检测。让我们导入numpy:</p><pre class="nk nl nm nn gt np nq nr ns aw nt bi"><span id="3115" class="kp kq it nq b gy nu nv l nw nx">import numpy as np</span></pre><p id="9793" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">如果您打印(img ),它看起来会像这样:</p><p id="d22c" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">[[[229 227 226]<br/>【229 227 226】<br/>【229 227 226】<br/>…<br/>【229 227 226】<br/>【229 227 226】<br/>【229 227 226】]</p><p id="a433" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">[[229 227 226]<br/>【229 227 226】<br/>【229 227 226】<br/>…<br/>【229 227 226】<br/>【229 227 226】<br/>【229 227 226】]</p><p id="c1df" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">[[229 227 226]<br/>【229 227 226】<br/>【229 227 226】<br/>…<br/>【229 227 226】<br/>【229 227 226】<br/>【229 227 226】]</p><p id="e35b" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi">…</p><p id="42e1" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">[[72 84 84]<br/>【71 83 85】<br/>【64 76 78】<br/>…<br/>【42 40 39】<br/>【42 40 39】<br/>【42 40 39】]</p><p id="df0d" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">[[68 80 80]<br/>【67 79 81】<br/>【64 76 78】<br/>…<br/>【42 40 39】<br/>【42 40 39】<br/>【42 40 39】]</p><p id="fa1d" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">[[68 80 80]<br/>【67 79 81】<br/>【65 77 79】<br/>…<br/>【42 40 39】<br/>【42 40 39】<br/>【42 40 39】]]</p><p id="1d88" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">让我们把它变平:</p><pre class="nk nl nm nn gt np nq nr ns aw nt bi"><span id="411d" class="kp kq it nq b gy nu nv l nw nx">features = img.ravel()</span><span id="f15a" class="kp kq it nq b gy ny nv l nw nx">features2 = img2.ravel()<br/></span></pre><p id="2f05" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">现在让我们比较一下这些平面特征:</p><pre class="nk nl nm nn gt np nq nr ns aw nt bi"><span id="5fa5" class="kp kq it nq b gy nu nv l nw nx">print((features==features2).all())</span></pre><p id="58a1" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">您将得到以下输出:</p><p id="16e7" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated"><br/>假的</p><p id="b5b2" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">正如你所看到的，这两个图像之间存在差异。</p><h2 id="08c2" class="kp kq it bd kr ks kt dn ku kv kw dp kx ky kz la lb lc ld le lf lg lh li lj iz bi translated">三。结论</h2><p id="d5f0" class="pw-post-body-paragraph lr ls it lt b lu lv lw lx ly lz ma mb ky mc md me lc mf mg mh lg mi mj mk ml im bi translated">图像变化检测的应用非常广泛。人们拍摄一条道路的卫星图像，观察这条道路随着时间的推移发生了什么变化，并从中得出一些结论。</p><p id="b27b" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">图像的变化也让我们能够检测到其他环境中的变化，这些环境在很大程度上是静态的，以查看随着时间的推移是否有任何变化。</p><p id="d4f2" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">感谢阅读，</p><p id="5a00" class="pw-post-body-paragraph lr ls it lt b lu ne lw lx ly nf ma mb ky ng md me lc nh mg mh lg ni mj mk ml im bi translated">灰</p></div></div>    
</body>
</html>