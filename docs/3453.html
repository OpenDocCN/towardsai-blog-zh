<html>
<head>
<title>A Comprehensive Guide to Graph Customization with R GGplot2 Package</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用R GGplot2包进行图形定制的综合指南</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/a-comprehensive-guide-to-graph-customization-in-r-2188e9d84858?source=collection_archive---------3-----------------------#2022-12-26">https://pub.towardsai.net/a-comprehensive-guide-to-graph-customization-in-r-2188e9d84858?source=collection_archive---------3-----------------------#2022-12-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b894" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第一部分:让你的ggplots闪耀主题光芒()</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/789f58a4a8e90e35759e2618c244fd15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PmKGvx0r_WilpgmM"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">泰勒·李在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="75a5" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">为什么要可视化数据，为什么要定制可视化</h1><p id="5f37" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">从数据科学家到研究人员和技术顾问，数据可视化是许多数据相关角色日常职责中不可或缺的一部分。在这些职位上，图表(包括地图)用于与利益相关者和没有数据科学背景或相对不精通数据科学的人交流数据发现。无论任务是探索性分析还是机器学习，非数据专业人士往往不太关心过程，而更关心结果，因为算法很难理解，无法用几句话解释。相反，他们想知道这个故事。这就是可视化与其他形式相比的优势所在，例如，纯文字和数据笔记本。</p><p id="57d6" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">根据职位的不同，要求和首选可视化工具也会有所不同。数据记者经常使用D3，HTML，以及相关的前端语言。由于出版物的性质，数据记者制作的图表也比其他专业人员更具格式和思想性。据一位曾在《纽约时报》工作的朋友说，标准是确定我们在网站上看到的图表。该团队将在幕后进行几轮编辑，从图表用途到标签、颜色和网格线。对于研究人员和分析师来说，这个要求可能没有那么严格。但是，一个图形越个性化，可视化效果就越好，故事就越引人注目，这不会错(也有许多数据可视化理论，例如，爱德华·塔夫特开发的数据-墨水比概念。这些理论可以帮助我们更好地理解什么样的数据可视化是伟大的。对它们感兴趣的读者可以做一些研究)。</p><p id="c188" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">作为一名专注于刑事司法和K-12教育问题的计算社会科学研究人员，我经常在项目中更喜欢R而不是Python，原因有两个:R的<em class="mp"> tidyverse </em>系统使数据清理变得轻而易举，Python中没有一个可视化库比R的<em class="mp"> ggplot2 </em>更易于使用、可定制和通用。</p><p id="4d18" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">对于ggplots，还存在一个重要的问题。虽然创建简单的图表是小菜一碟，但我们经常会努力按照自己的意愿定制它们。想想我们要在谷歌上的ggplot 里搜索<em class="mp"> How to xxx多少次。当然，网上有很多资源，但是缺乏一个全面的指南来指导所有的ggplot定制解决方案。作为一个在图形语法下开发的包，ggplot是一个非常有组织性和逻辑性的可视化库，不管我们想做什么，都有一个规则。</em></p><p id="fd2b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">本系列将讨论“如何做”背后的一些规则。第一部分(这一部分)围绕<em class="mp">主题()</em>功能展开。下一个要讲音阶。在整个系列中，我将使用国家教育统计中心收集的<a class="ae kv" href="https://nces.ed.gov/pubsearch/pubsinfo.asp?pubid=2020054" rel="noopener ugc nofollow" target="_blank">学校犯罪和安全调查</a> (SSOCS)数据作为例子，其中包含美国公立学校安全和纪律相关政策和实践的信息。我的最终设想如下:</p><div class="kg kh ki kj gt ab cb"><figure class="mq kk mr ms mt mu mv paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/9e159f7040d1f73b48cf0d2bb5d3a813.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*VM6N3hLISg_wMOk7SlQD5A.png"/></div></figure><figure class="mq kk mw ms mt mu mv paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/9341c892887cdee0157ae53f03a86a53.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*erqP_XXrQpDw_A2XMHfEJw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk mx di my mz translated">作者创造的形象。</figcaption></figure></div><h1 id="223c" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">Theme()函数是做什么的</h1><p id="5d17" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在R Studio中，如果在右下方面板的帮助标签中(标准布局中workspace环境下的地方)搜索“theme”这个词，会看到两种类型的输出:<em class="mp"> theme </em>和<em class="mp"> theme_* </em>，其中*表示一些词，例如<em class="mp"> theme_bw </em>。在我们深入研究前者之前，理解这两种类型之间的关系很重要。</p><p id="618c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><em class="mp">主题</em>是<em class="mp">主题_*、</em>的一般化版本，而<em class="mp">主题_* </em>是建立在<em class="mp">主题</em>之上的。<em class="mp"> Theme_* </em>代表了ggplot2包中包含的众多既定主题，比如默认主题<em class="mp"> theme_grey </em>就是其中之一。如果您没有指定任何主题元素或某个主题模块，这个主题中的灰色网格布局就是您将看到的。除了theme_grey，常用的主题还有<em class="mp"> theme_bw </em>、<em class="mp"> theme_classic </em>、<em class="mp"> theme_void </em>等等。我个人是<em class="mp"> theme_classic() </em>的粉丝，给你一个白底两轴，任何方向都没有网格的布局。此外，开发人员和研究人员还编制了其他用于新闻媒体的主题模板，如《金融时报》和FiveThirtyEight。这些模块分散在各种R包中，例如<em class="mp"> ggthemes </em>。你可以在这个网站的图表上看到所有的主题和它们的样子。</p><p id="28e5" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">总而言之，theme_*是一个定义了主题元素的主题，包括边距、面板背景、网格、轴、刻度和图例布局。需要注意的是，即使应用了主题，这些元素也不是不可覆盖的。为此，我们需要手动告诉我们的ggplot，我们希望图形如何通过广义的<em class="mp">主题</em>函数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi na"><img src="../Images/f4e2447be533839bbfbd62b09af1a8cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:446/format:webp/1*koKR2za_p5_w_Wt81ZMn0A.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者创造的形象</figcaption></figure><h1 id="c2c4" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">奇妙的主题功能——元素</h1><h2 id="2609" class="nb kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated">它的作用</h2><p id="9e6b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">正如我们已经谈到的，众多的<em class="mp">主题_*() </em>函数以某种方式设置预定义的主题元素。这是通过使用<em class="mp">主题()</em>函数来完成的。正如<a class="ae kv" href="https://ggplot2.tidyverse.org/reference/theme.html" rel="noopener ugc nofollow" target="_blank">文档页面</a>所描述的，<em class="mp"> theme() </em>允许用户修改任何主题组件并提供一致的外观。这里的主题组件指的是无数重要的美学元素，比如轴、网格、刻度线、字体、边距、图例和背景。这些是ggplot的非数据组成部分，这意味着这些元素并不决定图形的制作。例如，您不能使用函数制作条形图或散点图。你也不能用它来修改数据。如果没有图表，这个函数就没有意义。然而，这个函数真正的神奇之处在于，它允许您定制可视化组件，从而使您已经构建好的图形更加漂亮。在<em class="mp"> Matplotlib </em>、<em class="mp"> Plotly </em>、<em class="mp">阿莱尔</em>等众多可视化软件包中也可以做到这一点。然而，在这些工具中，这些转换是通过多个函数或步骤实现的，通常比ggplot的theme()复杂得多，需要更多行代码。举个例子，在<em class="mp"> matplotlib </em>中，如果你想移除绘图边框，最简单的方法是通过设置<code class="fe nn no np nq b">ax.spines[’top’].set_visible(False)</code>首先移除顶部的框架，然后对其他三个框架重复同样的操作。而在ggplot中，它是一行程序(<code class="fe nn no np nq b">panel.border = element_blank()</code>)。作为ggplot宇宙的一部分，<em class="mp">主题()</em>也是在Hadley Wickham思考的图形语法哲学下开发的，使它像其他ggplot功能一样有组织。也就是说，这个函数中的所有组件都遵循一个结构。</p><h2 id="0534" class="nb kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated">结构</h2><p id="2b77" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">哈雷·威克姆对<em class="mp">主题的结构</em>功能解释如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/b4f5fe4be283089a9ad2656dfe8bd98c.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*4lm2r5E7IoR7XNlxZS13CQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">来自哈德利·威克姆写的公开的ggplot书</figcaption></figure><p id="e284" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这里，<em class="mp"> theme.name </em>是我们想要对其进行转换的主题元素的名称，<em class="mp"> element_function </em>是我们想要应用于数据的转换。有超过五十个详细的元素名称，听起来很多，但是你真的不需要记住它们，因为这些元素名称可以分成五大组。这五组是:</p><ol class=""><li id="520c" class="ns nt iq lq b lr mk lu ml lx nu mb nv mf nw mj nx ny nz oa bi translated">轴</li><li id="fe06" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj nx ny nz oa bi translated">神话；传奇</li><li id="632e" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj nx ny nz oa bi translated">面板</li><li id="df4d" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj nx ny nz oa bi translated">情节</li><li id="4362" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj nx ny nz oa bi translated">剥夺</li></ol><p id="ee74" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们将逐一讨论它们。</p><h2 id="ca26" class="nb kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated">轴</h2><p id="c89c" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Axis决定x轴和y轴的格式。这包括轴上的一切，如标签和刻度。在<em class="mp">主题()</em>中，我们可以自定义以下内容:</p><ul class=""><li id="a090" class="ns nt iq lq b lr mk lu ml lx nu mb nv mf nw mj og ny nz oa bi translated"><code class="fe nn no np nq b">axis.title</code>:轴的标题</li><li id="9a9f" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated"><code class="fe nn no np nq b">axis.text</code>:轴的文本标签(即刻度标签)</li><li id="f655" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated"><code class="fe nn no np nq b">axis.ticts</code>:轴上的刻度线(注意:刻度中有一个<strong class="lq ir"> s </strong></li><li id="93f0" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated"><code class="fe nn no np nq b">axis.line</code>:轴线</li></ul><p id="fad9" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在每个内部，我们还可以通过添加<em class="mp">来指定要修改哪个轴。x </em>和<em class="mp">。元素名称后的y </em>。例如，如果我们只想对x轴应用一个变换，元素名应该是<code class="fe nn no np nq b">axis.line.x</code>。如果我们不指定轴，那么默认情况下，变换应用于x轴和y轴。</p><p id="ba4e" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在<code class="fe nn no np nq b">axis.ticks</code>中，您也可以通过改变<code class="fe nn no np nq b">axis.ticks.length</code>来使刻度线变长或变短。</p><h2 id="3b45" class="nb kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated">神话；传奇</h2><p id="a735" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">接下来是传说。图例是对gg图中各组的额外解释。如果有多个颜色或形状组，添加图例是常见的选择。但是在多组图表中，图例并不是显示组信息的唯一选择。另一个常见的选择是添加数据标签，这在多组折线图中尤其流行。例如，我在我的数据可视化类中创建了下面的图表，其中我使用了数据标签而不是图例。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/41e587de2d68f09e4f74e59f59a75954.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*uJwt7CLhRiWUzx_uS4TZtw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者创造的形象。这一可视化是我关于2021年纽约暴力逮捕的数据新闻文章的一部分。折线图是使用D3.js、CSS和HTML创建的。此处可进入<a class="ae kv" href="https://jcvincentliu.github.io/CAPP30239_FA22/NY_arrest/arrest.html" rel="noopener ugc nofollow" target="_blank">工作。</a></figcaption></figure><p id="3955" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在<em class="mp">主题</em>中，您可以修改以下图例组件:</p><ul class=""><li id="1ab9" class="ns nt iq lq b lr mk lu ml lx nu mb nv mf nw mj og ny nz oa bi translated"><code class="fe nn no np nq b">legend.box</code>:图例框</li><li id="2a74" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated"><code class="fe nn no np nq b">legend.background</code>:图例框的背景</li><li id="6427" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated"><code class="fe nn no np nq b">legend.margin</code>和<code class="fe nn no np nq b">legend.spacing</code>:每个图例周围的边距和间距。</li><li id="8011" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated"><code class="fe nn no np nq b">legend.title</code>和<code class="fe nn no np nq b">legend.text</code>:图例标题和图例标签。注意不要用这两个来修改文本(单词)。您使用这两个来修改标题和标签元素(例如颜色、大小、角度)。我将在下一节关于元素函数的内容中详细讨论这一点。通过将单词设置为NULL或空字符串("")，可以删除单词。</li><li id="3a02" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated"><code class="fe nn no np nq b">legend.position</code>、<code class="fe nn no np nq b">legend.direction</code>和<code class="fe nn no np nq b">legend.justification</code>:图例放置的位置(位置)、图例方向(水平/垂直)和图例对齐(在图表内放置图例时有用)。</li><li id="3079" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated"><code class="fe nn no np nq b">legend.key</code>:图例键的背景和大小。您可以指定按键大小(<code class="fe nn no np nq b">legend.key.size</code>)及其宽度/高度(<code class="fe nn no np nq b">legend.key.height</code> / <code class="fe nn no np nq b">legend.key.width</code>)。图例符号是图例中使用的符号。有关图例键概念的更多信息，请参见此处的<a class="ae kv" href="https://bookdown.dongzhuoer.com/hadley/ggplot2-book/legend-glyph.html" rel="noopener ugc nofollow" target="_blank"/>。</li></ul><p id="c379" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这些很多。然而，我们通常不需要使用它们。大多数时候我只需要使用第四和第五个要点中的元素(<em class="mp">)。标题，。文本，。位置，。方向</em>)改变图例。要查看更多示例，您也可以阅读本<a class="ae kv" href="https://www.datanovia.com/en/blog/ggplot-legend-title-position-and-labels/" rel="noopener ugc nofollow" target="_blank">指南</a>。</p><h2 id="34f0" class="nb kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated">面板</h2><p id="3c31" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">面板是绘图的空间或映射数据的空间。人们经常混淆面板和绘图，后者是数据层和整个绘图框之间的区域。或者，您也可以将面板理解为由x轴和y轴限定或位于x轴和y轴内部的区域。该面板具有以下属性:</p><ul class=""><li id="f954" class="ns nt iq lq b lr mk lu ml lx nu mb nv mf nw mj og ny nz oa bi translated"><code class="fe nn no np nq b">panel.background</code>:面板背景。这是数据层/绘图区域的背景</li><li id="cf98" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated"><code class="fe nn no np nq b">panel.border</code>:面板边框。这是绘图区域周围的空间(或绘图框和轴线之间的空间)。</li><li id="5a14" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated"><code class="fe nn no np nq b">panel.spacing</code>:当应用<code class="fe nn no np nq b">facet_wrap</code>或<code class="fe nn no np nq b">facet_grid</code>时，这是两个多面图之间的空间。</li><li id="9a06" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated"><code class="fe nn no np nq b">panel.grid</code>:网格线。这包括主网格线和次网格线。主网格是主数据断点上的线(或垂直于记号)。要指定主要或次要网格，在<code class="fe nn no np nq b">panel.grid</code>后添加<code class="fe nn no np nq b">.major</code>或<code class="fe nn no np nq b">.minor</code>。要指定网格线的方向，添加<code class="fe nn no np nq b">.x</code>(垂直)或<code class="fe nn no np nq b">.y</code>(水平)。比如指定一条主要的水平网格线，代码应该是<code class="fe nn no np nq b">panel.grid.major.x</code>。</li><li id="02bb" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated"><code class="fe nn no np nq b">panel.ontop</code>:“是否将面板(背景、网格线)置于数据层之上”(来自主题功能<a class="ae kv" href="https://ggplot2.tidyverse.org/reference/theme.html" rel="noopener ugc nofollow" target="_blank">文档</a>)。这是一个布尔值，其值为真/假。</li></ul><p id="17a8" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">同样，这是很多。然而，90%的时候，<code class="fe nn no np nq b">panel.grid</code>是你唯一需要考虑的。对于多面图，<code class="fe nn no np nq b">panel.spacing</code>也非常有用。其他主题名称很少见。通过实例了解剧情背景和边界，可以阅读<a class="ae kv" href="http://www.sthda.com/english/wiki/ggplot2-themes-and-background-colors-the-3-elements" rel="noopener ugc nofollow" target="_blank">本文</a>。</p><h2 id="7146" class="nb kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated">情节</h2><p id="ea61" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">绘图是整个绘图区域，不包括面板(数据层)。换句话说，一个图是你看到的一个完整的空间，而一个面板是由两个轴围成的整个空间中的一个较小的区域。该图包含以下元素:</p><ul class=""><li id="30af" class="ns nt iq lq b lr mk lu ml lx nu mb nv mf nw mj og ny nz oa bi translated"><code class="fe nn no np nq b">plot.background</code>:剧情背景</li><li id="66d0" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated"><code class="fe nn no np nq b">plot.title</code>、<code class="fe nn no np nq b">plot.subtitle</code>、<code class="fe nn no np nq b">plot.caption</code>、<code class="fe nn no np nq b">plot.tag</code>:剧情的标题、副标题、题注、标签。副标题是指标题下、情节上的文字，标签通常是标识一个情节的标签。大多数绘图没有标签，但多面绘图通常有。</li><li id="ace4" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated"><code class="fe nn no np nq b">plot.margin</code>:地块周围的边距。这是地块和盒子之间的空间。</li></ul><p id="be45" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我经常使用所有这些元素名。正如你将在我上面的例子中看到的那样，下面要展示的；我使用了图表中除绘图背景之外的所有属性。</p><h2 id="debf" class="nb kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated">剥夺</h2><p id="2f52" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">最后但同样重要的是，条带或面板条带是与刻面图表相关联的元素。刻面图表是变量组之外的另一层。如果有一个以上的分组变量，分面是一种广泛使用的解决方案。例如，在我自己的数据新闻三部曲系列<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/part-final-fostering-social-impacts-with-data-science-c853e50d0379">用数据科学促进刑事司法</a>中，我制作了一些多面图表。其中一个在下面。Faceting也有其他名字，比如“小倍数”，这是纽约时报、皮尤研究中心、很多地方首选的一个名字，还有“格子图”。我个人是小倍数或分面图表的粉丝，因为这种技术增加了情节的价值。皮尤有一篇<a class="ae kv" href="https://medium.com/pew-research-center-decoded/how-pew-research-center-uses-small-multiple-charts-2531bfc06419" rel="noopener">中型文章</a>解释了这种方法，并提供了一些很好的例子。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/52f2b00cbc54b6909b557100dc64850c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lUYHsWmvigF9go2DYCgQ6w.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者创造的形象。这是一张2021年DC被捕者使用武器的多面图。这个情节包含在我的数据新闻三部曲《用数据科学促进刑事司法》的最后一部分，由《走向人工智能》出版。看这里<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/part-final-fostering-social-impacts-with-data-science-c853e50d0379"/>。</figcaption></figure><p id="f949" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">正如我提到的，R中刻面图表中的元素可以使用<em class="mp"> strip </em>主题进行修改。默认情况下，所有多面图表在图的顶部(和右侧)都有方框标签。如果你不熟悉R中的概念，这里有一些例子是<a class="ae kv" href="http://www.sthda.com/english/wiki/ggplot2-facet-split-a-plot-into-a-matrix-of-panels" rel="noopener ugc nofollow" target="_blank"/>。盒装标签被称为“strip”，这也是主题元素得名的原因。</p><p id="2ffa" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">条带具有以下属性:</p><ul class=""><li id="cd0e" class="ns nt iq lq b lr mk lu ml lx nu mb nv mf nw mj og ny nz oa bi translated"><code class="fe nn no np nq b">strip.background</code>:刻面标签背景。</li><li id="7c3d" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated"><code class="fe nn no np nq b">strip.placement</code>:放条的位置。该条可以放在轴的内部或外部。主题以“内”和“外”作为输入。</li><li id="229d" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated"><code class="fe nn no np nq b">strip.text</code>:纸条上的文字(多面标签)。</li><li id="704b" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated"><code class="fe nn no np nq b">strip.switch.pad</code>和<code class="fe nn no np nq b">strip.clip</code>:条和轴之间的空间，以及是否“条背景边缘和条标签被修剪到条背景的范围”(来自<a class="ae kv" href="https://ggplot2.tidyverse.org/reference/theme.html" rel="noopener ugc nofollow" target="_blank">文档</a>)。</li></ul><p id="edb4" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">因为默认背景颜色为灰色的条形标签很难看，巧妙地使用<code class="fe nn no np nq b">strip.background</code>可以使小倍数更接近我们在新闻媒体上看到的小倍数。</p><h2 id="0bd1" class="nb kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated">其他的</h2><p id="a01f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">还有一些杂项元素名称，但这些组件的数量很少。上面五个类别中唯一没有包括的常用的两个是<code class="fe nn no np nq b">aspect.ratio</code>，它是绘图高度除以宽度(height/width)的比值，取一个数值，还有margins，表示元素的边距。这个概念将在下一节中展开。</p><h1 id="039d" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">元素功能——奇迹发生的地方</h1><p id="16e8" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">记住，<em class="mp"> theme() </em>在结构上有两个部分，一个元素名和一个元素函数。上一节讲了元素，现在讲元素函数。</p><p id="81c0" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果我们把主题功能描述为建造一辆火车，那么元素名称将是材料，元素功能将是使用材料建造火车各个部分的程序。如果我们想到写一篇文章的过程，那么元素就是主题，元素函数就是这些主题下的内容。有了元素名，我们就知道了“是什么”；然而，如果没有元素函数，我们就不知道如何处理“什么”。元素的功能是“如何”。</p><p id="4fc7" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">因为元素和元素函数有很深的联系，所以有多个元素函数对应不同类型的元素。我们也将一一讲述。</p><h2 id="bf7b" class="nb kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated">元素_空白</h2><p id="e08a" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">很多教程在谈到ggplot主题的时候都会把<code class="fe nn no np nq b">element_blank()</code>放在最后，但是我在这里反过来做。在所有四个元素函数中，这是最简单明了的一个。根据我的经验，这也是应用最广泛的方法之一。</p><p id="947c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><code class="fe nn no np nq b">element_blank()</code>所做的是通过告诉主题函数在这个主题上不做任何事情来删除一个元素。换句话说，这个函数隐藏了图形中的一个元素。这可用于元素函数适用的所有元素名称(接近80–90%的元素)。此函数不适用的一些例外情况是，例如，边距和刻度长度)。</p><p id="d8aa" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">例如，如果我们想要删除x轴和整个网格，那么整个主题函数应该是:</p><pre class="kg kh ki kj gt oj nq ok bn ol om bi"><span id="3883" class="on kx iq nq b be oo op l oq or">p + theme(<br/>    axis.line.x = element_blank(),<br/>    panel.grid = element_blank() <br/>)</span></pre><p id="b023" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">通过设置从图表中移除图例也是一种常见的策略</p><pre class="kg kh ki kj gt oj nq ok bn ol om bi"><span id="179d" class="on kx iq nq b be oo op l oq or">p + theme(<br/>    legend.position = element_blank()  <br/>)</span></pre><h2 id="28af" class="nb kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated">元素_文本</h2><p id="1561" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">除了<code class="fe nn no np nq b">element_blank()</code>之外的其他三个函数只适用于具有某种属性的元素。首先，<code class="fe nn no np nq b">element_text()</code>格式化文本相关的元素。这包括文本颜色、字体、大小、角度、粗细(粗体/正常/斜体)以及许多其他内容。该函数具有以下重要属性:</p><ul class=""><li id="45f7" class="ns nt iq lq b lr mk lu ml lx nu mb nv mf nw mj og ny nz oa bi translated">size:字体大小。这个以点为单位的数。</li><li id="fd1b" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated">颜色:ggplot允许的颜色名称。r中有超过<a class="ae kv" href="https://r-graph-gallery.com/42-colors-names.html" rel="noopener ugc nofollow" target="_blank"> 100种颜色名称</a>，如果你是更高级的数据可视化制作者，还可以指定一个颜色十六进制代码。十六进制代码必须以“#”开头，后跟数字、字母或两者的组合。我实际上建议输入十六进制代码，因为颜色名称很难记住。</li><li id="9f72" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated">family:文本的字体系列。这很棘手，因为默认情况下R只包括三个字体家族，如果你希望使用个性化字体，如Georgia，你必须在网站上下载它们并将字体加载到R中。在我看来，整个过程极其复杂和耗时。</li><li id="b1b1" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated">字体:字体的粗细和风格。这相当于CSS的字体粗细参数。该参数采用以下四个值之一:“普通”、“粗体”、“斜体”和“粗体.斜体”。如果没有指定，那么粗细将是普通的，代表正常的字体粗细。</li><li id="5bd6" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated">vjust和hjust:文本的垂直和水平对齐。这个函数沿着垂直/水平线移动文本，通常取0到1之间的值。</li><li id="9b97" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated">角度:文字角度。这个取0到360之间的一个数值。当文本标签很长时，设置文本角度会很有帮助。</li><li id="fa72" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated">边距:文本的边距。这与边距主题函数遵循相同的规则。我很快就会谈到这一点。</li></ul><p id="70ef" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">例如，如果我们想加粗y轴标签，将字体增加到15 px，并将其颜色改为蓝色，我们可以这样做:</p><pre class="kg kh ki kj gt oj nq ok bn ol om bi"><span id="1a98" class="on kx iq nq b be oo op l oq or">p + theme(<br/>    axis.line.y = element_text(family = "bold", size = 15, color = "blue")<br/>)</span></pre><p id="25c4" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">许多人(包括我)真的很喜欢<code class="fe nn no np nq b">element_text()</code>，因为它让我们可以在文本上做无数的事情。</p><h2 id="503f" class="nb kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated">元素_行</h2><p id="c2d1" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">类似于<code class="fe nn no np nq b">element_text()</code>，<code class="fe nn no np nq b">element_line()</code>修改线元素。这条线通常是轴线或网格线。您可以使用<code class="fe nn no np nq b">element_line()</code>在线路上执行以下操作:</p><ul class=""><li id="df34" class="ns nt iq lq b lr mk lu ml lx nu mb nv mf nw mj og ny nz oa bi translated">颜色:同上</li><li id="2186" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated">尺寸:同上，但单位是“毫米”。(<strong class="lq ir">注</strong>:该属性在最近的包更新中被重命名为<em class="mp">线宽</em>。)</li><li id="9375" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated">线型:线的类型。这需要以下之一:“空白”、“实线”、“虚线”、“虚线”、“点划线”、“长划线”、“双划线”。根据<a class="ae kv" href="https://ggplot2.tidyverse.org/reference/element.html" rel="noopener ugc nofollow" target="_blank">文档</a>，你也可以给一个0到8之间的数值，但我个人认为字符串更清晰，更容易记忆。</li><li id="42a1" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated">线条末端:线条的末端形状。这需要“圆”、“粗”和“方”三个值中的一个，如果我们希望线条是圆的，而不是缺省的方形，这就很有用。</li><li id="ec43" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated">箭头:你可以用这个功能给一条线添加一个箭头。该参数来自<a class="ae kv" href="https://rdrr.io/r/grid/arrow.html" rel="noopener ugc nofollow" target="_blank"> <em class="mp">网格</em>包</a>(无需额外安装)。</li></ul><p id="bdf8" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">例如，如果我们希望添加带箭头的灰色垂直网格虚线，我们可以这样做:</p><pre class="kg kh ki kj gt oj nq ok bn ol om bi"><span id="c594" class="on kx iq nq b be oo op l oq or">p + theme(<br/>    panel.grid.x = element_line(linetype = "dotted", color = "grey90", arrow = arrow()) <br/>)</span></pre><h2 id="e76d" class="nb kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated">元素_矩形</h2><p id="66a2" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">最后一个元素函数是<code class="fe nn no np nq b">element_rect()</code>，适用于所有有框的元素。这方面的一些例子包括面板边框、图例背景、图例项和条带背景。如您所见，这些元素的共同点是它们都在一个矩形/正方形内。在这个函数中，“rect”指的是矩形。该函数具有以下属性:</p><ul class=""><li id="f5f4" class="ns nt iq lq b lr mk lu ml lx nu mb nv mf nw mj og ny nz oa bi translated">fill:填充颜色。除了颜色名称或十六进制代码之外，它还可以将“透明”作为一个值。</li><li id="c245" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated">颜色:轮廓颜色。它需要一个颜色名称或十六进制代码。</li><li id="015c" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated">尺寸或线宽:以毫米为单位的轮廓宽度。类似<code class="fe nn no np nq b">element_line(),</code> <em class="mp">尺寸</em>在最近一次更新中贬值，替换为<em class="mp">线宽</em>。</li><li id="e7df" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj og ny nz oa bi translated">线型:等高线类型。这个同上。</li></ul><p id="f680" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">例如，如果我们想将整个背景填充为灰色，并将多面标签的条带背景更改为灰色，同时将条带标签设为红色，我们可以:</p><pre class="kg kh ki kj gt oj nq ok bn ol om bi"><span id="85d3" class="on kx iq nq b be oo op l oq or">p + theme(<br/>    panel.background = element_rect(fill = "grey90"),<br/>    strip.background = element_recet(fill = "grey90"),<br/>    strip.text = element_text(color = "red")<br/>)</span></pre><h2 id="2561" class="nb kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated">其他的</h2><p id="b2f6" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">还有一些不属于上述函数的杂项元素值。在这一类别中，首先需要知道的是利润，其值为:</p><pre class="kg kh ki kj gt oj nq ok bn ol om bi"><span id="62f1" class="on kx iq nq b be oo op l oq or">p + theme(<br/>    margin =  margin(c(t = 0, r= 0, b= 0, l= 0), "cm") <br/>)</span></pre><p id="8dbc" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在上面的例子中，t、r、b、l分别代表“上”、“右”、“下”、“左”。您可以指定一个页边距或所有页边距。边距值后的“cm”是单位，如果没有指定，则默认为“pt”(点)。也有其他单位，所以单位是哪个为你工作。</p><p id="8d1a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">另一个常用的主题值是unit，它接受一个数值和一个可选的单位。例如，以下代码将两个轴上的刻度长度都更改为0.5厘米。</p><pre class="kg kh ki kj gt oj nq ok bn ol om bi"><span id="955b" class="on kx iq nq b be oo op l oq or">p + theme(<br/>    axis.ticks.length = unit(.5, "cm")<br/>)</span></pre><p id="23bc" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在结束本节之前，有必要提一下其他三个常用的主题名称和主题对。这三个控制图例方向、位置和对齐。例如，我们可以将图例放在绘图顶部，并通过设置水平方向:</p><pre class="kg kh ki kj gt oj nq ok bn ol om bi"><span id="58fe" class="on kx iq nq b be oo op l oq or">p + theme(<br/>    legend.position = "bottom",<br/>    legend.direction = "horizontal",<br/>)</span></pre><h1 id="8ff5" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">将主题()应用于数据</h1><p id="0116" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在前两节中，我已经说明了主题函数的原理和用法。现在，为了进一步解释这个函数及其魔力，我创建了两个应用和不应用主题的图表。数据来自学校犯罪与安全调查(SSOCS)，已被清理。完整的代码可以在我的<a class="ae kv" href="https://github.com/jcvincentliu/data-blogging/tree/main/ggplot%20theme%20customization%20guide" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>上看到。</p><p id="2808" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">棒棒糖图显示了2762所公立学校中10种反校园暴力策略的流行程度。这些政策中的许多也强化了大众监控系统如何延续从学校到监狱的管道的故事。在第一个图中，没有主题元素，也没有添加和格式化轴刻度和标签。</p><pre class="kg kh ki kj gt oj nq ok bn ol om bi"><span id="6701" class="on kx iq nq b be oo op l oq or">data %&gt;%<br/>    ggplot(aes(x = Strategy, y = Percent)) +<br/>    geom_point(size=2, color = "steelblue") +<br/>    geom_segment(aes(x = Strategy, xend = Strategy, <br/>                     y = 0, yend = Percent),<br/>              size =1.3, color = "steelblue") +<br/>    coord_flip() +<br/>    scale_x_discrete(limits=rev)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/53f094efce9a3d1069b2f4c160108cf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eR3rN5LE2r6HAgMp-sFZ5A.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者创造的形象。主题转换前的原始棒棒糖图</figcaption></figure><p id="0f8e" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在下面的图表中，我通过以下步骤准备好发布棒棒糖图表:</p><ol class=""><li id="40b3" class="ns nt iq lq b lr mk lu ml lx nu mb nv mf nw mj nx ny nz oa bi translated">添加标题、副标题、题注，并格式化y轴(即由于<code class="fe nn no np nq b">coor_flip()</code>的影响，图表上的水平轴)</li><li id="5968" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj nx ny nz oa bi translated">应用<code class="fe nn no np nq b">theme_classic()</code>主题</li><li id="9ed3" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj nx ny nz oa bi translated">将文本字体改为“衬线”(适用于网页)</li><li id="d118" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj nx ny nz oa bi translated">设置图表标题、副标题和题注的水平对齐、大小、边距和粗细的格式</li><li id="8da5" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj nx ny nz oa bi translated">扩展图表的上边距、右边距和下边距，以便在图表和其他绘图区域之间留有空间</li><li id="518f" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj nx ny nz oa bi translated">移除轴线</li><li id="a126" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj nx ny nz oa bi translated">移除轴刻度</li><li id="d33b" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj nx ny nz oa bi translated">粗体y轴刻度标签</li><li id="a5ca" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj nx ny nz oa bi translated">添加一条水平主网格线，颜色为灰色，并将线宽增加到1.3毫米。</li></ol><pre class="kg kh ki kj gt oj nq ok bn ol om bi"><span id="c6d9" class="on kx iq nq b be oo op l oq or">data %&gt;%<br/>    ggplot(aes(x = Strategy, y = Percent)) +<br/>    geom_point(size=2, color = "steelblue") +<br/>    geom_segment(aes(x = Strategy, xend = Strategy, <br/>                     y = 0, yend = Percent),<br/>              size =1.3, color = "steelblue") +<br/>    coord_flip() +<br/>    theme_classic() +<br/>    labs(y = "", x = "",<br/>         title = "Percent of Nationwide K–12 Public Schools Adopting Violence Reduction Strategies in 2018",<br/>         subtitle = "In 2018, a majority of public schools adopted some forms of anti-violence methods with requiring visitor\n check-in being the most prevalent one (96%) and checking for metal detectors being the least (7.6%).",<br/>         caption = "Source: 2017-2018 School Survey on Crime and Safety data, National Center for Education Statistics")+<br/>    scale_x_discrete(limits=rev) +<br/>    scale_y_continuous(labels = scales::percent, <br/>                       expand = c(0,0),<br/>                       limits = c(0,1.013),<br/>                       breaks = seq(0,1,.2)) +<br/>    theme(<br/>      text = element_text(family="serif"),<br/>      plot.title = element_text(hjust = 1,  # move title along the line<br/>                                size = 11,<br/>                                face = "bold",<br/>                                margin = margin(b = 10)), # bottom margin<br/>      plot.subtitle = element_text(size=9, face = "italic",<br/>                                   margin = margin(t = 0, b=10)),<br/>      plot.caption = element_text(hjust = 0, size =9,<br/>                                  margin = margin(t = 0)), # no top margin<br/>      <br/>      plot.margin = unit(c(t=0.3,r=0.5,b=0.3,l=0), <br/>                         "cm"),<br/>      axis.line = element_blank(), # no axis lines<br/>      axis.ticks = element_blank(), # no axis ticks<br/>      axis.text.y = element_text(face = "bold"), # bold axis labels <br/>      panel.grid.major.y = element_line(size=1.3, # add x (horizontal) grid lines<br/>                                        lineend = "round")      <br/>    )</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/dac2969dc99cb7c8c3b6beead8da5295.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VM6N3hLISg_wMOk7SlQD5A.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者创造的形象。主题转换后完成的棒棒糖图</figcaption></figure><p id="af30" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">你对剧情变化满意吗？</p><h1 id="0a96" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="f4e6" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在本帖中，我们谈到了如何通过<em class="mp">主题()</em>和<em class="mp">主题_*() </em>函数自定义剧情外观。在本系列的下一部分中，我们将重点关注比例变换以及为什么这种变换是有用的。在第三部分，我们可能会谈到颜色的选择。</p><p id="8d00" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果你有更多关于主题功能的问题，这个教程可能会有所帮助。</p><p id="da63" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果你喜欢这个帖子，请在Medium 上<strong class="lq ir">关注我。</strong></p><p id="4dfd" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">你也可以看到我的个人网站<a class="ae kv" href="https://jcvincentliu.netlify.app/" rel="noopener ugc nofollow" target="_blank">这里</a>和我的LinkedIn <a class="ae kv" href="https://www.linkedin.com/in/jcvincentliu/" rel="noopener ugc nofollow" target="_blank">这里</a>。</p></div></div>    
</body>
</html>