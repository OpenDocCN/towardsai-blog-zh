<html>
<head>
<title>Creating a Deep Learning Environment with TensorFlow GPU</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用TensorFlow GPU创建深度学习环境</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/creating-a-deep-learning-environment-with-tensorflow-gpu-c16980ed1f67?source=collection_archive---------3-----------------------#2021-02-11">https://pub.towardsai.net/creating-a-deep-learning-environment-with-tensorflow-gpu-c16980ed1f67?source=collection_archive---------3-----------------------#2021-02-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="0f7c" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/machine-learning/deep-learning" rel="noopener ugc nofollow" target="_blank">深度学习</a></h2><div class=""/><p id="e0a2" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">嗨！在本文中，我们将讨论如何为我们的机器创建深度学习环境。在开始这篇文章之前，我将给出关于我使用的操作系统和图形处理器的信息。所以我们开始吧！</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi ku"><img src="../Images/b52f2c44201747b43957217a52c71b06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RCeS3m0QvbPgR4Qy"/></div></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">由<a class="ae lk" href="https://unsplash.com/@christianw?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯蒂安·威迪格</a>在<a class="ae lk" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="c05c" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">我正在使用的机器使用Windows 10 Pro作为操作系统。如果你想学习你的显卡的特性，你可以通过输入dxdiag而不是搜索来学习你的显卡的特性。</p><p id="5580" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">⚙️<strong class="jy ja">OS:</strong>windows 10 pro<br/>⚙️<strong class="jy ja">cuda工具包:</strong>10<br/>⚙️<strong class="jy ja">cud nn:</strong>7.4<br/>⚙️<strong class="jy ja">tensor flow GPU:</strong>1 . 14 . 0<br/>⚙️<strong class="jy ja">keras:</strong>2 . 2 . 5</p><p id="e6d2" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated"><strong class="jy ja">第一步:获取显卡信息</strong></p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/ac7249663b12c5899f538e3b3f0a1777.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/0*jxjfO30UDcDiChE7.png"/></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">图像由<a class="ae lk" href="https://www.top-password.com/blog/how-to-run-directx-diagnostic-tool-in-windows-10/" rel="noopener ugc nofollow" target="_blank">参考文献【1】</a></figcaption></figure><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div class="gh gi lm"><img src="../Images/d419d707a31274f49d1bd9230439b9a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:298/format:webp/1*9iphSVqHN2jzpWaQTBfOzg.png"/></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">作者图片</figcaption></figure><p id="3668" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">如果您愿意，您可以通过将下面的代码写入终端，在短时间内学会这一步。</p><figure class="kv kw kx ky gt kz"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="10bc" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">然后我们需要去NVIDIA的网站进行必要的下载。在输出中，您将看到图形卡的名称，如下图所示。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/f5fb89f5268f8ca9320593637e79c3c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/0*yMBStoumRa7f9VJQ.png"/></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">作者图片</figcaption></figure><p id="0629" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated"><strong class="jy ja">步骤2:检查图形处理器</strong></p><p id="0e32" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">在<a class="ae lk" href="https://developer.nvidia.com/cuda-gpus#collapse4" rel="noopener ugc nofollow" target="_blank">https://developer.nvidia.com/cuda-gpus#collapse4</a>确定适合您机器的处理器。例如，在下图中，我们通过检查我积极工作的机器的处理器，了解了处理能力。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/48a288b05759600a92deea934370495f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/0*RMEK70Pp3CzPzStw.png"/></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">控制夸德罗RTX 5000处理器</figcaption></figure><p id="a12c" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated"><strong class="jy ja">第三步:安装CUDA工具包和cuDNN工具</strong></p><p id="2e8c" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">现在我们需要在这一步非常小心地行动。我们将需要安装CUDA和cuDNN工具，它与我们将使用的TensorFlow版本相匹配。在此警告大家，如果下载不同版本，会遇到很多错误。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi lr"><img src="../Images/e9263d15ecd1a111fd8d4c77d2bbb2a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pfa3gzfc4tuAZ0OPZPmwfQ.png"/></div></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated"><a class="ae lk" href="https://www.tensorflow.org/install/source_windows" rel="noopener ugc nofollow" target="_blank">来源【3】</a></figcaption></figure><p id="fc72" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">我最初安装了<strong class="jy ja"> tensorflow-gpu==1.15.0 </strong>，因为我与TensorFlow 2.x版本有很多冲突。然而，我在运行Mask RCNN时遇到了几个版本冲突。在这篇文章中，我纠正了错误。如果您严格按照这些步骤操作，您的代码将不会出错。</p><p id="4c89" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">💎<strong class="jy ja"> tensorflow-gpu==1.14.0 </strong>所需的编译显示<strong class="jy ja"> cuDNN </strong>的<strong class="jy ja"> 7.4 </strong>和<strong class="jy ja"> CUDA工具包</strong>的版本<strong class="jy ja"> 10 </strong>。</p><p id="aa9b" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">要访问cuDNN版本，请访问<a class="ae lk" href="https://developer.nvidia.com/rdp/cudnn-archive" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/4d20a38e803d52b30e5cc6e12c42b259.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/0*oVjSM1gkak25cqOd.png"/></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">CUDA 10.0的兼容cuDNN版本</figcaption></figure><p id="c6c4" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">👉您可以点击<a class="ae lk" href="https://developer.nvidia.com/cuda-10.0-download-archive?target_os=Windows&amp;target_arch=x86_64&amp;target_version=10&amp;target_type=exelocal" rel="noopener ugc nofollow" target="_blank">链接</a>下载所选版本。</p><p id="192f" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">安装完这些工具后，我们需要将它们添加到path变量中。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/ed6eb9adf713b1e2610c403bb03d9168.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/0*yF9yZy_WMygFoOfB.png"/></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated"><a class="ae lk" href="https://www.architectryan.com/2018/08/31/how-to-change-environment-variables-on-windows-10/" rel="noopener ugc nofollow" target="_blank">图像来源</a></figcaption></figure><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/aebde24afa168139c5c40a308dfe500a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/0*cFCJbg1g8pdoOI9c.png"/></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">CUDA路径设置</figcaption></figure><p id="5a3b" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">如果它没有作为<strong class="jy ja">路径变量</strong>添加，您需要检查这些设置。控制系统环境变量是非常重要的🧷</p><p id="9197" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">第四步:创建虚拟环境</p><figure class="kv kw kx ky gt kz"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="c864" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">此外，由于我使用了Anaconda提示符，所以我用conda创建了虚拟环境。然后我们用activate命令进入虚拟环境。</p><p id="3853" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated"><strong class="jy ja">第五步:安装Tensorflow-gpu </strong></p><p id="594c" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">然后我们去tensorflow-gpu设置。在这个阶段，让我们注意使用conda安装，而不是pip。这样做的原因是您在安装时得到了您的批准。我们也将看到CUDA和cuDNN版本安装，而给予这一批准。</p><figure class="kv kw kx ky gt kz"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="5843" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated"><strong class="jy ja">第五步:cuDNN和CUDA文件交换</strong> ⛓</p><p id="e416" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">当我们打开我们下载的cuDNN归档文件时，我们将看到以下文件夹。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/c2841867bbb0f3744d327d432389b56a.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/0*3lQmDWI8arTBIft3.png"/></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">作者图片</figcaption></figure><p id="c038" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">我们将这些文件夹复制到安装CUDA的文件夹中。比如我把它复制到了<strong class="jy ja"><em class="lw">C:\ Program Files \ NVIDIA GPU Computing Toolkit \ CUDA \ v 10.0</em></strong>中的文件夹。</p><p id="88a1" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">在所有这些阶段之后，必须安装TensorFlow GPU。如果您愿意，可以使用以下命令控制终端。对于这一点，先别忘了写python到终端！</p><figure class="kv kw kx ky gt kz"><div class="bz fp l di"><div class="ln lo l"/></div></figure><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi lx"><img src="../Images/31658a93539ad42f66ed7191b9b5a7a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sI_e4W8DOIiS41-N.png"/></div></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">物理GPU控制</figcaption></figure><p id="a8ff" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">另外我想提出一个警告。如果您像我一样得到由<strong class="jy ja"> Skimage </strong>库的版本引起的警告或错误，运行下面的命令。</p><figure class="kv kw kx ky gt kz"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="c5f9" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">🔮经过所有这些阶段，你的深度学习环境将毫无问题地工作！祝你健康美好的日子。</p></div><div class="ab cl ly lz hu ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ij ik il im in"><p id="2f7f" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">🎉<em class="lw">你也可以关注我</em><a class="ae lk" href="https://github.com/BuseYaren" rel="noopener ugc nofollow" target="_blank"><strong class="jy ja"><em class="lw">GitHub</em></strong></a><em class="lw"/><a class="ae lk" href="https://www.youtube.com/channel/UCzAODG3wgdKtRov8VvyXvtw" rel="noopener ugc nofollow" target="_blank"><strong class="jy ja"><em class="lw">YouTube</em></strong></a><em class="lw">和</em><a class="ae lk" href="https://twitter.com/BuseYarenTekin" rel="noopener ugc nofollow" target="_blank"><strong class="jy ja"><em class="lw">Twitter</em></strong></a><em class="lw">占更多内容！</em></p><h1 id="ac69" class="mf mg iq bd mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc bi translated">参考</h1><ol class=""><li id="07c9" class="nd ne iq jy b jz nf kd ng kh nh kl ni kp nj kt nk nl nm nn bi translated"><a class="ae lk" href="https://en.wikipedia.org/wiki/DxDiag" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/DxDiag</a></li><li id="37ee" class="nd ne iq jy b jz no kd np kh nq kl nr kp ns kt nk nl nm nn bi translated"><a class="ae lk" href="https://towardsdatascience.com/tensorflow-gpu-installation-made-easy-use-conda-instead-of-pip-52e5249374bc" rel="noopener" target="_blank">https://towards data science . com/tensor flow-GPU-installation-made-easy-use-conda-instead-of-pip-52e 5249374 BC</a></li><li id="af3e" class="nd ne iq jy b jz no kd np kh nq kl nr kp ns kt nk nl nm nn bi translated"><a class="ae lk" href="https://www.tensorflow.org/install/source_windows" rel="noopener ugc nofollow" target="_blank">https://www.tensorflow.org/install/source_windows</a></li><li id="1ac7" class="nd ne iq jy b jz no kd np kh nq kl nr kp ns kt nk nl nm nn bi translated"><a class="ae lk" href="https://www.tensorflow.org/" rel="noopener ugc nofollow" target="_blank">https://www.tensorflow.org/</a></li><li id="8b16" class="nd ne iq jy b jz no kd np kh nq kl nr kp ns kt nk nl nm nn bi translated"><a class="ae lk" href="https://developer.nvidia.com/cuda-toolkit-archive" rel="noopener ugc nofollow" target="_blank">https://developer.nvidia.com/cuda-toolkit-archive</a></li><li id="14ad" class="nd ne iq jy b jz no kd np kh nq kl nr kp ns kt nk nl nm nn bi translated"><a class="ae lk" href="https://www.architectryan.com/2018/08/31/how-to-change-environment-variables-on-windows-10/" rel="noopener ugc nofollow" target="_blank">https://www . architectryan . com/2018/08/31/how-to-change-environment-variables-on-windows-10/</a></li></ol></div></div>    
</body>
</html>