<html>
<head>
<title>How to Perform Speech Synthesis in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python中执行语音合成</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/how-to-perform-speech-synthesis-in-python-7784a2f43f89?source=collection_archive---------0-----------------------#2020-04-29">https://pub.towardsai.net/how-to-perform-speech-synthesis-in-python-7784a2f43f89?source=collection_archive---------0-----------------------#2020-04-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="592e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Python中的文本到语音转换(TTS)简介，用于执行有用的任务</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/71f6b8bbba3feb8aeedd12f9bc811b22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ph4RUt4ZcBOLmkl-"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kv" href="https://unsplash.com/@digitalmike?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Michal Czyz </a>拍摄的照片</figcaption></figure><p id="befc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">文本到语音</strong> (TTS)是使用软件以语音的形式创建音频输出。程序用来将页面上的文本转换成语音的音频输出的程序通常是文本到语音引擎。机器翻译结果的音频输出需要TTS引擎。</p><p id="0bfa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">TTS软件被谷歌、苹果、微软、亚马逊等重要公司广泛使用。谷歌开发了谷歌助手，苹果开发了Siri，微软开发了Cortana，亚马逊开发了Alexa。所有这些先进的软件都使用了大量的ML技术和算法。</p><p id="a65f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当你问Siri一些事情时，它会使用机器学习处理一个答案，然后使用TTS，它会用语音回答你。</p><p id="3454" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">今天我们将不构建语音助手。相反，我们将首先介绍Python中的<strong class="ky ir"> TTS </strong>，然后介绍如何创建一个可以朗读文本文件的程序。</p><p id="2198" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们将把我们的文本到语音的基本功能嵌入到用Kivy制作的GUI中。</p><h1 id="6171" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">Pyttsx3</h1><p id="0c04" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">今天，为了进行语音合成，我们将使用<a class="ae kv" href="https://pypi.org/project/pyttsx3/" rel="noopener ugc nofollow" target="_blank"> pyttsx3 python包</a>。要通过<a class="ae kv" href="https://pip.pypa.io/en/stable/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="mp">pip</em></strong></a>安装它，我们打开终端并键入:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="c041" class="mv lt iq mr b gy mw mx l my mz">pip install pyttsx3</span></pre><p id="021a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装了这个包之后，我们就可以开始执行文本到语音的转换了</p><h1 id="dd6e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">第一个语音合成程序</h1><p id="d73f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在这一段中，我们将学习如何创建一个非常简单的TTS脚本，它根据给定的输入执行文本到语音转换:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="1394" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们:导入<a class="ae kv" href="https://pypi.org/project/pyttsx3/" rel="noopener ugc nofollow" target="_blank">pyttsx 3</a>(<strong class="ky ir">Line 1</strong>)，使用<a class="ae kv" href="https://pypi.org/project/pyttsx3/" rel="noopener ugc nofollow" target="_blank"> pyttsx3 </a>模块(<strong class="ky ir"> Line 2 </strong>)创建引擎对象。在<strong class="ky ir">第5/6行，</strong>我们对字符串进行语音合成。</p><p id="14c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">相当简单！现在，在构建另一个TTS程序之前，让我们对这段代码做一些改进。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="b758" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们定义了函数，所以我们可以随时使用TTS在这种情况下，我们在循环中使用它。对于我们给程序的每个文本，它将对其进行语音合成。很酷，但仍然没有多大用处。</p><p id="5dbd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们看看如何应用语音合成来完成一些有用的任务。</p><h1 id="c773" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">有用的应用</h1><p id="f227" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">你曾经不得不在第二天阅读那份文件吗？那份又长又无聊的文件？嗯，我不得不。</p><blockquote class="nc nd ne"><p id="4c26" class="kw kx mp ky b kz la jr lb lc ld ju le nf lg lh li ng lk ll lm nh lo lp lq lr ij bi translated">我们是程序员，有问题吗？解决它！</p></blockquote><p id="24b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我学会使用TTS后，我首先想到的是，我们之前看到的问题本可以得到解决。听东西比读东西要快得多，也轻松得多，尤其是当它很无聊或太长的时候。</p><p id="68f1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，对于给定的文本文件，我选择使用TTS来听它而不是读它:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="031c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个简单的脚本中，我们读取了<em class="mp"> example.txt </em>文件的内容。然后，我们使用之前讨论过的say函数将文本到语音应用到<em class="mp"> example.txt </em>文件<em class="mp">的内容。</em></p><h2 id="b713" class="mv lt iq bd lu ni nj dn ly nk nl dp mc lf nm nn me lj no np mg ln nq nr mi ns bi translated">重要的</h2><p id="a5d2" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">当您使用这个脚本时，确保用您想要大声朗读的文件替换(<strong class="ky ir">第3行</strong>)这个<em class="mp"> example.txt </em>文件。</p><h1 id="e450" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">在GUI中嵌入TTS基本功能</h1><p id="a004" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这一步非常重要。知道如何将程序的功能嵌入到GUI中真的会有所不同，即使是一个简单的GUI。正如我在介绍段落中所说，我们将使用<a class="ae kv" href="https://kivy.org/#home" rel="noopener ugc nofollow" target="_blank"> Kivy </a>。它是一个开源的Python库，允许我们快速开发具有创新图形的GUI应用程序。更多关于<a class="ae kv" href="https://kivy.org/#home" rel="noopener ugc nofollow" target="_blank"> Kivy </a>的信息可以在<a class="ae kv" href="https://kivy.org/#home" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="1f9b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，让我们用它创建一个hello-world应用程序:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="4656" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，代码非常简单:</p><p id="7370" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第1/2行:</strong>导入的Kivy.app和Kivy按钮</p><p id="7fc5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第4/6行:</strong>创建了TestApp类，它返回给我们一个带有hello world按钮的GUI。</p><p id="6e15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第8行:</strong>运行应用程序</p><p id="6768" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个简单的脚本输出如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/1b6e2854e29c7aae4a5b1e7bb6b4f916.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rTe4xDNqEVypulKROy84qA.png"/></div></div></figure><h2 id="d515" class="mv lt iq bd lu ni nj dn ly nk nl dp mc lf nm nn me lj no np mg ln nq nr mi ns bi translated">把...嵌入</h2><p id="35ca" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在，我们可以将TTS功能嵌入到GUI中:我们想要一个GUI应用程序，它可以针对给定的文本执行语音合成。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="08dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个简单的30行代码中，我们:</p><ol class=""><li id="068d" class="nu nv iq ky b kz la lc ld lf nw lj nx ln ny lr nz oa ob oc bi translated">导入所需模块→第1/5行</li><li id="6fd1" class="nu nv iq ky b kz od lc oe lf of lj og ln oh lr nz oa ob oc bi translated">粘贴<code class="fe oi oj ok mr b">say()</code>我们在前面步骤中创建的函数→第8/13行</li><li id="38fb" class="nu nv iq ky b kz od lc oe lf of lj og ln oh lr nz oa ob oc bi translated">构建我们的GUI:</li></ol><ul class=""><li id="c56e" class="nu nv iq ky b kz la lc ld lf nw lj nx ln ny lr ol oa ob oc bi translated">使用<a class="ae kv" href="https://kivy.org/doc/stable/api-kivy.uix.boxlayout.html" rel="noopener ugc nofollow" target="_blank"> Kivy的方框布局创建布局</a> →第18行</li><li id="7d2e" class="nu nv iq ky b kz od lc oe lf of lj og ln oh lr ol oa ob oc bi translated">生成了一个文本输入对象，我们将在这里输入我们的文本→第19行</li><li id="e7dc" class="nu nv iq ky b kz od lc oe lf of lj og ln oh lr ol oa ob oc bi translated">生成一个按钮，当按下时，执行我们将在第25行定义的功能。→第20行</li><li id="b8e3" class="nu nv iq ky b kz od lc oe lf of lj og ln oh lr ol oa ob oc bi translated">将我们生成的对象添加到布局中→第21/22行</li><li id="34c6" class="nu nv iq ky b kz od lc oe lf of lj og ln oh lr ol oa ob oc bi translated">返回带有文本输入和按钮对象的布局→第23行</li><li id="f638" class="nu nv iq ky b kz od lc oe lf of lj og ln oh lr ol oa ob oc bi translated">定义了<code class="fe oi oj ok mr b">self.perform()</code>函数，一旦按下，它将获取TextInput对象的文本，并使用第8行定义的<code class="fe oi oj ok mr b">say()</code>函数对其执行TTS。→第25/27行</li></ul><p id="b7a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">4.执行GUI应用程序</p><p id="2379" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">执行这段代码后，您应该会看到如下输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/871e1781cb2ded4c1532d27d87f1b2a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CpfwmJVLwcx70v6XMCLrpg.png"/></div></div></figure><p id="4f5d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过在那里输入您的文本并单击执行语音合成按钮，应用程序将启动给定文本的TTS。</p><h1 id="4d13" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="ddde" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">今天我们已经看到了Python中语音合成的工作原理。因此，我们在一个有用的大声朗读文档的应用程序中实现了文本到语音的转换。TTS应用程序近年来增长显著，学习如何构建这种类型的应用程序绝对是提高编程技能的好方法。知道实现语音合成也适用于日常代码；例如，您可以在测试代码时使用TTS来接收在代码执行期间发生的事情的语音通知。</p></div></div>    
</body>
</html>