<html>
<head>
<title>Make Extra Money on the Side With Data Science!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用数据科学赚外快！</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/make-extra-money-on-the-side-with-data-science-984a623c53f5?source=collection_archive---------0-----------------------#2022-03-13">https://pub.towardsai.net/make-extra-money-on-the-side-with-data-science-984a623c53f5?source=collection_archive---------0-----------------------#2022-03-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4faf" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在5个简单的步骤中使用FastAPI、Docker、GCP云运行和Rapid API将您的机器学习模型货币化！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/96f6bf2a3e7fb32b9c767de765ba3173.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fre-m0y-tZTxWkq8"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">亚历山大·密尔斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="4f4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">️The梦想每一个<a class="ae ky" href="https://en.wikipedia.org/wiki/FIRE_movement" rel="noopener ugc nofollow" target="_blank">火(财务独立，提前退休)</a>爱好者是赚足够的被动收入，提前退休，在热带海滩啜饮椰子🏖️ !在我对FIRE的追求中，我偶然发现了一种通过将模型部署为API并出售对它的访问权来将我的数据科学副业项目货币化的巧妙方法。虽然这些知识还没有让我赚到几百万，但我认为这是一个很好的学习经历，也是一个赚取咖啡钱的好方法。以下是利用数据科学赚钱的五个步骤，并附有代码说明！</p><h1 id="1797" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">🌟第一步:发明一个奇特的API</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mn"><img src="../Images/c719a33753e432a2a8b51e7a9011c84c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0tzGYudssDSlpsSz"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@jjying?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> JJ英</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="1580" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一步也是最难的。你首先需要创造一个别人会为之付费的产品或服务。谢天谢地，数据科学家可以解决的问题并不缺乏！</p><p id="0026" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将从重用我以前在开发的<a class="ae ky" href="https://towardsdatascience.com/boy-or-girl-a-machine-learning-web-app-to-detect-gender-from-name-16dc0331716c" rel="noopener" target="_blank">的名字到性别的预测模型开始。该模型将姓名串作为输入和输出，如果这些姓名更多地与男孩或女孩相关联的话。有关数据、预处理和训练程序的更多信息，请参考此</a><a class="ae ky" href="https://towardsdatascience.com/boy-or-girl-a-machine-learning-web-app-to-detect-gender-from-name-16dc0331716c" rel="noopener" target="_blank">帖子</a>。训练出来的模型准确率超过80%！</p><p id="89bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦我们有了训练好的模型，我们可以使用<a class="ae ky" href="https://fastapi.tiangolo.com/" rel="noopener ugc nofollow" target="_blank"> FastAPI </a>或<a class="ae ky" href="https://flask.palletsprojects.com/en/2.0.x/" rel="noopener ugc nofollow" target="_blank"> Flask </a>将模型包装成API。API代码相对简单，如下所示。首先，我们导入必要的库，它也可以包含本地模块，比如<code class="fe mo mp mq mr b">preprocess</code>。然后我们从<code class="fe mo mp mq mr b">models</code>目录中加载保存的模型文件。接下来，我们实例化一个FastAPI应用程序，然后创建由以下操作组成的<code class="fe mo mp mq mr b">predict</code>端点。</p><ol class=""><li id="1605" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated">接受一个名字列表作为输入。</li><li id="83d3" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">拆分非字母字符上的所有名称。例如，如果输入名称是“乔·拜登”，它将被分成两个单词:“乔”和“拜登”我们这样做是因为我们只根据名字训练模型，名字中没有空格。因此，我们确保在预测过程中名称也是分开的。</li><li id="7d01" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">只保留前十个名字，以确保我们的API在合理的时间内完成运行。</li><li id="eb39" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">将名称预处理成模型期望的格式，例如将它们转换成小写，拆分各个字符，将所有名称填充到相同的长度，并将字符编码成数字。</li><li id="a6a0" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">通过模型预测运行预处理的名称</li><li id="5642" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">将概率转换为“男孩”或“女孩”预测。</li><li id="537c" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">格式化输出并作为API的响应返回。</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码</figcaption></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码</figcaption></figure><p id="9263" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，应用程序的主要模块只是在端口<code class="fe mo mp mq mr b">8080</code>上运行带有<code class="fe mo mp mq mr b">uvicorn</code>的API，因为这是GCP云运行默认使用的端口。</p><h1 id="40f6" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">🐳步骤2:将API包装到Docker容器中</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/6acd222d52f4fdbda59c7746f60093bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jC0NG4vPw6kc6UhD"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@carrier_lost?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">伊恩·泰勒</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="89b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦你把你的API开发成Flask或FastAPI应用程序，你可以通过添加一个非常简单的<code class="fe mo mp mq mr b">Dockerfile</code>到你的存储库中，把它包装成Docker容器，如下所示。Dockerfile将所有必需的文件添加到映像中，从<code class="fe mo mp mq mr b">requirements.txt</code>文件安装所需的依赖项，并启动<code class="fe mo mp mq mr b">gunicorn</code>服务器来运行API。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码</figcaption></figure><p id="96a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以在本地测试docker映像，首先运行Docker容器，然后使用python <code class="fe mo mp mq mr b">requests</code>库向它发送一些数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码</figcaption></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/9b54c393c3cab87606c2ce4e798b66d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*cW5U_W1DO1RkYXb8Hxtksg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="800e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们的Docker容器在本地工作，我们可以继续下一步。</p><h1 id="f565" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">☁️第3步:使用云服务(比如GCP Cloud Run)托管API</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/90d2e18c40fb53fff77b8d0210757841.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6F-lD-IZCRiIIxhC"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@tvick?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">泰勒维克</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="115a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">部署docker容器有几种方式，比如<a class="ae ky" href="https://devcenter.heroku.com/categories/deploying-with-docker" rel="noopener ugc nofollow" target="_blank"> Heroku </a>、<a class="ae ky" href="https://aws.amazon.com/fargate/" rel="noopener ugc nofollow" target="_blank"> AWS Fargate </a>和<a class="ae ky" href="https://cloud.google.com/run" rel="noopener ugc nofollow" target="_blank"> GCP云运行</a>。在这篇文章中，我将使用GCP云来部署我们的Docker容器，只需要一行代码，如下所示。在运行下面的代码之前，记得按照这里<a class="ae ky" href="https://cloud.google.com/sdk/docs/install" rel="noopener ugc nofollow" target="_blank">的说明</a>安装并初始化Gcloud CLI。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者代码</figcaption></figure><p id="8a8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如下所示，GCP云运行部署实际上是免费的，我们预计适度使用，从而最大限度地提高我们的利润率！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/38a5c91ec693643f6759dd52bac9ca5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:926/format:webp/1*hL7igDzvKkA20tW3uKMvBA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供，使用<a class="ae ky" href="https://cloud.google.com/products/calculator#id=69e7f4b4-65aa-462b-9cb1-bb45fa9ddc3b" rel="noopener ugc nofollow" target="_blank"> GCP的免费定价计算器</a>生成</figcaption></figure><h1 id="b3da" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">🚀步骤4:通过在Rapid API上发布来出售对API的访问权</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/908be1267c121b1ae5abf784b1d8b207.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RvewtUMQxvUSNbJf"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">詹姆斯·哈里森在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="c32d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Rapid API 中心是一项免费服务，可以发布你喜欢的API并将其货币化！只需点击<code class="fe mo mp mq mr b">My APIs</code> → <code class="fe mo mp mq mr b">Add New API</code>，按照UI中的步骤在Rapid API上注册您的API即可。您可以从GCP云运行控制台获取您的API URL，如下所示。如果你需要关于如何在RapidAPI上设置API的进一步分步指导，请看看这个由<a class="ae ky" href="https://www.youtube.com/channel/UC5DNytAJ6_FISueUfzZCVsw" rel="noopener ugc nofollow" target="_blank"> Ania Kubów </a>制作的<a class="ae ky" href="https://www.youtube.com/watch?v=GK4Pl-GmPHk&amp;t=3224s" rel="noopener ugc nofollow" target="_blank">精彩视频</a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/ca0da2ef29ce689b1839b32548ca39e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HADTO5LYDQLF-ZZ0KIeB8w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="4428" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Rapid API允许您为访问您的API设置自定义定价层。如下所示，我强烈推荐一个免费层，以及一个或多个付费层。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/14b68343b5de1003577fe4de588e1b27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*3eTuaKKRJ67tkTWEq8sEOw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者来自<a class="ae ky" href="https://rapidapi.com/stephenleo87-DGFI1at-XQ/api/name-gender1/" rel="noopener ugc nofollow" target="_blank"> RapidAPI </a></figcaption></figure><p id="f675" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您还可以为您的API创建文档站点，这是您的用户将看到并用来试验您的API的页面。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/dc4f4753723ec22315c0a308193baf3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WHK4h16OkGgtfNnPhTrmQQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者来自<a class="ae ky" href="https://rapidapi.com/stephenleo87-DGFI1at-XQ/api/name-gender1/" rel="noopener ugc nofollow" target="_blank"> RapidAPI </a></figcaption></figure><p id="18c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用文档UI，让我们测试一下Rapid API端点，以确认一切按预期工作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/e58dda6ac89a061445a1d998d00b2874.png" data-original-src="https://miro.medium.com/v2/resize:fit:742/format:webp/1*0PzeLUUBrpfXK_JuR5U2Jg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者来自<a class="ae ky" href="https://rapidapi.com/stephenleo87-DGFI1at-XQ/api/name-gender1/" rel="noopener ugc nofollow" target="_blank"> RapidAPI </a></figcaption></figure><h1 id="a55a" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">💸第五步:让它下雨吧！</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/20134a59e1e22a3a0776a61b8e3088aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A1HuXcZKAmn3zS4D"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@eyestetix?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Eyestetix工作室</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="2e39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样。现在剩下的就是坐以待毙，等待金钱滚滚而来！写一篇关于你的API的媒体文章，并在你的社交媒体上分享，这将有助于宣传你的API，这正是我写这篇文章的目的🙂</p><p id="84a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇文章是有益的。请点击<a class="ae ky" href="https://rapidapi.com/stephenleo87-DGFI1at-XQ/api/name-gender1/" rel="noopener ugc nofollow" target="_blank">链接</a>查看我的姓名性别快速API。你可以在<a class="ae ky" href="https://github.com/stephenleo/cloud-run-apis/tree/master/src/boyorgirl" rel="noopener ugc nofollow" target="_blank">我的Github repo </a>上找到这篇文章的所有代码。感谢阅读！</p></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><p id="e4b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢我的文章，请考虑关注我，并使用我下面的推荐链接成为一名灵媒会员。谢谢！</p><div class="ny nz gp gr oa ob"><a href="https://stephen-leo.medium.com/membership" rel="noopener follow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd iu gy z fp og fr fs oh fu fw is bi translated">加入我的介绍链接媒体-玛丽斯蒂芬利奥</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">stephen-leo.medium.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op ks ob"/></div></div></a></div></div></div>    
</body>
</html>