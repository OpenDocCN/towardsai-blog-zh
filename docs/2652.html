<html>
<head>
<title>Time Series Data Analysis In Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的时间序列数据分析</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/time-series-data-analysis-in-python-1492ee4ca974?source=collection_archive---------0-----------------------#2022-04-01">https://pub.towardsai.net/time-series-data-analysis-in-python-1492ee4ca974?source=collection_archive---------0-----------------------#2022-04-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="57ae" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Python Pandas中时间序列数据分析的实用指南</h2></div><p id="18e8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi le translated">ime系列数据是行业中最常见的数据类型之一，在您的职业生涯中可能会用到它。因此，了解如何使用它以及如何应用分析和预测技术对于每个有抱负的数据科学家来说至关重要。在这一系列文章中，我将介绍处理时间序列数据的基本技术，从数据操作、分析和可视化开始，以了解您的数据并为其做准备，然后使用统计技术、机器和深度学习技术进行预测和分类。这更像是一个实践指南，我将把每个讨论和解释的概念应用到真实数据中。</p><p id="02e3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个系列将由10篇文章组成:</p><ol class=""><li id="6c2f" class="ln lo it kk b kl km ko kp kr lp kv lq kz lr ld ls lt lu lv bi translated"><a class="ae lw" rel="noopener ugc nofollow" target="_blank" href="/manipulating-time-series-data-in-python-49aed42685a0">在Python Pandas中操作时间序列数据【实用指南】</a></li><li id="4ff8" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated"><a class="ae lw" rel="noopener ugc nofollow" target="_blank" href="/time-series-data-analysis-in-python-1492ee4ca974">Python熊猫中的时间序列分析【实用指南】</a>(你在这里)</li><li id="38d4" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated"><a class="ae lw" href="https://medium.com/towards-artificial-intelligence/time-series-data-visualization-in-python-2b1959726312" rel="noopener">用Python可视化时间序列数据【实用指南】</a></li><li id="8deb" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated"><a class="ae lw" rel="noopener ugc nofollow" target="_blank" href="/time-series-forecasting-with-arima-models-in-python-part-1-c2940a7dbc48">利用Python中的ARIMA模型进行时间序列预测【第一部分】</a></li><li id="d738" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated"><a class="ae lw" rel="noopener ugc nofollow" target="_blank" href="/time-series-forecasting-with-arima-models-in-python-part-2-91a30d10efb0">利用Python中的ARIMA模型进行时间序列预测【第二部分】</a></li><li id="1c21" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated"><a class="ae lw" rel="noopener ugc nofollow" target="_blank" href="/machine-learning-for-time-series-data-in-python-regression-5e19fa2e7471">时间序列数据的机器学习【回归】</a></li><li id="b1bf" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated">时间序列数据的机器学习[分类](即将推出)</li><li id="8dac" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated">时间序列数据的深度学习[实用指南](即将推出)</li><li id="11ba" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated">使用统计分析、机器学习和深度学习的时间序列预测项目(即将推出)</li><li id="657d" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated">使用统计分析、机器学习和深度学习进行时间序列分类(即将推出)</li></ol><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mc"><img src="../Images/5ac7028aeb2ee0ab173308d0ac5b4b9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GFBM-gO27B2K1JCt"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">时序数据分析/由<a class="ae lw" href="https://unsplash.com/@lukechesser?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Luke Chesser </a>在<a class="ae lw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="02d4" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">目录:</h1><ol class=""><li id="7986" class="ln lo it kk b kl nk ko nl kr nm kv nn kz no ld ls lt lu lv bi translated">相关性和自相关性</li><li id="01b1" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated">时间序列模型</li><li id="0a5f" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated">自回归模型</li><li id="2103" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated">移动平均(MA)和ARMA模型</li><li id="a343" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated">案例研究:气候变化</li></ol><p id="2b58" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">本文使用的所有代码和数据集都可以在这个</strong> <a class="ae lw" href="https://github.com/youssefHosni/Time-Series-Analysis/tree/main/Time%20Series%20Analysis" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">资源库</strong> </a> <strong class="kk iu">中找到。</strong></p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><p id="0845" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">如果你想免费学习数据科学和机器学习，看看这些资源:</strong></p><ul class=""><li id="36e4" class="ln lo it kk b kl km ko kp kr lp kv lq kz lr ld nw lt lu lv bi translated">免费互动路线图，自学数据科学和机器学习。从这里开始:<a class="ae lw" href="https://aigents.co/learn/roadmaps/intro" rel="noopener ugc nofollow" target="_blank">https://aigents.co/learn/roadmaps/intro</a></li><li id="3309" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld nw lt lu lv bi translated">数据科学学习资源搜索引擎(免费)。将你最喜欢的资源加入书签，将文章标记为完整，并添加学习笔记。<a class="ae lw" href="https://aigents.co/learn" rel="noopener ugc nofollow" target="_blank">https://aigents.co/learn</a></li><li id="f0e5" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld nw lt lu lv bi translated">想要在导师和学习社区的支持下从头开始学习数据科学吗？免费加入这个学习圈:<a class="ae lw" href="https://community.aigents.co/spaces/9010170/" rel="noopener ugc nofollow" target="_blank">https://community.aigents.co/spaces/9010170/</a></li></ul><p id="2c7b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想在数据科学&amp; AI领域开始职业生涯，但你不知道如何开始。我提供数据科学指导课程和长期职业指导:</p><ul class=""><li id="454d" class="ln lo it kk b kl km ko kp kr lp kv lq kz lr ld nw lt lu lv bi translated">长期指导:<a class="ae lw" href="https://lnkd.in/dtdUYBrM" rel="noopener ugc nofollow" target="_blank">https://lnkd.in/dtdUYBrM</a></li><li id="489c" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld nw lt lu lv bi translated">辅导会议:<a class="ae lw" href="https://lnkd.in/dXeg3KPW" rel="noopener ugc nofollow" target="_blank">https://lnkd.in/dXeg3KPW</a></li></ul><p id="c995" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="nx">加入</em> </strong> <a class="ae lw" href="https://youssefraafat57.medium.com/membership" rel="noopener"> <strong class="kk iu"> <em class="nx">中等会员</em> </strong> </a> <strong class="kk iu"> <em class="nx">计划，只需5美元，继续无限制学习。如果你使用下面的链接，我会收到一小部分会员费，不需要你额外付费。</em> </strong></p><div class="ny nz gp gr oa ob"><a href="https://youssefraafat57.medium.com/membership" rel="noopener follow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd iu gy z fp og fr fs oh fu fw is bi translated">加入我的介绍链接媒体-优素福胡斯尼</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">阅读Youssef Hosni(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">youssefraafat57.medium.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op mm ob"/></div></div></a></div></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="8e8a" class="ms mt it bd mu mv oq mx my mz or nb nc jz os ka ne kc ot kd ng kf ou kg ni nj bi translated">1.相关性和自相关性</h1><p id="d879" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在本节中，您将了解时间序列的相关性和自相关性的概念。相关性描述两个时间序列之间的关系，而自相关描述时间序列与其过去值之间的关系。</p><h2 id="17f2" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">1.1.两个时间序列的相关性</h2><p id="7a6a" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">两个时间序列的相关性衡量它们之间的差异。相关系数用一个数字概括了这种关系。相关性为1意味着两个系列具有完美的线性关系，没有偏差。高相关性意味着这两个系列一起变化很大。低相关性意味着它们一起变化，但关联很弱。高度负相关意味着它们在相反的方向上变化，但仍然具有线性关系。</p><p id="21db" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在计算两个趋势时间序列之间的相关性时，有一个常见的错误。考虑两个趋势相同的时间序列。即使这两个系列完全不相关，你仍然可以得到一个非常高的相关性。这就是为什么，当你看两只股票的相关性时，你应该看它们的<strong class="kk iu">回报</strong>的相关性，而不是它们的<strong class="kk iu">水平</strong>的相关性。</p><p id="3379" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在下面的例子中，两个数列，<a class="ae lw" href="https://github.com/youssefHosni/Time-Series-Analysis/tree/main/Time%20Series%20Analysis" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">的股票价格和</strong> </a>的UFO目击事件，都随时间呈上升趋势。当然，那两个数列没有关系，但是相关系数是0.94。但是如果你计算百分比变化的相关性，相关性下降到接近零。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/d176fa36b079f94b30c688f57bade3eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*NIlQGGhunxbbTRJzCralXg.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">水平和变化的相关性。</figcaption></figure><p id="eb08" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下图显示了这两个系列与时间的关系。如上所述，这是因为它们都是趋势系列。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/b5b47024f91e6bce7a8a3fdc7fc7ae80.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*URgnhbkYreuBsQjKYC1Sew.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">两个系列随时间的变化。</figcaption></figure><h2 id="68bd" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">1.2.简单线性回归</h2><p id="cc30" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">时间序列的简单线性回归可找出因变量y和自变量x之间的最佳拟合直线的斜率β和截距α。x和y可以是两个时间序列。</p><p id="0eaf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">回归技术非常普遍，因此Python中有许多包可以使用。在统计模型中，有OLS。在<strong class="kk iu"> numpy </strong>中，有<strong class="kk iu"> polyfit </strong>，如果你设置degree，它将数据拟合成一条线，这就是线性回归。熊猫有<strong class="kk iu"> ols </strong>方法，<strong class="kk iu"> scipy </strong>有线性回归函数。注意x和y的顺序在不同的包中是不一致的。</p><p id="0a94" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在下面的例子中，我们将遗憾地使用标准普尔500指数作为独立变量的石油价格值。数据可以在<a class="ae lw" href="https://github.com/youssefHosni/Time-Series-Analysis/tree/main/Time%20Series%20Analysis" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">这里找到</strong> </a>。您需要添加一列1作为从属的右侧变量。您必须这样做的原因是，回归函数假设如果没有常量列，那么您希望在没有截距的情况下运行回归。通过添加一列1，<strong class="kk iu"> statsmodels </strong>还将计算该列的回归系数，这可以解释为直线的截距。statsmodels方法“添加常数”是添加常数的一种简单方法。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><p id="d282" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">回归输出如下图所示。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi po"><img src="../Images/481a5bc47fce262430a57aa4279cff9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4BAknhPzuwWjo6oPhMWlyg.png"/></div></div></figure><p id="ed35" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将只关注回归结果中的黄色高亮项。系数包含回归分析的斜率和截距。因为两个变量负相关，所以斜率为负。需要注意的第二个重要统计数据是R的平方，为0.12。R平方衡量线性回归线与数据的拟合程度。相关性和R平方之间存在关系。相关的幅度是R平方的平方根。并且相关性的符号是回归线斜率的符号。</p><h2 id="0530" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">1.3.自相关</h2><p id="1355" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">自相关是单个时间序列与其自身滞后副本的相关性。也叫序列相关。通常，当我们提到一个序列的自相关时，我们指的是“滞后一”自相关。例如，当使用每日数据时，自相关将是滞后一天的相同序列的相关性。</p><p id="fac7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正自相关，也称为趋势跟踪，意味着在一个时间间隔内观察到的增加会导致滞后时间间隔的成比例增加。而负自相关被称为均值回复，意味着如果特定值高于平均值，则下一个值(或之前的值)更有可能低于平均值。下图显示了两者的一个例子。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pp"><img src="../Images/08c95677cd26903b3adc99daf7de00a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MdHQUbt_jrJ8dONbPRao3Q.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">正与负自相关</figcaption></figure><p id="127c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">时间序列的自相关在现实世界中有许多应用。许多对冲基金策略只是均值回归和动量策略的稍微复杂一点的版本。由于股票在大约一周的时间范围内一直具有负自相关性，一个流行的策略是买入上周下跌的股票，卖出上涨的股票。对于大宗商品和货币等其他资产，它们在过去几个月的时间里一直具有正的自相关性，因此典型的对冲基金策略是买入过去几个月上涨的大宗商品，卖出那些下跌的大宗商品。</p><h2 id="4a6b" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">1.4.自相关函数</h2><p id="a55a" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">自相关函数(ACF)是滞后的自相关函数。任何显著的非零自相关都意味着该序列可以从过去预测。它可以是您应该依赖于哪些值来预测未来的值，通过观察这些季节的自相关函数来发现季节性收益，并可用于选择拟合数据的模型，如第3节所示。</p><p id="5def" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> plot_acf </strong>是用于绘制自相关函数的<strong class="kk iu"> statsmodels </strong>函数。输入x是一个序列或数组。自变量lags表示将绘制自相关函数的多少个滞后。alpha参数设置置信区间的宽度。例如，如果alpha等于0.05，这意味着如果该滞后的真实自相关为零，则样本自相关落在该窗口之外的可能性只有5%。如果您将alpha设置得更低，或者如果您的观察值更少，您将获得更宽的置信区间。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pq"><img src="../Images/cd6c72b504fab43a0f489fce900b19c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aw0-kFKp4jQkQZedBpiXBg.png"/></div></div></figure><p id="e34c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你不想要债券，设置alpha = 1</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="1335" class="ms mt it bd mu mv oq mx my mz or nb nc jz os ka ne kc ot kd ng kf ou kg ni nj bi translated">2.时间序列模型</h1><p id="c11e" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在本节中，您将了解一些简单的时间序列模型。这些包括白噪声和随机游走。</p><h2 id="3418" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">2.1.白噪声</h2><p id="4ece" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">白噪声是均值和方差随时间恒定且在所有滞后时间自相关为零的序列。白噪声有几种特殊情况。例如，如果数据是白噪声，但也具有正态或高斯分布，则称为高斯白噪声。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><p id="6dce" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">白噪声看起来如下:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi pr"><img src="../Images/26b520a29bf5402e6645817dd8cd6ad6.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*iUFaA2UhsC7WGLqUmmdArQ.png"/></div></figure><p id="e996" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">白噪声的自相关性:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi ps"><img src="../Images/642cb8665970b2ee91ab91bcb7d280aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*3UCBIhujBIiLXnNWm3tsrw.png"/></div></figure><h2 id="93af" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">2.2.随机游动</h2><p id="2c28" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">随机走了一圈，今天的价格除了白噪音和昨天的价格一样。</p><p id="017a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">P(t) = P(t-1) +白噪声</p><p id="ea45" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，价格的变化是白噪声。因为我们无法预测白噪音，所以对今天价格的最佳预测将是昨天的价格。</p><p id="9aa9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了测试时间序列是否遵循随机游走，我们可以用滞后值回归当前值(例如价格)。如果斜率明显小于1，我们可以拒绝零假设(序列遵循随机游走)。如果它与1没有显著不同，我们不能拒绝零假设。</p><p id="cea0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一种方法是回归滞后值的差值，并测试斜率是否为零而不是一。这被称为<strong class="kk iu">迪基-富勒</strong>测试，如果添加更多的滞后值，它将被称为<strong class="kk iu">增强迪基-富勒</strong> (ADF)测试。</p><p id="3db3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面的例子展示了如何使用<strong class="kk iu"> statsmodels </strong>库对python中的<strong class="kk iu"> SP500 </strong>数据进行测试。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><p id="7f2d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">p值为0.9，这意味着差异不显著，我们不能拒绝零假设，因此SP500时间序列遵循随机游走。</p><h2 id="7571" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">2.3.静止的</h2><p id="73a0" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">平稳信号是其联合分布不依赖于时间的信号。更实际的定义是弱平稳定义，这意味着信号的均值、方差和自相关不依赖于时间。</p><p id="c2a4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在时间序列分析和预测中，平稳性是一个非常重要的概念。其原因是，如果序列不是平稳的，我们就无法对其进行建模和预测。建模步骤的主要任务是估计一组可用于所需任务(如预测)的参数。如果序列是非平稳的，其参数将随时间变化，因此您将无法对其建模。随机游走是一种常见的非平稳序列。方差随时间增长。例如，如果股票价格是随机游走的，那么明天价格的不确定性远小于10年后的不确定性。季节性序列也是非平稳的。</p><p id="c84b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">许多非平稳序列可以通过简单的变换变成平稳的。随机游走是一个非平稳序列，但是如果你求一阶差分，新的序列就是白噪声，是平稳的。</p><p id="5086" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在下面的例子中，<a class="ae lw" href="https://github.com/youssefHosni/Time-Series-Analysis/tree/main/Time%20Series%20Analysis" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> S &amp; P 500价格</strong> </a>为非平稳随机游走，通过取一阶差分将信号转换为平稳白噪声信号。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi pt"><img src="../Images/ea1427b60ce229b5d1579bebebc919aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*MGdcvWQaWn0cLuxa_lLAgQ.png"/></div></figure><p id="97b6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面的例子是<a class="ae lw" href="https://github.com/youssefHosni/Time-Series-Analysis/tree/main/Time%20Series%20Analysis" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> H &amp; R块</strong> </a>的季度收益，它有很大的季节性成分，因此不是稳定的。如果我们采用季节性差异，通过采用滞后4的差异，转换后的序列看起来是平稳的。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi pu"><img src="../Images/755e3d9e876c751979a80221392a5f93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*PQpKUksGaeYeCZxCfNzeYQ.png"/></div></figure><p id="e13a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后一个例子是亚马逊的季度营收。它呈指数增长，并呈现出强烈的季节性。首先，我们将只取系列的对数来消除指数增长。但是，如果你同时考虑序列的对数和季节差异，转换后的序列看起来是平稳的。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi pu"><img src="../Images/1350e995a95c4fa641aa250a7d388698.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*AQymKKrSp4n7jB-WH4QnSg.png"/></div></figure></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="b23a" class="ms mt it bd mu mv oq mx my mz or nb nc jz os ka ne kc ot kd ng kf ou kg ni nj bi translated">3.自回归模型</h1><p id="3202" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在这一节中，我们将解释时间序列的自回归(AR)模型。这些模型使用序列的过去值来预测当前值。</p><h2 id="8873" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">3.1.AR模型定义</h2><p id="8496" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">自回归(AR)模型<strong class="kk iu">根据过去的行为预测未来的行为</strong>。它用于预测时间序列中的值与它们之前和之后的值之间的相关性。</p><p id="3c15" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在AR模型中，除了噪声和平均值之外，今天的值等于昨天值的分数(phi ),如下式所示:</p><p id="393d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">R(t) =均值+ phi*R(t-1) +噪声。</p><p id="99b6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于我们只查看时间上的一个先前步骤，因此这是AR(1)模型，该模型可以扩展为包括更多滞后值和更多phi参数。这里我们展示了一个AR(1)，一个AR(2)，和一个AR(3)。</p><p id="de8c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果phi等于1，则该系列将代表上一节中讨论的随机行走，如果它为零，则它将是白噪声。为了使过程稳定，phi必须在-1和+1之间。如果phi为负值，则上一期在t-1时间的正回报意味着该期的回报更可能为负。我们在1.3节中称之为均值回归。如果phi为正值，则上一期的正回报意味着本期的回报预期为正。我们在1.3节中称之为动量。</p><p id="9213" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下示例显示了具有不同phi值(0.9，-0.9，0.5，-0.5)的四个模拟时间序列:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pv"><img src="../Images/567af172d14c74f115f558039d999940.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I0shdUyI3iT8F1H1ukGodA.png"/></div></div></figure><p id="d0aa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当phi为0.9时，它看起来接近随机行走。当phi等于-0.9时，该过程有一个很大的正值，后面通常是一个很大的负值。底部的两个类似，但没有那么夸张，更接近白噪声。</p><p id="018d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了更好地理解，让我们看看这四个模拟时间序列的自相关函数:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pw"><img src="../Images/e0ee54b11569ad5b378a86a445162f57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IvaseU8v9oy8XPccUyhvyQ.png"/></div></div></figure><p id="c067" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果phi为正，自相关函数将以phi的速率指数衰减。这意味着，如果phi为0.9，则1处的自相关为0.9，2处为(0.9)**2，3处为(0.9)**3，依此类推。如果phi是负的，那么它将是相同的，但它将在每个滞后处反转其符号。</p><h2 id="30c0" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">3.2.估计和预测AR模型</h2><p id="472a" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">要估计时间序列的AR模型的参数，我们可以使用ARIMA类，如下例所示:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><p id="3c50" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">order (1，0，0)表示您正在将数据拟合到AR(1)模型。order (2，0，0)表示您正在将数据拟合到AR(2)模型。订单的第二和第三部分将在下一节讨论。</p><p id="6fc3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">结果汇总如下所示，phi参数以黄色突出显示。我们可以看到它是0.91，类似于上一小节中使用的模拟数据的phi参数。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi px"><img src="../Images/67743f11e272d0ef02156c7af09a2d85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*59fyOAscqNQtvqD-cVlp-A.png"/></div></div></figure><h2 id="a65f" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">3.3.选择正确的模型</h2><p id="e40b" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在前面的小节中，模型的阶是已知的。但是，实际上，这个是不会给你的。有不同的方法来确定AR模型的阶数。我们将集中讨论其中的两个:偏自相关函数和信息准则。</p><p id="9e0c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">偏相关函数(PACF)测量增加另一个滞后的增量收益。为了更好地理解PACF，让我们首先定义偏相关。偏自相关是对时间序列中的观测值和早期时间步长数据之间关系的描述，早期时间步长<strong class="kk iu">没有考虑干预观测值之间的相关性。</strong>连续时间步的观测值之间的相关性是间接相关性的线性函数。使用部分自相关函数消除了这些间接联系。</p><p id="5535" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">根据偏自相关的定义，PACF只表示两个数据之间的关联，而这种关联是那些观测值之间的较短滞后所不能解释的。例如，滞后3的部分自相关仅仅是滞后1和2没有解释的相关性。<strong class="kk iu">换句话说，每个滞后的偏相关是去除中间相关后两个观测值之间的唯一相关</strong>。</p><p id="5350" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要绘制PACF，可使用statsmodels库中的plot_pacf函数，如下例所示:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><p id="4300" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们用AR(1)和AR(2)生成了两个模拟数据，下图显示了它们的PACF:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi ps"><img src="../Images/cd62a710aa658171651f30103b8dda3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*gJaLIAzOEF6C9LP-eISykg.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">AR(1)模型的PACF</figcaption></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi ps"><img src="../Images/20e32ec1933cc0046c4bef77d07ba935.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*K5_woS43jSvjTn3atlMf5g.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">AR(2)模型的PACF。</figcaption></figure><p id="ed60" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些图显示了不同阶AR模型的部分自相关函数。在上图中，对于AR(1)模型，只有滞后(1) PACF显著不同于零。同样，对于AR(2)模型，两个滞后不等于零。</p><p id="dc6c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们将上一小节中使用的ARIMA函数应用于上一个示例中使用的模拟数据，并使用模型的阶数，就可以得到PACF图。我们应该从函数中获得与生成模拟数据时使用的参数相同的参数。在下面的示例中，我们使用AR(2)和phi分别为0.6和0.3的模拟数据:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi py"><img src="../Images/92a93e610dfb42440c96fe00448d1798.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RuZKn8AyNyY2s4_Fk3Wxlg.png"/></div></div></figure><p id="3b58" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用黄色突出显示的系数是phi_1和phi_2，正如预期的0.6和0.3。</p><p id="a72f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">模型中的参数越多，模型对数据的拟合就越好。但这可能导致模型过度拟合数据。<strong class="kk iu">信息标准</strong>通过基于所用参数的数量施加惩罚来调整模型的拟合优度。两种常见的经调整的拟合优度度量被称为阿卡克信息准则(AIC)和贝叶斯信息准则(BIC)。</p><p id="8b56" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">AIC是一种数学方法，用于评估模型与生成该模型的数据的拟合程度。在统计学中，AIC用于比较不同的可能模型，并确定哪个模型最适合数据。根据AIC的理论，最适合的模型是用最少的独立变量解释最大变化的模型。BIC是在有限的模型集中选择模型的标准。它部分基于似然函数，并且与AIC密切相关。拟合模型时，可以通过添加参数来增加可能性，但这样做可能会导致过度拟合。BIC通过为模型中的参数数量引入惩罚项来解决这个问题。BIC的刑期比AIC长。</p><p id="752d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在实践中，使用信息标准的方法是拟合几个模型，每个模型具有不同数量的参数，并选择具有最低贝叶斯信息标准的模型。如下例所示:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi pz"><img src="../Images/de392ad3987cff73277b0a59739fd0d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/1*Ynxx71oKXiQT1rXg0r59Iw.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">AR(2)模型模拟数据的BIC。</figcaption></figure><p id="f365" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以看到AR(2)的BIC最低，这就是模拟数据的来源。</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="ec55" class="ms mt it bd mu mv oq mx my mz or nb nc jz os ka ne kc ot kd ng kf ou kg ni nj bi translated">4.移动平均和ARMA模型</h1><p id="ac52" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在这一节中，我们将讨论另一种模型，移动平均线模型。我们还将看到如何将AR和MA模型结合成一个强大的ARMA模型。</p><h2 id="34e5" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">4.1 .移动平均模型定义</h2><p id="98b0" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在MA模型中，今天的值等于平均值加上噪声，再加上昨天噪声的一部分。这在下面的等式中示出:</p><p id="bb00" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">R(t) =平均值+噪声+θ*(昨天-噪声)</p><p id="39b5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这被称为一阶MA模型，或者简单地称为MA(1)模型，因为我们只考虑昨天的噪声，如果我们寻找前两天，它将是MA(2)，以此类推。如果MA参数θ为零，则该过程是白噪声。MA模型对于所有θ值都是稳定的。</p><p id="8c49" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设R(t)是股票收益的时间序列。如果θ为负，则上一期的正冲击(由ε(t-1)表示)将导致上一期的回报为正，但这一期的回报更可能为负。两个时期前的冲击对今天的回报没有影响——只有现在和上一个时期的冲击。</p><p id="f3d2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要从MA模型创建模拟数据，我们可以使用statsmodels库中的ArmaProcess，如下例所示:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi pr"><img src="../Images/51884bc7a9b012392295585248e8aa8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*HKrHSGE6eSKG8gsGV2rfjQ.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">来自MA(1)模型的模拟数据。</figcaption></figure><h2 id="d45a" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">4.2.MA模型的估计</h2><p id="1490" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">为了从给定的时间序列中估计MA模型，我们可以使用与前面3.2节中所示的估计AR模型相同的方法。我们将使用ARIMA函数，但顺序将是(0，0，1)而不是(1，0，0)。这方面的一个例子如下所示:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qa"><img src="../Images/c149eaee4dbf100057c44d6c2fbeb589.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hak7eJ-v1HFad16RTPHDTw.png"/></div></div></figure><p id="2013" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">黄色突出显示的数字是模拟数据的θ参数。结果与我们的预期一致，因为用于生成模拟数据的参数是0。</p><h2 id="7537" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">4.3.ARMA模型</h2><p id="e2a6" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">ARMA模型是AR和MA模型的组合。以下是ARMA(1，1)模型的公式:</p><p id="b344" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">R(t) =平均值+θ*噪声(t-1)+φ* R(t-1)+噪声(t)</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="2722" class="ms mt it bd mu mv oq mx my mz or nb nc jz os ka ne kc ot kd ng kf ou kg ni nj bi translated">5.案例研究:气候变化</h1><p id="ffe0" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">让我们通过气候变化案例研究将本文中涉及的所有概念放在一起。我们将分析近150年来的一些温度数据。这些数据是从NOAA网站下载的。</p><p id="84a5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将完成以下步骤:</p><ul class=""><li id="d669" class="ln lo it kk b kl km ko kp kr lp kv lq kz lr ld nw lt lu lv bi translated">通过将索引转换为日期时间并绘制数据来应用pandas方法。</li><li id="76e4" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld nw lt lu lv bi translated">应用扩展的Dickey-Fuller检验来查看数据是否是随机游走。</li><li id="0155" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld nw lt lu lv bi translated">取数据中的一阶差分，将其转换为平稳序列</li><li id="b3ea" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld nw lt lu lv bi translated">计算数据的自相关函数和偏自相关函数。</li><li id="c147" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld nw lt lu lv bi translated">根据数据拟合AR、MA和ARMA模型。</li><li id="ae72" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld nw lt lu lv bi translated">使用信息标准从你看到的模型中选择最佳模型。</li><li id="6da5" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld nw lt lu lv bi translated">最后，用最好的模型，预测未来30年的气温。</li></ul><p id="4b8c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">前两步用下面的代码完成:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi qb"><img src="../Images/03a8cbe2dca0f2e952f0a01d08b32a93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*HnJVzR6TTVnU9X2gixEj_A.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">纽约市的平均气温。</figcaption></figure><p id="965b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ADF检验的p值是0.58，这意味着时间序列不是平稳的，我们不能拒绝它是随机游走。</p><p id="5179" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用下面的代码将第三和第四步应用于数据:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pw"><img src="../Images/15bb425ce49895c4f060ace79712ec2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qy_eAOpT4y1XaU8X3SwfyA.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">数据一阶差分的相关和自相关函数。</figcaption></figure><p id="5a06" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">除了ACF中的负滞后-1自相关之外，ACF和PACF中没有明确的模式。</p><p id="6b7d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">之后，将对三个模型的数据进行拟合，并为每个模型计算AIC。这是使用下面的代码完成的:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><p id="a454" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">三种型号的AIC如下所示:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi qc"><img src="../Images/4cf9f23f3394204db1e4288302dd1941.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*7qKV01QcrjvR9EvNiwRMgQ.png"/></div></figure><p id="6281" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在三个模型中，ARMA(1，1)的AIC值最低。因此，它将用于参数估计和预测。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi qd"><img src="../Images/650aabbd4fb66348cad4507799d7c7a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*68ZNHc4MGkOJgbaZIlst2w.png"/></div></figure><p id="a915" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">根据该模型，预计30年后气温将升高约0.6度(几乎完全是由于趋势)，但围绕这一点的95%置信区间超过5度。</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h2 id="d752" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated"><strong class="ak">参考文献</strong></h2><p id="e1d5" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">[1].<a class="ae lw" href="https://app.datacamp.com/learn/courses/time-series-analysis-in-python" rel="noopener ugc nofollow" target="_blank">https://app . data camp . com/learn/courses/time-series-analysis-in-python</a></p><p id="aa45" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">[2].<a class="ae lw" href="https://www.statisticshowto.com/autoregressive-model/" rel="noopener ugc nofollow" target="_blank">https://www.statisticshowto.com/autoregressive-model/</a></p><p id="eac8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">[3].<a class="ae lw" href="https://analyticsindiamag.com/what-are-autocorrelation-and-partial-autocorrelation-in-time-series-data/" rel="noopener ugc nofollow" target="_blank">https://analyticsindiamag . com/what-is-auto correlation-and-partial-自相关-in-time-series-data/ </a></p><p id="f2ab" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">[4].<a class="ae lw" href="https://www.scribbr.com/statistics/akaike-information-criterion/" rel="noopener ugc nofollow" target="_blank">https://www . scribbr . com/statistics/a kaike-information-criterion/</a></p><p id="8c79" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">[5].<a class="ae lw" href="https://medium.com/@analyttica/what-is-bayesian-information-criterion-bic-b3396a894be6" rel="noopener">https://medium . com/@ analy ttica/what-is-Bayesian-information-criterion-BIC-b 3396 a 894 be 6</a></p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><div class="md me mf mg gt ob"><a href="https://youssefraafat57.medium.com/membership" rel="noopener follow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd iu gy z fp og fr fs oh fu fw is bi translated">加入我的介绍链接媒体-优素福胡斯尼</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">阅读Youssef Hosni(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">youssefraafat57.medium.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op mm ob"/></div></div></a></div><p id="05ec" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="nx">感谢阅读！如果你喜欢这篇文章，一定要鼓掌(高达50！)并在</em> <a class="ae lw" href="https://www.linkedin.com/in/youssef-hosni-b2960b135/" rel="noopener ugc nofollow" target="_blank"> <em class="nx"> LinkedIn </em> </a> <em class="nx">上与我联系，并在</em><a class="ae lw" href="https://youssefraafat57.medium.com/" rel="noopener"><em class="nx">Medium</em></a><em class="nx">上关注我的新文章</em></p></div></div>    
</body>
</html>