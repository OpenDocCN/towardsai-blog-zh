<html>
<head>
<title>Image Processing using Morphological Operations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用形态学运算的图像处理</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/image-processing-using-morphological-operations-f37bf13f26dc?source=collection_archive---------4-----------------------#2021-01-28">https://pub.towardsai.net/image-processing-using-morphological-operations-f37bf13f26dc?source=collection_archive---------4-----------------------#2021-01-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="aac5" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/computer-vision" rel="noopener ugc nofollow" target="_blank">计算机视觉</a>，<a class="ae ep" href="https://towardsai.net/p/category/programming" rel="noopener ugc nofollow" target="_blank">编程</a></h2><div class=""/><div class=""><h2 id="2a1f" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">变形时间！</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/1148ab7e346641ff6e2932944308ea1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*etWNEiX_9-303-9ntPfbVw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">(图片由作者提供)</figcaption></figure><p id="fd0f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">最基本的图像处理技术之一是所谓的形态学运算。</p><p id="a0c2" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">顾名思义，我们使用形态学操作来清理和校正图像。通常，形态学操作是在将图像卷积到特定的核或空间滤波器之后进行的。由于空间滤波的结果是显示不同衰减特征的图像，我们希望它们在整体上是正确的。</p><p id="3e63" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">有时，过滤后的图像会出现断线，或者可能连接了其他应该连接的要素。这就是我们使用变形的地方。我们再次使用一种结构化元素，并将其与滤波后的图像进行匹配，以便它可以将一个像素与其相邻像素相关联。形态学操作的结果是对于特定问题的应用更精确和更正确的图像。</p><p id="ce92" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">为了更好地理解这个概念，让我们快速地看一下代码！</p><p id="ef28" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们从我们的空间过滤器文章中载入一个示例:</p><pre class="kp kq kr ks gt ma mb mc md aw me bi"><span id="5332" class="mf mg iq mb b gy mh mi l mj mk">import numpy as np<br/>from skimage.io import imshow, imread<br/>from skimage.color import rgb2gray<br/>import matplotlib.pyplot as plt</span><span id="c10e" class="mf mg iq mb b gy ml mi l mj mk">sample = imread('stand.png')<br/>imshow(sample);</span><span id="1fb4" class="mf mg iq mb b gy ml mi l mj mk">sample_g = rgb2gray(sample)<br/>fig, ax = plt.subplots(1,2,figsize=(10,15))<br/>ax[0].imshow(sample)<br/>ax[1].imshow(sample_g,cmap='gray')<br/>ax[0].set_title('Colored Image',fontsize=20)<br/>ax[1].set_title('Grayscale Image',fontsize=20)<br/>plt.show()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/dbfaf7e343d243b45feaedeeef88194c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*ddOjAh9hN5U0pWx-haihPw.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图1:样本图像(作者提供的图像)</figcaption></figure><p id="ab89" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">要对图像使用不同的形态学操作，首先要对图像进行二值化。</p><p id="4231" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">为了对图像进行二值化，我们可以检查一个样本像素行值，并确定一个特定的阈值，我们将在该阈值处设置像素值是0还是1。像素值的样本检查如下:</p><pre class="kp kq kr ks gt ma mb mc md aw me bi"><span id="4213" class="mf mg iq mb b gy mh mi l mj mk"># showing the range of value for a specific y columns<br/>fig, ax = plt.subplots(1,2,figsize=(15,5))</span><span id="1e53" class="mf mg iq mb b gy ml mi l mj mk">ax[0].set_title('Grayscale Image',fontsize=20)<br/>ax[0].imshow(sample_g,cmap='gray')</span><span id="6ccf" class="mf mg iq mb b gy ml mi l mj mk">ax[1].plot(sample_g[500])<br/>ax[1].set_ylabel('Pixel Value')<br/>ax[1].set_xlabel('Width of Picture')<br/>ax[1].set_title('Plot of 1 Line',fontsize=20)<br/>plt.tight_layout()<br/>plt.show()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mn"><img src="../Images/4ea1b7c4c4d4ed410746e80d2a50ebf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z2pXoLlG6c4g6JJSIckXdw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图2:样本像素值(图片由作者提供)</figcaption></figure><p id="7e62" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们可以看到，样本像素绘图线显示大多数像素值高于0.55，而有像素值明显处于较低的强度。</p><p id="2caa" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们还可以使用整个图像的平均像素值以及像素值的中值。样本和结果如下:</p><pre class="kp kq kr ks gt ma mb mc md aw me bi"><span id="f329" class="mf mg iq mb b gy mh mi l mj mk">from scipy import stats<br/>print('Mean Value of Pixels', sample_g.mean())<br/>print('Median Value of Pixels', np.median(sample_g))</span></pre><p id="e8e5" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">像素平均值0.5642273922521608</p><p id="afd1" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">像素的中值为0.61101960784313765</p><pre class="kp kq kr ks gt ma mb mc md aw me bi"><span id="bef1" class="mf mg iq mb b gy mh mi l mj mk">med = sample_g.mean()<br/>mea = np.median(sample_g)</span><span id="3e79" class="mf mg iq mb b gy ml mi l mj mk">med1 = sample_g &gt; med<br/>mea1 = sample_g &gt; mea</span><span id="2066" class="mf mg iq mb b gy ml mi l mj mk">fig, ax = plt.subplots(1,3,figsize=(15,5))</span><span id="b6a4" class="mf mg iq mb b gy ml mi l mj mk">ax[0].set_title('Grayscale Image',fontsize=20)<br/>ax[0].imshow(sample_g,cmap='gray')<br/>ax[1].imshow(med1,cmap='gray')<br/>ax[1].set_title('Binarized using Mean Value',fontsize=20)<br/>ax[2].imshow(mea1,cmap='gray')<br/>ax[2].set_title('Binarize using Median Value',fontsize=20)<br/>plt.tight_layout()<br/>plt.show()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mo"><img src="../Images/c38148e799982812d525db56ceff08da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l7U2xohp809q31ZrLrmCvg.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图3:二值化图像(作者提供的图像)</figcaption></figure><p id="17dd" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们可以看到使用平均值和中值的区别。似乎平均值比中间值更清晰、更明显。</p><p id="2a86" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在，让我们首先将阈值设置为0.55，并使用该值作为阈值</p><pre class="kp kq kr ks gt ma mb mc md aw me bi"><span id="80f8" class="mf mg iq mb b gy mh mi l mj mk">sample_b = sample_g &gt; 0.55</span><span id="1fb6" class="mf mg iq mb b gy ml mi l mj mk">fig, ax = plt.subplots(1,2,figsize=(10,5))</span><span id="34f2" class="mf mg iq mb b gy ml mi l mj mk">ax[0].set_title('Grayscale Image',fontsize=20)<br/>ax[0].imshow(sample_g,cmap='gray')<br/>ax[1].imshow(sample_b,cmap='gray')<br/>ax[1].set_title('Binarized Image',fontsize=20)<br/>plt.tight_layout()<br/>plt.show()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/66499f3988116a24a79983bab6694313.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*krHLWCnn9YVfKUqt6fIY0g.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图4:使用阈值的二值化图像(图片由作者提供)</figcaption></figure><p id="6b95" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在我们有了一个二值化的图像，我们现在可以执行形态学操作。</p><p id="0044" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在图像处理中广泛使用两种主要的变形操作，它们是:</p><ol class=""><li id="bec1" class="mq mr iq lg b lh li lk ll ln ms lr mt lv mu lz mv mw mx my bi translated">扩张</li><li id="db8c" class="mq mr iq lg b lh mz lk na ln nb lr nc lv nd lz mv mw mx my bi translated">侵蚀</li></ol><p id="435d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">每一种对图像都有自己的影响。</p><h2 id="e7b9" class="mf mg iq bd ne nf ng dn nh ni nj dp nk ln nl nm nn lr no np nq lv nr ns nt iw bi translated">扩张</h2><p id="7271" class="pw-post-body-paragraph le lf iq lg b lh nu ka lj lk nv kd lm ln nw lp lq lr nx lt lu lv ny lx ly lz ij bi translated">在某种意义上，膨胀是图像的最亮像素值被放大或变得更大，而最暗像素值被最小化的操作。</p><p id="98f2" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">使图像更小化更容易形象化。</p><p id="f26f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们看一些例子:</p><pre class="kp kq kr ks gt ma mb mc md aw me bi"><span id="8345" class="mf mg iq mb b gy mh mi l mj mk">from skimage.morphology import erosion, dilation,opening,closing<br/>selem_ver = np.array([[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,<br/>                       0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,<br/>                      1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]])</span><span id="d94e" class="mf mg iq mb b gy ml mi l mj mk">sample_ver = dilation(sample_b,selem_hor)</span><span id="4f95" class="mf mg iq mb b gy ml mi l mj mk">fig, ax = plt.subplots(1,3,figsize=(12,5))<br/>ax[0].set_title('Binarized Image',fontsize=15)<br/>ax[0].imshow(sample_b,cmap='gray')<br/>ax[1].imshow(selem_ver,cmap='gray')<br/>ax[1].set_title('Structuring Element',fontsize=15)<br/>ax[2].imshow(sample_ver,cmap='gray')<br/>ax[2].set_title('Morphed Image',fontsize=15)<br/>plt.tight_layout()<br/>plt.show()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nz"><img src="../Images/9966c51f7d98d2bd46a21328caa6a037.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sARAOL3yBCLobgdGOv4gOA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图5:使用垂直元素的变形图像(作者图片)</figcaption></figure><p id="a8cd" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">Scikit库有很棒的膨胀和腐蚀功能，在这里我们可以输入二值化图像和我们选择的结构元素。</p><p id="7400" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们使用了一个垂直元素，并将其提供给函数，让图像在结构化元素上变形。从结果中，我们可以看到，我们能够提取图像的垂直特征，特别是描绘看台的垂直线。</p><h2 id="08d9" class="mf mg iq bd ne nf ng dn nh ni nj dp nk ln nl nm nn lr no np nq lv nr ns nt iw bi translated">腐蚀</h2><p id="4853" class="pw-post-body-paragraph le lf iq lg b lh nu ka lj lk nv kd lm ln nw lp lq lr nx lt lu lv ny lx ly lz ij bi translated">腐蚀与膨胀正好相反，在腐蚀中，我们让图像变大，让较暗的像素值比亮的像素值大得多。</p><pre class="kp kq kr ks gt ma mb mc md aw me bi"><span id="f693" class="mf mg iq mb b gy mh mi l mj mk">from skimage.morphology import erosion, dilation,opening,closing<br/>selem_ver = np.array([[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,<br/>                       0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,<br/>                      1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]])</span><span id="a8d2" class="mf mg iq mb b gy ml mi l mj mk">sample_ver = erosion(sample_b,selem_hor)</span><span id="7f06" class="mf mg iq mb b gy ml mi l mj mk">fig, ax = plt.subplots(1,3,figsize=(12,5))<br/>ax[0].set_title('Binarized Image',fontsize=15)<br/>ax[0].imshow(sample_b,cmap='gray')<br/>ax[1].imshow(selem_ver,cmap='gray')<br/>ax[1].set_title('Structuring Element',fontsize=15)<br/>ax[2].imshow(sample_ver,cmap='gray')<br/>ax[2].set_title('Morphed Image',fontsize=15)<br/>plt.tight_layout()<br/>plt.show()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nz"><img src="../Images/8a3b9e610638d1649fa928d5f504f7d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hCxENQph59vaEuTXJs8XTA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图6:侵蚀的图像(作者提供的图像)</figcaption></figure><p id="e736" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">正如我们在腐蚀图像的结果上看到的，整个图像被放大了，尤其是中间的支架。值得注意的是，支架变大了，实际上，真正发生的是像素变大了，还覆盖了其他像素。</p><p id="a5c9" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们尝试使用不同的结构元素！</p><p id="a451" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这次是水平元素。</p><pre class="kp kq kr ks gt ma mb mc md aw me bi"><span id="f990" class="mf mg iq mb b gy mh mi l mj mk">selem_hor = np.zeros((100,5))<br/>selem_hor[0:1]=1<br/>selem_hor[-1:]=1<br/>selem_hor</span><span id="5b49" class="mf mg iq mb b gy ml mi l mj mk">sample_hor = dilation(sample_b,selem_hor)</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oa"><img src="../Images/019697810e6e85790a530b6235183945.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*75l1-mYvOBeYeXmi9zcf4A.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图7:使用水平元素的放大图像(作者提供的图像)</figcaption></figure><p id="be34" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">通过使用水平元素，我们可以去掉图像中的水平木板，而不去掉图像的垂直特征。</p><pre class="kp kq kr ks gt ma mb mc md aw me bi"><span id="a44d" class="mf mg iq mb b gy mh mi l mj mk">selem_hor = np.zeros((100,5))<br/>selem_hor[0:1]=1<br/>selem_hor[-1:]=1<br/>selem_hor</span><span id="3fab" class="mf mg iq mb b gy ml mi l mj mk">sample_hor = erosion(sample_b,selem_hor)</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oa"><img src="../Images/196c5c15b2cd7dde6c24d39da0da0d9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HLuVGGMY0n3u2DOU1I6UyA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图8:使用水平元素的侵蚀图像(作者提供的图像)</figcaption></figure><p id="d2cc" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">腐蚀图像如预期的那样在水平轴方向上尺寸增大。但是可以注意到，与原始图像相比，图像中的木板倍增。</p><h1 id="3bd3" class="ob mg iq bd ne oc od oe nh of og oh nk kf oi kg nn ki oj kj nq kl ok km nt ol bi translated">摘要</h1><p id="5fc9" class="pw-post-body-paragraph le lf iq lg b lh nu ka lj lk nv kd lm ln nw lp lq lr nx lt lu lv ny lx ly lz ij bi translated">我们能够讨论两种不同的形态学操作，即膨胀和腐蚀。这两种操作广泛用于图像处理，并根据用户的需要用于校正和完成图像。还可以注意到，当清除非常嘈杂的数据时，形态学操作是有用的，并且在衰减图像中的某些特征时也是有用的。</p><p id="925c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">敬请关注接下来的文章！</p></div></div>    
</body>
</html>