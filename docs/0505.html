<html>
<head>
<title>Evaluation Metrics for Classification Problems</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分类问题的评估标准</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/evaluation-metrics-for-classification-problems-e7442092bc5?source=collection_archive---------1-----------------------#2020-05-19">https://pub.towardsai.net/evaluation-metrics-for-classification-problems-e7442092bc5?source=collection_archive---------1-----------------------#2020-05-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="913b" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">数据科学</h2><div class=""/><div class=""><h2 id="ec21" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">为什么一开始就需要定义指标</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/857fe44456697bea0454a24739551ddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Spgun2Vmskec-KEM"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://unsplash.com/@makcedward?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马志威</a>在<a class="ae lh" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><blockquote class="li lj lk"><p id="df22" class="ll lm ln lo b lp lq kd lr ls lt kg lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">如果你不知道如何证明一个模型是好是坏，这就好比你想得到某样东西却不知道它是什么。作为一名数据科学家工作了几年后，我坚信在早期阶段定义指标是非常重要的事情。</p></blockquote><p id="ae2e" class="pw-post-body-paragraph ll lm it lo b lp lq kd lr ls lt kg lu mi lw lx ly mj ma mb mc mk me mf mg mh im bi translated">这个故事将涵盖几个分类指标。您也可以查看以下案例，了解其他评估指标</p><ul class=""><li id="076f" class="ml mm it lo b lp lq ls lt mi mn mj mo mk mp mh mq mr ms mt bi translated"><a class="ae lh" href="https://medium.com/towards-artificial-intelligence/evaluation-metrics-are-what-you-need-to-define-in-the-earlier-stage-99dbfae51472" rel="noopener">内部和外部评估指标</a></li><li id="b468" class="ml mm it lo b lp mu ls mv mi mw mj mx mk my mh mq mr ms mt bi translated"><a class="ae lh" href="https://medium.com/towards-artificial-intelligence/evaluation-metrics-for-regression-problems-fff2ac8e3f43" rel="noopener">回归问题的度量</a></li><li id="1660" class="ml mm it lo b lp mu ls mv mi mw mj mx mk my mh mq mr ms mt bi translated"><a class="ae lh" href="https://medium.com/towards-artificial-intelligence/evaluation-metrics-for-textual-problems-6e881feef5ad" rel="noopener">文本问题的度量</a></li></ul><h1 id="83df" class="mz na it bd nb nc nd ne nf ng nh ni nj ki nk kj nl kl nm km nn ko no kp np nq bi translated">分类指标</h1><h2 id="4536" class="nr na it bd nb ns nt dn nf nu nv dp nj mi nw nx nl mj ny nz nn mk oa ob np iz bi translated">混淆矩阵介绍</h2><p id="1a8d" class="pw-post-body-paragraph ll lm it lo b lp oc kd lr ls od kg lu mi oe lx ly mj of mb mc mk og mf mg mh im bi translated">在介绍分类指标时，必须提到<code class="fe oh oi oj ok b">Confusion matrix</code>。<code class="fe oh oi oj ok b">True positive</code>(TP)<code class="fe oh oi oj ok b">true negative</code>(TN)<code class="fe oh oi oj ok b">false positive</code>(FP)<code class="fe oh oi oj ok b">false negative</code>(FN)是基本要素。它呈现:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/a9f697550716842085fc1b65423e29d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/format:webp/1*2SuGcuvoEgLAI5V9x2EDkQ.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">混淆矩阵</figcaption></figure><ul class=""><li id="b77b" class="ml mm it lo b lp lq ls lt mi mn mj mo mk mp mh mq mr ms mt bi translated">真阳性:预测结果为阳性，同时标注为阳性。</li><li id="8932" class="ml mm it lo b lp mu ls mv mi mw mj mx mk my mh mq mr ms mt bi translated">假阳性:预测结果为阳性，而它被标记为阴性。它也调用<code class="fe oh oi oj ok b">Type I Error</code>。</li><li id="0b1e" class="ml mm it lo b lp mu ls mv mi mw mj mx mk my mh mq mr ms mt bi translated">假阴性:预测结果为阴性，而它却被标记为阳性。它也调用<code class="fe oh oi oj ok b">Type II Error</code>。</li><li id="b579" class="ml mm it lo b lp mu ls mv mi mw mj mx mk my mh mq mr ms mt bi translated">真阴性:预测结果为阴性，同时被标注为阴性。</li></ul><p id="f0a1" class="pw-post-body-paragraph ll lm it lo b lp lq kd lr ls lt kg lu mi lw lx ly mj ma mb mc mk me mf mg mh im bi translated">基于这4个元素，你可以把它扩展到很多计算，比如精度、召回率、特异性。</p><h2 id="81b0" class="nr na it bd nb ns nt dn nf nu nv dp nj mi nw nx nl mj ny nz nn mk oa ob np iz bi translated">简单易懂(准确)</h2><p id="c625" class="pw-post-body-paragraph ll lm it lo b lp oc kd lr ls od kg lu mi oe lx ly mj of mb mc mk og mf mg mh im bi translated"><code class="fe oh oi oj ok b">Accuracy</code>都是最容易测量的，大家都明白是什么意思。它只是从总计数中计算出正确分类的数量。当分类问题是平衡时，我们可以使用<code class="fe oh oi oj ok b">accuracy</code>作为度量标准之一。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi om"><img src="../Images/1e0d8c6875761eb5229c7bfced76e665.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mDS6csidsEb6I1fumAEGTw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">精确度公式</figcaption></figure><p id="a0ca" class="pw-post-body-paragraph ll lm it lo b lp lq kd lr ls lt kg lu mi lw lx ly mj ma mb mc mk me mf mg mh im bi translated">例如，分类问题是决定图像是属于猫还是狗。鉴于猫和狗的形象分布均匀，这仍然是可以接受的。但是如果分布是999:1呢？看起来我们可以轻松达到99.9%。</p><h2 id="e04b" class="nr na it bd nb ns nt dn nf nu nv dp nj mi nw nx nl mj ny nz nn mk oa ob np iz bi translated">选择的困境(精确和召回)</h2><p id="95b3" class="pw-post-body-paragraph ll lm it lo b lp oc kd lr ls od kg lu mi oe lx ly mj of mb mc mk og mf mg mh im bi translated">虽然<code class="fe oh oi oj ok b">accuracy</code>直白易懂；有时这可能不是好的指标。例如，你想对一些罕见的案例进行分类，比如这个人是不是亿万富翁/首席执行官。要达到99.9%的准确率是非常容易的，因为亿万富翁/ CEO是极少数情况。在极端情况下，我不需要建立一个模型来分类，但总是返回“假”。我还是能得到99.9%的准确率。在这个场景中，我们可以使用<code class="fe oh oi oj ok b">precision</code>和<code class="fe oh oi oj ok b">recall</code>。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi on"><img src="../Images/a622466aa5fcff3c85527b57c0e49a50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k8uJpUf4Mq8ljvpvy7BH2A.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">精确度和召回率公式</figcaption></figure><p id="0784" class="pw-post-body-paragraph ll lm it lo b lp lq kd lr ls lt kg lu mi lw lx ly mj ma mb mc mk me mf mg mh im bi translated">我们可能无法建立一个同时具有高精度和高召回率的模型，因为这两者经常处于紧张状态。换句话说，在提高精度的时候，召回率会变坏，反之亦然。你必须回顾你的业务问题，以便平衡它。有时候，我们更喜欢高的<code class="fe oh oi oj ok b">precision</code>而不是<code class="fe oh oi oj ok b">recall</code>，而在其他一些情况下，我们可能会渴望高的<code class="fe oh oi oj ok b">recall</code>。</p><p id="73f7" class="pw-post-body-paragraph ll lm it lo b lp lq kd lr ls lt kg lu mi lw lx ly mj ma mb mc mk me mf mg mh im bi translated">在下面的场景中，我们更喜欢高的<code class="fe oh oi oj ok b">precision</code>率(更多的假阳性案例),同时我们可以容忍低的<code class="fe oh oi oj ok b">recall</code>率。</p><ul class=""><li id="ced8" class="ml mm it lo b lp lq ls lt mi mn mj mo mk mp mh mq mr ms mt bi translated">安全系统中的人脸/指纹识别</li><li id="ff2f" class="ml mm it lo b lp mu ls mv mi mw mj mx mk my mh mq mr ms mt bi translated">检测生产线何时需要停止维护</li></ul><p id="3d5f" class="pw-post-body-paragraph ll lm it lo b lp lq kd lr ls lt kg lu mi lw lx ly mj ma mb mc mk me mf mg mh im bi translated">另一方面，我们希望有高的<code class="fe oh oi oj ok b">recall</code>率(更多的假阴性病例),而你可以容忍低的<code class="fe oh oi oj ok b">precision</code>率。</p><ul class=""><li id="d8a7" class="ml mm it lo b lp lq ls lt mi mn mj mo mk mp mh mq mr ms mt bi translated">检测风力涡轮机何时需要维护</li><li id="dfcc" class="ml mm it lo b lp mu ls mv mi mw mj mx mk my mh mq mr ms mt bi translated">检测是否有地震。</li></ul><p id="00a3" class="pw-post-body-paragraph ll lm it lo b lp lq kd lr ls lt kg lu mi lw lx ly mj ma mb mc mk me mf mg mh im bi translated">您可能会感到困惑，为什么我们需要生产线维护预测的高精度，而我们需要风力涡轮机维护预测的高召回率。</p><p id="80af" class="pw-post-body-paragraph ll lm it lo b lp lq kd lr ls lt kg lu mi lw lx ly mj ma mb mc mk me mf mg mh im bi translated">要看<code class="fe oh oi oj ok b">false positive</code>和<code class="fe oh oi oj ok b">false negative</code>的成本。如果<code class="fe oh oi oj ok b">false positive</code>的成本很高，那么我们想要更高的精度。参考生产线维护预测问题。我们可能意识到生产线出现故障的几率很低，如果我们继续停止生产线进行检查，将会产生巨大的利润影响。因此，我们可能希望有一个高<code class="fe oh oi oj ok b">precision</code>而不是高<code class="fe oh oi oj ok b">recall</code>。另一方面，如果风力发电机停止运行可能会导致电力供应中断，并且维护检查的成本相对较低，我们会选择高<code class="fe oh oi oj ok b">recall</code>而不是高<code class="fe oh oi oj ok b">precision</code>。</p><p id="26cd" class="pw-post-body-paragraph ll lm it lo b lp lq kd lr ls lt kg lu mi lw lx ly mj ma mb mc mk me mf mg mh im bi translated">所以，这真的取决于错误预测的成本(不是<code class="fe oh oi oj ok b">false positive</code>就是<code class="fe oh oi oj ok b">false negative</code>)。为了以防万一，你需要平衡<code class="fe oh oi oj ok b">precision</code>和<code class="fe oh oi oj ok b">recall</code>，你可以考虑使用<code class="fe oh oi oj ok b">F1</code>分数。</p><h2 id="bc77" class="nr na it bd nb ns nt dn nf nu nv dp nj mi nw nx nl mj ny nz nn mk oa ob np iz bi translated">平衡困境(F1)</h2><p id="7574" class="pw-post-body-paragraph ll lm it lo b lp oc kd lr ls od kg lu mi oe lx ly mj of mb mc mk og mf mg mh im bi translated"><code class="fe oh oi oj ok b">F1</code>是介绍如果你的分类问题对<code class="fe oh oi oj ok b">precision</code>和<code class="fe oh oi oj ok b">recall</code>要求高而<code class="fe oh oi oj ok b">accuracy</code>不好测量。从公式中可以看出<code class="fe oh oi oj ok b">F1</code>包括了<code class="fe oh oi oj ok b">precision</code>和<code class="fe oh oi oj ok b">recall</code>两个结果。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/21ca0ee18c4f1eeb96783551c0981c40.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*opt_xWCqk2Gc8HZ_HKysWg.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">F1公式</figcaption></figure><p id="bdd8" class="pw-post-body-paragraph ll lm it lo b lp lq kd lr ls lt kg lu mi lw lx ly mj ma mb mc mk me mf mg mh im bi translated"><code class="fe oh oi oj ok b">F1</code>在分布极不均匀的情况下，如果想兼顾精度和召回率，可以使用。</p><h1 id="56cd" class="mz na it bd nb nc nd ne nf ng nh ni nj ki nk kj nl kl nm km nn ko no kp np nq bi translated">皇家对空观察队</h1><p id="8fc4" class="pw-post-body-paragraph ll lm it lo b lp oc kd lr ls od kg lu mi oe lx ly mj of mb mc mk og mf mg mh im bi translated"><code class="fe oh oi oj ok b">ROC</code>(接收方运营商特性)是表示分类结果的另一个度量。与<code class="fe oh oi oj ok b">precision</code>和<code class="fe oh oi oj ok b">recall</code>不同的是，<code class="fe oh oi oj ok b">ROC</code>包含了<code class="fe oh oi oj ok b">true negative</code>，表示归类为负面的记录的编号，并且是正确的。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi op"><img src="../Images/e04473d42fbd1cd9620431845b782516.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UmyBgDGHSA9vUPVK2ax3Iw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">灵敏度和特异性公式</figcaption></figure><p id="c78a" class="pw-post-body-paragraph ll lm it lo b lp lq kd lr ls lt kg lu mi lw lx ly mj ma mb mc mk me mf mg mh im bi translated">此指标是为二元分类器设计的。如果您的业务问题是一个多类问题，您可以在测量期间将其转换为多个二元分类问题。</p><h2 id="9c10" class="nr na it bd nb ns nt dn nf nu nv dp nj mi nw nx nl mj ny nz nn mk oa ob np iz bi translated">摇摆空间</h2><p id="188b" class="pw-post-body-paragraph ll lm it lo b lp oc kd lr ls od kg lu mi oe lx ly mj of mb mc mk og mf mg mh im bi translated">在该图中，X轴表示预测的错误阳性病例和全部阴性病例，而Y轴表示预测的正确阳性病例和全部阳性病例。最好的模型落在左上角，最差的落在右下角。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oq"><img src="../Images/f9b557661f2336c13c381a76ec3e1fa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3YBxbPcOyAkgtUrG.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">ROC空间来自<a class="ae lh" href="https://zh.wikipedia.org/wiki/ROC%E6%9B%B2%E7%BA%BF" rel="noopener ugc nofollow" target="_blank"> wiki </a></figcaption></figure><p id="2b3c" class="pw-post-body-paragraph ll lm it lo b lp lq kd lr ls lt kg lu mi lw lx ly mj ma mb mc mk me mf mg mh im bi translated">为了可视化，您可能需要知道:</p><ul class=""><li id="02cb" class="ml mm it lo b lp lq ls lt mi mn mj mo mk mp mh mq mr ms mt bi translated">对角线(从左下方到右上方)代表随机猜测。换句话说，如果你的模型结果落在对角线上，你的模型比随机猜测要好。</li><li id="ba37" class="ml mm it lo b lp mu ls mv mi mw mj mx mk my mh mq mr ms mt bi translated">如果你的模型非常差(靠近右下角)，它也可以是一个好模型，因为我们可以保留(或镜像)结果。例如，模型预测它为正。我们可以把它改成负数。</li></ul><h2 id="178f" class="nr na it bd nb ns nt dn nf nu nv dp nj mi nw nx nl mj ny nz nn mk oa ob np iz bi translated">受试者工作特征曲线</h2><p id="3021" class="pw-post-body-paragraph ll lm it lo b lp oc kd lr ls od kg lu mi oe lx ly mj of mb mc mk og mf mg mh im bi translated">除了<code class="fe oh oi oj ok b">ROC space</code>，<code class="fe oh oi oj ok b">ROC curve</code>是<code class="fe oh oi oj ok b">ROC</code>计算下的另一个可视化。在模型以置信度(也称为概率)对结果进行分类之后，我们可以将阈值转向最终的输出结果。一般来说，我们可以简单地将阈值设置为0.5。这意味着如果置信度大于0.5，它将被视为阳性病例。实际上，我们可以将该阈值调整为其他值，例如0.7，并且我们可以通过<code class="fe oh oi oj ok b">ROC curve</code>来决定我们应该使用哪个阈值。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi or"><img src="../Images/6aa281f2b9e3958621eb91b386d28c71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*xEZzYA-h9Iu3ij38t3_ixg.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">ROC曲线图形</figcaption></figure><p id="3e61" class="pw-post-body-paragraph ll lm it lo b lp lq kd lr ls lt kg lu mi lw lx ly mj ma mb mc mk me mf mg mh im bi translated">为了可视化，您可能需要知道:</p><ul class=""><li id="c738" class="ml mm it lo b lp lq ls lt mi mn mj mo mk mp mh mq mr ms mt bi translated">在相同模型但不同阈值的情况下，如果降低阈值，ROC结果只会向上/向右/向上和向右移动。</li></ul><h2 id="7413" class="nr na it bd nb ns nt dn nf nu nv dp nj mi nw nx nl mj ny nz nn mk oa ob np iz bi translated">罗马纪元</h2><p id="db9e" class="pw-post-body-paragraph ll lm it lo b lp oc kd lr ls od kg lu mi oe lx ly mj of mb mc mk og mf mg mh im bi translated"><code class="fe oh oi oj ok b">AUC</code>(又名ROC和AUC ROC曲线下面积)是另一个使用ROC结果的指标？它计算<code class="fe oh oi oj ok b">ROC curve</code>下的面积。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi os"><img src="../Images/4285b4c6d9497da0ba03bbb17ca240a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/0*HXamoj-SHnK_AF5N.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">AUC图来自<a class="ae lh" href="https://zh.wikipedia.org/wiki/ROC%E6%9B%B2%E7%BA%BF" rel="noopener ugc nofollow" target="_blank">维基</a></figcaption></figure><p id="e879" class="pw-post-body-paragraph ll lm it lo b lp lq kd lr ls lt kg lu mi lw lx ly mj ma mb mc mk me mf mg mh im bi translated">为了使<code class="fe oh oi oj ok b">AUC</code>形象化，你可能需要知道:</p><ul class=""><li id="e131" class="ml mm it lo b lp lq ls lt mi mn mj mo mk mp mh mq mr ms mt bi translated">该值必须介于0和1之间，1是最佳结果。</li><li id="75e9" class="ml mm it lo b lp mu ls mv mi mw mj mx mk my mh mq mr ms mt bi translated">如果值在0.5和1之间，则该模型优于随机猜测。</li><li id="52b6" class="ml mm it lo b lp mu ls mv mi mw mj mx mk my mh mq mr ms mt bi translated">如果一个值小于0.5，该模型仍然比随机猜测要好，因为我们可以像在<code class="fe oh oi oj ok b">ROC curve</code>中提到的那样反演结果。</li><li id="9cb3" class="ml mm it lo b lp mu ls mv mi mw mj mx mk my mh mq mr ms mt bi translated">最坏的情况是值在0.5左右，类似于随机猜测。如果是这样的话，随机猜测可能是一个更好的选择。</li></ul><h1 id="45c2" class="mz na it bd nb nc nd ne nf ng nh ni nj ki nk kj nl kl nm km nn ko no kp np nq bi translated">关于我</h1><p id="a283" class="pw-post-body-paragraph ll lm it lo b lp oc kd lr ls od kg lu mi oe lx ly mj of mb mc mk og mf mg mh im bi translated">我是湾区的数据科学家。专注于数据科学、人工智能，尤其是NLP和平台相关领域的最新工作。你可以在<a class="ae lh" href="https://medium.com/@makcedward/" rel="noopener">媒体博客</a>、<a class="ae lh" href="https://www.linkedin.com/in/edwardma1026" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>或<a class="ae lh" href="https://github.com/makcedward" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到我。</p></div></div>    
</body>
</html>