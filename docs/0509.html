<html>
<head>
<title>Creating a Voice Recognition Application with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python创建语音识别应用程序</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/creating-a-voice-recognition-application-with-python-57d8c3e55256?source=collection_archive---------0-----------------------#2020-05-21">https://pub.towardsai.net/creating-a-voice-recognition-application-with-python-57d8c3e55256?source=collection_archive---------0-----------------------#2020-05-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="5939" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">编程；编排</h2><div class=""/><div class=""><h2 id="a037" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">用Python把你的音频文件和演讲转换成文本</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/9afde0975c65bf16d2d2cc057a080773.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*m0T5kLDHOkulBgkP"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">杰森·罗斯韦尔在<a class="ae lh" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="06e9" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">什么是语音识别？</h1><p id="c96d" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">它被称为<strong class="mc jd">语音</strong>或<strong class="mc jd">语音识别</strong>。它包括通过采样、人工神经网络、机器学习使音频信号有意义。</p><p id="89b9" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我们非常了解这些做法。苹果Siri，谷歌助手，亚马逊Alexa等应用程序在我们大多数人身上都有。这些应用当然是遥遥领先的，并且有严肃的工程背景。除了使声音信号在其应用中有意义之外，还使用NLP - <strong class="mc jd">自然语言处理</strong>算法。</p><p id="ceac" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">语音转文本，</strong>语音转文本<strong class="mc jd">的过程</strong>，是创建语音助手的第一步。所以首先，我们希望应用程序能够理解我们在说什么，对吗？如果它能发送声音，它理解它的引擎为文本，处理这个声音数据的第一步就结束了。在本文中，我们将通过<strong class="mc jd"> Python </strong>并通过使用几个库来实现两个应用程序，并将重点放在语音到文本部分。</p><h1 id="48a2" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">1.应用程序—将音频文件转换为文本</h1><p id="4d03" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">在这个应用中，我们将尝试<strong class="mc jd">将音频文件转换成文本</strong>。将音频文件转换成文本尤其是数据科学的主题之一。例如，您可以通过处理语音来创建聊天机器人，或者通过运行NLP来对呼叫中心的记录进行分类。</p><p id="3d84" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我们的前端库，演讲识别库，我们将在那里处理我们的声音。从这个库名可以理解，它是基于语音识别的，与很多API进行通信。</p><p id="07e3" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">该库支持的API有:</p><ul class=""><li id="0572" class="nb nc it mc b md mw mg mx mj nd mn ne mr nf mv ng nh ni nj bi translated">CMU狮身人面像(离线工作)</li><li id="801f" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated">谷歌语音识别</li><li id="8932" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated"><a class="ae lh" href="https://cloud.google.com/speech/" rel="noopener ugc nofollow" target="_blank">谷歌云语音API </a></li><li id="9651" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated"><a class="ae lh" href="https://wit.ai/" rel="noopener ugc nofollow" target="_blank"> Wit.ai </a></li><li id="4077" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated"><a class="ae lh" href="https://www.microsoft.com/cognitive-services/en-us/speech-api" rel="noopener ugc nofollow" target="_blank">微软必应语音识别</a></li><li id="b43f" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated"><a class="ae lh" href="https://houndify.com/" rel="noopener ugc nofollow" target="_blank">验证API </a></li><li id="f4d4" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated"><a class="ae lh" href="http://www.ibm.com/smarterplanet/us/en/ibmwatson/developercloud/speech-to-text.html" rel="noopener ugc nofollow" target="_blank"> IBM语音转文字</a></li><li id="8129" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated"><a class="ae lh" href="https://snowboy.kitt.ai/" rel="noopener ugc nofollow" target="_blank"> Snowboy热词检测</a>(离线工作)</li></ul><p id="11dd" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">让我们开始编码吧！</strong></p><p id="63e8" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">1-让我们安装语音识别模块。</p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="2ef4" class="nu lj it nq b gy nv nw l nx ny">pip install SpeechRecognition</span></pre><p id="ba5b" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">2-让我们下载库。</p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="e534" class="nu lj it nq b gy nv nw l nx ny">import speech_recognition as sr</span></pre><p id="71d9" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">3-让我们将识别器分配给将执行识别过程的变量。</p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="42fb" class="nu lj it nq b gy nv nw l nx ny">r = sr.Recognizer()</span></pre><p id="0911" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">4-让我们创建我们的音频文件。</p><p id="469a" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">在创建音频文件之前，了解该库支持哪些文件类型是非常重要的。<strong class="mc jd">支持的格式</strong>如下。</p><ul class=""><li id="e3ea" class="nb nc it mc b md mw mg mx mj nd mn ne mr nf mv ng nh ni nj bi translated">声音资源文件</li><li id="d476" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated">AIFF</li><li id="eb98" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated">AIFF-C</li><li id="a078" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated">无损音频编解码器</li></ul><p id="eec8" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">如果我们使用mp3、m4a或其他类型的音乐，那也没关系。我们可以使用音频文件转换器网站。我在这个过程中使用了<strong class="mc jd"> zamzar </strong>。我们上传现有的文件，并以. wav格式输出。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nz"><img src="../Images/5c4e915025395385372240becf491049.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*O1p03P6o-XNjNXGm.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">zamzar.com</figcaption></figure><p id="426e" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我们将创建的声音文件赋给file变量。</p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="8548" class="nu lj it nq b gy nv nw l nx ny">file = sr.AudioFile(‘deneme.wav’)</span></pre><p id="b75a" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">现在，我们可以将声音转换成文本。</p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="cefc" class="nu lj it nq b gy nv nw l nx ny">with file as source:<br/> r.adjust_for_ambient_noise(source)<br/> audio = r.record(source)<br/> result = r.recognize_google(audio,language=’tr’)<br/>print(result)</span></pre><p id="fb06" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">这里我们使用了recognize_google方法。这个方法使用了<strong class="mc jd">谷歌云语音API </strong>。此外，我们已经将语言设置为language = 'tr '，以便它可以更好地感知土耳其语的声音。</p><p id="ccbe" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">6-运行代码，我们的输出现在已经准备好了。</p><p id="b549" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">在我们的例子中，我们将我们的小文件，我们称之为“deneme deneme”(土耳其语单词)，放入声音处理，结果正是我们所期望的。</p><p id="32e2" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">你也可以看到，它可以转换更复杂和更长的音频文件到文本很容易。为此，您可以记录不同长度和复杂性的声音，将它们分配给文件变量，并体验结果。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/2561b8a34b536431d7a9461776b37c6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/0*1Z1MgigHjFm8kSKz.png"/></div></figure><h1 id="5613" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">2.应用——立即将我们的麦克风声音转换成文本</h1><p id="08c9" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">在这个应用程序中，我们将尝试使用计算机的麦克风将这些声音立即转换成文本。为此，我们将再次使用<strong class="mc jd">speecher recognition</strong>库。我们还有一个新模块。<strong class="mc jd"> Pyaudio </strong>。该模块需要能够接收声音。</p><p id="7593" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">开始编码吧！</strong></p><p id="bf66" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">1-让我们加载模块</p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="65bc" class="nu lj it nq b gy nv nw l nx ny">pip install SpeechRecognition<br/>pip install pyaudio</span></pre><p id="b1a4" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">如果你在mac上这么做，你必须把它安装在<strong class="mc jd"> portaudio </strong>上。我们将用<strong class="mc jd">酿造</strong>来做这件事。</p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="3b6b" class="nu lj it nq b gy nv nw l nx ny">brew install portaudio<br/>pip install pyaudio</span></pre><p id="2b87" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">如果您在之前的应用程序中下载了SpeechRecognition，则无需再次下载。</p><p id="4608" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">2-让我们下载库并将识别器赋给变量。</p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="692d" class="nu lj it nq b gy nv nw l nx ny">import speech_recognition as sr<br/>r = sr.Recognizer()</span></pre><p id="0e69" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">同样，如果您在之前的应用程序中执行了这些步骤，您不需要执行这些步骤。</p><p id="0bcd" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">3-让我们把声音转换成文本。</p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="d996" class="nu lj it nq b gy nv nw l nx ny">with sr.Microphone() as source:<br/> r.adjust_for_ambient_noise(source)<br/> data = r.record(source, duration=5)<br/> print(“Sesinizi Tanımlıyor…”)<br/> text = r.recognize_google(data,language=’tr’)<br/> print(text)</span></pre><p id="45c9" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我们在使用音频文件创建的应用程序中引入了这个文件作为源。这里我们引入麦克风作为源，为此，我们使用sr.Microphone()方法。同样，我们将语言设置为土耳其语。如果我们愿意，我们可以调整音频收听时间。在本例中，它被设置为5秒。如果我们愿意，我们可以把秒钟保持得更长。</p><p id="2837" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">4-运行代码，我们的输出现在已经准备好了。</p><p id="e62b" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我们重复了五秒钟的“Merhaba Dünya”(土耳其语单词)循环，结果如下。你可以看到它适用于更长的句子。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ob"><img src="../Images/056ccf50e08ba13c557022b66307f41f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lAnEAq47gdMaewfh.png"/></div></div></figure><p id="9628" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">为了理解该模块如何工作，我们可以更好地了解引擎如何使用show_all = True选项来生成替代项。</p><pre class="ks kt ku kv gt np nq nr ns aw nt bi"><span id="f52e" class="nu lj it nq b gy nv nw l nx ny">text = r.recognize_google(data,show_all=True,language=’tr’)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oc"><img src="../Images/42383b07da82e19c6374a62d4ff461c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tlqw9iXBeKrFYOxg.png"/></div></div></figure><p id="f7fa" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我们实现的这两个应用是声音处理的两个简单例子。我们所做的和我们使用的源是<strong class="mc jd">谷歌云语音API </strong>。有可能为这些应用程序添加更多内容。如果你想以某种方式在你的项目中使用声音，研究和专门研究这些模块是很容易的。特别是如果<strong class="mc jd">数据科学家</strong>想要处理音频文件并在机器学习项目中使用它们，他们可以在预处理数据阶段使用这些库。我希望这两个应用程序是有用的初步信息。感谢您的阅读！</p><p id="d30e" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我的Linkedin个人资料；</p><div class="od oe gp gr of og"><a href="https://www.linkedin.com/in/onur-okyol-ba253b72/" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd jd gy z fp ol fr fs om fu fw jc bi translated">ONUR OKYOL - Bahcesehir大学-土耳其| LinkedIn</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">我在商业智能、数据科学和分析领域有超过7年的工作经验。我是做生意的…</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">www.linkedin.com</p></div></div><div class="op l"><div class="oq l or os ot op ou lb og"/></div></div></a></div></div></div>    
</body>
</html>