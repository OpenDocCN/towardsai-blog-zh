<html>
<head>
<title>An In-depth Look At How Rasa Featurizes User Input For Dialogue Prediction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">深入了解Rasa如何通过用户输入进行对话预测</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/an-in-depth-look-at-how-rasa-featurizes-user-input-for-dialogue-prediction-f153da550382?source=collection_archive---------2-----------------------#2021-09-27">https://pub.towardsai.net/an-in-depth-look-at-how-rasa-featurizes-user-input-for-dialogue-prediction-f153da550382?source=collection_archive---------2-----------------------#2021-09-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="c762" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/nlp" rel="noopener ugc nofollow" target="_blank">自然语言处理</a></h2><div class=""/><figure class="gl gn ka kb kc kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi jz"><img src="../Images/5a190bd228686276fb4b094f28cb9d7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Wq18c_jGOZaF2D-we-Mig.png"/></div></div></figure><h1 id="793b" class="kk kl it bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">介绍</h1><p id="20fe" class="pw-post-body-paragraph li lj it lk b ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf im bi translated">在本文中，我们将看看Rasa的<a class="ae mg" href="https://arxiv.org/abs/1910.00486" rel="noopener ugc nofollow" target="_blank"> TED策略</a>如何特征化提取的<a class="ae mg" href="https://rasa.com/docs/rasa/training-data-format#training-examples" rel="noopener ugc nofollow" target="_blank">意图</a>、<a class="ae mg" href="https://rasa.com/docs/rasa/nlu-training-data/#entities" rel="noopener ugc nofollow" target="_blank">实体</a>和<a class="ae mg" href="https://rasa.com/docs/rasa/domain/#slots" rel="noopener ugc nofollow" target="_blank">槽位</a>，以预测机器人接下来应该做什么。</p><p id="6031" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">复制本文中描述的结果的代码是这里的<a class="ae mg" href="https://github.com/hsm207/rasa_tracker_feat" rel="noopener ugc nofollow" target="_blank">和</a>。</p><h1 id="fb83" class="kk kl it bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">目的</h1><p id="fbb1" class="pw-post-body-paragraph li lj it lk b ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf im bi translated">假设我们在domain.yml中定义了以下意图:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/92cce561d633f57860840d7bc25a737c.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*1kaR42Dr1wmX5OWQrGupMg.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图1:在domain.yml文件中定义的意图</figcaption></figure><p id="d3e6" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">图1中定义的意图将在内部表示为一个查找表，如下所示:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/0f8096e0be5219ae8c42e46ef08192ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*O-0Z3IiymS4tJ1xeOnQJqg.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图2:图1中定义的意图的查找表</figcaption></figure><p id="01eb" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">请注意，我们已经在bot的domain.yml中定义了8个意图。</p><p id="8d80" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">因此，假设Rasa的NLU模型将“我感到幸福”这一话语归类为<code class="fe mw mx my mz b">mood_great</code>:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi na"><img src="../Images/42ed472991d70735ee9720866cb907bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jaapYS6WiBSYhNn9v4aHrg.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图Rasa的NLU模型如何对“我感到快乐”这一话语进行分类</figcaption></figure><p id="718e" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">TED策略将获取字符串<code class="fe mw mx my mz b">mood_great</code>并将其转换为8维二进制向量，如下所示:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/db7a37c5e2c7e361cb84b628180be5e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*pT_g1XieYXQdtvf8K4RcTw.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图4:表示意图mood_great的二进制向量</figcaption></figure><p id="162a" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">注意，图4中二进制向量的所有元素都是0，除了第6个元素(<strong class="lk jd">从0开始计数</strong>)。该位置的值为1，因为根据图2，第6个元素对应于intent <code class="fe mw mx my mz b">mood_great</code>的值。</p><p id="85e2" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">因此，我们可以得出结论，意图被表示为一个独热编码向量。</p><h1 id="eefc" class="kk kl it bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">实体</h1><h2 id="5ff1" class="nc kl it bd km nd ne dn kq nf ng dp ku lt nh ni ky lx nj nk lc mb nl nm lg iz bi translated">概观</h2><p id="4289" class="pw-post-body-paragraph li lj it lk b ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf im bi translated">假设我们已经在domain.yml中定义了以下实体:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/ebf0326f40355fccf0daa7a02396cfbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*GUcQPZXY348cXpmtyYeQ7g.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图5:在domain.yml中定义的实体</figcaption></figure><p id="938c" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">这将被转换成以下内部查找表:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi no"><img src="../Images/04aea3cd3308c540d0f4a99c90baa98c.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/1*6J2LxD3Ve9RHaWUR3aFgkw.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图6:用于特征化实体的内部查找表</figcaption></figure><p id="dbef" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">注意，我们只定义了4个实体，但是查找表有10个条目。</p><p id="91d9" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">原因是具有<a class="ae mg" href="https://rasa.com/docs/rasa/nlu-training-data/#entities-roles-and-groups" rel="noopener ugc nofollow" target="_blank">角色和组</a>的实体被视为独立的实体，因此为其角色和组中定义的每个值提供了额外的条目。</p><h2 id="3cba" class="nc kl it bd km nd ne dn kq nf ng dp ku lt nh ni ky lx nj nk lc mb nl nm lg iz bi translated">只有一个实体的话语</h2><p id="f6eb" class="pw-post-body-paragraph li lj it lk b ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf im bi translated">给定话语“我想开一个支票账户”，NLU模型将提取具有值“支票账户”的实体“账户”:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi np"><img src="../Images/d57fd61c8790f12e95087a87c1af842e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*TVxu0ySZw9JVcKdeIJ5JUA.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图7:从话语“我想开一个支票账户”中提取的实体</figcaption></figure><p id="eec1" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">TED策略将使用此信息构建以下向量:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi nq"><img src="../Images/28dd823d7ba3e99acffa0dbdbf61e2e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rdoDmDWq_xO-SVay52KZTg.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图8:图8中提取的实体的向量表示</figcaption></figure><p id="f7dd" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">应该清楚的是，图8中的值1对应于基于图6的实体“账户”。</p><h2 id="c01b" class="nc kl it bd km nd ne dn kq nf ng dp ku lt nh ni ky lx nj nk lc mb nl nm lg iz bi translated">具有重复实体的话语</h2><p id="90a1" class="pw-post-body-paragraph li lj it lk b ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf im bi translated">当一个话语包含相同实体类型的多次提及时会发生什么？</p><p id="9f74" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">例如，语句“我想把钱从我的支票账户转到我的储蓄账户”包含以下实体:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi nr"><img src="../Images/f2e755d08f0e206f6786a14a54d21fbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aatyXN9Qopq3EelDy1Vblw.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图9:具有多个相同类型实体的结果</figcaption></figure><p id="ea75" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">图9显示，我们有两个类型相同的实体，即“帐户”，但值不同，即“支票帐户”和“储蓄帐户”。</p><p id="ebb1" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">TED策略将使用此信息生成以下矢量表示:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi ns"><img src="../Images/87d603db6e71514214fb26e6a12c6eb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HFO9TS8YuSgGJQgbn_IGtw.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图10:图9中提取的实体的向量表示</figcaption></figure><p id="048a" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">注意，这与图8中的向量表示相同。</p><p id="0d59" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">因此，我们得出结论，我们不能根据提及的实体数量来影响对话。</p><h2 id="fb89" class="nc kl it bd km nd ne dn kq nf ng dp ku lt nh ni ky lx nj nk lc mb nl nm lg iz bi translated">不同实体的话语</h2><p id="8676" class="pw-post-body-paragraph li lj it lk b ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf im bi translated">话语“我想开一个储蓄账户并去柏林旅行”将提取以下实体:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/d307f7b9c0128c89e623c13362cf2a38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*WxhTzYIppUAtOZlfxkzQQw.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图11:具有不同类型的多个实体的结果</figcaption></figure><p id="a13e" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">在这种情况下，TED策略将生成以下特征向量:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi nu"><img src="../Images/fa9b67bfba67f9e2c9edebdf0bd177ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*joQ96_ZLZGKVCGnsfF9Z5w.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图12:图12中结果的向量表示</figcaption></figure><p id="22ef" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">因此，我们可以得出结论，提取的实体的向量表示是二进制向量，其中1仅指示根据内部查找表映射到该位置的实体的存在。</p><h2 id="1356" class="nc kl it bd km nd ne dn kq nf ng dp ku lt nh ni ky lx nj nk lc mb nl nm lg iz bi translated">具有角色和组的实体</h2><p id="8922" class="pw-post-body-paragraph li lj it lk b ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf im bi translated">包含具有角色和组的实体的话语的情况是有趣的。</p><p id="7974" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">考虑角色为“我想从柏林旅行到旧金山”的实体的情况。这些是由NLU模型提取的实体:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi nv"><img src="../Images/c280440ec7aff3d542521205a2f960c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fs8fuq1PT3atCa2xQs7KAQ.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图13:包含带有组的实体的结果</figcaption></figure><p id="ae7a" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">TED政策将图13中的结果特征化为以下向量:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi nw"><img src="../Images/6c6aa74b9339d9b78e6851000f9a9629.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qfQXaDoLe633OAB1RmJJuQ.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图14:图13中结果的向量表示</figcaption></figure><p id="47b6" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">正如所料，我们在第4和第5个元素中看到1，因为这些元素对应于“城市”实体类型的“出发”和“目的地”角色。</p><p id="b680" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">可能没有预料到的是，第一个元素中也有一个1，因为该元素只对应于“city”实体类型，没有任何角色。</p><p id="d2c3" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">同样的观察适用于具有组的实体和具有角色和组的实体。</p><h1 id="cffc" class="kk kl it bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">时间</h1><h2 id="8e12" class="nc kl it bd km nd ne dn kq nf ng dp ku lt nh ni ky lx nj nk lc mb nl nm lg iz bi translated">概观</h2><p id="f9e0" class="pw-post-body-paragraph li lj it lk b ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf im bi translated">插槽将有自己的查找表，就像意图和实体的情况一样。</p><p id="c14c" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">如果我们在domain.yml文件中定义了以下插槽:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/392e7ce17e6c73819a39ddfda94ecd81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*O8IVkNEfKtCZkB2-SNVF9A.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图15:在domain.yml中定义的插槽</figcaption></figure><p id="76fb" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">内部查找表看起来是这样的:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/a215065df2a1739b77d5eeaf45b189ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*Qmrix0dm_UwGFksa_YSrfg.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图16:用于特征化图15中定义的插槽的内部查找表</figcaption></figure><p id="67a7" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">让我们来看看每种插槽类型是如何被特征化的。</p><h2 id="6efa" class="nc kl it bd km nd ne dn kq nf ng dp ku lt nh ni ky lx nj nk lc mb nl nm lg iz bi translated">文本槽</h2><p id="a82d" class="pw-post-body-paragraph li lj it lk b ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf im bi translated">将“cuisine”槽的值设置为任何值(除了<code class="fe mw mx my mz b">None</code>)将产生以下特征向量:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/0917f7deb22fef73ebdec645f7079e69.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*lkPN1LiP9WqWfKJiulLPlQ.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图17:填充文本槽的向量表示</figcaption></figure><p id="d8a3" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">因此，尽管槽的类型是文本，Rasa实际上并不检查传递给文本槽的值的类型是字符串。</p><h2 id="07b3" class="nc kl it bd km nd ne dn kq nf ng dp ku lt nh ni ky lx nj nk lc mb nl nm lg iz bi translated">布尔插槽</h2><p id="218d" class="pw-post-body-paragraph li lj it lk b ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf im bi translated">将“is_authenticated”槽设置为False将产生以下特征向量:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/bfbb643ff2020d7e81c842cf071be266.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*P7S8wONtggVVmQnYA3qOtg.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图18:布尔槽设置为假时的特征向量</figcaption></figure><p id="293f" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">这是向量表示的样子，然后槽被设置为真:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/e19de7d8d7b5a9af3cb571e60416cf73.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*w23eJTY0XQODWp_hLfxb2Q.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图19:布尔槽设置为真时的特征向量</figcaption></figure><p id="215e" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">请注意，布尔插槽使用二维向量表示，其中True和False分别表示为(1，1)和(1，0)(与(0，1)和(1，0)相对)。</p><h2 id="53b5" class="nc kl it bd km nd ne dn kq nf ng dp ku lt nh ni ky lx nj nk lc mb nl nm lg iz bi translated">分类槽</h2><p id="8335" class="pw-post-body-paragraph li lj it lk b ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf im bi translated">“risk_level”槽是一个具有3个级别(低、中、高)的分类槽。</p><p id="7d1a" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">请注意，查找表已经为该时隙分配了4个位置。前3个对应于在domain.yml中定义的3个级别，最后一个对应于分配给预定义级别之外的该槽的值。</p><p id="bf22" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">例如，如果插槽被赋值为“中”，则特征向量如下所示:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/a0f7eb899b8362fe6480842ae376f9a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*IdL6FVqSY8fCXCBO7RerRQ.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图20:当risk_level槽被设置为“中等”时的向量表示</figcaption></figure><p id="f9c3" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">另一方面，如果该值既不是“低”、“中”也不是“高”，那么将使用第四个位置。例如，当插槽被赋值为“超高”时，这是矢量表示:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/2c31d6cfec62e27182f07b3b7c33da07.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/1*RHljrqMp9VLsPlEVM8ZzXw.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图21:当risk_level槽被设置为“超高”(在预定义值之外)时的向量表示</figcaption></figure><h2 id="0e8c" class="nc kl it bd km nd ne dn kq nf ng dp ku lt nh ni ky lx nj nk lc mb nl nm lg iz bi translated">浮动插槽</h2><p id="7ab2" class="pw-post-body-paragraph li lj it lk b ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf im bi translated">“温度”槽被定义为浮点槽，最小值为-100，最大值为100。</p><p id="6e6d" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">这是“温度”设置为0时的特征向量:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi od"><img src="../Images/22bf8ef3d866c87662b624eafd2f3239.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*2i6z-2IbzM9aHUR1m-nc1Q.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图22:温度槽设置为0时的矢量表示(在界限内)</figcaption></figure><p id="bc95" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">这是“温度”设置为-200时的特征向量:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/51db45f06d754595f62a52b7e058ccdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*z_-7zdfgAUGCXnM7LYt06A.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图23:温度槽设置为-200时的矢量表示(低于下限)</figcaption></figure><p id="b3cf" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">这是“温度”设置为200时的特征向量:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/94490e620cbf343f85670955ae537fcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*CXbQEg9KsI8ojXPdvO2jKA.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图24:温度槽设置为200(超出上限)时的矢量表示</figcaption></figure><p id="9a89" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">根据图22、23和24中的结果，很明显，我们可以使用浮动槽来构建故事，当分配的值超出最大值而不是小于最小值时，这些故事将分支不同，因为当它的值在预定义的界限内时，它共享相同的向量表示。</p><h2 id="6238" class="nc kl it bd km nd ne dn kq nf ng dp ku lt nh ni ky lx nj nk lc mb nl nm lg iz bi translated">列出插槽</h2><p id="cc1b" class="pw-post-body-paragraph li lj it lk b ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf im bi translated">列表槽与文本槽相似，传递给它的任何值(除了<code class="fe mw mx my mz b">None</code>)都将被视为特征化的有效输入。</p><p id="bb6a" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">例如，将这些值中的任何一个分配给“shopping_items”槽:</p><ul class=""><li id="5802" class="of og it lk b ll mh lp mi lt oh lx oi mb oj mf ok ol om on bi translated"><code class="fe mw mx my mz b">[“eggs”, “milk”]</code></li><li id="ae3b" class="of og it lk b ll oo lp op lt oq lx or mb os mf ok ol om on bi translated"><code class="fe mw mx my mz b">200</code></li><li id="1646" class="of og it lk b ll oo lp op lt oq lx or mb os mf ok ol om on bi translated"><code class="fe mw mx my mz b">“eggs”</code></li><li id="5e80" class="of og it lk b ll oo lp op lt oq lx or mb os mf ok ol om on bi translated"><code class="fe mw mx my mz b">[None]</code></li></ul><p id="4313" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">将给出相同的特征向量，即:</p><figure class="mn mo mp mq gt kd gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/94e46771203ab550426d7bde31d46686.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*apDyK4Cf5YKLH6oig-Y5Gg.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">图25:当列表槽被分配了除“None”之外的任何内容时的向量表示</figcaption></figure><h1 id="cb58" class="kk kl it bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">结论</h1><p id="b502" class="pw-post-body-paragraph li lj it lk b ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf im bi translated">本文解释了在使用TED策略进行对话预测时，意图、实体和槽是如何特征化的。它还确定了某些类型的一些特质。这些特质可能看起来微不足道，但值得永远记住，因为它们确实会影响您可以编写什么样的故事，例如，您不能编写基于提取的实体数量分支的故事(不编写自定义代码)。</p><p id="b3bd" class="pw-post-body-paragraph li lj it lk b ll mh ln lo lp mi lr ls lt mj lv lw lx mk lz ma mb ml md me mf im bi translated">我希望这对您有所帮助。</p></div></div>    
</body>
</html>