<html>
<head>
<title>How to Create an E-Commerce Price Comparison App using Selenium and TkInter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Selenium和TkInter创建电子商务比价应用程序</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/how-to-create-an-e-commerce-price-comparison-app-using-selenium-and-tkinter-f4a4a16ab2a1?source=collection_archive---------0-----------------------#2021-08-21">https://pub.towardsai.net/how-to-create-an-e-commerce-price-comparison-app-using-selenium-and-tkinter-f4a4a16ab2a1?source=collection_archive---------0-----------------------#2021-08-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="b944" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/web-scraping" rel="noopener ugc nofollow" target="_blank">网页抓取</a></h2><div class=""/><figure class="gl gn jx jy jz ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi jw"><img src="../Images/2e56a270888a9a86322abf8e7f8cf0e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*maurjo94aWjtzeoMZKkncA.jpeg"/></div></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">约翰·施诺布里奇在<a class="ae kl" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="f846" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">动机</h1><p id="1343" class="pw-post-body-paragraph lk ll iq lm b ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">从我多年热衷于电子商务的经历来看，我注意到在购买感兴趣的产品时会有一些不便。其中一个耗时的问题是找到所述产品的最佳价值。只需在这些电子商务网站上查询一次，我们就会发现自己在过多的商品中滚动，以最低的价格找到评分最高、评论最积极的商品。网上购物有如此多的选择，以至于我们经常对打开的标签和“比较价格”按钮(有时甚至不存在)的数量感到慌乱。</p><p id="675d" class="pw-post-body-paragraph lk ll iq lm b ln mi lp lq lr mj lt lu lv mk lx ly lz ml mb mc md mm mf mg mh ij bi translated">例如，考虑买一副耳机。你花了大量的时间研究这个项目的品牌、规格、利弊，直到你选择一个满足你的需求。在最终挑选了一个之后，你面临着一个同样艰巨的任务:找出从哪家商店购买该商品。一些商店以50美元的折扣出售它，而其他商店则没有。其他卖家提供更大的折扣，尽管他们的卖家评级和你想要的一样高。差异继续增加，当你做一个简单的购买时，你会变得更加困惑。如果我们能自动完成这一过程，找到一个最优的购买方案，会怎么样呢？</p><p id="e20d" class="pw-post-body-paragraph lk ll iq lm b ln mi lp lq lr mj lt lu lv mk lx ly lz ml mb mc md mm mf mg mh ij bi translated">随着我们对电子商务的依赖与日俱增，拥有一种工具来自动化基于评级、评级数量和价格的价格比较的费力过程将是一笔巨大的财富。在本文中，我将向您展示如何用Python来构建一个能够做到这一点的web scraper！</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="f8d1" class="km kn iq bd ko kp mu kr ks kt mv kv kw kx mw kz la lb mx ld le lf my lh li lj bi translated">我们的待办事项列表</h1><p id="f7cb" class="pw-post-body-paragraph lk ll iq lm b ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">在我们开始之前，让我们概述一下我们到底要做什么。我将这个项目的范围限制在亚马逊和易贝，可以说是当今最受欢迎的两家电子商务公司。到本文结束时，将:</p><ul class=""><li id="dc93" class="mz na iq lm b ln mi lr mj lv nb lz nc md nd mh ne nf ng nh bi translated">使用Python中的<strong class="lm ja"> BeautifulSoup </strong>和<strong class="lm ja"> Selenium </strong>库从亚马逊和易贝抓取数据</li><li id="e2fe" class="mz na iq lm b ln ni lr nj lv nk lz nl md nm mh ne nf ng nh bi translated">根据评级数量和价格对数据集进行排序，获得最佳的前10项潜在购买</li><li id="01d2" class="mz na iq lm b ln ni lr nj lv nk lz nl md nm mh ne nf ng nh bi translated">使用用户友好的TkInter库创建一个GUI，将所有这些放在一起</li></ul><p id="63f9" class="pw-post-body-paragraph lk ll iq lm b ln mi lp lq lr mj lt lu lv mk lx ly lz ml mb mc md mm mf mg mh ij bi translated">使用Python，我们可以筛选出大量多余的交易，否则你会花时间去寻找。这不仅节省了你的时间，也节省了金钱！</p><blockquote class="nn"><p id="7c93" class="no np iq bd nq nr ns nt nu nv nw mh dk translated">“小心小开支；一个小漏洞会使一艘大船沉没”——本杰明·富兰克林</p></blockquote><h1 id="4a87" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx nx kz la lb ny ld le lf nz lh li lj bi translated">刮刀</h1><p id="565f" class="pw-post-body-paragraph lk ll iq lm b ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">对于这个分析，我们首先构建两个解析器，分别用于每个网站。首先，我们希望用户输入一个搜索词以及一个页面范围来抓取。例如，如果我们寻找“海盐”,并输入页面范围5，我们会希望我们的脚本访问亚马逊/易贝网页，并反复抓取海盐信息，直到到达第5页的结尾。</p><p id="d136" class="pw-post-body-paragraph lk ll iq lm b ln mi lp lq lr mj lt lu lv mk lx ly lz ml mb mc md mm mf mg mh ij bi translated">既然我们心中有了目标，让我们开始编写代码吧。我们必须首先转换搜索词的语法，以匹配URL的构造方式。我们可以得到一个通用的基本URL，使用网站域名，后跟格式化的搜索词，再后跟我们想要抓取的页码。使用这个特定的URL，我们可以使用Selenium API将我们的scraper指向它，并获得我们想要的任何信息。</p><figure class="ob oc od oe gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi oa"><img src="../Images/10bc5466997db1163138a43f52a08ba4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B38rZ_Stm418UFgHCOrKAA.png"/></div></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">基本URL后跟搜索词和花括号，按页码格式化。作者图片</figcaption></figure><p id="d36b" class="pw-post-body-paragraph lk ll iq lm b ln mi lp lq lr mj lt lu lv mk lx ly lz ml mb mc md mm mf mg mh ij bi translated">网页的每个项目都是由HTML属性构成的。在找到与该页面上的项目对应的特定标签后，我们可以获取属于这些标签的所有项目。使用BeautifulSoup API，我们可以直接访问网页的HTML源代码。知道要定位哪些标签是一个反复试验的过程。首先打印出基于标记的查询返回的HTML代码，并修改它们，直到得到您正在寻找的项目。</p><figure class="ob oc od oe gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi of"><img src="../Images/6a0f5106d32fb332cf49ad41acd888af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Qlc7FsIXdEa30kyqssZ3A.png"/></div></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">转到任何网页，右键单击任何内容并选择“检查”来查看底层的HTML代码。作者图片</figcaption></figure><p id="7c62" class="pw-post-body-paragraph lk ll iq lm b ln mi lp lq lr mj lt lu lv mk lx ly lz ml mb mc md mm mf mg mh ij bi translated">在我的实现中，我使用Chrome作为默认浏览器。无论您选择什么浏览器，请确保更改您在Selenium中使用的web驱动程序类型。既然您的解析器知道了要访问哪个链接，我们就面临下一个问题:遍历不同的页面。解决这个问题的方法很简单。在上面的图片中，我们在最后放置了花括号来按照页码进行格式化。现在，我们所要做的就是建立一个包含解析器代码的for循环，在每次迭代中按页码格式化，并抓取该页面上的所有产品信息。我们使用<a class="ae kl" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank"> BeautifulSoup </a> API中的<em class="og">‘find’</em>函数来抓取包含这些信息的HTML标签。</p><p id="aa08" class="pw-post-body-paragraph lk ll iq lm b ln mi lp lq lr mj lt lu lv mk lx ly lz ml mb mc md mm mf mg mh ij bi translated">有了这个，我的解析器就能够提取页面上每个产品的名称、价格、条件、URL、运费、平均评分和许多评分。有些情况下，我们会对这些信息位进行空白查询。因此，有必要使用<em class="og"> try </em>语句来规避错误。我创建了列表来存储解析后的信息，确保在缺少信息时也有占位符。这样做是为了使每个列表保持信息的一致性。稍后，我们可以很容易地通过索引删除观察值。</p><p id="c705" class="pw-post-body-paragraph lk ll iq lm b ln mi lp lq lr mj lt lu lv mk lx ly lz ml mb mc md mm mf mg mh ij bi translated">希望上面的解释本身有意义，但如果没有意义，这里是易贝解析器的代码！通读我与代码一起写的注释将更好地说明我之前提出的观点。</p><figure class="ob oc od oe gt ka"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="f84b" class="pw-post-body-paragraph lk ll iq lm b ln mi lp lq lr mj lt lu lv mk lx ly lz ml mb mc md mm mf mg mh ij bi translated">当创建Amazon解析器时，同样的逻辑也适用。如果你想查看它的代码，你可以在我的GitHub repo <a class="ae kl" href="https://github.com/vnnair/Amazon-Ebay-Webscraper" rel="noopener ugc nofollow" target="_blank">这里</a>。现在我们有了两个解析器，我们需要一个外部函数来获取结果数据集并对它们进行预处理。我已经在GitHub资源库中的一个名为<em class="og">‘main’</em>的函数中做到了这一点。在该函数中，我将字符串变量转换为数字变量，以便根据每个产品的评级数量进行排序。这是我在查询中筛选前10项时选择的指标。这一指标可以根据您的喜好轻松调整。</p><h1 id="d00c" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">创建GUI</h1><p id="a50a" class="pw-post-body-paragraph lk ll iq lm b ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">现在我们已经构建了解析器，让我们试着把它变成一个其他人可以使用的工具！我用Python中的<a class="ae kl" href="https://docs.python.org/3/library/tk.html" rel="noopener ugc nofollow" target="_blank"> TkInter </a>库创建了一个GUI。这个API为我们提供了一个方便有效的方法来为scraper创建一个友好的用户界面。</p><p id="0087" class="pw-post-body-paragraph lk ll iq lm b ln mi lp lq lr mj lt lu lv mk lx ly lz ml mb mc md mm mf mg mh ij bi translated">这个库中有几个模块可以用来在界面中获取小部件。对于这个项目，我们利用四个:</p><ul class=""><li id="72df" class="mz na iq lm b ln mi lr mj lv nb lz nc md nd mh ne nf ng nh bi translated"><strong class="lm ja"> tk。Canvas: </strong>使用它来设置应用程序窗口的尺寸</li><li id="3645" class="mz na iq lm b ln ni lr nj lv nk lz nl md nm mh ne nf ng nh bi translated"><strong class="lm ja"> tk。Frame: </strong>创建一个矩形区域，您可以在其中放置自己选择的小部件</li><li id="fef8" class="mz na iq lm b ln ni lr nj lv nk lz nl md nm mh ne nf ng nh bi translated"><strong class="lm ja"> tk。条目:</strong>创建一个文本框，用户可以在其中输入文本数据</li><li id="bf54" class="mz na iq lm b ln ni lr nj lv nk lz nl md nm mh ne nf ng nh bi translated"><strong class="lm ja"> tk。按钮:</strong>创建一个按钮，点击它可以触发一个功能(在我们的例子中，这将是scraper功能)</li></ul><p id="4c0f" class="pw-post-body-paragraph lk ll iq lm b ln mi lp lq lr mj lt lu lv mk lx ly lz ml mb mc md mm mf mg mh ij bi translated">注意调整小部件布局的三种方式也很重要。TkInter库有三个可以利用的库:place、pack和grid。对于我们的项目，我们专门使用了<em class="og">【place】</em>方法。在我看来，这是排列小部件最直接的方式，因为该方法允许绝对的<em class="og"> x </em>和- <em class="og"> y </em>值作为输入。如果你对另外两种方法感兴趣，你可以在这里阅读它们。</p><p id="8ea5" class="pw-post-body-paragraph lk ll iq lm b ln mi lp lq lr mj lt lu lv mk lx ly lz ml mb mc md mm mf mg mh ij bi translated">在我的应用程序中，我创建了六个框架。一个是搜索栏，用户可以在那里输入感兴趣的产品。其中两个用作画布的背景。一个框架包含另外两个子框架，显示从抓取脚本获得的两个数据集。然后，我创建了两个条目工具栏:一个用于产品名称，另一个用于获取产品数据的最大页码。最后，我添加了一个“比较”按钮。当点击时，它触发前面讨论过的<em class="og">“main”</em>函数，为我们提供两个排序的数据帧。</p><p id="bd21" class="pw-post-body-paragraph lk ll iq lm b ln mi lp lq lr mj lt lu lv mk lx ly lz ml mb mc md mm mf mg mh ij bi translated">让我们看看应用程序的运行。我搜索过Bose nc700耳机作为例子。我提示应用程序抓取易贝和亚马逊的前两页，并根据我的功能进行排序，返回这两个网站的前10个查询。这是我们的最终产品:</p><figure class="ob oc od oe gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi oj"><img src="../Images/64477d0fc9a26e49b9af34adaa1f9779.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CN7QP7039iEYvWMSMsJu-Q.png"/></div></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">应用程序界面和输出示例。图片作者。</figcaption></figure><p id="60ff" class="pw-post-body-paragraph lk ll iq lm b ln mi lp lq lr mj lt lu lv mk lx ly lz ml mb mc md mm mf mg mh ij bi translated">根据排序后的数据框，我们看到易贝和亚马逊上该产品的前10名选择在价格上没有太大差异。因此，从任何一个网站购买就足够了，除非你想节省50美元左右购买翻新产品。</p><p id="032b" class="pw-post-body-paragraph lk ll iq lm b ln mi lp lq lr mj lt lu lv mk lx ly lz ml mb mc md mm mf mg mh ij bi translated">现在您已经知道了这是如何工作的，您可以构建自己的解析器，并合并更多您想要比较的网站。然而，您查询的HTML标签和网站URL将需要稍微不同的查询。这样做的时候，仔细检查网站的属性，尝试不同的HTML查询，直到获得您想要的信息。</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><p id="90c4" class="pw-post-body-paragraph lk ll iq lm b ln mi lp lq lr mj lt lu lv mk lx ly lz ml mb mc md mm mf mg mh ij bi translated">正如你所看到的，这个工具在比较不同网站上的产品交易时非常有用，可以节省很多时间。我们不再需要浏览各种标签和滚动浏览无穷无尽的产品，我们的指尖就有最好的购买选择！</p><p id="035e" class="pw-post-body-paragraph lk ll iq lm b ln mi lp lq lr mj lt lu lv mk lx ly lz ml mb mc md mm mf mg mh ij bi translated">一如既往，如果您有任何问题或建议，请随时联系我们。感谢您的阅读！</p></div></div>    
</body>
</html>