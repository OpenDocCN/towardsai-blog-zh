<html>
<head>
<title>Machine learning model for predicting medium writer earnings</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">预测媒体作者收入的机器学习模型</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/machine-learning-model-for-predicting-medium-writer-earnings-5c400e4c9ca9?source=collection_archive---------1-----------------------#2019-12-04">https://pub.towardsai.net/machine-learning-model-for-predicting-medium-writer-earnings-5c400e4c9ca9?source=collection_archive---------1-----------------------#2019-12-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/6c95381c487a1797eefac953a49d1137.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EbTXG8oDiFcKXwimVvXohg.png"/></div></div></figure><p id="a224" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">2019年10月22日，Medium公布了一个计算作家收入的新模型。根据这种新模式，<strong class="kd iu">收益将根据媒介会员的<em class="kz">阅读时间</em>来计算。</strong>你可以从这篇文章中找到更多关于新模式的信息:<a class="ae la" href="https://blog.medium.com/improving-how-we-calculate-writer-earnings-d2d3f4329b26" rel="noopener"> <strong class="kd iu">改进我们计算作家收入的方式</strong> </a>。</p><p id="ea17" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">新模式自2019年10月28日起生效。在之前的一篇文章(<a class="ae la" href="https://towardsdatascience.com/medium-partner-programs-new-model-for-calculating-writer-s-earnings-using-basic-linear-regression-bddf8ef7e431" rel="noopener" target="_blank"> <strong class="kd iu"> Medium Partner Program计算作家收入的新模型—线性回归分析</strong> </a>)中，我曾写过一个在新的Partner Program模型下作家收入的模型。但本文仅基于5天的数据(2019年10月28日至2019年11月2日)。</p><p id="b7d7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">由于新模式现在已经运行了1个月，我决定重新考虑在新的合作伙伴计划下估计作家收入的问题，这次使用1个月的数据(我11月的收入数据)。</p><p id="3f2e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在本文中，我们使用<a class="ae la" href="https://github.com/bot13956/ML_Model_to_predict_medium_writer_earnings" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">earnings _ data . CSV</strong></a>数据集构建了一个简单的模型，用于基于成员阅读时间预测作家的每日收入。本文分为以下六个部分:(1)必要库的导入；(2)数据集的导入；(3)回归模型的建立；(4)拟合回归线的可视化；(5)模型训练、测试和评估；以及(6)模型发现和结论的总结。</p><p id="9a09" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">本文的数据集和代码可以从这个<a class="ae la" href="https://github.com/bot13956/ML_Model_to_predict_medium_writer_earnings" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu"> github存储库</strong> </a>下载。</p><h1 id="501e" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">1.导入必要的库</h1><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="b0b2" class="mi lc it me b gy mj mk l ml mm">import numpy as np<br/>import pandas as pd<br/>import matplotlib.pyplot as plt<br/>from sklearn.metrics import r2_score<br/>from sklearn.model_selection import train_test_split</span></pre><h1 id="ed18" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">2.读取数据集并显示列</h1><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="2b2f" class="mi lc it me b gy mj mk l ml mm">df=pd.read_csv("earnings_data.csv")<br/>df.head(n=10)</span></pre><figure class="lz ma mb mc gt ju gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/9f43b1981f9c8ad9f24da6c2e56613a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:372/format:webp/1*VwZW8eRgZg_BMy4v6Us0uQ.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated"><strong class="bd ld">数据集有2个特征:时间(每日会员的阅读时间，以分钟为单位)和收入(每日每个故事的收入)。</strong></figcaption></figure><h1 id="2cca" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">3.构建基本回归模型</h1><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="dcd5" class="mi lc it me b gy mj mk l ml mm">X = df['time'].values<br/>y = df['earning'].values<br/>slope = np.polyfit(X,y,1)[0]<br/>intercept = np.polyfit(X,y,1)[1]<br/>y_pred = intercept + slope*X<br/>R2_score = r2_score(y, y_pred)</span></pre><figure class="lz ma mb mc gt ju gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/7ef217219fd671d434299fe94a451fd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*S3zyMIAY49WR2uJtRNTltg.png"/></div></figure><h1 id="6c05" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">4.拟合回归线的可视化</h1><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="5aa7" class="mi lc it me b gy mj mk l ml mm">plt.figure(figsize=(8,6))<br/>plt.scatter(X,y,label='data', c='steelblue', edgecolor='white', s=150)<br/>plt.plot(X, y_pred,color='black', lw=2,label='fit')<br/>plt.title('$ R^2 = 0.939 $',size=14)<br/>plt.xlabel('daily members reading time per story (min)',size=14)<br/>plt.ylabel('daily earning per story ($)',size=14)<br/>plt.legend()<br/>plt.show()</span></pre><figure class="lz ma mb mc gt ju gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/f2aa516419cdb8f3f75b0f40795f17d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*jL7l3rS6OqdRqqJKJQl9kA.png"/></div></figure><h1 id="e7c9" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">5.模型培训、测试和评估</h1><p id="877f" class="pw-post-body-paragraph kb kc it kd b ke mu kg kh ki mv kk kl km mw ko kp kq mx ks kt ku my kw kx ky im bi translated">在这里，我们执行模型训练、测试和评估(使用交叉验证)以确保模型是健壮和稳定的。为了进行交叉验证分析，我们生成了10个随机样本的训练集和测试集。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="0d26" class="mi lc it me b gy mj mk l ml mm">slope = []<br/>intercept =  []<br/>train_score = []<br/>test_score = []</span><span id="08ad" class="mi lc it me b gy mz mk l ml mm">for i in range(10):<br/>    X_train, X_test, y_train, y_test = train_test_split( X, y, test_size=0.4, random_state=i)<br/>    a = np.polyfit(X_train,y_train,1)[0]<br/>    b = np.polyfit(X_train,y_train,1)[1]<br/>    y_train_pred = a*X_train + b<br/>    y_test_pred = a*X_test + b</span><span id="4813" class="mi lc it me b gy mz mk l ml mm">    train_score = np.append(train_score, <br/>                            r2_score(y_train,y_train_pred))</span><span id="bee2" class="mi lc it me b gy mz mk l ml mm">    test_score = np.append(test_score, r2_score(y_test,y_test_pred))</span><span id="7860" class="mi lc it me b gy mz mk l ml mm">    slope = np.append(slope, np.polyfit(X_train, y_train,1)[0])</span><span id="9913" class="mi lc it me b gy mz mk l ml mm">    intercept = np.append(intercept, <br/>                          np.polyfit(X_train, y_train,1)[1])</span></pre><figure class="lz ma mb mc gt ju gh gi paragraph-image"><div class="gh gi na"><img src="../Images/f86c8279096d37cd903608ff7fd4bd4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*hh482-oCjiHC0J961B9UcQ.png"/></div></figure><figure class="lz ma mb mc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nb"><img src="../Images/4359fa7f860f70077f69b5631cfa8f45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jWzLgIt6ibJgFFxib6pIMA.png"/></div></div></figure><p id="61fa" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">观察:</strong>查看上面的输出，我们看到这个模型非常健壮和稳定。我们还计算出回归线的平均斜率为0.038，平均截距为0.818。</p><h1 id="f749" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">6.模型结果和结论摘要</h1><p id="275e" class="pw-post-body-paragraph kb kc it kd b ke mu kg kh ki mv kk kl km mw ko kp kq mx ks kt ku my kw kx ky im bi translated">基于我们的机器学习模型，我们发现了每日每篇报道收入(美元)与每日成员阅读时间(分钟)之间的关系:</p><h2 id="d35c" class="mi lc it bd ld nc nd dn lh ne nf dp ll km ng nh lp kq ni nj lt ku nk nl lx nm bi translated"><strong class="ak">收益= 0.038 x时间+ 0.818 </strong></h2><p id="254a" class="pw-post-body-paragraph kb kc it kd b ke mu kg kh ki mv kk kl km mw ko kp kq mx ks kt ku my kw kx ky im bi translated"><strong class="kd iu">注意:</strong>这种关系仅适用于成员阅读时间在1分钟到900分钟的范围内，该范围用于训练模型。因为斜率是一个随机变量，用<strong class="kd iu"> slope = 0.38 +/- 0.001、</strong>来描述，我们预计模型在使用时，会在预测数据中产生小的变化。你可能期望这个模型产生大约<strong class="kd iu">+/-1美元的预测收益变化。</strong></p><p id="d75a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">总之，我们已经展示了如何使用合作伙伴计划的最新模型，使用简单的线性回归模型来预测作家的收入。随着越来越多的收入数据从新的媒体合作伙伴计划模型中获得，我们希望在未来扩展这种计算方法。同时，该模型可以作为一个可靠的模型来估计成员阅读时间的每日收入。</p></div></div>    
</body>
</html>