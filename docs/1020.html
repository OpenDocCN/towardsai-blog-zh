<html>
<head>
<title>Training taking too long? Use Exponentially Weighted Averages!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">训练时间太长？使用指数加权平均值！</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/training-taking-too-long-use-exponentially-weighted-averages-c15279f3df55?source=collection_archive---------6-----------------------#2020-10-07">https://pub.towardsai.net/training-taking-too-long-use-exponentially-weighted-averages-c15279f3df55?source=collection_archive---------6-----------------------#2020-10-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="83c4" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/machine-learning/deep-learning" rel="noopener ugc nofollow" target="_blank">深度学习</a></h2><div class=""/><div class=""><h2 id="c813" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">使用这种优化来加快你的训练！</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/f02c637fefa6a7e5a9155a2a676d7b07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1-B34LBLSObYDMtb"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated"><a class="ae le" href="https://unsplash.com/@urielsc26?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">乌列尔SC </a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="88bf" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">被困在付费墙后面？点击<a class="ae le" href="https://medium.com/@D3nii/training-taking-too-long-use-exponentially-weighted-averages-c15279f3df55?sk=4a2ef7f3a44a43e05e62daddc36f7271" rel="noopener">这里</a>阅读完整故事与我的朋友链接！</p><p id="4038" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们所有人，不管是ML工程师还是数据科学家，都爱<strong class="lh ja"> <em class="mb">数据</em> </strong>。每当我们听说我们有更多的数据可以使用时，这听起来就像是天堂</p><blockquote class="mc"><p id="1717" class="md me iq bd mf mg mh mi mj mk ml ma dk translated">并非一切都像看上去的那样。</p></blockquote><p id="c397" class="pw-post-body-paragraph lf lg iq lh b li mm ka lk ll mn kd ln lo mo lq lr ls mp lu lv lw mq ly lz ma ij bi translated">“这里的弊端是什么？”~你可能会问。所以，我们有我们的小CPU处理器，但我们中的一些幸运儿有GPU，但也是如此，计算能力并没有暴涨，而是有一个极限。我能想到的主要缺点就是<strong class="lh ja"> <em class="mb">明显训练时间</em> </strong>太长。</p><h1 id="3a2d" class="mr ms iq bd mt mu mv mw mx my mz na nb kf nc kg nd ki ne kj nf kl ng km nh ni bi translated">指数加权平均值</h1><p id="16f4" class="pw-post-body-paragraph lf lg iq lh b li nj ka lk ll nk kd ln lo nl lq lr ls nm lu lv lw nn ly lz ma ij bi translated">让我用T21解释的方式来解释。假设你有伦敦的天气数据。你希望能够预测不同日子的天气。数据可能类似于:</p><pre class="kp kq kr ks gt no np nq nr aw ns bi"><span id="dcb1" class="nt ms iq np b gy nu nv l nw nx">╔═══════════╦════════════════════╗<br/>║   house   ║       Weather      ║<br/>╠═══════════╬════════════════════╣<br/>║    X1     ║        40 ˚F       ║<br/>║    X2     ║        40 ˚F       ║<br/>║    X3     ║        49 ˚F       ║<br/>║    ..     ║         ...        ║<br/>║    ..     ║         ...        ║<br/>║    ..     ║         ...        ║<br/>║   X180    ║        63 ˚F       ║<br/>║   X180    ║        61 ˚F       ║<br/>╚═══════════╩════════════════════╝</span></pre><p id="47ae" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">其中‘X1’是第1天的天气，‘<em class="mb">X180</em>是第<em class="mb">180</em>天。现在，如果你绘制数据，你会看到这样的东西:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ny"><img src="../Images/fd80f13f25fc6cef2ab8005d67a3fee0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MR658ELFLzWBaHKdPYDCUg.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</figcaption></figure><h1 id="137e" class="mr ms iq bd mt mu mv mw mx my mz na nb kf nc kg nd ki ne kj nf kl ng km nh ni bi translated">现在，算法是什么？</h1><p id="af62" class="pw-post-body-paragraph lf lg iq lh b li nj ka lk ll nk kd ln lo nl lq lr ls nm lu lv lw nn ly lz ma ij bi translated">公式为:<strong class="lh ja">Vt =(σ)* Vt-1+(1—σ)* t</strong></p><p id="c421" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">其中:</p><ul class=""><li id="e61d" class="nz oa iq lh b li lj ll lm lo ob ls oc lw od ma oe of og oh bi translated">“t”是当天的温度。</li><li id="84ab" class="nz oa iq lh b li oi ll oj lo ok ls ol lw om ma oe of og oh bi translated">“Vt-1”是前一天的温度。</li><li id="7042" class="nz oa iq lh b li oi ll oj lo ok ls ol lw om ma oe of og oh bi translated">“和”是一个变量。它改变了图表的外观。</li></ul><blockquote class="mc"><p id="52b3" class="md me iq bd mf mg on oo op oq or ma dk translated">的值越大，曲线越平滑。如果小于，曲线会有噪声。</p></blockquote><figure class="ot ou ov ow ox kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi os"><img src="../Images/f2eabf09ccf880c5f806c89f04a0d24a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O30YzKGEeS1QfdNr3r8x0Q.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</figcaption></figure><p id="1d5e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这里，这些行是:</p><ul class=""><li id="b6fb" class="nz oa iq lh b li lj ll lm lo ob ls oc lw od ma oe of og oh bi translated"><strong class="lh ja"> <em class="mb">绿色</em> </strong> : 0.98</li><li id="4919" class="nz oa iq lh b li oi ll oj lo ok ls ol lw om ma oe of og oh bi translated"><strong class="lh ja"> <em class="mb">红色</em> </strong> : 0.9</li><li id="fa72" class="nz oa iq lh b li oi ll oj lo ok ls ol lw om ma oe of og oh bi translated"><strong class="lh ja"> <em class="mb">黄色</em> </strong> : 0.5</li></ul><p id="b27d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">或者如果:</p><ul class=""><li id="4f05" class="nz oa iq lh b li lj ll lm lo ob ls oc lw od ma oe of og oh bi translated">∧≈1:<em class="mb">绿色</em>线。</li><li id="d8a6" class="nz oa iq lh b li oi ll oj lo ok ls ol lw om ma oe of og oh bi translated">ß != 1或0: <em class="mb">红色</em>线。</li><li id="d434" class="nz oa iq lh b li oi ll oj lo ok ls ol lw om ma oe of og oh bi translated">∧≈0:<em class="mb">黄色</em>线。</li></ul><p id="cd38" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">其中“≈≈”表示“<em class="mb">接近</em>”。</p><p id="2990" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们得到的是一个<em class="mb">指数</em> <em class="mb">递减的</em>值。大约所有的Vt加起来等于1。因此，我们可以说<em class="mb"> V100 </em>将是第100天之前V的所有值 之和的<em class="mb"> </em>乘以<strong class="lh ja"> <em class="mb">。</em></strong></p><h1 id="eea4" class="mr ms iq bd mt mu mv mw mx my mz na nb kf nc kg nd ki ne kj nf kl ng km nh ni bi translated">实现算法</h1><pre class="kp kq kr ks gt no np nq nr aw ns bi"><span id="238d" class="nt ms iq np b gy nu nv l nw nx"># Pseudo Code</span><span id="4728" class="nt ms iq np b gy oy nv l nw nx">Vø = 0</span><span id="8c74" class="nt ms iq np b gy oy nv l nw nx">For loop {<br/>Get next øt<br/>Vø = ß * Vø + (1 - ß) * øt<br/>}</span></pre><p id="a3f3" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">就是这样！没错，使用这个算法的<em class="mb">最大的</em> <strong class="lh ja"> <em class="mb"> pro </em> </strong>就是它使用<em class="mb">极少的内存</em>。我们只是初始化<em class="mb">v9</em>，然后我们继续<strong class="lh ja"> <em class="mb">更新</em> </strong>它。</p><blockquote class="mc"><p id="ae3f" class="md me iq bd mf mg mh mi mj mk ml ma dk translated">如果你想计算许多值的平均值，这是很有用的，因为它占用的空间很少。</p></blockquote><h1 id="19ee" class="mr ms iq bd mt mu mv mw mx my mz na nb kf oz kg nd ki pa kj nf kl pb km nh ni bi translated">什么是偏差修正？</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/94dd124e048e24d5807f07d96ea155a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*nZfD4uILUaOQ8O9iZOup9Q.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">作者配图。</figcaption></figure><p id="390f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><em class="mb">绿线</em>是我们想要的，但是<em class="mb">紫线</em>是我们使用等式得到的。</p><p id="fb3a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">发生的情况是，因为我们<em class="mb">初始化</em><em class="mb"/>到<em class="mb">零</em>，在几个第一项中，因此，图形开始<strong class="lh ja"> <em class="mb">相当低</em> </strong>并且<strong class="lh ja">不是我们期望的</strong>。</p><p id="bd5c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">所以，为了让<em class="mb">处理</em>这个问题，我们没有使用<em class="mb">v</em>，而是使用<strong class="lh ja">Vt/(1—t)</strong>，这样<em class="mb">基本上解决了</em>的问题。此外，当<em class="mb"> t </em>足够大<em class="mb">时</em>，几乎不需要校正，因此这就是等式所示。</p></div><div class="ab cl pd pe hu pf" role="separator"><span class="pg bw bk ph pi pj"/><span class="pg bw bk ph pi pj"/><span class="pg bw bk ph pi"/></div><div class="ij ik il im in"><p id="abbc" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">希望这篇文章对你有帮助！让我们在<a class="ae le" href="https://www.linkedin.com/in/d3ni/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>上连线。</p><h1 id="c8fe" class="mr ms iq bd mt mu mv mw mx my mz na nb kf nc kg nd ki ne kj nf kl ng km nh ni bi translated">进一步阅读</h1><div class="pk pl gp gr pm pn"><a href="https://medium.com/swlh/training-taking-too-long-use-mini-batch-gradient-descent-a101846afe47" rel="noopener follow" target="_blank"><div class="po ab fo"><div class="pp ab pq cl cj pr"><h2 class="bd ja gy z fp ps fr fs pt fu fw iz bi translated">训练时间太长？使用小批量梯度下降</h2><div class="pu l"><h3 class="bd b gy z fp ps fr fs pt fu fw dk translated">使用这种优化来加快你的训练！</h3></div><div class="pv l"><p class="bd b dl z fp ps fr fs pt fu fw dk translated">medium.com</p></div></div><div class="pw l"><div class="px l py pz qa pw qb ky pn"/></div></div></a></div><div class="pk pl gp gr pm pn"><a href="https://medium.com/datadriveninvestor/model-overfitting-use-dropout-a32010f0afd0" rel="noopener follow" target="_blank"><div class="po ab fo"><div class="pp ab pq cl cj pr"><h2 class="bd ja gy z fp ps fr fs pt fu fw iz bi translated">模型过度拟合？使用辍学！</h2><div class="pu l"><h3 class="bd b gy z fp ps fr fs pt fu fw dk translated">最好的正规化技术。</h3></div><div class="pv l"><p class="bd b dl z fp ps fr fs pt fu fw dk translated">medium.com</p></div></div><div class="pw l"><div class="qc l py pz qa pw qb ky pn"/></div></div></a></div><div class="pk pl gp gr pm pn"><a href="https://medium.com/@D3nii/tackling-common-neural-network-problems-e08b30775100" rel="noopener follow" target="_blank"><div class="po ab fo"><div class="pp ab pq cl cj pr"><h2 class="bd ja gy z fp ps fr fs pt fu fw iz bi translated">解决常见的神经网络问题</h2><div class="pu l"><h3 class="bd b gy z fp ps fr fs pt fu fw dk translated">大家好！这是我开始攻读纳米学位并成功完成第一个学位后的第四篇文章</h3></div><div class="pv l"><p class="bd b dl z fp ps fr fs pt fu fw dk translated">medium.com</p></div></div><div class="pw l"><div class="qd l py pz qa pw qb ky pn"/></div></div></a></div></div><div class="ab cl pd pe hu pf" role="separator"><span class="pg bw bk ph pi pj"/><span class="pg bw bk ph pi pj"/><span class="pg bw bk ph pi"/></div><div class="ij ik il im in"><h1 id="9ad7" class="mr ms iq bd mt mu qe mw mx my qf na nb kf qg kg nd ki qh kj nf kl qi km nh ni bi translated">联系人</h1><p id="c4be" class="pw-post-body-paragraph lf lg iq lh b li nj ka lk ll nk kd ln lo nl lq lr ls nm lu lv lw nn ly lz ma ij bi translated">如果你想了解我最新的文章和项目<a class="ae le" href="/@D3nii" rel="noopener ugc nofollow" target="_blank">，请在Medium </a>上关注我。以下是我的一些联系人详细信息:</p><ul class=""><li id="466a" class="nz oa iq lh b li lj ll lm lo ob ls oc lw od ma oe of og oh bi translated"><a class="ae le" href="https://www.linkedin.com/in/d3ni/" rel="noopener ugc nofollow" target="_blank">领英</a></li><li id="1864" class="nz oa iq lh b li oi ll oj lo ok ls ol lw om ma oe of og oh bi translated"><a class="ae le" href="https://github.com/D3nii?tab=repositories" rel="noopener ugc nofollow" target="_blank"> GitHub </a></li><li id="1aac" class="nz oa iq lh b li oi ll oj lo ok ls ol lw om ma oe of og oh bi translated"><a class="ae le" href="https://twitter.com/danyal0_o" rel="noopener ugc nofollow" target="_blank">推特</a></li></ul><blockquote class="mc"><p id="9c3a" class="md me iq bd mf mg on oo op oq or ma dk translated"><em class="qj">快乐学习。:)</em></p></blockquote></div></div>    
</body>
</html>