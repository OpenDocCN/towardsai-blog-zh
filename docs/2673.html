<html>
<head>
<title>Time Series Data Visualization In Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的时间序列数据可视化</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/time-series-data-visualization-in-python-2b1959726312?source=collection_archive---------0-----------------------#2022-04-09">https://pub.towardsai.net/time-series-data-visualization-in-python-2b1959726312?source=collection_archive---------0-----------------------#2022-04-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c8de" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Python时序数据可视化实用指南</h2></div><p id="86c4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi le translated">ime系列数据是行业中最常见的数据类型之一，在您的职业生涯中可能会用到它。因此，了解如何使用它以及如何应用分析和预测技术对于每个有抱负的数据科学家来说至关重要。在这一系列文章中，我将介绍处理时间序列数据的基本技术，从数据操作、分析和可视化开始，以了解您的数据并为其做准备，然后使用统计、机器学习和深度学习技术进行预测和分类。这更像是一个实践指南，我将把每个讨论和解释的概念应用到真实数据中。</p><p id="02e3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个系列将由10篇文章组成:</p><ol class=""><li id="66e7" class="ln lo it kk b kl km ko kp kr lp kv lq kz lr ld ls lt lu lv bi translated"><a class="ae lw" rel="noopener ugc nofollow" target="_blank" href="/manipulating-time-series-data-in-python-49aed42685a0">在Python Pandas中操作时间序列数据【实用指南】</a></li><li id="beec" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated"><a class="ae lw" rel="noopener ugc nofollow" target="_blank" href="/time-series-data-analysis-in-python-1492ee4ca974">Python Pandas中的时间序列分析【实用指南】</a></li><li id="afcc" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated"><a class="ae lw" href="https://medium.com/towards-artificial-intelligence/time-series-data-visualization-in-python-2b1959726312" rel="noopener">用Python可视化时间序列数据【实用指南】</a>(你在这里)</li><li id="2e61" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated"><a class="ae lw" rel="noopener ugc nofollow" target="_blank" href="/time-series-forecasting-with-arima-models-in-python-part-1-c2940a7dbc48">利用Python中的ARIMA模型进行时间序列预测【第一部分】</a></li><li id="0773" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated"><a class="ae lw" rel="noopener ugc nofollow" target="_blank" href="/time-series-forecasting-with-arima-models-in-python-part-2-91a30d10efb0">利用Python中的ARIMA模型进行时间序列预测【第二部分】</a></li><li id="ec90" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated"><a class="ae lw" rel="noopener ugc nofollow" target="_blank" href="/machine-learning-for-time-series-data-in-python-regression-5e19fa2e7471">时间序列数据的机器学习【回归】</a></li><li id="42d4" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated">时间序列数据的机器学习[分类](即将推出)</li><li id="0f4e" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated">时间序列数据的深度学习[实用指南](即将推出)</li><li id="3ae5" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated">使用统计分析、机器学习和深度学习的时间序列预测项目(即将推出)</li><li id="6f74" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated">使用统计分析、机器学习和深度学习进行时间序列分类(即将推出)</li></ol><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mc"><img src="../Images/f44356d8609cde34ea4f074246058c31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xuF48n5X5n7fEdQI"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">时序可视化/照片由<a class="ae lw" href="https://unsplash.com/@kmuza?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Carlos Muza </a>在<a class="ae lw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="4d94" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">目录:</h1><ol class=""><li id="74b1" class="ln lo it kk b kl nk ko nl kr nm kv nn kz no ld ls lt lu lv bi translated">线形图</li><li id="954e" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated">汇总统计和诊断</li><li id="7413" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated">季节性、趋势和噪音</li><li id="1702" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated">可视化多个时间序列</li><li id="c96f" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld ls lt lu lv bi translated">案例研究:失业率</li></ol><p id="4e47" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">本文使用的所有代码和数据集都可以在这个</strong> <a class="ae lw" href="https://github.com/youssefHosni/Time-Series-Analysis/tree/main/Time%20Series%20Data%20Visualization" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">资源库</strong> </a> <strong class="kk iu">中找到。</strong></p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><p id="434f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">如果你想免费学习数据科学和机器学习，看看这些资源:</strong></p><ul class=""><li id="95b4" class="ln lo it kk b kl km ko kp kr lp kv lq kz lr ld nw lt lu lv bi translated">免费互动路线图，自学数据科学和机器学习。从这里开始:<a class="ae lw" href="https://aigents.co/learn/roadmaps/intro" rel="noopener ugc nofollow" target="_blank">https://aigents.co/learn/roadmaps/intro</a></li><li id="5042" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld nw lt lu lv bi translated">数据科学学习资源搜索引擎(免费)。将你最喜欢的资源加入书签，将文章标记为完整，并添加学习笔记。<a class="ae lw" href="https://aigents.co/learn" rel="noopener ugc nofollow" target="_blank">https://aigents.co/learn</a></li><li id="3ffe" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld nw lt lu lv bi translated">想要在导师和学习社区的支持下从头开始学习数据科学吗？免费加入这个学习圈:<a class="ae lw" href="https://community.aigents.co/spaces/9010170/" rel="noopener ugc nofollow" target="_blank">https://community.aigents.co/spaces/9010170/</a></li></ul><p id="67f3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想在数据科学&amp;人工智能领域开始职业生涯，但你不知道如何开始。我提供数据科学指导课程和长期职业指导:</p><ul class=""><li id="b415" class="ln lo it kk b kl km ko kp kr lp kv lq kz lr ld nw lt lu lv bi translated">长期指导:<a class="ae lw" href="https://lnkd.in/dtdUYBrM" rel="noopener ugc nofollow" target="_blank">https://lnkd.in/dtdUYBrM</a></li><li id="bbcb" class="ln lo it kk b kl lx ko ly kr lz kv ma kz mb ld nw lt lu lv bi translated">辅导会议:<a class="ae lw" href="https://lnkd.in/dXeg3KPW" rel="noopener ugc nofollow" target="_blank">https://lnkd.in/dXeg3KPW</a></li></ul><p id="c998" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="nx">加入</em> </strong> <a class="ae lw" href="https://youssefraafat57.medium.com/membership" rel="noopener"> <strong class="kk iu"> <em class="nx">中等会员</em> </strong> </a> <strong class="kk iu"> <em class="nx">计划，只需5美元，继续无限制学习。如果你使用下面的链接，我会收到一小部分会员费，不需要你额外付费。</em> </strong></p><div class="ny nz gp gr oa ob"><a href="https://youssefraafat57.medium.com/membership" rel="noopener follow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd iu gy z fp og fr fs oh fu fw is bi translated">加入我的介绍链接媒体-优素福胡斯尼</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">阅读Youssef Hosni(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">youssefraafat57.medium.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op mm ob"/></div></div></a></div></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="c8cf" class="ms mt it bd mu mv oq mx my mz or nb nc jz os ka ne kc ot kd ng kf ou kg ni nj bi translated">1.线形图</h1><p id="7f78" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在本节中，我们将学习如何利用Python中的基本绘图工具，以及如何注释和个性化您的时间序列图。</p><h2 id="0da7" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">1.1.创建时间序列折线图</h2><p id="9e3c" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">首先，我们将上传发现数据集，并使用。<strong class="kk iu"> read_csv </strong>然后剧情在用<strong class="kk iu">。绘制</strong>的方法如下面的代码所示:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/057d165de098b9fdbfb063822d99a856.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*XqBdXVntCUs41PPwz6SIKA.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">从1860年到1959年的伟大发明和科学发现。</figcaption></figure><p id="1c83" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">matplotlib 图的默认样式不一定是您喜欢的样式，但是可以改变。因为定制每个绘图或创建自己的模板会很耗时，所以提供了几个matplotlib样式的模板供使用。这些可以通过使用<strong class="kk iu"> plt.style </strong>命令调用，并自动将预先指定的字体、线条、点、背景颜色等的默认值添加到你的绘图中。在这种情况下，我们选择使用著名的<strong class="kk iu"> fivethirtyeight </strong>样式表。要设置这种样式，您可以使用下面的代码:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/896d4f7a88cead89d0c1298cde0986b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*ErmKZh_sSTqS4zHOxmB7PA.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">从1860年到1959年的伟大发明和科学发现使用了<strong class="bd mu">五三八</strong>风格。</figcaption></figure><p id="055c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要查看所有可用的样式，请使用以下代码:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi po"><img src="../Images/dc59c75e30ac73aa340241985d622169.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fwsCp09eakFGO5DS789GAg.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated"><strong class="bd mu"> matplotlib </strong>图的可用样式。</figcaption></figure><p id="51ac" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您还可以使用color参数更改绘图的颜色，如下面的代码所示:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/215f918f231ecec6b10cf1cbea37e22e.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*jbHwa0dcZam2WL1vWqHorQ.png"/></div></figure><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/7c82587dd250e12e688abf8d22c139a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*LpFlUOfRaqE_FwgpwZVIyw.png"/></div></figure><p id="222a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为你的情节应该总是讲述一个故事并传达相关信息。因此，用轴标签和图例仔细注释每个图是至关重要的。<strong class="kk iu">。pandas中的plot() </strong>方法返回一个matplotlib AxesSubplot对象，通常的做法是将这个返回的对象赋给一个名为ax的变量。这样做还允许您在绘图中包含附加的符号和规范，如轴标签和标题。特别是，您可以使用<strong class="kk iu">。set_xlabel() </strong>，<strong class="kk iu">。set_ylabel() </strong>和<strong class="kk iu">。set_title() </strong>方法指定x轴和y轴标签，以及绘图的标题。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pq"><img src="../Images/b46082ba61ded955bc6bb0449dd5435c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5JkQbpYeSzA0Rpo_VaDyXw.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">从1860年到1959年的伟大发明和科学发现使用了<strong class="bd mu">fivethirtyeeight</strong>风格，并增加了标题、x标签和y标签。</figcaption></figure><h2 id="2ded" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">1.2.自定义您的时间序列图</h2><p id="7ada" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">图表很棒，因为它们能让用户理解数据。但是，有时您可能想要突出特定的事件，或者通过您的思路引导用户。</p><p id="101d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了绘制数据的子集，并且pandas数据帧的数据索引由日期组成，您可以使用表示您感兴趣的时间段的字符串来分割数据。如下例所示:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi pr"><img src="../Images/e90d0e77dcfda3bbfafc1ce89e40b70f.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*B0Hepku2tippN5nmPUnbSA.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">从1860年到1870年的伟大发明和科学发现。</figcaption></figure><p id="93e2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">附加注释也有助于强调时间序列中的特定观察或事件。这可以用<strong class="kk iu"> matplotlib </strong>通过使用<strong class="kk iu"> axvline </strong>和<strong class="kk iu">axv line</strong>方法来实现。如下例所示，使用<strong class="kk iu"> axvline </strong>和<strong class="kk iu">axv line</strong>方法绘制垂直线和水平线。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi ps"><img src="../Images/326d42bdd4a8d98817d19a389f20034a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kAhxGJfUXzmTGdLQ6c8TiA.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">从1860年到1950年的伟大发明和科学发现，垂直线在1920年，水平线在4。</figcaption></figure><p id="6239" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">除了注释之外，您还可以突出显示时间序列图中感兴趣的区域。这有助于围绕您的数据提供更多的上下文，并真正强调您试图用图表传达的故事。为了给绘图的特定区域添加阴影部分，可以使用<strong class="kk iu"> matplolib </strong>中的<strong class="kk iu"> axvspan </strong>和<strong class="kk iu"> axhspan </strong>方法分别产生垂直区域和水平区域。下面的代码显示了这样一个例子:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pt"><img src="../Images/3387499949d5a6636d7e363d4be89ee0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ffwbPwWqLjU2p79pB1jZhw.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">从1860年到1950年的伟大发明和科学发现，从1890年到1910年垂直突出显示区域，从6到8线突出显示水平区域。</figcaption></figure></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="b257" class="ms mt it bd mu mv oq mx my mz or nb nc jz os ka ne kc ot kd ng kf ou kg ni nj bi translated">2.汇总统计和诊断</h1><p id="2722" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在本节中，我们将解释如何通过计算汇总统计数据和绘制数据的聚合视图来更深入地了解时间序列数据。</p><p id="e2d2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本节中，我们将使用一个新的数据集，它在时序社区中很有名。该时间序列数据集包含夏威夷莫纳罗亚天文台1958年至2001年间的CO2测量值。数据集可以从<a class="ae lw" href="https://github.com/youssefHosni/Time-Series-With-Python/tree/main/Time%20Series%20Data%20Visualization" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">这里</strong> </a>下载。</p><h2 id="8f4c" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">2.1.清理您的时间序列数据</h2><p id="85fd" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在现实生活中，数据经常以混乱和/或嘈杂的格式出现。数据中的“噪声”可能包括异常值、格式错误的数据点和缺失值等。为了能够对您的数据进行充分的分析，仔细处理和清理您的数据非常重要。虽然这看起来会减慢您最初的分析，但是这项投资对于未来的发展是至关重要的，并且可以真正帮助加快您的调查分析。</p><p id="6247" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">实现这一目标的第一步是检查数据中是否有缺失值。在pandas中，数据帧中缺失的值可以用<strong class="kk iu">找到。isnull() </strong>方法。相反，使用<strong class="kk iu">可以找到具有非空值的行。notnull() </strong>方法。在这两种情况下，这些方法都返回非缺失值和缺失值所在的True/False值。</p><p id="9605" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您想知道有多少行包含缺失值，您可以组合<strong class="kk iu">。isnull() </strong>方法同<strong class="kk iu">。sum() </strong>计算df数据帧每一列中缺失值总数的方法。这是因为<strong class="kk iu"> df.isnull() </strong>如果行值为空，则返回值True，而dot sum()返回缺失行的总数。这是通过下面的代码完成的:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><p id="c8b5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">缺失值的数量是59行。要替换数据中缺失的值，我们可以使用不同的选项，如平均值、前一时间点的值或后一时间点的值。为了替换时间序列数据中缺失的值，您可以使用<strong class="kk iu">。fillna() </strong>法熊猫。注意方法参数是很重要的，它指定了我们希望如何处理丢失的数据。使用方法<strong class="kk iu">b填充</strong>(即回填)将确保缺失值被下一个有效的观测值替换。另一方面，ffill(即向前填充)将用最近的非缺失值替换缺失值。这里，我们将使用<strong class="kk iu">b填充</strong>方法。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><h2 id="ab8d" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">2.2.绘制数据的聚合图</h2><p id="363d" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">移动平均，也称为滚动平均，是时间序列分析领域中常用的技术。它可以用来消除短期波动，消除异常值，并突出长期趋势或周期。取时间序列的滚动平均值相当于“平滑”时间序列数据。在熊猫中，<strong class="kk iu">。rolling() </strong>方法允许您指定在计算您的指标时要使用的数据点的数量。</p><p id="05cd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里，您指定一个52点的滑动窗口，并在窗口沿日期轴移动时计算这52点的平均值。计算移动平均线时使用的点数取决于应用，这些参数通常通过反复试验或根据某些季节性来设置。例如，您可以采用每日数据的移动平均值，并指定窗口为7，以获得每周移动平均值。在我们的例子中，我们使用的是周数据，因此我们指定了一个52的窗口(因为一年有52周)来获取年度滚动平均值。使用以下代码将窗口52的滚动平均值应用于数据:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pu"><img src="../Images/f5dc28d10efd120e45f696916dc2ff24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ed-Jjc5njT9PmEfr3M2oGw.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">二氧化碳水平时间序列的52周滚动平均值。</figcaption></figure><p id="505b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一种可视化时间序列数据的有用技术是对数据中的值进行聚合。例如，co2_levels数据包含每周数据，但是您可能希望查看这些值在一年中的各个月份的表现。因为您已经将co2_levels数据帧的索引设置为日期时间类型，所以可以直接提取索引中每个日期的日、月或年。例如，您可以使用命令co2_levels <strong class="kk iu">提取月份。索引</strong> <strong class="kk iu">。月份</strong>。类似地，您可以使用命令co2_levels <strong class="kk iu">提取年份。索引。年份</strong>。</p><p id="3c33" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">聚合时间序列中的值有助于回答诸如“我们的时间序列在周日的平均值是多少”或“我们的时间序列在一年中每个月的平均值是多少”之类的问题。如果您的pandas数据帧的索引由DateTime类型组成，那么您可以提取索引并按这些值对数据进行分组。在这里，您使用了<strong class="kk iu">。groupby() </strong>和<strong class="kk iu">。mean() </strong>计算二氧化碳水平数据的月平均值和年平均值的方法，并将其分配给一个名为co2_levels_by_month和co2_levels_by_year的新变量。<strong class="kk iu">。groupby() </strong>方法允许您根据一组定义的类别将记录分组到桶中。在这种情况下，类别是一年中不同的月份和每年。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pv"><img src="../Images/1aa09c0923fc4d94aef9dc5883cc3e9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aTEbkAwg6faAcNNMWb9Y2w.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">二氧化碳水平时间序列的每月汇总。</figcaption></figure><p id="25e4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们绘制<strong class="kk iu"> co2_levels_by_month </strong>时，我们看到co2水平的月平均值在一年的第5至第7个月达到峰值。这与夏季我们看到阳光和环境中二氧化碳排放增加的事实是一致的。我非常喜欢这个例子，因为它展示了绘制时间序列数据聚合值的能力。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pv"><img src="../Images/6e7f43af7bafa79b22b9822131ed891e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J8dNiyurBUx9r0tphimjug.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">二氧化碳水平时间序列的年度汇总。</figcaption></figure><p id="d46a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们按年绘制二氧化碳水平图时，我们可以看到二氧化碳水平每年都在增加，这是意料之中的。</p><h2 id="3180" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">2.3.汇总数据集中的值</h2><p id="114a" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">理解数据的一个重要步骤是创建您正在处理的时间序列的汇总统计图。这样做将允许您共享和讨论数据的统计属性，从而进一步支持您生成的图和您想要传达的任何假设。有三种基本的图表来显示数据的汇总统计数据，即箱线图、直方图和密度图。</p><p id="d254" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">箱线图提供了关于数据的形状、可变性和中位数的信息。这对于显示数据范围和识别任何潜在的异常值特别有用。</p><p id="19fe" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从方框平行延伸的线通常被称为“胡须”，用于表示上四分位数(即75%百分位数)和下四分位数(即25%百分位数)之外的可变性，即异常值。这些异常值通常被绘制成与须状物一致的单个点。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pu"><img src="../Images/536fe36832ae78a80a3fe1461a09fb25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n67-_EbGjW9vP09X4kXeXg.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">二氧化碳水平数据的箱线图。</figcaption></figure><p id="8157" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">直方图是一种绘图类型，允许您检查数据的基本分布。它可视化了数据中每个值出现的频率。这些有时可能比箱线图更有用，因为团队中的非技术成员通常更熟悉直方图，因此更有可能快速理解您正在探索或向他们展示的数据的形状。</p><p id="79e7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在熊猫中，简单地使用标准<strong class="kk iu">就可以产生直方图。plot() </strong>方法，并将种类参数指定为<strong class="kk iu"> hist </strong>。此外，您可以指定bin参数，该参数决定了您应该将数据分割成多少个区间。关于<strong class="kk iu"> bin </strong>参数，没有硬性规定可以找到它的最优值，往往需要通过反复试验才能找到。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pt"><img src="../Images/3abee80c0c8edfbb3e2c9aa27a175d29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0ZiyqOwbGbeePGgFCuxwbg.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">二氧化碳水平数据的直方图。</figcaption></figure><p id="6676" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于确定最佳的条柱数量可能会令人困惑，因此直方图可能是评估数据分布的一种麻烦方法。相反，您可以依靠内核密度图来查看数据的分布。核密度图是直方图的变体。它们使用核平滑来绘制数据的值，并通过抑制噪声和异常值的影响来实现更平滑的分布，同时显示大量数据的位置。用panda的库生成密度图很简单，因为你只需要使用标准。plot()方法，同时将种类参数指定为<strong class="kk iu">密度</strong>。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pw"><img src="../Images/22c08a90f207ac119cb2958bee92d4bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QX-GaNaTzsF2KgCQOIJ0IQ.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">二氧化碳水平数据的密度图。</figcaption></figure></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="6cb7" class="ms mt it bd mu mv oq mx my mz or nb nc jz os ka ne kc ot kd ng kf ou kg ni nj bi translated">3.季节性、趋势和噪音</h1><p id="6651" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在本节中，我们将通过学习自相关和偏自相关图来超越汇总统计。您还将学习如何自动检测时间序列数据中的季节性、趋势和噪声。自相关和偏自相关在本系列的<strong class="kk iu">上一篇文章</strong>中有更详细的介绍。</p><h2 id="5e07" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">3.1.自相关和偏自相关</h2><p id="41f7" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated"><strong class="kk iu">自相关</strong>是你的时间序列和它自身的延迟副本之间的相关性的度量。例如，3阶自相关返回时间序列在t(1)、t(2)、t(3)点与其自身滞后3个时间点(即t(4)、t(5)、t(6)的值之间的相关性。自相关用于发现时间序列数据中的重复模式或周期性信号。自相关原理可以应用于任何信号，而不仅仅是时间序列。因此，在其他领域遇到同样的原理是很常见的，有时也被称为自协方差。</p><p id="0a66" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在下面的例子中，我们将使用<strong class="kk iu"> statsmodels </strong>库中的<strong class="kk iu"> plot_acf </strong>函数绘制co2水平时间序列的自相关图。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi px"><img src="../Images/e9472d2442c9a1e282fca6cdd0045cca.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*C_X2s0Z0v2qF9TkSmCRhjw.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">二氧化碳水平时间序列的自相关。</figcaption></figure><p id="c392" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为自相关是一种相关性度量，所以自相关系数只能取-1和1之间的值。自相关为0表示无相关性，而1和-1表示强负相关和正相关。为了帮助您评估自相关值的重要性，<strong class="kk iu">。plot_acf() </strong>函数还计算并返回不确定性的边界，在图形中以蓝色阴影区域表示。高于这些区域的值可以被解释为与自身的滞后版本具有统计显著关系的时间序列。</p><p id="d403" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">除了自相关之外，偏相关度量时间序列与其滞后版本之间的相关系数。然而，<strong class="kk iu">它也通过移除先前时间点</strong>的影响来扩展这个想法。例如，3阶偏相关函数返回时间序列在t(1)、t(2)、t(3)点的相关性，以及它自身在3个时间点t(4)、t(5)、t(6)的滞后值，但只是在去除了所有可归因于滞后1和2的影响之后。</p><p id="9b02" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就像自相关一样，我们需要使用statsmodels库来计算和绘制时间序列中的部分自相关。这个例子使用了<strong class="kk iu">。plot_pacf() </strong>函数计算并绘制co2水平时间序列前40个滞后的部分自相关。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi px"><img src="../Images/9a33bde1eb434fa5ba81331236b13f88.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*ylLYmRR4e8fYFAq7SNnJxg.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">二氧化碳水平时间序列的部分自相关。</figcaption></figure><p id="92ed" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果偏相关值接近0，您可以得出结论，这些值彼此不相关。相反，值接近1或-1的部分自相关表明时间序列的滞后观测值之间存在很强的正相关或负相关。如果偏自相关值超出不确定性的界限(由蓝色阴影区域标记),则可以假设观察到的偏自相关值在统计上是显著的。</p><h2 id="d10e" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">3.2.时间序列数据中的季节性、趋势和噪声</h2><p id="42ae" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在查看时间序列数据时，您可能已经注意到了它们展示的一些清晰模式。正如您在下图所示的co2水平时间序列中所看到的，数据显示出明显的上升趋势以及周期性信号。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi py"><img src="../Images/5d41c8768103c760b36c6b421be232cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4y0ecGaOVUfSlM2zCS9zpQ.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">二氧化碳水平时间序列显示上升趋势。</figcaption></figure><p id="9ade" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一般来说，大多数时间序列可以分解成三个主要部分。第一个是<strong class="kk iu">季节性</strong>，描述你的时间序列中的周期信号。第二个组件是<strong class="kk iu">趋势</strong>，它描述了时间序列是随时间减少、保持不变还是增加。最后，第三个成分是<strong class="kk iu">噪声</strong>，它描述了你的时间序列无法解释的方差和波动性。让我们来看一些例子，以便更好地理解这三个组件。</p><p id="6c16" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了分解你的时间信号，我们还将使用<strong class="kk iu"> statsmodel </strong>库的<strong class="kk iu"> tsa </strong>子模块。<strong class="kk iu"> sm.tsa.dot季节性分解()</strong>函数可用于应用现成的时间序列分解。让我们将它应用于二氧化碳水平数据。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pz"><img src="../Images/34fe535f50f9b7552d5eae3c19dd0708.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qQqKMjAFRw_S8wbtb-JQZQ.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">二氧化碳水平数据的组成部分。</figcaption></figure><p id="cbbf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">提取每个单独的组件并绘制它们是很容易的。正如您在这里看到的，您可以使用<strong class="kk iu"> dir() </strong>命令打印与之前生成的分解变量相关联的属性，并使用<strong class="kk iu"> decomposition.seasonal </strong>命令打印季节性组件。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qa"><img src="../Images/39751f25599b59bbf498efcefee9b47e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qwBl6OEJzV6O6Tf1cxCL5Q.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">co2水平时间序列的季节性成分。</figcaption></figure><p id="6977" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当时间序列受季节性因素影响时，就存在季节性模式。季节性应该总是一个固定的、已知的时期。例如，一天中的温度应该显示出明显的每日季节性，因为白天总是比晚上暖和。或者，它也可以显示每月的季节性，因为夏天总是比冬天暖和。</p><p id="1733" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们重复同样的练习，但是这次提取时间序列分解的趋势值。趋势部分反映了时间序列的整体进展，可以使用分解<strong class="kk iu">提取。趋势</strong>命令。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qb"><img src="../Images/11cea7cab813ed3e948c8f0ea3ac0ad7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yjOOQTmHBTAU4nJoFSeo6g.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">二氧化碳水平时间序列的趋势成分。</figcaption></figure><p id="f1dd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，您还可以提取噪声，或时间序列的剩余部分，如下所示。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qa"><img src="../Images/261980cad55c1b6260412aa8a17a4005.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kLUyUCI8GmvOJEihBL4WLQ.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">二氧化碳水平时间序列的剩余成分。</figcaption></figure><p id="9e44" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">残差部分描述了随机的、不规则的影响，这些影响既不能归因于趋势，也不能归因于季节性。</p><h2 id="b4a1" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">3.3.分析航空公司数据</h2><p id="6d30" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">您将通过著名的<a class="ae lw" href="https://github.com/youssefHosni/Time-Series-With-Python/tree/main/Time%20Series%20Data%20Visualization" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">航空公司数据集</strong> </a>磨练您的技能，该数据集由1949年1月至1960年12月的航空公司乘客月度总数组成。它包含144个数据点，通常用作时间序列分析的标准数据集。<strong class="kk iu">处理这类数据会让你为处理现实世界中可能遇到的任何数据做好准备！</strong></p><p id="4116" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们首先加载数据，并用下面的代码绘制每月航空乘客的数量:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi ps"><img src="../Images/8004bce7b3ae88e270b2b7c7131385bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M50uSuDtAWgLsKs3dK8H2A.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">每月航空乘客的数量。</figcaption></figure><p id="1c6a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们将通过打印数据摘要和缺失值的数量来绘制时间序列摘要，然后绘制时间序列数据的箱线图。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi qc"><img src="../Images/4dac94ed4011ade879abfbe61e6874e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:470/format:webp/1*rn3WPC379xbKZc3VdKTz-A.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">航空旅客时间序列综述。</figcaption></figure><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi py"><img src="../Images/198072abfac62d525586c33bc02143ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pvTo8Vqdf3PnfaN_gJVzLQ.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">航空乘客时间序列的箱线图。</figcaption></figure><p id="d52e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从箱线图中，我们可以得到以下信息。每月航空乘客的最大值为600多人，最小值为100人左右。数据中没有异常值。数据的中位数约为270，第75百分位约为360，第25百分位约为180。</p><p id="62c5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们创建并绘制航空公司乘客数据的月度汇总。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi py"><img src="../Images/c21282414e10e735927fada694fd03ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LsOENoXBt5t5ljYuMYQKFw.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">航空公司乘客数据的每月汇总。</figcaption></figure><p id="a250" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显而易见，7月和8月的航空乘客数量有所上升，这是合理的，因为这一时期有假期。</p><p id="189b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，我们将分解时间序列，并在数据中绘制趋势和季节性。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qd"><img src="../Images/ae121a6ddcc5b1af82170a2e3d2ae833.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kdHtTiBAysBba3zzgwi1jg.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">乘客数量时间序列的趋势和季节性。</figcaption></figure><p id="866b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">趋势表明，从1949年到1959年，乘客的数量在增加，这是合理的，因为飞机的数量本身也在增加。数据中也存在季节性，如月度汇总图所示。</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="f99d" class="ms mt it bd mu mv oq mx my mz or nb nc jz os ka ne kc ot kd ng kf ou kg ni nj bi translated">4.可视化多个时间序列。</h1><p id="d01f" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在数据科学领域，参与需要同时研究多个时间序列的项目是很常见的。在本节中，我们将向您展示如何一次绘制多个时间序列，以及如何发现和描述多个时间序列之间的关系。在本节中，我们将使用一个新的数据集，该数据集包含1944年至2012年间美国生产的不同类型的肉类。数据集可以从<a class="ae lw" href="https://github.com/youssefHosni/Time-Series-With-Python/tree/main/Time%20Series%20Data%20Visualization" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">这里</strong> </a>下载。</p><h2 id="e0bf" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">4.1处理多个时间序列</h2><p id="22ef" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在数据科学领域，您经常会遇到包含多个时间序列的数据集。例如，我们可以测量CPU服务器在一段时间内的性能，在另一种情况下，我们可以探索不同公司在一段时间内的股票表现。这些情况引入了许多不同的问题，因此需要额外的分析工具和可视化技术。</p><p id="27fc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">pandas的一个方便之处在于，处理多个时间序列与处理单个时间序列非常相似。就像前面几节一样，您可以快速利用<strong class="kk iu">。plot() </strong>和<strong class="kk iu">。描述()</strong>可视化和生成数据统计摘要的方法。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi qc"><img src="../Images/4dac94ed4011ade879abfbe61e6874e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:470/format:webp/1*rn3WPC379xbKZc3VdKTz-A.png"/></div></figure><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qe"><img src="../Images/2f9795a45f4392102dcfd436aba1d4ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5oEtxLqJWznR0Jom3-xuHQ.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">1944年至2012年间，美国生产了不同类型肉类的体积线图。</figcaption></figure><p id="f453" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">绘制多个时间序列的另一个有趣方法是使用面积图。面积图通常在处理多个时间序列时使用，可以用来表示累计总数。有了熊猫库，你可以简单地利用<strong class="kk iu">。area() </strong>方法如本幻灯片所示产生一个面积图。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qe"><img src="../Images/9b1edf4b72c58e1c141862211a9a3d5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bmI04MFMlvf7p6nsfZ2H8Q.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">4美国在1944年至2012年间生产的不同类型肉类的体积面积图。</figcaption></figure><h2 id="58e8" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">4.2.绘制多个时间序列</h2><p id="dd70" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在绘制多个时间序列时，matplotlib将遍历其默认的颜色方案，直到DataFrame中的所有列都绘制完毕。因此，默认颜色的重复可能会导致难以区分某些时间序列。例如，由于肉类数据集中有七个时间序列，因此一些时间序列被分配相同的蓝色。此外，matplotlib不考虑背景的颜色，这也是一个问题。</p><p id="e2e5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了补救这一点，<strong class="kk iu">。plot() </strong>方法有一个名为colormap的附加参数。此参数允许您分配具有不同对比度和强度的大范围调色板。您可以定义自己的matplotlib色彩映射表，也可以使用与Matplotlib注册的色彩映射表相匹配的字符串。在这个例子中，我们使用<strong class="kk iu">暗2 </strong>调色板。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qf"><img src="../Images/fe73ae73b40b345f11a43dbab80ce85f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3HgipjErLoXxBIzhZ0eEew.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">1944年至2012年间，美国生产的不同种类肉类的体积线图采用了<strong class="bd mu"> Dark2 </strong>调色板。</figcaption></figure><p id="d031" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为演示文稿制作幻灯片或与利益相关者共享图表时，在一个图表上同时显示时间序列图表和数字摘要会更方便您自己和他人。为此，首先绘制数据帧的列，并将matplotlib AxesSubplot对象返回到变量ax。然后，您可以将pandas中的任何表格信息作为数据帧或数据系列传递给ax对象。这里，我们通过使用<strong class="kk iu">获得数据帧的汇总统计数据。describe() </strong>方法，然后用ax dot table命令将此内容作为表格传递。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qg"><img src="../Images/587752e1ee8c48ba3495b121a2d8bfb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GmUP0dpmOaSToGzj4kz24Q.png"/></div></div></figure><p id="a624" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了克服可视化包含不同比例时间序列的数据集的问题，您可以利用subplots参数，它将在不同的subplot上绘制数据帧的每一列。此外，可以使用layout关键字指定子情节的布局，该关键字接受两个整数来指定要使用的行数和列数。确保子情节的总数大于或等于数据帧中时间序列的数量是很重要的。您还可以使用<strong class="kk iu"> sharex </strong>和<strong class="kk iu"> sharey </strong>参数指定每个子图是否应该共享它们的x轴和y轴的值。最后，您需要使用<strong class="kk iu"> figsize </strong>参数指定图的总大小(将包含所有子图)。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qh"><img src="../Images/af296f826242e41b38a1ecf86c779bcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y9uV9TydTEJqLcez1jli-g.png"/></div></div></figure><h2 id="e064" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">4.3.可视化多个时间序列之间的关系</h2><p id="866d" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">评估一组时间序列之间的相似性的最广泛使用的方法之一是使用相关系数。相关系数是用于确定两个变量之间关系的强度或缺乏程度的度量。计算相关系数的标准方法是使用皮尔逊系数，<strong class="kk iu">,当您认为感兴趣的变量之间的关系是线性时，应该使用该系数。</strong>否则，当您感兴趣的变量之间的关系被认为是非线性时，您可以<strong class="kk iu">使用Kendall Tau或Spearman等级系数方法。</strong>在Python中，通过使用<strong class="kk iu"> scipy.stats.stats </strong>模块中的<strong class="kk iu"> pearsonr </strong>、<strong class="kk iu"> spearmanr、</strong>或<strong class="kk iu"> kendalltau </strong>函数，可以快速计算两个变量之间的相关系数。所有这三种相关性度量都返回两个变量x和y之间的相关性和p值。</p><p id="0d59" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想同时调查多个变量之间的相关性，你需要计算一个相关矩阵。结果是一个包含每对变量之间相关系数的表格。相关系数可以取-1到1之间的任何值。相关性为0表示无相关性，而1和-1表示强正相关和负相关。</p><p id="045d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">熊猫图书馆有一个<strong class="kk iu">。corr() </strong>允许您测量数据帧中所有列对之间的相关性的方法。使用肉类数据集，我们选择了牛肉、小牛肉和火鸡列，并调用了<strong class="kk iu">。corr() </strong>通过调用Pearson和spearman方法。结果是相关矩阵，存储为两个新的熊猫数据帧，称为corr_p和corr_s。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi qi"><img src="../Images/b63c2ce974c813a47604fa3ef6c2b9da.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/format:webp/1*AmJEYeI7Q0Cz7kx_7r464Q.png"/></div></figure><p id="ed70" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦将相关矩阵存储在新的数据帧中，可视化它可能会比试图一次解释几个相关系数更容易。为了实现这一点，我们将引入Seaborn库，它将用于生成我们的关联矩阵的热图。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qj"><img src="../Images/ce8009fa00497ae2b55566828be21f55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p0U7DTvaZxeS6LF7rVXw6A.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">肉类数据集相关矩阵的热图。</figcaption></figure><p id="ac7a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">热图是可视化相关矩阵的有用工具，但缺乏顺序会使其难以阅读，甚至难以识别哪组时间序列最相似。因此，建议利用<strong class="kk iu">。seaborn库中的clustermap() </strong>函数，该函数将层次聚类应用于您的关联矩阵，以绘制一个排序的热图，其中相似的时间序列被放置在彼此更靠近的位置。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qk"><img src="../Images/144ac2d68b5e352daf30641b9c464b18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0JUpZAtdpahupbQuTri07w.png"/></div></div></figure></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="4f40" class="ms mt it bd mu mv oq mx my mz or nb nc jz os ka ne kc ot kd ng kf ou kg ni nj bi translated">5.案例研究:失业率</h1><p id="e090" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在这一部分，我们将练习课程中涉及的所有概念。我们将把美国从2000年到2010年的<a class="ae lw" href="https://github.com/youssefHosni/Time-Series-With-Python/tree/main/Time%20Series%20Data%20Visualization" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu"/></a>失业率形象化。就业数据集包含16个行业的时间序列，共122个时间点，每个月一个，持续10年。</p><h2 id="3504" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">5.1.探索数据</h2><p id="ed8f" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">数据探索的第一步是打印汇总统计数据，并使用箱线图绘制数据汇总。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi ql"><img src="../Images/7cd82d1ff1173a1a37730afa0840cf3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gp3SSX1dv0TW2NQeWB2ecw.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">失业数据的箱线图。</figcaption></figure><p id="dc82" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以在一个面图中为每个特征绘制一个线图，如下所示:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qm"><img src="../Images/982d4032ec0c6779e486d5beb93a9586.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VXj9ANgX0i4nqJQjLT8RGQ.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">失业数据集的分面图。</figcaption></figure><p id="1663" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如你所见，2008年金融危机后，美国的失业率飙升。看到所有行业都受到影响，令人印象深刻！由于2008年似乎是美国失业率开始上升的一年，让我们用熟悉的<strong class="kk iu">轴线</strong>符号用垂直线来标注我们的曲线图。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qn"><img src="../Images/4f5dadded4a7f945fb1bd67870b1d04f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*feN9NPWaDW2jbOSkQbKzIw.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">失业数据的折线图</figcaption></figure><p id="4c33" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以计算和绘制每个工作部门的月平均或日平均失业率，如第2节所示。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qo"><img src="../Images/53dae6bd49a0c958bc45288b4ff1b39e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qczCeVgnhGca9KQxi-RoqA.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">每个工作部门的月平均失业率。</figcaption></figure><p id="4f61" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由此产生的情节显示了一些有趣的模式！例如，农业和建筑业的失业率在冬季会出现明显的高峰，这与这些行业在寒冷的月份会不太活跃的观点是一致的！</p><h2 id="7f42" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">5.2.时序数据中的季节性、趋势和噪声</h2><p id="a014" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在前面的小节中，我们从jobs数据集中的一些时间序列中提取了有趣的模式和季节性。在第3节中，引入了时间序列分解的概念，它允许我们自动提取时间序列的季节性、趋势和噪声。</p><p id="bbde" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在下面的代码中，我们将从初始化my_dict字典并提取jobs数据集的列名开始。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><p id="2b0d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们将使用一个“for”循环来遍历df的列，并应用statsmodels库中的季节性分解()函数，该函数存储在my_dict中。然后，我们将提取趋势分量，并将其存储在新的数据帧中，然后绘制它。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><p id="d7e2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们画出这三个组成部分。首先是工作数据集的季节性部分:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qp"><img src="../Images/d4ed4c35bb6a70f8f72276ce2fb80293.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*46Z8V9ROKp_UPuPv3lQ-3Q.png"/></div></div></figure><p id="f6f9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以看到，某些行业比其他行业更受季节性的影响，因为我们看到农业和建筑业在冬季较冷的几个月里失业率上升。接下来，绘制作业数据集的趋势部分:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qq"><img src="../Images/1d2d0a362545dba3dfd2a42254c99a7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J4ZmmNscHMy3-OaPg24pOg.png"/></div></div></figure><p id="73fc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以看到2008年的金融危机是如何导致所有行业的失业率上升的。最后，绘制了作业数据集的剩余部分:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qp"><img src="../Images/623cb245f5a3360f3101f7950c659996.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LzXUr7DB0txylsXw785Axg.png"/></div></div></figure><h2 id="40a7" class="oy mt it bd mu oz pa dn my pb pc dp nc kr pd pe ne kv pf pg ng kz ph pi ni pj bi translated">5.3.计算作业数据集时间序列之间的相关性</h2><p id="b4f3" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">首先，使用spearman方法计算trend_df数据帧中所有列之间的相关性，并将结果赋给名为trend_corr的新变量。然后，使用seaborn库中的clustermap函数生成相关性矩阵trend_corr的<strong class="kk iu"> clustermap() </strong>。第3行和第4行指定y轴标签的旋转角度为0，x轴标签的旋转角度为90。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pk pl l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi qr"><img src="../Images/aa1f65fe63912365a642bfa1a16ce6a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xMj6F7A0ye0ujPsryCJJfA.png"/></div></div></figure></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="9341" class="ms mt it bd mu mv oq mx my mz or nb nc jz os ka ne kc ot kd ng kf ou kg ni nj bi translated">参考</h1><p id="bcff" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">[1].<a class="ae lw" href="https://app.datacamp.com/learn/courses/visualizing-time-series-data-in-python" rel="noopener ugc nofollow" target="_blank">https://app . data camp . com/learn/courses/visualizing-time-series-data-in-python</a></p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><div class="md me mf mg gt ob"><a href="https://youssefraafat57.medium.com/membership" rel="noopener follow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd iu gy z fp og fr fs oh fu fw is bi translated">加入我的介绍链接媒体-优素福胡斯尼</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">阅读Youssef Hosni(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">youssefraafat57.medium.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op mm ob"/></div></div></a></div><p id="ce2a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="nx">感谢阅读！如果你喜欢这篇文章，一定要鼓掌(高达50！)并在</em><a class="ae lw" href="https://www.linkedin.com/in/youssef-hosni-b2960b135/" rel="noopener ugc nofollow" target="_blank"><em class="nx">LinkedIn</em></a><em class="nx">上与我联系，并在</em><a class="ae lw" href="https://youssefraafat57.medium.com/" rel="noopener"><em class="nx">Medium</em></a><em class="nx">上关注我的新文章。</em></p></div></div>    
</body>
</html>