<html>
<head>
<title>Getting Valuable Insights and Visualizations from Tweets Using Python and Twint</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python和Twint从推文中获得有价值的见解和可视化</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/getting-valuable-insights-and-visualizations-from-tweets-using-python-and-twint-28d9f9eb9128?source=collection_archive---------1-----------------------#2020-11-08">https://pub.towardsai.net/getting-valuable-insights-and-visualizations-from-tweets-using-python-and-twint-28d9f9eb9128?source=collection_archive---------1-----------------------#2020-11-08</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><figure class="it iu gq gs iv iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj is"><img src="../Images/21efe719691cd359c76c2f73c803ec31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FoRvsEjXPg4N_Sn5sEc0tQ.jpeg"/></div></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated">照片由<a class="ae jh" href="https://unsplash.com/@ymoran?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">莫兰</a>在<a class="ae jh" href="https://unsplash.com/s/photos/twitter?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h2 id="cdde" class="ji jj jk bd b dl jl jm jn jo jp jq dk jr translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/data-science" rel="noopener ugc nofollow" target="_blank">数据科学</a>，<a class="ae ep" href="https://towardsai.net/p/category/data-visualization" rel="noopener ugc nofollow" target="_blank">数据可视化</a>，<a class="ae ep" href="https://towardsai.net/p/category/programming" rel="noopener ugc nofollow" target="_blank">编程</a></h2><div class=""/><div class=""><h2 id="a971" class="pw-subtitle-paragraph kq jt jk bd b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dk translated">我的第一个有趣的数据科学项目</h2></div><p id="b035" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">最近我迷上了一部日本电视剧。我发现自己无法停止在Twitter、Instagram和一个名为豆瓣的中国应用程序上查看关于该节目的更新和讨论。其间偶遇<a class="ae jh" href="https://nealcaren.org/lessons/twint/" rel="noopener ugc nofollow" target="_blank">一篇关于Python库<a class="ae jh" href="https://github.com/twintproject/twint" rel="noopener ugc nofollow" target="_blank"> Twint </a>的介绍文章</a>，在收集twitter数据方面非常方便。虽然每周等待新一集的到来是一种折磨，但我决定利用等待的时间探索Twint，并从Twitter上获得一些关于该剧的见解。</p><p id="41bc" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">本文将讨论<code class="fe me mf mg mh b">twint</code>的使用，包括如何安装<code class="fe me mf mg mh b">twint</code>，如何查找用户信息，以及在给定条件下搜索历史推文。收集完数据后，我将使用<code class="fe me mf mg mh b">Pandas</code>库来清理数据并得出见解。我希望这篇文章可以让你开始<code class="fe me mf mg mh b">twint.</code>最重要的是，如果你有一些你非常有兴趣使用数据科学技能探索的话题，我希望我的文章可以启发你构建你的思想，并引导你走向一个起点。</p></div><div class="ab cl mi mj hy mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="in io ip iq ir"><h1 id="f924" class="mp mq jk bd mr ms mt mu mv mw mx my mz kz na la nb lc nc ld nd lf ne lg nf ng bi translated">Twint简介和安装</h1><p id="beee" class="pw-post-body-paragraph li lj jk lk b ll nh ku ln lo ni kx lq lr nj lt lu lv nk lx ly lz nl mb mc md in bi translated">根据的官方文件:</p><blockquote class="nm"><p id="00d0" class="nn no jk bd np nq nr ns nt nu nv md dk translated">Twint是一个用Python编写的高级Twitter抓取工具，允许在不使用Twitter API的情况下从Twitter个人资料中抓取Tweets。Twint利用Twitter的搜索运营商让你抓取特定用户的推文，抓取与某些主题、标签和趋势相关的推文，或者从推文中挑选出<em class="nw">敏感的</em>信息，如电子邮件和电话号码。Twint还对Twitter进行特殊查询，允许您在没有任何身份验证、API、Selenium或浏览器模拟的情况下收集Twitter用户的关注者、用户喜欢的Tweets以及他们关注的人。</p></blockquote><p id="6756" class="pw-post-body-paragraph li lj jk lk b ll nx ku ln lo ny kx lq lr nz lt lu lv oa lx ly lz ob mb mc md in bi translated">安装<code class="fe me mf mg mh b">twint</code>有三种方式:git、pip和pipenv。无论您使用什么方法安装它，我发现一个基本的步骤是在安装后总是使用这个命令行:</p><pre class="oc od oe of gu og mh oh oi aw oj bi"><span id="57fa" class="ok mq jk mh b gz ol om l on oo">pip install — user — upgrade -e git+ <a class="ae jh" href="https://github.com/twintproject/twint.git@origin/master#egg=twint" rel="noopener ugc nofollow" target="_blank">https://github.com/twintproject/twint.git@origin/master#egg=twint</a></span></pre><p id="5f60" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">最近，这个库有许多更新，所以确保您已经安装了所有最新的包以确保最佳使用是很重要的。</p><p id="51cd" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">安装后，您应该能够导入库。但是，如果你需要在Jupyter Notebook或Spyder中成功运行它，你需要安装<code class="fe me mf mg mh b">nest_asyncio</code>库并将其与<code class="fe me mf mg mh b">twint</code>一起导入:</p><pre class="oc od oe of gu og mh oh oi aw oj bi"><span id="da6b" class="ok mq jk mh b gz ol om l on oo">import twint<br/>import nest_asyncio</span><span id="c00c" class="ok mq jk mh b gz op om l on oo">nest_asyncio.apply()</span></pre><p id="d2b4" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">现在<code class="fe me mf mg mh b">twint</code>已经可以使用了。</p><h1 id="7d71" class="mp mq jk bd mr ms oq mu mv mw or my mz kz os la nb lc ot ld nd lf ou lg nf ng bi translated">目标是什么？</h1><p id="31fd" class="pw-post-body-paragraph li lj jk lk b ll nh ku ln lo ni kx lq lr nj lt lu lv nk lx ly lz nl mb mc md in bi translated">如上所述，我想通过<code class="fe me mf mg mh b">twint</code>来获得一些关于我正在看的日剧的见解。以下是该节目的官方推特账号:</p><figure class="oc od oe of gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj ov"><img src="../Images/041a43f9bc09c47b4a2abce6e8a98abf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hhn1utWVkmwwAE_FWG5nKA.png"/></div></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated"><a class="ae jh" href="https://twitter.com/tx_cherimaho" rel="noopener ugc nofollow" target="_blank">https://twitter.com/tx_cherimaho</a></figcaption></figure><p id="e28c" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">该节目在日本每周四凌晨1点播出。到目前为止，他们已经发布了五集，拥有超过47000名粉丝。在讨论节目的更多细节之前，我想先关注技术部分。</p><p id="ea2d" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">我的第一步是使用<code class="fe me mf mg mh b">twint</code>收集与这个节目相关的历史推文。具体来说，通过查看历史推文，我想知道<strong class="lk ju">他们是什么时候发关于节目的推文的？</strong> <strong class="lk ju">谁发微博说这个节目？</strong>和<strong class="lk ju">他们发微博的时候在说什么？为了更进一步，我将收集其官方账户的关注者信息，并了解更多关于该节目粉丝的信息。例如，我可以了解更多关于粉丝来自哪里、何时加入Twitter等细节。</strong></p></div><div class="ab cl mi mj hy mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="in io ip iq ir"><h1 id="cb29" class="mp mq jk bd mr ms mt mu mv mw mx my mz kz na la nb lc nc ld nd lf ne lg nf ng bi translated">获取历史推文</h1><p id="b1c1" class="pw-post-body-paragraph li lj jk lk b ll nh ku ln lo ni kx lq lr nj lt lu lv nk lx ly lz nl mb mc md in bi translated">首先，我会收集关于这个节目的历史推文。首先，我们需要定义一个“引擎”，然后我们需要指定在搜索过程中应用的条件以及如何存储我们获得的信息。让我们一步一步地分解它。</p><h2 id="4a1d" class="ok mq jk bd mr ow ox dn mv oy oz dp mz lr pa pb nb lv pc pd nd lz pe pf nf jq bi translated">指定引擎:</h2><p id="0ae7" class="pw-post-body-paragraph li lj jk lk b ll nh ku ln lo ni kx lq lr nj lt lu lv nk lx ly lz nl mb mc md in bi translated">首先，我们需要从<code class="fe me mf mg mh b">twint</code>调用一个Config()函数，并指定我们想用这个引擎搜索什么。你可以用“搜索”指定引擎，寻找带有特定单词、标签、提及等的推文；您可以使用“用户名”来查找特定用户使用他们的用户名发布的推文。你可以把你在这里输入的内容想象成你在Twitter搜索框中输入的内容，以获得你想要的内容:</p><figure class="oc od oe of gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj pg"><img src="../Images/198dd67d50868242322863390068d166.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pO8Xhjr3lZtSk8YZMNDJAQ.png"/></div></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated">twitter搜索框</figcaption></figure><p id="20b2" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">在这一步，我想提取标签为'#チェリまほ'.的所有推文我真的不知道这是什么意思，因为我不懂日语，但这是官方推特账户用来指代这部剧的标签。代码很简单:</p><pre class="oc od oe of gu og mh oh oi aw oj bi"><span id="6b7d" class="ok mq jk mh b gz ol om l on oo">c = twint.Config()</span><span id="66b1" class="ok mq jk mh b gz op om l on oo">c.Search = '#チェリまほ'</span></pre><h2 id="efb6" class="ok mq jk bd mr ow ox dn mv oy oz dp mz lr pa pb nb lv pc pd nd lz pe pf nf jq bi translated">为搜索提供额外的条件</h2><p id="5d7a" class="pw-post-body-paragraph li lj jk lk b ll nh ku ln lo ni kx lq lr nj lt lu lv nk lx ly lz nl mb mc md in bi translated">如果我们没有指定额外的条件，引擎将搜索所有带有标签的tweets。这个过程可能会因为无用的信息而变得乏味，并且需要很长时间才能完成。</p><p id="4d44" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">我在这里加的额外条件是起始日期。2020年8月24日开通官方账号，该剧自2020年10月8日开播。我把起始日期定为正式开户日期:</p><pre class="oc od oe of gu og mh oh oi aw oj bi"><span id="bd54" class="ok mq jk mh b gz ol om l on oo">c.Since = ‘2020–08–24’</span><span id="8d3e" class="ok mq jk mh b gz op om l on oo">#c.Username = "tx_cherimaho"<br/>#c.Limit = 10<br/>#c.Until = ‘2020–01–01’</span></pre><p id="53a1" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">我们可以在这里设置其他条件。通过设置“用户名”，我们只查看来自特定账户的推文。我想知道该节目的观众在推特上谈论什么，所以我没有在这里指定用户名。此外，在进行最终搜索之前，使用“Limit<strong class="lk ju">”</strong>总是有用的，它只会返回有限数量的符合搜索条件的推文，因此您可以在继续之前检查您是否获得了正确的数据。像开始日期一样，我们也可以使用“直到”来设置推文的结束日期。</p><h2 id="321f" class="ok mq jk bd mr ow ox dn mv oy oz dp mz lr pa pb nb lv pc pd nd lz pe pf nf jq bi translated">格式化输出</h2><p id="80a3" class="pw-post-body-paragraph li lj jk lk b ll nh ku ln lo ni kx lq lr nj lt lu lv nk lx ly lz nl mb mc md in bi translated">在获得新数据的同时保存获得的数据是很重要的，以防程序意外退出。我们可以输出不同格式的数据，包括熊猫数据帧，CSV，JSON等。首先，我们需要指定输出格式，然后列出保存数据的文件名。</p><p id="f6d5" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">在我的例子中，我将数据存储为一个JSON文件。注意这里的“Hide_output”。当收集大量数据并希望将它们保存在一个文件中时，这个命令非常方便。如果在这里指定，它将不会显示程序的抓取结果，而是将数据直接保存在文件中。</p><pre class="oc od oe of gu og mh oh oi aw oj bi"><span id="7d1f" class="ok mq jk mh b gz ol om l on oo">c.Hide_output = True<br/>c.Store_json = True<br/>c.Output = ‘tweets.json’</span></pre><h2 id="7aee" class="ok mq jk bd mr ow ox dn mv oy oz dp mz lr pa pb nb lv pc pd nd lz pe pf nf jq bi translated"><strong class="ak">准予搜索</strong></h2><p id="3ce4" class="pw-post-body-paragraph li lj jk lk b ll nh ku ln lo ni kx lq lr nj lt lu lv nk lx ly lz nl mb mc md in bi translated">最后一步是开始搜索。运行下面的代码:</p><pre class="oc od oe of gu og mh oh oi aw oj bi"><span id="6066" class="ok mq jk mh b gz ol om l on oo">twint.run.Search(c)</span></pre><p id="095a" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">现在<code class="fe me mf mg mh b">twint</code>将开始搜索，并将结果提取到名为“tweets.json”的文件中，该文件与python文件在同一个目录中。</p><p id="246a" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">总之，我们可以编写一个函数来抓取推文:</p><pre class="oc od oe of gu og mh oh oi aw oj bi"><span id="7cac" class="ok mq jk mh b gz ol om l on oo">def grab_tweets(search,file):<br/>    c = twint.Config()<br/>    c.Search = search <br/>    c.Since = ‘2020–08–24’<br/>    c.Hide_output = True<br/>    c.Store_json = True<br/>    c.Output = file<br/>    twint.run.Search(c)</span></pre></div><div class="ab cl mi mj hy mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="in io ip iq ir"><h2 id="b97f" class="ok mq jk bd mr ow ox dn mv oy oz dp mz lr pa pb nb lv pc pd nd lz pe pf nf jq bi translated">我发现了什么</h2><p id="1cf3" class="pw-post-body-paragraph li lj jk lk b ll nh ku ln lo ni kx lq lr nj lt lu lv nk lx ly lz nl mb mc md in bi translated"><strong class="lk ju"> 1、推文总数</strong></p><p id="d71a" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">花了一些时间才得到所有带有标签的推文。完成之后，我使用Pandas来读取JSON文件:</p><figure class="oc od oe of gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj ph"><img src="../Images/3df99d42782bcde00ac89f2d2e21393c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XWEfbICl0MSvCHUEae9YIw.png"/></div></div></figure><p id="2255" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">它显示这个标签中有86673条推文，对于每条推文，上面显示了36个不同的特征。我首先检查的是他们发布推文的日期:</p><pre class="oc od oe of gu og mh oh oi aw oj bi"><span id="ba30" class="ok mq jk mh b gz ol om l on oo">%matplotlib inline</span><span id="3d8b" class="ok mq jk mh b gz op om l on oo">df[‘date’].value_counts().plot()</span></pre><figure class="oc od oe of gu iw gi gj paragraph-image"><div class="gi gj pi"><img src="../Images/c150749110f0254b205ec8bd22e1d17f.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*l4xiH53FWh6qYGVBI-Wuxg.png"/></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated">按日期排列的推文数量</figcaption></figure><p id="26db" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">我们可以看到，推文数量有很多季节性，并且呈增长趋势。该节目于10月开始，在此之前，推文数量不足。在下一步中，我将排除10月之前的日期，并绘制节目播出时间以解释季节性:</p><pre class="oc od oe of gu og mh oh oi aw oj bi"><span id="2387" class="ok mq jk mh b gz ol om l on oo">df_short = df[df['date']&gt;pd.to_datetime('2020-10-01')]<br/>df_short.shape #(86021, 36)</span><span id="a18b" class="ok mq jk mh b gz op om l on oo">#episode dates so far<br/>eps_dates = [pd.to_datetime('2020-10-08'),pd.to_datetime('2020-10-15'),pd.to_datetime('2020-10-22'),pd.to_datetime('2020-10-29'),pd.to_datetime('2020-11-05')]</span><span id="b693" class="ok mq jk mh b gz op om l on oo">ax = df_short['date'].value_counts().plot(figsize=(10,5))</span><span id="c557" class="ok mq jk mh b gz op om l on oo">for i in range(len(eps_dates)):<br/>    ax.axvline(eps_dates[i], color='r', linestyle='--')<br/>    ax.text(eps_dates[i],17000,'EP{}'.format(i+1),color='red')</span></pre><figure class="oc od oe of gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj pj"><img src="../Images/1b35f543e0277008f6bb9a139fcf54e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4JUBWxzedovzid0gm4dVVw.png"/></div></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated">按日期和剧集日期分类的推文数量</figcaption></figure><p id="cbc2" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">图表显示，随着日期的推移，对该节目的讨论有增加的趋势。在新一集发布的当天，推文的数量是最高的。</p><p id="ddc7" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated"><strong class="lk ju"> 2、推文行动指标</strong></p><p id="5601" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">除了按日期查看帖子的数量，我们还可以查看关于推文的行为，以猜测其他人对关于这个主题的推文以及对这个节目的看法。具体来说，我查看了这些推文的回复、转发和点赞数量:</p><pre class="oc od oe of gu og mh oh oi aw oj bi"><span id="4b98" class="ok mq jk mh b gz ol om l on oo">ax = df_short.groupby("date").sum()[['replies_count','retweets_count', 'likes_count']]<br/>.plot(figsize=(10,5))</span><span id="a9e5" class="ok mq jk mh b gz op om l on oo">for i in range(len(eps_dates)):<br/>    ax.axvline(eps_dates[i], color='r', linestyle='--')<br/>    ax.text(eps_dates[i],125000,'EP{}'.format(i+1),color='red')</span></pre><figure class="oc od oe of gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj pk"><img src="../Images/e2cb214193dd856413130f217aaacf7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZD_OS3Trvg3C8j6bkIJw5Q.png"/></div></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated">按日期划分的推文行动指标</figcaption></figure><p id="371d" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">我们可以从前面的图表中看到，峰值仍然在新剧集的发布日期。然而，与第4集相比，第5集的推文响应更少，尽管从之前的图表中，我们知道推文的数量在随着时间的推移而增长。这与我在社交媒体上冲浪时对第五集的印象相符。一些观众对第五集有限的浪漫场景感到失望，因此解释了下降的原因，但我相信第六集会根据预告重新吸引注意力。</p><p id="5545" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">此外，与转发和点赞相比，回复量要小得多。这是意料之中的，因为回复一条推文肯定要比其他两条花费更多的精力。希望在未来，我们可以在相关推文中看到更多的回复。</p><p id="ad33" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated"><strong class="lk ju"> 3、演员受到的关注</strong></p><p id="ef65" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi">What about the tweets regarding the two leading actors? To answer this question, I use the hashtag ‘#赤楚衛二’ for Eiji Akaso and ‘#町田啓太’ for Keita Machida to start new searches. They are outstanding actors, and their performances in the show are important reasons that this show attracts so many fans.</p><p id="9fc4" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">为了在一个图中可视化两个不同的搜索，我将value_counts()结果导出到DataFrames中并合并它们。然后，我通过绘制数据帧的多列来绘制图表:</p><pre class="oc od oe of gu og mh oh oi aw oj bi"><span id="5342" class="ok mq jk mh b gz ol om l on oo">#read the json files<br/>df_a= pd.read_json('tweets_a.json' , lines = True)<br/>df_k= pd.read_json('tweets_k.json' , lines = True)</span><span id="d091" class="ok mq jk mh b gz op om l on oo">#convert value counts to dataframes<br/>values_a =<br/>df_a[‘date’].value_counts().rename_axis(‘dates’).reset_index(name=’counts’)</span><span id="e720" class="ok mq jk mh b gz op om l on oo">values_k = df_k['date'].value_counts().rename_axis('dates').reset_index(name='counts')</span><span id="66cb" class="ok mq jk mh b gz op om l on oo">#merge dataframes and clean it<br/>values = values_k.merge(values_a,on='dates',how='outer')</span><span id="abd0" class="ok mq jk mh b gz op om l on oo">values.rename(columns={"counts": "Keita Machida","counts_x":"Eiji Akaso"},inplace=True)</span><span id="9775" class="ok mq jk mh b gz op om l on oo">values.fillna(0,inplace=True)</span><span id="6d8c" class="ok mq jk mh b gz op om l on oo">values['dates'] = pd.to_datetime(values['dates'])</span><span id="4703" class="ok mq jk mh b gz op om l on oo">ax = values.plot(x='dates', y=["Keita Machida", "Eiji Akaso"],figsize = (10,5))</span><span id="1942" class="ok mq jk mh b gz op om l on oo">for i in range(len(eps_dates)):<br/>    ax.axvline(eps_dates[i], color='r', linestyle='--')<br/>    ax.text(eps_dates[i],400,'EP{}'.format(i+1),color='red')</span></pre><figure class="oc od oe of gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj pl"><img src="../Images/1c822cf2938fb86d0e146e0a230d453f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p6N6KZjKIvUBdy3JOVZdFQ.png"/></div></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated">关于这两个演员的推特</figcaption></figure><p id="97c5" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">如图所示，关于这两位演员的推文数量不断增加，并在剧集发布日达到峰值。不过11月1日凯塔最高。我回去在推特上查了原因。在那一天，他发布了一个舞蹈视频，这可能会导致越来越多的关于他的推文。</p><p id="9acb" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated"><strong class="lk ju"> 4、他们在推文中使用什么语言</strong></p><p id="6060" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">了解这些推文显示的语言有助于我们了解受众和关注者的位置。为了找到答案，我结合了几次搜索，统计了每种语言的推文总数。</p><p id="60f2" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">我使用的搜索包括'チェリまほ'这个节目的日文符号，以及两个英文单词，“tx_cherimaho”，“CherryMagic”。其中一个是官方账号的名字，另一个是类似'チェリまほ'的日文翻译，被所有粉丝使用。包括英语单词可以帮助增加从世界各地获取推文的数量。</p><pre class="oc od oe of gu og mh oh oi aw oj bi"><span id="f0be" class="ok mq jk mh b gz ol om l on oo">#read the json files and count the use of different languages<br/>lan_t = tweets_total['language'].value_counts().rename_axis('language').reset_index(name='チェリまほ')</span><span id="8ef4" class="ok mq jk mh b gz op om l on oo">lan_c = df_cherry[‘language’].value_counts().rename_axis(‘language’).reset_index(name=’CherryMagic’)</span><span id="66dc" class="ok mq jk mh b gz op om l on oo">lan_tx = df_cherry[‘language’].value_counts().rename_axis(‘language’).reset_index(name=’tx_cherimaho’)</span><span id="9bbc" class="ok mq jk mh b gz op om l on oo">#merge datasets<br/>lans = lan_tx.merge(lan_t.merge(lan_c,on='language',how='outer'),on='language',how='outer')</span><span id="7754" class="ok mq jk mh b gz op om l on oo">#Use language rather than language code<br/>#source: <a class="ae jh" href="https://www.w3schools.com/tags/ref_language_codes.asp" rel="noopener ugc nofollow" target="_blank">https://www.w3schools.com/tags/ref_language_codes.asp</a></span><span id="1b63" class="ok mq jk mh b gz op om l on oo">lan_list = pd.read_excel('language_code.xlsx')<br/>lan_list.rename(columns={'ISO Code':'language'},inplace=True)<br/>#merge<br/>lans_f = lans.merge(lan_list, on='language',how='left')</span><span id="1be1" class="ok mq jk mh b gz op om l on oo">#sum, sort, get rid of Japanese, and delete unrecognized languages<br/>lans_f['total'] = lans_f.sum(axis=1)<br/>lans_f.sort_values(by=['total'],ascending=False, inplace=True)<br/>lans_short = lans_f[lans_f['language']!='ja']<br/>lans_short.dropna(inplace=True)</span><span id="f2bc" class="ok mq jk mh b gz op om l on oo">lans_short.plot(x='Language',y='total',kind='bar',figsize=(12,8),rot=75)</span></pre><figure class="oc od oe of gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj pm"><img src="../Images/ad1b1eb060e374efb6a445011c7511da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Z28FtGZqwJv4XP0Nhyy1w.png"/></div></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated">日语岗位数量为136170</figcaption></figure><p id="f81c" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">包括日语在内，在这些搜索中检测到36种语言。与其他语言的推文相比，日语的帖子太高了(136170比8987的泰语)。在图表中包含日语会使图表很难阅读。在这里，我已经把日本人从之前的图表中排除了。根据图表，我们可以看到该节目在泰国的收视率最高，这与该节目在泰国的Twitter趋势上多次出现的事实是一致的。对于中国这样的国家，我知道这个节目肯定比这里显示的数字更受欢迎。由于Twitter不是中国人使用的主要社交媒体，所以中国人的推文比其他国家低是可以理解的。</p></div><div class="ab cl mi mj hy mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="in io ip iq ir"><h1 id="04da" class="mp mq jk bd mr ms mt mu mv mw mx my mz kz na la nb lc nc ld nd lf ne lg nf ng bi translated"><strong class="ak">未来的步骤</strong></h1><p id="652b" class="pw-post-body-paragraph li lj jk lk b ll nh ku ln lo ni kx lq lr nj lt lu lv nk lx ly lz nl mb mc md in bi translated">在收集Twitter数据方面是如此有用和强大，以至于仍然有很多东西可以获得更多的见解。其中很大一部分就是分析官方账号的关注者。到目前为止，官方账号已经有超过47000名粉丝，并且这个数字还在持续增长。关注一个账户是最省力的操作，相比之下，在推特上发布关于该节目的消息，回复和转发其他推文，以及喜欢一条相关主题的推文。因此，预计分析关注者将涉及更多用户，并提供更丰富的数据。</p><h1 id="0dfd" class="mp mq jk bd mr ms oq mu mv mw or my mz kz os la nb lc ot ld nd lf ou lg nf ng bi translated">一些想法</h1><p id="bd95" class="pw-post-body-paragraph li lj jk lk b ll nh ku ln lo ni kx lq lr nj lt lu lv nk lx ly lz nl mb mc md in bi translated">首先感谢所有读到这里的人。我很高兴分享我在将数据科学技能应用于我非常感兴趣的事物方面的工作。我参与了许多项目，以完成我的博士论文，完成数据科学训练营的任务，或者制作一个项目演示，与我的学生或媒体分享。这是我第一次为了好玩而做一个项目。我确实喜欢它。如果我的工作对任何对从Twitter收集数据感兴趣的人有所帮助，我会很高兴。如果有人受到这篇文章的启发，并开始从事自己的项目，我会很高兴。</p><p id="dffc" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">感谢您的阅读！这是我所有博客帖子的列表。如果你感兴趣的话，可以去看看！</p><div class="it iu gq gs iv pn"><a href="https://zzhu17.medium.com/my-blog-posts-gallery-ac6e01fe5cc3" rel="noopener follow" target="_blank"><div class="po ab fp"><div class="pp ab pq cl cj pr"><h2 class="bd ju gz z fq ps fs ft pt fv fx jt bi translated">我的博客文章库</h2><div class="pu l"><h3 class="bd b gz z fq ps fs ft pt fv fx dk translated">我快乐的地方</h3></div><div class="pv l"><p class="bd b dl z fq ps fs ft pt fv fx dk translated">zzhu17.medium.com</p></div></div><div class="pw l"><div class="px l py pz qa pw qb jb pn"/></div></div></a></div><div class="it iu gq gs iv pn"><a href="https://zzhu17.medium.com/membership" rel="noopener follow" target="_blank"><div class="po ab fp"><div class="pp ab pq cl cj pr"><h2 class="bd ju gz z fq ps fs ft pt fv fx jt bi translated">阅读朱(以及媒体上成千上万的其他作家)的每一个故事</h2><div class="pu l"><h3 class="bd b gz z fq ps fs ft pt fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pv l"><p class="bd b dl z fq ps fs ft pt fv fx dk translated">zzhu17.medium.com</p></div></div><div class="pw l"><div class="qc l py pz qa pw qb jb pn"/></div></div></a></div></div></div>    
</body>
</html>