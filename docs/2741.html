<html>
<head>
<title>Web Scraping Top Movies With Python and Selenium</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python和Selenium抓取热门电影</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/web-scraping-top-movies-with-python-and-selenium-8c2f0c6a1d69?source=collection_archive---------0-----------------------#2022-05-07">https://pub.towardsai.net/web-scraping-top-movies-with-python-and-selenium-8c2f0c6a1d69?source=collection_archive---------0-----------------------#2022-05-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="8140" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如何抓取网站并创建数据集？</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/1f05676f4b874cfbb53c5ea33abc5da6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nmWV65N8wMMv27mBySGZqQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">Claudio Schwarz在Unsplash上拍摄的照片</figcaption></figure><p id="aa93" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">什么是网页抓取？</strong></p><p id="fd47" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Web抓取是访问网页、提取数据并以结构化格式存储数据以供进一步分析的过程。</p><p id="b421" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">如何使用网页抓取？</strong></p><p id="ff32" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">网络刮擦可用于多种目的，包括:</p><ul class=""><li id="5860" class="le lf it js b jt ju jx jy kb lg kf lh kj li kn lj lk ll lm bi translated">价格比较:用于从在线购物网站收集数据，并比较产品和定价。</li><li id="9d38" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">房地产:用于收集和建立房地产列表的数据库，以便进行市场分析。</li><li id="128e" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">社交媒体:用于从社交媒体网站收集数据，以找出哪些话题是热门话题。</li><li id="8f71" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">潜在客户生成:用于收集联系信息，包括姓名、电话号码和电子邮件地址，以便与潜在客户沟通。</li><li id="7272" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">电影评论:用于收集有关电影的信息，以帮助决定哪些电影受欢迎和评级高。</li></ul><p id="fbf2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">网络抓取合法吗？</strong></p><p id="ff77" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2019年，美国上诉法院驳回了LinkedIn阻止分析公司HiQ抓取其数据的请求。该决定在数据隐私和数据监管领域非常重要。它表明，任何公开可用的<em class="ls"> </em>且没有版权的数据都可以被网络爬虫获取。</p><p id="bb02" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一些网站允许网络抓取，一些网站禁止访问他们的网站。您可以通过将“/robots.txt”附加到您想要抓取的URL来找到网站的访问权限。要查看有关robots.txt规则的更多信息，请选择此<a class="ae lt" href="https://developers.google.com/search/docs/advanced/robots/create-robots-txt" rel="noopener ugc nofollow" target="_blank">链接</a></p><p id="1eb9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在抓取之前，您可能需要查看网站的服务条款。如果过于频繁地抓取网站，您的IP地址可能会被禁止，您将无法访问该网站。有一些方法可以通过使用代理服务来解决这个问题。</p><p id="aabe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">路线图</strong></p><p id="df73" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本文的其余部分将介绍一个程序，该程序将通过解析页面的HTML并提取数据集所需的信息来抓取电影的最高收入网页。下面的步骤将使用Python和Selenium来执行。</p><p id="3bf2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">1.安装软件包和库。</p><p id="70d2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.安装Web驱动程序。</p><p id="f0af" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.查看网页的HTML结构。</p><p id="f73a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">4.硒概述。</p><p id="f353" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">5.找到并提取数据元素。</p><p id="4f35" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">6.创建并显示数据框。</p><p id="51fb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">7.将数据帧转换为CSV文件。</p><p id="6285" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">程序</strong></p><p id="5cb6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">目标:找到并提取网页上的数据元素，并将数据存储到数据集中。</p><p id="090f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">安装软件包和库</strong></p><pre class="kp kq kr ks gt lu lv lw lx aw ly bi"><span id="aa59" class="lz ma it lv b gy mb mc l md me"># Install the package.<br/>!pip install selenium</span><span id="db08" class="lz ma it lv b gy mf mc l md me"># Import the required libraries.<br/><strong class="lv iu">from</strong> selenium <strong class="lv iu">import</strong> webdriver<br/><strong class="lv iu">from</strong> selenium.webdriver.common.keys <strong class="lv iu">import</strong> Keys<br/><strong class="lv iu">from</strong> selenium.webdriver.common.by <strong class="lv iu">import</strong> By<br/><strong class="lv iu">import</strong> pandas <strong class="lv iu">as</strong> pd</span></pre><p id="2184" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">安装网络驱动</strong></p><pre class="kp kq kr ks gt lu lv lw lx aw ly bi"><span id="bd4f" class="lz ma it lv b gy mb mc l md me"># Install the chrome web driver from selenium.<em class="ls"> </em><br/>!apt<strong class="lv iu">-</strong>get update <br/>!apt install chromium<strong class="lv iu">-</strong>chromedriver<br/><br/>chrome_options <strong class="lv iu">=</strong> webdriver<strong class="lv iu">.</strong>ChromeOptions()<br/>chrome_options<strong class="lv iu">.</strong>add_argument('--headless')<br/>chrome_options<strong class="lv iu">.</strong>add_argument('--no-sandbox')<br/>chrome_options<strong class="lv iu">.</strong>add_argument('--disable-dev-shm-usage')<br/>driver <strong class="lv iu">=</strong> webdriver<strong class="lv iu">.</strong>Chrome('chromedriver',chrome_options<strong class="lv iu">=</strong>chrome_options)</span></pre><p id="0fa4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">web驱动程序是selenium的关键组件。web驱动程序是一个浏览器自动化框架，使用开源API。该框架通过接受命令、将这些命令发送到浏览器以及与应用程序交互来运行。</p><p id="6e9a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Selenium支持多种web浏览器，并为每种浏览器提供web驱动程序。我已经从selenium导入了chrome web驱动程序。或者，您可以下载特定浏览器的web驱动程序，并将其存储在易于访问的位置(C:\ users \ web driver \ chrome driver . exe)。您可以在此<a class="ae lt" href="https://selenium-python.readthedocs.io/installation.html#:~:text=Selenium%20requires%20a-,driver,-to%20interface%20with" rel="noopener ugc nofollow" target="_blank">站点</a>下载浏览器的网络驱动程序。</p><p id="98f1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">查看网页的HTML结构</strong></p><p id="cdd5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们需要理解网页中HTML标签的结构和内容。对于这个项目，我们将使用Box Office Mojo网站，其中包含200部票房最高的电影(如下所示)。选择这个<a class="ae lt" href="https://www.boxofficemojo.com/chart/top_lifetime_gross/?area=XWW" rel="noopener ugc nofollow" target="_blank">链接</a>就可以找到这个网页。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mg"><img src="../Images/2ba1ad08943d5928845ddd8c333ef886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WvbDq6TcWHwThMDTp1JbrQ.png"/></div></div></figure><p id="86c7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以通过解析页面的HTML并提取数据集所需的信息来抓取这个网页。要从该网页中抓取一些数据，右键单击网页上的任意位置，单击带有HTML的屏幕左上角的箭头图标，然后单击网页第一行上的标题名称(头像)。这将导致显示以下屏幕。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mh"><img src="../Images/cc804b6efc48172260669437ecb3d772.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fVsRbMa6kp5emjE1uvnQAg.png"/></div></div></figure><p id="c404" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在HTML屏幕上，你会看到突出显示的标题名称头像的HTML行(如下所示)。</p><pre class="kp kq kr ks gt lu lv lw lx aw ly bi"><span id="227d" class="lz ma it lv b gy mb mc l md me"><strong class="lv iu">&lt;</strong>a class<strong class="lv iu">=</strong>"a-link-normal" href<strong class="lv iu">=</strong>"/title/tt0499549/?ref_=bo_cso_table_1"<strong class="lv iu">&gt;</strong>Avatar<strong class="lv iu">&lt;/</strong>a<strong class="lv iu">&gt;</strong></span></pre><p id="2164" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a is="" referred="" to="" as="" the="" tag="" and="" class="" avatar="" name="" of="" movie="" that="" we="" want="" extract.=""/></p><p id="d15e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">If you move up one line from this tag you will find the tag td with a class of “a-text-left mojo-field-type-title” (shown below). This is the parent of the <a tag="" with="" class=""/></p><pre class="kp kq kr ks gt lu lv lw lx aw ly bi"><span id="60c9" class="lz ma it lv b gy mb mc l md me"><strong class="lv iu">&lt;</strong>td class<strong class="lv iu">=</strong>"a-text-left mojo-field-type-title" style<strong class="lv iu">=</strong>"width: 616px; height: 34px; min-width: 616px; min-height: 34px;"<strong class="lv iu">&gt;</strong></span></pre><p id="fed4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">So, if you wanted to find, extract and capture all the movie title names on the web page you would follow these steps.</p><ol class=""><li id="1953" class="le lf it js b jt ju jx jy kb lg kf lh kj li kn mi lk ll lm bi translated">Find all the HTML lines for a specific parent (td tag with a class of “a-text-left mojo-field-type-title”).</li><li id="dc68" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn mi lk ll lm bi translated">Find all the HTML lines for (a tag with a class of “a-link-normal”) within the parent in step 1.</li><li id="8f9d" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn mi lk ll lm bi translated">Extract the data elements and build a list containing the movie title names.</li></ol><p id="07d6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">The code for finding, extracting, and capturing movie title names is shown below. I will explain this code in detail in the next section below.</p><pre class="kp kq kr ks gt lu lv lw lx aw ly bi"><span id="8f4d" class="lz ma it lv b gy mb mc l md me">movies_names <strong class="lv iu">=</strong> driver<strong class="lv iu">.</strong>find_elements_by_xpath('//td[@class="a-text-left mojo-field-type-title"]/a[@class="a-link-normal"]') <br/><br/>movie_name_list <strong class="lv iu">=</strong> [] <br/><strong class="lv iu">for</strong> movie <strong class="lv iu">in</strong> range(len(movies_names)):<br/>    movie_name_list<strong class="lv iu">.</strong>append(movies_names[movie]<strong class="lv iu">.</strong>text)</span></pre><p id="b61b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">We will find, extract and store the other data elements on the web page following a similar procedure.</p><p id="1c19" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">硒概述</strong></p><p id="554a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们需要回顾一些关于硒的基本信息。将使用Selenium解析和抓取网页的HTML内容。Selenium是一个python库，可以动态抓取网站上的数据。它也可以用于web自动化和测试。从web上抓取数据只是selenium库的一小部分。硒的一些特性包括:</p><ul class=""><li id="a815" class="le lf it js b jt ju jx jy kb lg kf lh kj li kn lj lk ll lm bi translated">多浏览器兼容性</li><li id="2b18" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">多语言支持</li><li id="ae0f" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">动态Web元素的处理</li><li id="a14a" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">易于识别Web元素</li><li id="6f04" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">速度和性能</li><li id="2d96" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">开源和便携</li></ul><p id="e849" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您想了解更多关于Selenium的信息，请点击此<a class="ae lt" href="https://selenium-python.readthedocs.io/" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><p id="f97a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Selenium web driver提供了各种定位器函数来定位web页面上的元素。对于这个项目，我们将使用XPath函数定位数据元素。XPath是一种用于在HTML标记和属性(如类、id和名称)中定位数据值的语言。</p><p id="5661" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">XPath函数的语法如下所示。</p><pre class="kp kq kr ks gt lu lv lw lx aw ly bi"><span id="e76c" class="lz ma it lv b gy mb mc l md me">Xpath <strong class="lv iu">=</strong> <strong class="lv iu">//</strong>tagname[@Attribute<strong class="lv iu">=</strong>'Value']<br/><strong class="lv iu">//</strong>       ➡ Select Current Node<br/>tagname  ➡ Tagname like div, td, tr<br/><strong class="lv iu">@</strong>        ➡ Selects attribute<br/>Attribute➡ Attribute name (class,id,name,etc)<br/>value    ➡ value of the attribute<br/><br/># Let's look at some examples.<br/># This will return the HTML with tag div and class movie in a list.<br/>Xpath <strong class="lv iu">=</strong> <strong class="lv iu">//</strong>div[@class<strong class="lv iu">=</strong>'movie']<br/><br/># This will return all the links with class drama inside the div tag that has a class of movie.<br/>Xpath <strong class="lv iu">=</strong> <strong class="lv iu">//</strong>div[@class<strong class="lv iu">=</strong>'movie']<strong class="lv iu">/</strong>a[@class<strong class="lv iu">=</strong>'drama']<br/><br/># HTML looks like this:<br/>HTML<br/><strong class="lv iu">&lt;</strong>div class<strong class="lv iu">=</strong>'movie'<strong class="lv iu">&gt;</strong><br/>    <strong class="lv iu">&lt;</strong>a class<strong class="lv iu">=</strong>'drama' href<strong class="lv iu">=</strong>'IMDB.com'<strong class="lv iu">&gt;</strong> IMDB<strong class="lv iu">&lt;/</strong>a<strong class="lv iu">&gt;</strong><br/><strong class="lv iu">&lt;/</strong>div<strong class="lv iu">&gt;</strong></span></pre><p id="8871" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于这个项目，我们将使用票房Mojo网站，其中包含了200部票房最高的电影。选择此<a class="ae lt" href="https://www.boxofficemojo.com/chart/top_lifetime_gross/?area=XWW" rel="noopener ugc nofollow" target="_blank">链接</a>即可找到该网页。</p><p id="7734" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在查看了票房Mojo网页后，我决定为每部电影提取以下数据元素。</p><ul class=""><li id="c70a" class="le lf it js b jt ju jx jy kb lg kf lh kj li kn lj lk ll lm bi translated">军阶</li><li id="8739" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">标题</li><li id="5bc0" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">终生毛收入</li><li id="c7a8" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">年</li></ul><p id="fc77" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">查找并提取数据元素</strong></p><p id="75e3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于我们想要提取的每个数据元素，我们将找到特定标签和类中的所有HTML行。然后，我们将提取数据元素并将数据存储在一个列表中。</p><p id="c766" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">get命令启动浏览器并在web驱动程序中打开指定的URL。</p><pre class="kp kq kr ks gt lu lv lw lx aw ly bi"><span id="f549" class="lz ma it lv b gy mb mc l md me">driver<strong class="lv iu">.</strong>get('https://www.boxofficemojo.com/chart/top_lifetime_gross/?area=XWW')</span></pre><p id="87f0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在列表中查找、提取和捕获电影排名。</p><pre class="kp kq kr ks gt lu lv lw lx aw ly bi"><span id="403b" class="lz ma it lv b gy mb mc l md me">movies_rankings <strong class="lv iu">=</strong> driver<strong class="lv iu">.</strong>find_elements(By<strong class="lv iu">.</strong>XPATH, "(//td[@class='a-text-right mojo-header-column mojo-truncate mojo-field-type-rank'])")<br/>movie_rank_list <strong class="lv iu">=</strong> [] <br/><strong class="lv iu">for</strong> movie <strong class="lv iu">in</strong> range(len(movies_rankings)):<br/>    movie_rank_list<strong class="lv iu">.</strong>append(movies_rankings[movie]<strong class="lv iu">.</strong>text)</span></pre><p id="3d4a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在列表中查找、提取和捕获电影名称。</p><pre class="kp kq kr ks gt lu lv lw lx aw ly bi"><span id="7af8" class="lz ma it lv b gy mb mc l md me">movies_names <strong class="lv iu">=</strong> driver<strong class="lv iu">.</strong>find_elements(By<strong class="lv iu">.</strong>XPATH, "(//td[@class='a-text-left mojo-field-type-title']/a[@class='a-link-normal'])") <br/>movie_name_list <strong class="lv iu">=</strong> [] <br/><strong class="lv iu">for</strong> movie <strong class="lv iu">in</strong> range(len(movies_names)):<br/>    movie_name_list<strong class="lv iu">.</strong>append(movies_names[movie]<strong class="lv iu">.</strong>text)</span></pre><p id="9e06" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在列表中查找、提取和捕获电影发行年份。</p><pre class="kp kq kr ks gt lu lv lw lx aw ly bi"><span id="1d2b" class="lz ma it lv b gy mb mc l md me">release_year <strong class="lv iu">=</strong> driver<strong class="lv iu">.</strong>find_elements(By<strong class="lv iu">.</strong>XPATH, "(//td[@class='a-text-left mojo-field-type-year']/a[@class='a-link-normal'])")<br/>release_year_list <strong class="lv iu">=</strong> []<br/><strong class="lv iu">for</strong> year <strong class="lv iu">in</strong> range(len(release_year)):<br/>    release_year_list<strong class="lv iu">.</strong>append(release_year[year]<strong class="lv iu">.</strong>text)</span></pre><p id="f32d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在列表中查找、提取和获取终生总收入。</p><pre class="kp kq kr ks gt lu lv lw lx aw ly bi"><span id="1735" class="lz ma it lv b gy mb mc l md me">lifetime_gross <strong class="lv iu">=</strong> driver<strong class="lv iu">.</strong>find_elements(By<strong class="lv iu">.</strong>XPATH, "(//td[@class='a-text-right mojo-field-type-money'])")<br/>lifetime_gross_list <strong class="lv iu">=</strong> []<br/><strong class="lv iu">for</strong> i <strong class="lv iu">in</strong> range(len(lifetime_gross)):<br/>    lifetime_gross_list<strong class="lv iu">.</strong>append(lifetime_gross[i]<strong class="lv iu">.</strong>text)</span></pre><p id="c0e7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">创建并显示数据帧</strong></p><pre class="kp kq kr ks gt lu lv lw lx aw ly bi"><span id="317c" class="lz ma it lv b gy mb mc l md me"># Combine the lists.<br/>data <strong class="lv iu">=</strong>list( zip(movie_rank_list, movie_name_list, release_year_list, lifetime_gross_list))</span><span id="5cde" class="lz ma it lv b gy mf mc l md me"># Create the data frame.<br/>df <strong class="lv iu">=</strong> pd<strong class="lv iu">.</strong>DataFrame(data,columns<strong class="lv iu">=</strong>['Rank', 'Movie Name', 'Release Date','Lifetime Earnings'])</span></pre><p id="c586" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">打印新的数据框。</p><pre class="kp kq kr ks gt lu lv lw lx aw ly bi"><span id="a84f" class="lz ma it lv b gy mb mc l md me">df<strong class="lv iu">.</strong>head(10)</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mj"><img src="../Images/69dded6ea973526f6b2548af18a0d635.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lcUqSfm2r26-qQeD03PrcQ.png"/></div></div></figure><p id="daca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">将数据帧转换为CSV文件</strong></p><p id="cad5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果需要，我们可以从上一步中创建的数据框创建一个CSV文件。</p><pre class="kp kq kr ks gt lu lv lw lx aw ly bi"><span id="7906" class="lz ma it lv b gy mb mc l md me">df<strong class="lv iu">.</strong>to_csv('top_200_movies_with_lifetime_gross.csv',index<strong class="lv iu">=False</strong>)<br/>reviews <strong class="lv iu">=</strong> pd<strong class="lv iu">.</strong>read_csv('top_200_movies_with_lifetime_gross.csv', lineterminator<strong class="lv iu">=</strong>'\n') <br/>reviews</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mk"><img src="../Images/b2d3b14d31d5fd2f82b1e797561565ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yr5ZCm9qQo-bKHvBg50nQA.png"/></div></div></figure><p id="8e27" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">非常感谢你阅读我的文章！如果您有任何意见或反馈，请在下面添加。</p><p id="1fb1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑报名成为一名媒体成员。会员资格使你可以无限制地访问媒体上的所有文章。你可以使用此链接<a class="ae lt" href="https://medium.com/@dniggl/membership" rel="noopener">https://medium.com/@dniggl/membership</a>注册</p></div></div>    
</body>
</html>