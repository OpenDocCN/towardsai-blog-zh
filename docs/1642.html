<html>
<head>
<title>Capital Assets Pricing Model (CAPM) — Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">资本资产定价模型(CAPM)-使用Python</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/capital-assets-pricing-model-capm-using-python-285a95f40d4d?source=collection_archive---------0-----------------------#2021-03-09">https://pub.towardsai.net/capital-assets-pricing-model-capm-using-python-285a95f40d4d?source=collection_archive---------0-----------------------#2021-03-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="653c" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/data-visualization" rel="noopener ugc nofollow" target="_blank">数据可视化</a>，<a class="ae ep" href="https://towardsai.net/p/category/programming" rel="noopener ugc nofollow" target="_blank">编程</a></h2><div class=""/><div class=""><h2 id="e761" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">了解CAPM并在Python中实现它的指南。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/c1a06ccda96e30dfec0806d7198a5a07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AAJvMf4XdsxkVShz"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">照片由马克西姆·霍普曼(<a class="ae le" href="https://unsplash.com/photos/fiXLQXAhCfk" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>)拍摄</figcaption></figure><h1 id="4d3f" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">什么是CAPM？</h1><p id="d293" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">资本资产定价模型(CAPM)应用非常广泛，被认为是投资中非常基本的概念。它决定了资产(尤其是股票)的风险和预期收益之间的联系。</p><h1 id="3170" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">什么是CAPM方程？</h1><p id="2238" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">资本资产定价模型由以下公式定义:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/3575d5d49e31fd00446745feb9fd2bb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/0*sI55iGrcyXgETetq"/></div></figure><p id="0994" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">其中“I”是单个股票</p><p id="5fc5" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">r(i)(t) =股票“I”在时间“t”的收益</p><p id="db02" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">β(I)= I的β</p><p id="c2ba" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">r(m)(t) =市场“m”在时间“t”的收益</p><p id="037a" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">α(i)(t) =在时间‘t’时‘I’的α</p><p id="8024" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">股票“I”的β告诉我们，与市场相比，股票将增加投资组合的风险。β=1表示股票符合市场行情。</p><p id="2ab8" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">根据CAPM，α的值预计为零，并且它是非常随机的，无法预测。</p><p id="3887" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">上面看到的等式是y = mx+b的形式，因此它可以被视为线性回归的形式。</p><h1 id="4563" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">如何用Python实现？</h1><p id="96c4" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated"><strong class="lz ja"> →安装包</strong></p><p id="f747" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">将使用scipy包。它有计算线性回归的功能。与它一起，pandas被导入来处理数据，数据是使用pandas datareader获得的。可视化是通过matplotlib完成的。</p><pre class="kp kq kr ks gt mz na nb nc aw nd bi"><span id="eb53" class="ne lg iq na b gy nf ng l nh ni"><strong class="na ja">&gt;&gt;&gt; from</strong> scipy <strong class="na ja">import</strong> stats<br/><strong class="na ja">&gt;&gt;&gt; import</strong> pandas <strong class="na ja">as</strong> pd<br/><strong class="na ja">&gt;&gt;&gt; import</strong> pandas_datareader <strong class="na ja">as</strong> web<br/><strong class="na ja">&gt;&gt;&gt; import</strong> datetime<br/><strong class="na ja">&gt;&gt;&gt; import</strong> matplotlib.pyplot <strong class="na ja">as</strong> plt<br/><strong class="na ja">&gt;&gt;&gt; %</strong>matplotlib inline</span></pre><p id="a4b9" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated"><strong class="lz ja"> →数据</strong></p><p id="1d96" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">定义开始和结束日期，并在此时间间隔内完成分析。</p><pre class="kp kq kr ks gt mz na nb nc aw nd bi"><span id="0dc0" class="ne lg iq na b gy nf ng l nh ni">&gt;&gt;&gt; start <strong class="na ja">=</strong> datetime.datetime(2013,1,1)<br/>&gt;&gt;&gt; end <strong class="na ja">=</strong> datetime.datetime(2016,1,1)</span></pre><p id="a747" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">获取市场数据，如“间谍”(SPDR·标准普尔500)。</p><pre class="kp kq kr ks gt mz na nb nc aw nd bi"><span id="9b03" class="ne lg iq na b gy nf ng l nh ni">&gt;&gt;&gt; df_spy <strong class="na ja">=</strong> web.DataReader('SPY','yahoo',start,end)<br/>&gt;&gt;&gt; df_spy.head()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/d63b33c8dc1cf4e400f0936f3050d8e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*72qaF1T135UPbUgwfV75Eg.png"/></div></figure><p id="c0db" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">接下来，获取股票的数据。这里使用的股票是脸书。</p><pre class="kp kq kr ks gt mz na nb nc aw nd bi"><span id="e73c" class="ne lg iq na b gy nf ng l nh ni">&gt;&gt;&gt; df_fb <strong class="na ja">=</strong> web.DataReader('FB','yahoo',start,end)<br/>&gt;&gt;&gt; df_fb.head()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/d4d786fd4d196a0fa4c4e8b76a51eeeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*OG8eCNgrJZC1wgm99lrlwQ.png"/></div></figure><p id="0f97" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated"><strong class="lz ja"> →可视化</strong></p><p id="418b" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">根据资本资产定价模型，股票表现和市场表现之间应该有某种联系，这一点将在后面研究。</p><pre class="kp kq kr ks gt mz na nb nc aw nd bi"><span id="5138" class="ne lg iq na b gy nf ng l nh ni">&gt;&gt;&gt; df_fb['Close'].plot(label <strong class="na ja">=</strong> 'Facebook', figsize<strong class="na ja">=</strong>(10,8))<br/>&gt;&gt;&gt; df_spy['Close'].plot(label <strong class="na ja">=</strong> 'SPY')<br/>&gt;&gt;&gt; plt.legend()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nl"><img src="../Images/2158eba7bdc67c09ae025b432cababfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xgclMSPjd3iyQ8V3QNJ3yw.png"/></div></div></figure><p id="5332" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated"><strong class="lz ja"> →统计</strong></p><p id="a03d" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">从图中可以看出，股票表现似乎是在模仿市场表现。所以在统计学上它们是可以比较的。找到累积回报。</p><pre class="kp kq kr ks gt mz na nb nc aw nd bi"><span id="cac6" class="ne lg iq na b gy nf ng l nh ni">&gt;&gt;&gt; df_fb['Cumu'] <strong class="na ja">=</strong> df_fb['Close']<strong class="na ja">/</strong>df_fb['Close'].iloc[0]<br/>&gt;&gt;&gt; df_spy['Cumu'] <strong class="na ja">=</strong> df_spy['Close']<strong class="na ja">/</strong>df_spy['Close'].iloc[0]</span><span id="aa62" class="ne lg iq na b gy nm ng l nh ni">&gt;&gt;&gt; df_fb['Cumu'].plot(label <strong class="na ja">=</strong> 'Facebook', figsize<strong class="na ja">=</strong>(10,8))<br/>&gt;&gt;&gt; df_spy['Cumu'].plot(label <strong class="na ja">=</strong> 'SPY')<br/>&gt;&gt;&gt; plt.legend()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nn"><img src="../Images/4632165ea90ca5dfb721b9064cc7bd34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eYpCOH6p7_ICtHItCsLLtg.png"/></div></div></figure><p id="c2ea" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">每天的回报也是确定的。</p><pre class="kp kq kr ks gt mz na nb nc aw nd bi"><span id="d8f5" class="ne lg iq na b gy nf ng l nh ni">&gt;&gt;&gt; df_fb['daily_ret'] <strong class="na ja">=</strong> df_fb['Close'].pct_change(1)<br/>&gt;&gt;&gt; df_spy['daily_ret'] <strong class="na ja">=</strong> df_spy['Close'].pct_change(1)</span><span id="5f5b" class="ne lg iq na b gy nm ng l nh ni">&gt;&gt;&gt; plt.scatter(df_fb['daily_ret'],df_spy['daily_ret'])</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi no"><img src="../Images/42d3f0cd0b20cccf95f9a95a7be8fec8.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*eHlHZrJzp0pkFTu7-9dodA.png"/></div></figure><p id="0d72" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">散点图表明，股票和市场的每日收益之间存在某种联系。</p><p id="e3b5" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated"><strong class="lz ja"> →寻找α和β值</strong></p><p id="c508" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">alpha和beta值是通过使用scipy的stats包并调用它的线性回归函数得到的。在寻找每日回报时，第一行具有NaN值，因此在传递用于线性回归的列时，考虑第一行中的所有内容。</p><pre class="kp kq kr ks gt mz na nb nc aw nd bi"><span id="7763" class="ne lg iq na b gy nf ng l nh ni">&gt;&gt;&gt; LR <strong class="na ja">=</strong> stats.linregress(df_fb['daily_ret'].iloc[1:],df_spy['daily_ret'].iloc[1:])</span><span id="593b" class="ne lg iq na b gy nm ng l nh ni">&gt;&gt;&gt; LR<br/>LinregressResult(slope=0.14508921572501682, intercept=0.0002066678439426573, rvalue=0.41761756846081083, pvalue=2.8903149350900316e-33, stderr=0.011496201726453189)</span></pre><p id="f584" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">建立了线性回归模型。它有5个值，可以通过元组解包获得。这五个值是β、α、右值、p值和标准误差。</p><pre class="kp kq kr ks gt mz na nb nc aw nd bi"><span id="4474" class="ne lg iq na b gy nf ng l nh ni">&gt;&gt;&gt; beta,alpha,r_val,p_val,std_err <strong class="na ja">=</strong> LR</span><span id="87e8" class="ne lg iq na b gy nm ng l nh ni">&gt;&gt;&gt; beta<br/>0.14508921572501682</span><span id="0f5d" class="ne lg iq na b gy nm ng l nh ni">&gt;&gt;&gt; alpha<br/>0.0002066678439426573</span></pre><p id="a0a3" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">注意，CAPM说α接近于零，这里也可以看到。如果股票的表现和市场一样，贝塔值就高。因此，这里的β值很低，因为它们之间没有太大的关系。</p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><blockquote class="nw"><p id="d2a6" class="nx ny iq bd nz oa ob oc od oe of ms dk translated"><em class="og">这里指笔记本</em><a class="ae le" href="https://github.com/jayashree8/Finance_Trading_In_Python/blob/main/CAPM/CAPM.ipynb" rel="noopener ugc nofollow" target="_blank"><em class="og"/></a><em class="og">。</em></p></blockquote><blockquote class="oh oi oj"><p id="b6a8" class="lx ly ok lz b ma ol ka mc md om kd mf on oo mi mj op oq mm mn or os mq mr ms ij bi translated"><em class="iq">联系我:</em> <a class="ae le" href="https://www.linkedin.com/in/jayashree-domala8/" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> LinkedIn </em> </a></p><p id="4519" class="lx ly ok lz b ma mu ka mc md mv kd mf on mw mi mj op mx mm mn or my mq mr ms ij bi translated"><em class="iq">查看我的其他作品:</em> <a class="ae le" href="https://github.com/jayashree8" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> GitHub </em> </a></p></blockquote></div></div>    
</body>
</html>