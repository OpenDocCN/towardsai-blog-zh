<html>
<head>
<title>Automate Login With Python And Selenium</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python和Selenium自动登录</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/automate-login-with-python-and-selenium-207981484007?source=collection_archive---------0-----------------------#2022-07-18">https://pub.towardsai.net/automate-login-with-python-and-selenium-207981484007?source=collection_archive---------0-----------------------#2022-07-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8a93" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何自动登录网站</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c5ef1062cf34c31be74fb05137c37dd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GZ498BjllFadL7JESnQetA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@firmbee?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Firmbee.com</a>在<a class="ae ky" href="https://unsplash.com/s/photos/login-to-website?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="e847" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">登录过程自动化有助于访问网站上的信息。例如，您可能想要自动更新您的帐户设置，或者您可能想要抓取一些网页并提取一些数据，但您首先需要使用您的凭据登录。</p><p id="5fec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将展示一个Python程序，它将访问GitHub网站，输入登录凭证，并登录到该网站。</p><blockquote class="lv lw lx"><p id="4e2d" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">声明:本文仅用于教育目的。我们不鼓励任何人抓取网站，尤其是那些可能有条款和条件反对此类行为的网站。</p></blockquote><p id="0f3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">查看网页的HTML结构</strong></p><p id="8033" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们需要理解网页中HTML标签的结构和内容。对于这个项目，我们将使用GitHub登录网页(如下所示)。您可以通过选择此<a class="ae ky" href="https://github.com/login" rel="noopener ugc nofollow" target="_blank">链接</a>来访问此网页。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mc"><img src="../Images/e0375fe20ff9d8c6cba61ac2fc911882.png" data-original-src="https://miro.medium.com/v2/resize:fit:746/format:webp/1*ks6Ay8cWaUwb1qXQXQyLWQ.png"/></div></div></figure><p id="fea9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过找到输入字段、输入所需数据并单击登录按钮来登录该网站。要查找此网页上输入字段的HTML标记，请右键单击网页上的任意位置，从下拉列表中选择inspect，单击屏幕左上角带有HTML的箭头图标，然后单击用户名或电子邮件地址输入字段。这将导致显示以下屏幕。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi md"><img src="../Images/e3b65140d580d6979429725d022ede47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CZuR7KLtJQgHIt-2PaY1Ig.png"/></div></div></figure><p id="4d91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到用户名或电子邮件地址字段有一个id = "login_field "，密码字段有一个id = "password "。如果您向下滚动一点，您会看到登录按钮有一个name = "commit "。</p><p id="77e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，如果您想输入用户名，您可以遵循这些步骤。</p><p id="7361" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">1.创建一个包含您的用户名或电子邮件地址的变量。</p><p id="0411" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.找到用户名字段，其中id = "login_field "。</p><p id="4939" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.将用户名值发送到用户名字段。</p><p id="4880" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查找和输入用户名的代码如下所示:</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="9fe2" class="mj mk it mf b gy ml mm l mn mo">username <strong class="mf iu">=</strong> "your username"<br/>uname <strong class="mf iu">=</strong> driver<strong class="mf iu">.</strong>find_element("id", "login_field") <br/>uname<strong class="mf iu">.</strong>send_keys("username")</span></pre><p id="74e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于登录屏幕上的其他字段，将遵循类似的过程。</p><p id="fa54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">路线图</strong></p><p id="2aa9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的步骤将使用Python和Selenium来执行。</p><p id="2e1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">1.导入库。</p><p id="5a20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.为登录凭据创建变量。</p><p id="e7e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.安装Web驱动程序。</p><p id="3b5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">4.启动浏览器并打开网址。</p><p id="9e4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">5.输入登录凭据并登录。</p><p id="f5c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">6.验证登录状态。</p><h2 id="db36" class="mj mk it bd mp mq mr dn ms mt mu dp mv li mw mx my lm mz na nb lq nc nd ne nf bi translated">该计划</h2><p id="7275" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">目标:输入登录凭据并登录到网站。</p><p id="f099" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要开始，您需要安装selenium包。</p><p id="fea8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">安装硒包</strong></p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="45f8" class="mj mk it mf b gy ml mm l mn mo">!pip3 install selenium</span></pre><p id="6e69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">导入库</strong></p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="fc47" class="mj mk it mf b gy ml mm l mn mo"><strong class="mf iu">from</strong> selenium <strong class="mf iu">import</strong> webdriver<br/><strong class="mf iu">from</strong> selenium.webdriver.support.ui <strong class="mf iu">import</strong> WebDriverWait<br/><strong class="mf iu">from</strong> selenium.webdriver.common.by <strong class="mf iu">import</strong> By</span></pre><p id="4677" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">为登录凭证创建变量</strong></p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="215f" class="mj mk it mf b gy ml mm l mn mo">username <strong class="mf iu">=</strong> "your username or email address"<br/>password <strong class="mf iu">=</strong> "your password"</span></pre><p id="4fcd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">安装网络驱动</strong></p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="6d38" class="mj mk it mf b gy ml mm l mn mo">!apt<strong class="mf iu">-</strong>get update <br/>!apt install chromium<strong class="mf iu">-</strong>chromedriver<br/><br/>chrome_options <strong class="mf iu">=</strong> webdriver<strong class="mf iu">.</strong>ChromeOptions()<br/>chrome_options<strong class="mf iu">.</strong>add_argument('--headless')<br/>chrome_options<strong class="mf iu">.</strong>add_argument('--no-sandbox')<br/>chrome_options<strong class="mf iu">.</strong>add_argument('--disable-dev-shm-usage')<br/>driver <strong class="mf iu">=</strong> webdriver<strong class="mf iu">.</strong>Chrome('chromedriver',chrome_options<strong class="mf iu">=</strong>chrome_options)</span></pre><p id="afee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">web驱动程序是selenium的关键组件。web驱动程序是一个浏览器自动化框架，使用开源API。该框架通过接受命令、将这些命令发送到浏览器以及与应用程序交互来运行。</p><p id="2580" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Selenium支持多种web浏览器，并为每种浏览器提供web驱动程序。我已经为这个项目从selenium导入了chrome web驱动程序。或者，您可以下载特定浏览器的web驱动程序，并将其存储在易于访问的位置(C:\ users \ web driver \ chrome driver . exe)。您可以在这个<a class="ae ky" href="https://selenium-python.readthedocs.io/installation.html#:~:text=Selenium%20requires%20a-,driver,-to%20interface%20with" rel="noopener ugc nofollow" target="_blank">站点</a>下载您的浏览器的网络驱动程序。</p><p id="5c8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">启动浏览器，打开网址</strong></p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="2ad3" class="mj mk it mf b gy ml mm l mn mo">driver<strong class="mf iu">.</strong>get("https://github.com/login")</span></pre><p id="f10f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">输入登录凭证并登录</strong></p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="e2c7" class="mj mk it mf b gy ml mm l mn mo"># Find the username/email field and send the username to the input field.<br/>uname <strong class="mf iu">=</strong> driver<strong class="mf iu">.</strong>find_element("id", "login_field") <br/>uname<strong class="mf iu">.</strong>send_keys("username")<br/><br/># Find the password input field and send the password to the input field.<br/>pword <strong class="mf iu">=</strong> driver<strong class="mf iu">.</strong>find_element("id", "password") <br/>pword<strong class="mf iu">.</strong>send_keys("password")<br/><br/># Click sign in button to login the website.<br/>driver<strong class="mf iu">.</strong>find_element("name", "commit")<strong class="mf iu">.</strong>click()</span></pre><p id="470a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">验证登录状态</strong></p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="0c74" class="mj mk it mf b gy ml mm l mn mo"># Wait for login process to complete. <br/>WebDriverWait(driver<strong class="mf iu">=</strong>driver, timeout<strong class="mf iu">=</strong>10)<strong class="mf iu">.</strong>until(<br/>    <strong class="mf iu">lambda</strong> x: x<strong class="mf iu">.</strong>execute_script("return document.readyState === 'complete'")<br/>)<br/># Verify that the login was successful.<br/>error_message <strong class="mf iu">=</strong> "Incorrect username or password."</span><span id="59d4" class="mj mk it mf b gy nl mm l mn mo"># Retrieve any errors found.<em class="ly"> </em><br/>errors <strong class="mf iu">=</strong> driver<strong class="mf iu">.</strong>find_elements(By<strong class="mf iu">.</strong>CLASS_NAME, "flash-error")<br/><br/># When errors are found, the login will fail.<em class="ly"> </em><br/><strong class="mf iu">if</strong> any(error_message <strong class="mf iu">in</strong> e<strong class="mf iu">.</strong>text <strong class="mf iu">for</strong> e <strong class="mf iu">in</strong> errors): <br/>    print("[!] Login failed")<br/><strong class="mf iu">else</strong>:<br/>    print("[+] Login successful")</span></pre><p id="01e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[+]登录成功</p><p id="a0fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">关闭驱动器</strong></p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="f7eb" class="mj mk it mf b gy ml mm l mn mo">driver<strong class="mf iu">.</strong>close()</span></pre><p id="169f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将所有这些放在一起…</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="eca9" class="mj mk it mf b gy ml mm l mn mo">Install selenium packages.<br/>!pip3 install selenium</span><span id="c121" class="mj mk it mf b gy nl mm l mn mo"># Import the libraries.<br/><strong class="mf iu">from</strong> selenium <strong class="mf iu">import</strong> webdriver<br/><strong class="mf iu">from</strong> selenium.webdriver.support.ui <strong class="mf iu">import</strong> WebDriverWait<br/><strong class="mf iu">from</strong> selenium.webdriver.common.by <strong class="mf iu">import</strong> By</span><span id="c344" class="mj mk it mf b gy nl mm l mn mo"># Create variables for login credentials.<br/>username <strong class="mf iu">=</strong> "your username"<br/>password <strong class="mf iu">=</strong> "your password"</span><span id="d80d" class="mj mk it mf b gy nl mm l mn mo"># Install the chrome web driver from selenium. <br/>!apt<strong class="mf iu">-</strong>get update <br/>!apt install chromium<strong class="mf iu">-</strong>chromedriver<br/><br/>chrome_options <strong class="mf iu">=</strong> webdriver<strong class="mf iu">.</strong>ChromeOptions()<br/>chrome_options<strong class="mf iu">.</strong>add_argument('--headless')<br/>chrome_options<strong class="mf iu">.</strong>add_argument('--no-sandbox')<br/>chrome_options<strong class="mf iu">.</strong>add_argument('--disable-dev-shm-usage')<br/>driver <strong class="mf iu">=</strong> webdriver<strong class="mf iu">.</strong>Chrome('chromedriver',chrome_options<strong class="mf iu">=</strong>chrome_options)</span><span id="9f64" class="mj mk it mf b gy nl mm l mn mo"># Launch the browser and open the github URL in your web driver.<br/>driver<strong class="mf iu">.</strong>get("https://github.com/login")<br/><br/># Find the username/email field and send the username to the input field.<br/>uname <strong class="mf iu">=</strong> driver<strong class="mf iu">.</strong>find_element("id", "login_field") <br/>uname<strong class="mf iu">.</strong>send_keys("username")<br/><br/># Find the password input field and send the password to the input field.<br/>pword <strong class="mf iu">=</strong> driver<strong class="mf iu">.</strong>find_element("id", "password") <br/>pword<strong class="mf iu">.</strong>send_keys("password")<br/><br/># Click sign in button to login the website.<br/>driver<strong class="mf iu">.</strong>find_element("name", "commit")<strong class="mf iu">.</strong>click()</span><span id="b11d" class="mj mk it mf b gy nl mm l mn mo"># Wait for login process to complete.<em class="ly"> </em><br/>WebDriverWait(driver<strong class="mf iu">=</strong>driver, timeout<strong class="mf iu">=</strong>10)<strong class="mf iu">.</strong>until(<br/>    <strong class="mf iu">lambda</strong> x: x<strong class="mf iu">.</strong>execute_script("return document.readyState === 'complete'")<br/>)</span><span id="1e8f" class="mj mk it mf b gy nl mm l mn mo"># Verify that the login was successful.<br/>error_message <strong class="mf iu">=</strong> "Incorrect username or password."<br/># Retrieve any errors found.<em class="ly"> </em><br/>errors <strong class="mf iu">=</strong> driver<strong class="mf iu">.</strong>find_elements(By<strong class="mf iu">.</strong>CLASS_NAME, "flash-error")<br/><br/># When errors are found, the login will fail. <br/><strong class="mf iu">if</strong> any(error_message <strong class="mf iu">in</strong> e<strong class="mf iu">.</strong>text <strong class="mf iu">for</strong> e <strong class="mf iu">in</strong> errors): <br/>    print("[!] Login failed")<br/><strong class="mf iu">else</strong>:<br/>    print("[+] Login successful")</span><span id="5816" class="mj mk it mf b gy nl mm l mn mo"># Close the driver<br/>driver<strong class="mf iu">.</strong>close()</span></pre><p id="70b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就完成了登录过程的自动化。</p><p id="a18e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">非常感谢你阅读我的文章！如果您有任何意见或反馈，请在下面添加。</p><p id="8f0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑报名成为一名媒体成员。会员资格使你可以无限制地访问媒体上的所有报道。你可以通过这个链接注册<a class="ae ky" href="https://medium.com/@dniggl/membership" rel="noopener">https://medium.com/@dniggl/membership</a></p></div></div>    
</body>
</html>