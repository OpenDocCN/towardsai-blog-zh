<html>
<head>
<title>From Scatter Plot to Story: The Base Matplotlib Edition</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从散点图到故事:基础Matplotlib版</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/from-scatter-plot-to-story-the-base-matplotlib-edition-21e499dad421?source=collection_archive---------3-----------------------#2022-04-12">https://pub.towardsai.net/from-scatter-plot-to-story-the-base-matplotlib-edition-21e499dad421?source=collection_archive---------3-----------------------#2022-04-12</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="a6b5" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">通过增强散点图讲述完整的故事</h2></div><h1 id="8f4f" class="kj kk iu bd kl km kn ko kp kq kr ks kt ka ku kb kv kd kw ke kx kg ky kh kz la bi translated">概观</h1><p id="2c45" class="pw-post-body-paragraph lb lc iu ld b le lf jv lg lh li jy lj lk ll lm ln lo lp lq lr ls lt lu lv lw in bi translated">散点图是许多分析师和数据专家的重要工具。它们说明了两个(或更多)变量之间的关系。它们很快就会生成。它们很容易解释。当准备正确时，许多数据(和所谓的非数据)人会很容易理解它们。</p><p id="1f17" class="pw-post-body-paragraph lb lc iu ld b le lx jv lg lh ly jy lj lk lz lm ln lo ma lq lr ls mb lu lv lw in bi translated">准备散点图时，您可以让单个图讲述一个完整的故事。做得好的话，这可能意味着你的观众会有所反应(在他们的脑海中):</p><blockquote class="mc"><p id="4b66" class="md me iu bd mf mg mh mi mj mk ml lw dk translated">我们知道现在该做什么…</p></blockquote><p id="b2dc" class="pw-post-body-paragraph lb lc iu ld b le mm jv lg lh mn jy lj lk mo lm ln lo mp lq lr ls mq lu lv lw in bi translated">这篇文章将展示如何将你的可视化从一个简单的散点图变成一个完整的故事。这是Matplotlib版本。另一篇文章将在Seaborn展示同样的内容。 <a class="ae mr" href="https://medium.com/geekculture/from-scatter-plot-to-story-stata-edition-2d4658c7dbb3" rel="noopener">还有一个版本在Stata </a>中展示了这个过程。</p><h1 id="7056" class="kj kk iu bd kl km kn ko kp kq kr ks kt ka ku kb kv kd kw ke kx kg ky kh kz la bi translated">背景</h1><p id="68c8" class="pw-post-body-paragraph lb lc iu ld b le lf jv lg lh li jy lj lk ll lm ln lo lp lq lr ls lt lu lv lw in bi translated">您的公司要求您帮助决定应该为其车队购买什么车辆。利用Stata提供的1978年汽车数据(<a class="ae mr" href="https://towardsdatascience.com/three-datasets-i-often-use-as-examples-c70ec5b2f793" rel="noopener" target="_blank">，我之前写过关于</a>)，我们还将假设自己身处20世纪70年代。</p><p id="3fbc" class="pw-post-body-paragraph lb lc iu ld b le lx jv lg lh ly jy lj lk lz lm ln lo ma lq lr ls mb lu lv lw in bi translated">我们的数据由74个观察值组成。每次观察都是针对一辆车，我们知道一系列重要的数据，包括品牌、价格、效率(mpg)和其他因素。</p><p id="0e88" class="pw-post-body-paragraph lb lc iu ld b le lx jv lg lh ly jy lj lk lz lm ln lo ma lq lr ls mb lu lv lw in bi translated">假设车队管理人员已经将16英里每加仑设定为最低车队车辆效率要求，将29英里每加仑设定为可选效率标准。我们的任务是找到在最佳效率标准之上最具成本效益且重量最大的车辆。</p><h1 id="55c8" class="kj kk iu bd kl km kn ko kp kq kr ks kt ka ku kb kv kd kw ke kx kg ky kh kz la bi translated">入门指南</h1><p id="c527" class="pw-post-body-paragraph lb lc iu ld b le lf jv lg lh li jy lj lk ll lm ln lo lp lq lr ls lt lu lv lw in bi translated">许多读者可能会意识到，仅仅使用<code class="fe ms mt mu mv b">pandas</code>的几行代码，在<code class="fe ms mt mu mv b">matplotlib</code>的帮助下，就可以生成一个简单的散点图(很容易):</p><pre class="mw mx my mz gu na mv nb nc aw nd bi"><span id="f17e" class="ne kk iu mv b gz nf ng l nh ni"># Standard Import(s)<br/>import pandas as pd<br/>import matplotlib.pyplot as plt</span><span id="d309" class="ne kk iu mv b gz nj ng l nh ni"># Load Data<br/>df = pd.read_stata('<a class="ae mr" href="http://www.stata-press.com/data/r15/auto2.dta'" rel="noopener ugc nofollow" target="_blank">http://www.stata-press.com/data/r15/auto2.dta'</a>)</span><span id="8f54" class="ne kk iu mv b gz nj ng l nh ni"># Creating a plot<br/>df.plot('weight','mpg',kind='scatter')</span></pre><p id="55f0" class="pw-post-body-paragraph lb lc iu ld b le lx jv lg lh ly jy lj lk lz lm ln lo ma lq lr ls mb lu lv lw in bi translated">对于结果…</p><figure class="mw mx my mz gu nl gi gj paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gi gj nk"><img src="../Images/d353e03ce52c4ad0471c92b5e6420689.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VKwm3apJd5NXGcbwP_NK0Q.png"/></div></div><figcaption class="ns nt gk gi gj nu nv bd b be z dk translated">作者的再现。使用此处指定的数据和代码。</figcaption></figure><p id="a722" class="pw-post-body-paragraph lb lc iu ld b le lx jv lg lh ly jy lj lk lz lm ln lo ma lq lr ls mb lu lv lw in bi translated">在我们称这个情节为一个完整的、自成一体的故事之前，我们有几个(许多)调整。完整独立的故事是目标。</p><h1 id="268c" class="kj kk iu bd kl km kn ko kp kq kr ks kt ka ku kb kv kd kw ke kx kg ky kh kz la bi translated">更新尺寸、标签和主题</h1><p id="19f2" class="pw-post-body-paragraph lb lc iu ld b le lf jv lg lh li jy lj lk ll lm ln lo lp lq lr ls lt lu lv lw in bi translated">我们能做的第一件事就是更新量表。对于大多数演示格式来说，宽高比通常更好(宽幻灯片，以及您在pdf报告上看到的半页左右的页面，等等)。方便的<code class="fe ms mt mu mv b">figsize=()</code>选项更新图形尺寸。</p><p id="1ead" class="pw-post-body-paragraph lb lc iu ld b le lx jv lg lh ly jy lj lk lz lm ln lo ma lq lr ls mb lu lv lw in bi translated">下一次迭代还将添加更多有意义和明确的轴标题，如<code class="fe ms mt mu mv b">xlabel</code>和<code class="fe ms mt mu mv b">ylabel</code>。</p><p id="ff5c" class="pw-post-body-paragraph lb lc iu ld b le lx jv lg lh ly jy lj lk lz lm ln lo ma lq lr ls mb lu lv lw in bi translated">为了探索改变到预定义主题的选项，考虑探索来自<code class="fe ms mt mu mv b">plt.style.available</code>的输出。在决定了应用哪个主题后，我们将继续使用模仿538风格的流行主题，用<code class="fe ms mt mu mv b">plt.style.use('fivethirtyeight')</code>来做。</p><pre class="mw mx my mz gu na mv nb nc aw nd bi"><span id="0f14" class="ne kk iu mv b gz nf ng l nh ni"># Standard Import(s)<br/>import pandas as pd<br/>import matplotlib.pyplot as plt</span><span id="1314" class="ne kk iu mv b gz nj ng l nh ni"># Load Data<br/>df = pd.read_stata('<a class="ae mr" href="http://www.stata-press.com/data/r15/auto2.dta'" rel="noopener ugc nofollow" target="_blank">http://www.stata-press.com/data/r15/auto2.dta'</a>)</span><span id="a32b" class="ne kk iu mv b gz nj ng l nh ni"># Generate scatter with updated dimensions, labels, and theme<br/>plt.style.use('fivethirtyeight')<br/>df.plot('weight', 'mpg', <br/>        kind='scatter', <br/>        xlabel='Mileage (mpg)', <br/>        ylabel='Weight (lbs.)',<br/>        figsize=(8,4))</span></pre><p id="9509" class="pw-post-body-paragraph lb lc iu ld b le lx jv lg lh ly jy lj lk lz lm ln lo ma lq lr ls mb lu lv lw in bi translated">对于结果…</p><figure class="mw mx my mz gu nl gi gj paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gi gj nw"><img src="../Images/89c96bc1979e7fbe24a82367a7917c62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e8QbsVuBIdpF5pBat3jOGA.png"/></div></div><figcaption class="ns nt gk gi gj nu nv bd b be z dk translated">作者的再现。使用此处指定的数据和代码。</figcaption></figure><h1 id="5f05" class="kj kk iu bd kl km kn ko kp kq kr ks kt ka ku kb kv kd kw ke kx kg ky kh kz la bi translated">添加参考线</h1><p id="f88c" class="pw-post-body-paragraph lb lc iu ld b le lf jv lg lh li jy lj lk ll lm ln lo lp lq lr ls lt lu lv lw in bi translated">这些参考线是我们阐述故事的关键方面。它们鲜艳的颜色让读者觉得很显眼，就好像在说“嘿，看着我！”在本例中，我们添加了带有<code class="fe ms mt mu mv b">plt.axhline()</code>的参考线。一个附加的技术是使用<code class="fe ms mt mu mv b">plt.txt()</code>用额外的有用信息来注释这些行。</p><pre class="mw mx my mz gu na mv nb nc aw nd bi"><span id="3cf3" class="ne kk iu mv b gz nf ng l nh ni"># Code from above<br/>df.plot('weight', <br/>        'mpg', <br/>        kind='scatter', <br/>        xlabel='Mileage (mpg)', <br/>        ylabel='Weight (lbs.)', <br/>        figsize=(8,5))</span><span id="7b05" class="ne kk iu mv b gz nj ng l nh ni"># Adding reference lines<br/>plt.axhline(29, color='green', linewidth=1)<br/>plt.axhline(16, color='red', linewidth=1)</span><span id="7e25" class="ne kk iu mv b gz nj ng l nh ni"># Creating annotations<br/>plt.text(2400, 30,<br/>         "Green Line Indicates Optimal Efficiency Requirements", <br/>         color='green', <br/>         fontsize=12)<br/>plt.text(1700, 14,<br/>         "Red Line Indicates Minimum Efficiency Requirements", <br/>         color='red', <br/>         fontsize=12)</span></pre><p id="335d" class="pw-post-body-paragraph lb lc iu ld b le lx jv lg lh ly jy lj lk lz lm ln lo ma lq lr ls mb lu lv lw in bi translated">对于结果(显示默认样式)…</p><figure class="mw mx my mz gu nl gi gj paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gi gj nx"><img src="../Images/6e535a55860150729188ffc58a879136.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EDuJI4TDw8scte3m3DWudw.png"/></div></div><figcaption class="ns nt gk gi gj nu nv bd b be z dk translated">作者的再现。使用此处指定的数据和代码。</figcaption></figure><h1 id="acd0" class="kj kk iu bd kl km kn ko kp kq kr ks kt ka ku kb kv kd kw ke kx kg ky kh kz la bi translated">注释特定的数据点</h1><p id="e520" class="pw-post-body-paragraph lb lc iu ld b le lf jv lg lh li jy lj lk ll lm ln lo lp lq lr ls lt lu lv lw in bi translated">故事差不多完成了。但是，我们到底应该买哪辆车还不是很清楚。我们不确定哪些点代表哪辆车。让我们用注释来修正这个遗漏。</p><p id="7dc5" class="pw-post-body-paragraph lb lc iu ld b le lx jv lg lh ly jy lj lk lz lm ln lo ma lq lr ls mb lu lv lw in bi translated">注释指出并解释具体的数据点。有时注释帮助读者理解另一个附加的上下文。例如，上面我们注释了参考线。下面我们将为丰田卡罗拉添加一个注释，用<code class="fe ms mt mu mv b">plt.text()</code>添加文本，用<code class="fe ms mt mu mv b">plt.annotate()</code>和<code class="fe ms mt mu mv b">arrowprops=()</code>选项添加一个有用的箭头。</p><p id="68ce" class="pw-post-body-paragraph lb lc iu ld b le lx jv lg lh ly jy lj lk lz lm ln lo ma lq lr ls mb lu lv lw in bi translated">最后一个代码示例和最后一个视觉效果也添加了带有一些基本字体格式建议的标题。</p><pre class="mw mx my mz gu na mv nb nc aw nd bi"><span id="bdb1" class="ne kk iu mv b gz nf ng l nh ni"># Code from above<br/>plt.style.use('fivethirtyeight')</span><span id="6e45" class="ne kk iu mv b gz nj ng l nh ni">df.plot('weight', <br/>        'mpg',<br/>        kind='scatter', <br/>        xlabel='Mileage (mpg)', <br/>        ylabel='Weight (lbs.)', <br/>        figsize=(8,4))</span><span id="023e" class="ne kk iu mv b gz nj ng l nh ni">plt.axhline(29, color='green', linewidth=1)<br/>plt.axhline(16, color='red', linewidth=1)<br/>plt.text(2400, 30, <br/>         "Green Line Indicates Optimal Efficiency Requirements", <br/>         color='green', <br/>         fontsize=14)<br/>plt.text(1700, 14, <br/>         "Red Line Indicates Minimum Efficiency Requirements", <br/>         color='red', <br/>         fontsize=11)</span><span id="c836" class="ne kk iu mv b gz nj ng l nh ni"># Adding an annotation with an arrow 'prop'<br/>plt.text(2200, 36, 'Toyota Corolla (31mpg 2,200lbs)',<br/>         color='green',<br/>         fontsize=14)<br/>plt.annotate('Heaviest/Least expensive above optimal',<br/>             xy=(2200, 31), <br/>             xytext=(2200, 33.75), <br/>             color='green', <br/>             arrowprops={'arrowstyle':'-&gt;',<br/>                         'linewidth':2,<br/>                         'color':'green'})</span><span id="b5a8" class="ne kk iu mv b gz nj ng l nh ni"># Creating the title and the subtitle<br/>plt.suptitle('The ${Best \ Value}$ For Fleet Purchases',fontsize=13)<br/>plt.title('A Preliminary Analysis',fontsize=12)</span></pre><p id="e34e" class="pw-post-body-paragraph lb lc iu ld b le lx jv lg lh ly jy lj lk lz lm ln lo ma lq lr ls mb lu lv lw in bi translated">为了最终的结果…</p><figure class="mw mx my mz gu nl gi gj paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gi gj ny"><img src="../Images/3b9524e2b63a853d8c6723e3310c777c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EdN5bKeIjiu-07e_LlQLgQ.png"/></div></div><figcaption class="ns nt gk gi gj nu nv bd b be z dk translated">作者的再现。使用此处指定的数据和代码。</figcaption></figure><p id="6392" class="pw-post-body-paragraph lb lc iu ld b le lx jv lg lh ly jy lj lk lz lm ln lo ma lq lr ls mb lu lv lw in bi translated">正如我在这篇文章的同伴中所写的(在Seaborn和Stata中演示了相同的散点图修改)，没有视觉是完美的。这里有改进的余地。</p><p id="78d1" class="pw-post-body-paragraph lb lc iu ld b le lx jv lg lh ly jy lj lk lz lm ln lo ma lq lr ls mb lu lv lw in bi translated">将这篇文章加入书签，作为快速参考和下一次数据可视化的灵感来源。</p><h1 id="9212" class="kj kk iu bd kl km kn ko kp kq kr ks kt ka ku kb kv kd kw ke kx kg ky kh kz la bi translated">感谢阅读</h1><p id="6326" class="pw-post-body-paragraph lb lc iu ld b le lf jv lg lh li jy lj lk ll lm ln lo lp lq lr ls lt lu lv lw in bi translated">你准备好了解更多关于数据科学职业的信息了吗？我进行一对一的职业辅导，并有一份每周电子邮件列表，帮助专业求职者获取数据。联系我了解更多信息。</p><p id="effb" class="pw-post-body-paragraph lb lc iu ld b le lx jv lg lh ly jy lj lk lz lm ln lo ma lq lr ls mb lu lv lw in bi translated">感谢阅读。把你的想法和主意发给我。你可以写信只是为了说声嗨。如果你真的需要告诉我是怎么错的，我期待着尽快和你聊天。推特:<a class="ae mr" href="https://twitter.com/adamrossnelson" rel="noopener ugc nofollow" target="_blank">@ adamrossnelson</a>LinkedIn:<a class="ae mr" href="https://www.linkedin.com/in/arnelson/" rel="noopener ugc nofollow" target="_blank">亚当罗斯尼尔森</a>。</p></div></div>    
</body>
</html>