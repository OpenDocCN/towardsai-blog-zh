<html>
<head>
<title>Using Computer Vision and Topic Modeling to Increase Brand Engagement on Instagram</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用计算机视觉和主题建模增加Instagram上的品牌参与度</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/using-computer-vision-and-topic-modeling-to-increase-brand-engagement-on-instagram-the-case-of-ff40a891b659?source=collection_archive---------3-----------------------#2020-12-06">https://pub.towardsai.net/using-computer-vision-and-topic-modeling-to-increase-brand-engagement-on-instagram-the-case-of-ff40a891b659?source=collection_archive---------3-----------------------#2020-12-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="ce27" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/computer-vision" rel="noopener ugc nofollow" target="_blank">计算机视觉</a>，<a class="ae ep" href="https://towardsai.net/p/category/programming" rel="noopener ugc nofollow" target="_blank">编程</a></h2><div class=""/><figure class="gl gn ka kb kc kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi jz"><img src="../Images/a6a056f5bfb1d9fe2db8968008a25348.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1pUefFzTGhdyRfX_"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">照片由<a class="ae ko" href="https://unsplash.com/@gpthree?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">乔治·帕甘三世</a>在<a class="ae ko" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="63a4" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">由德克萨斯州奥斯汀西湖高中的Aadit Barua<a class="ln lo ep" href="https://medium.com/u/ad2f68e48b8f?source=post_page-----ff40a891b659--------------------------------" rel="noopener" target="_blank">和Josh Barua</a><a class="ln lo ep" href="https://medium.com/u/d86df2a42e5a?source=post_page-----ff40a891b659--------------------------------" rel="noopener" target="_blank">撰写。</a></p><p id="741e" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">参与度是一种稀缺商品，每个品牌都在Instagram这样的在线平台上争夺。我们如何利用机器学习来帮助一个品牌提高其在Instagram上的参与度？什么类型的图片会吸引注意力和参与度？为了回答这个问题，我们使用计算机视觉(又名图像分析)和主题建模来确定哪些主题或话题与吸引注意力的图片相关联。我们研究Zara，一个销售流行服装和配饰的著名西班牙时尚品牌，作为我们分析的用例。我们问一个简单但重要的问题:Zara的Instagram帖子中的哪些话题增加或减少了参与度？</p><p id="86f6" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们的分析流程图如图1所示。首先，我们收集Instagram帖子，包括帖子中图片的URL以及赞和评论的数量，这可以作为参与度的代表。然后我们用谷歌计算机视觉获取描述每张图片内容的标签。随后，我们在标签上执行主题建模，以识别每个帖子中的主要主题及其比例。最后，我们分析了高参与度和低参与度帖子中主题比例的差异。</p><figure class="lq lr ls lt gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi lp"><img src="../Images/197fbaa4ee583fcc4e9c47c7fa49b736.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nWAuLfQY0YiRzC_OhmsXAA.png"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">图1:我们方法的流程图</figcaption></figure><p id="bb7c" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kr jd">刮Instagram帖子</strong></p><p id="a87a" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们用的Instagram刮刀如下图。我们很难一次收到500多个帖子。此外，虽然出于情感分析的目的获得实际评论很好，但当我们试图获取评论时，却被Instagram阻止了。也许可以使用带有动态IP地址的VPN来解决这个问题，但是我们继续使用赞数作为参与度的代理。在我们的数据集中，一个帖子的平均点赞数、最小点赞数和最大点赞数分别为65k、15k和293k。标准偏差为45k。</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="7bdd" class="lz ma it lv b gy mb mc l md me">#!/usr/bin/python3.6<br/>import instaloader<br/>import  time<br/>import  pandas as pd<br/>from datetime import datetime<br/>from itertools import dropwhile, takewhile</span><span id="d085" class="lz ma it lv b gy mf mc l md me">L = instaloader.Instaloader()<br/>df=pd.DataFrame()<br/>posts = instaloader.Profile.from_username(L.context, 'zara').get_posts()<br/>i=0<br/>for post in posts:<br/>    df = df.append({'Caption': post.caption, 'Likes': post.likes, 'URL': post.url  }, ignore_index=True)<br/>    df.to_excel("zara.xlsx",index=False)<br/>    i = i+1<br/>    if i&gt;500:<br/>        break<br/>print("Written to zara.xlsx file")</span></pre><p id="f035" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kr jd">计算机视觉拯救人类</strong></p><p id="7cfe" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">使用卷积神经网络的计算机视觉使我们能够自动计算出图片的内容。访问谷歌云计算机视觉服务的代码如下所示。请注意，您需要使用Google cloud创建一个帐户，并获取您的凭据文件，我们在下面的代码中将其留空。</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="9750" class="lz ma it lv b gy mb mc l md me">#!/usr/bin/python3.6<br/># pip3.6 install --user google-cloud<br/># pip3.6 install --user google-cloud-vision<br/># conda install -c conda-forge google-cloud-vision</span><span id="1ef8" class="lz ma it lv b gy mf mc l md me">import xlrd<br/>from google.cloud import vision<br/>import os<br/>import pandas as pd</span><span id="8ca8" class="lz ma it lv b gy mf mc l md me">Application_Credentials = "insert your own credentials file from google vision"<br/>os.environ["GOOGLE_APPLICATION_CREDENTIALS"] = Application_Credentials<br/>client = vision.ImageAnnotatorClient()<br/>image = vision.types.Image()</span><span id="48a8" class="lz ma it lv b gy mf mc l md me">loc = ("insert path to excel file w/ photo links")<br/>wb = xlrd.open_workbook(loc)<br/>sheet = wb.sheet_by_index(0)<br/>sheet.cell_value(0, 0)<br/>df = pd.DataFrame()<br/># loop through every url, retreive the image and send to google vision<br/>for i in range(sheet.nrows):<br/>    image_src_temp = sheet.cell_value(i, 0)<br/>    image.source.image_uri = image_src_temp<br/>    response = client.label_detection(image=image)<br/>    labels = response.label_annotations<br/>    l = []<br/>    for label in labels:<br/>        l.append(label.description)<br/>    s = ' '.join(l)<br/>    print("--")<br/>    print(s)<br/>    df = df.append({'URL': image_src_temp, 'Labels': s}, ignore_index=True)<br/>df.to_excel("insert path to save location",index=False)</span></pre><p id="b7d6" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">表1显示了Zara insta gram帖子的Google cloud vision服务的示例输出。每一行都显示了谷歌为我们从Zara的Instagram页面抓取的图片URL创建的标签。</p><figure class="lq lr ls lt gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi mg"><img src="../Images/74f9d004b6c9dc0bfc3b135ac217f04d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I4rIOloyKiOyBh0Yq68RBg.png"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">表1:谷歌计算机视觉的样本输出</figcaption></figure><p id="bf2e" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kr jd">个别词语还是话题？</strong></p><p id="dfab" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们可以直接使用来自vision analytics的单词(标签)来找出哪些单词与高参与度和低参与度相关联。为此，我们将简单地计算帖子中每个词的tf-idf得分，并检查与高参与度和低参与度帖子相关联的高值。但是处理单个单词会适得其反，因为它们不能给我们提供一个高层次的视角来判断什么有用，什么没用。因此，我们求助于主题建模来找出Zara发布的图片中的主导主题。我们使用了潜在的狄利克雷分配(LDA)方法。LDA代码如下所示。</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="3b6d" class="lz ma it lv b gy mb mc l md me">#!/usr/bin/python3.6<br/>#pip3.6 install --user lda<br/>import os, csv, nltk, lda<br/>import pandas as pd<br/>import numpy as np<br/>from nltk.tokenize import PunktSentenceTokenizer, RegexpTokenizer<br/>from nltk.corpus import stopwords<br/>from nltk.stem import WordNetLemmatizer<br/>from scipy import sparse<br/>from sklearn.feature_extraction.text import TfidfVectorizer<br/>from sklearn.metrics.pairwise import cosine_similarity<br/>from sklearn.feature_extraction.text import CountVectorizer</span><span id="cd08" class="lz ma it lv b gy mf mc l md me">from nltk.tokenize import PunktSentenceTokenizer,RegexpTokenizer<br/>from nltk.corpus import stopwords<br/>from nltk.stem import WordNetLemmatizer<br/>import time        <br/>start_time = time.time()</span><span id="fbcc" class="lz ma it lv b gy mf mc l md me">nltk.download('stopwords')<br/>nltk.download('punkt')<br/>nltk.download('wordnet')<br/>reviews_df=pd.read_excel("zara_labels.xlsx",encoding='utf8', errors='ignore')</span><span id="a35a" class="lz ma it lv b gy mf mc l md me">#checking for nulls if present any<br/>print("Number of rows with any of the empty columns:")<br/>print(reviews_df.isnull().sum().sum())<br/>reviews_df=reviews_df.dropna()</span><span id="5a95" class="lz ma it lv b gy mf mc l md me">id_name = input('column name for id: ')<br/>text_review = input('column name for text: ')<br/>ntopics= input('number of latent topics: ');</span><span id="b675" class="lz ma it lv b gy mf mc l md me">word_tokenizer=RegexpTokenizer(r'\w+')<br/>wordnet_lemmatizer = WordNetLemmatizer()<br/>stopwords_nltk=set(stopwords.words('english'))</span><span id="fa53" class="lz ma it lv b gy mf mc l md me">def tokenize_text(version_desc):<br/>    lowercase=version_desc.lower()<br/>    text = wordnet_lemmatizer.lemmatize(lowercase)<br/>    tokens = word_tokenizer.tokenize(text)<br/>    return tokens</span><span id="8029" class="lz ma it lv b gy mf mc l md me">vec_words = CountVectorizer(tokenizer=tokenize_text,stop_words=stopwords_nltk,decode_error='ignore')<br/>total_features_words = vec_words.fit_transform(reviews_df[text_review])</span><span id="f113" class="lz ma it lv b gy mf mc l md me">print(total_features_words.shape)</span><span id="b3b6" class="lz ma it lv b gy mf mc l md me">model = lda.LDA(n_topics=int(ntopics), n_iter=1000, random_state=1)<br/>model.fit(total_features_words)</span><span id="deaa" class="lz ma it lv b gy mf mc l md me">topic_word = model.topic_word_<br/>doc_topic=model.doc_topic_<br/>doc_topic=pd.DataFrame(doc_topic)<br/>reviews_df=reviews_df.join(doc_topic)<br/>document_topic_dist=pd.DataFrame()</span><span id="b58d" class="lz ma it lv b gy mf mc l md me">for i in range(int(ntopics)):<br/>    topic="topic_"+str(i)<br/>    document_topic_dist[topic]=reviews_df.groupby([id_name])[i].mean()</span><span id="aff4" class="lz ma it lv b gy mf mc l md me">document_topic_dist=document_topic_dist.reset_index()<br/>topics=pd.DataFrame(topic_word)<br/>topics.columns=vec_words.get_feature_names()<br/>topics1=topics.transpose()<br/>topics1.to_excel("topic_word_dist.xlsx")<br/>document_topic_dist.to_excel("document_topic_dist.xlsx",index=False)</span></pre><p id="89f1" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">最初，我们选择了五个主题，但最终确定了四个，如表2、3、4和5所示。</p><figure class="lq lr ls lt gt kd gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/c2a4d12d6ecffd8032b6bb5e476b3bd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1038/format:webp/1*CaPVVcVzjg-we-FxfHafTA.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">表2:属于第一个话题(服装)的单词</figcaption></figure><figure class="lq lr ls lt gt kd gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/e3cead5f21239b020d101c4226a5e32f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*XrMDn28OvImOdrX1jN7Gng.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">表3:属于第二主题(正文)的单词</figcaption></figure><figure class="lq lr ls lt gt kd gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/8b3b038e0f80e4a6d3c2cb0e1b63ad9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*Ne4siC3BBGnvAaoLA-UTsQ.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">表4:属于第三个话题(脸)的词</figcaption></figure><figure class="lq lr ls lt gt kd gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/f68260912d42e4fcc00ce7c5ec66ba91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*0tRuwzNLrJYPsKBUitOw8w.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">表5:属于第四主题的单词(附件/背景)</figcaption></figure><p id="b80f" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">请注意，前三个主题非常好。第一个话题是<em class="ml">服装</em>，第二个和第三个话题分别涉及<em class="ml">身材</em>和<em class="ml">脸型</em>。第四个有点乱，因为主题建模无法明确区分<em class="ml">配件</em>(如包、帽子等。)和<em class="ml">背景</em>(例如汽车、窗户等。).当我们最初尝试五个主题时，第四个主题仍然有点复杂，但是<em class="ml">主体</em>主题被分成两个相似的词，这是没有用的。结果，我们最终使用了四个主题。</p><p id="7abf" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">一旦我们为每个主题选择了名称，我们就分析了帖子中主题的比例以及帖子收到的赞数，如表6所示。每一行的比例加起来是1。我们小心翼翼地确保帖子在Instagram上发布了相当长的时间，尽管在预测参与度的统计模型中，我们可以使用帖子的持续时间作为控制变量。在我们的数据中，帖子id(帖子年表的代理)和赞数之间没有显著的相关性。</p><figure class="lq lr ls lt gt kd gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/44e875fb049fd6d32e53410001e3b591.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/format:webp/1*QFhcN2iMHzOS5Cqd3GWR6w.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">表6:帖子中的主题比例和点赞数</figcaption></figure><p id="1684" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kr jd">将话题与互动联系起来</strong></p><p id="16ba" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们想分析高参与度和低参与度帖子中主题比例的差异。我们计算了参与度最高和最低四分位数的帖子的平均主题比例，如表7所示。对于额外的分析，我们还可以建立一个简单的预测模型，以敬业度为因变量，主题为自变量。</p><figure class="lq lr ls lt gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi mn"><img src="../Images/a3974df9381ce724ee5fa1f31054e7be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W26X36g9_A2jQOR2j7_30A.png"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">表7:参与度最高和最低四分位数中的平均主题比例</figcaption></figure><p id="bf88" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">虽然我们没有分享来自Instagram的实际图片以避免版权问题，但从表7中，我们可以看到高参与度的帖子在图片中具有更高比例的服装和身体相关主题，而较少出现面部和配饰/背景。当然，我们并不是说无脸或无头的身体会增加参与度！一些最高参与度的帖子展示了一个人的全貌，但通常不会只关注面部。事实上，我们发现放大人脸的帖子往往参与度较低。类似地，包含背景，如汽车、房间和乐器，往往与较低的参与度相关。配饰是一个有趣的项目，因为孤立地展示一个配饰，比如一个包，似乎不会吸引观众；和人一起展示的话可能会有更好的机会。</p><p id="95a8" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kr jd">最终想法</strong></p><p id="ea24" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">通过使用计算机视觉和主题建模，我们提出了一种方法来分析Instagram帖子中的哪些主题与较高或较低的参与度相关联。图像分析组件的一个限制是，谷歌云convnets是在大量通用图片上训练的。使用包括特定时尚图片的大型训练数据集将增加图像分析的准确性。使用LDA的传统主题建模结果相当不错，但不是100%令我们满意。也许使用单词嵌入(word2Topic)的更高级的主题建模技术将在主题之间提供更清晰的分离。最后，拥有真实的评论将使得进行情感分析成为可能，从情感分析中，我们可以知道哪些主题导致了具有更积极情感的评论。我们希望您能尝试我们方法的更高级版本。玩得开心！</p></div></div>    
</body>
</html>