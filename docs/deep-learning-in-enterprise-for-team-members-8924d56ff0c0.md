# 团队成员在企业中的深度学习

> 原文：<https://pub.towardsai.net/deep-learning-in-enterprise-for-team-members-8924d56ff0c0?source=collection_archive---------2----------------------->

![](img/a6ee252f237f3b8fcbf49823339c5217.png)

约翰·施诺布里奇在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

## 深度学习

# 每个深度学习团队都应该遵循的必要规则

在这篇文章中，我试图解决开发团队在行业中犯的一些战略错误，并试图提出一个可以节省大量时间和资源的清单。这些大多不是技术细节(那是改天的话题)，而是简单、有用的实用例程，应该嵌入每个深度学习企业的文化 DNA 中。

## 为你的任务使用正确的工具。

你的源代码是一个基于规则的系统，有人称之为软件 1.0。虽然神经网络是软件 2.0，但我会单独写一篇关于软件 2.0 的文章。但它们之间最重要的区别是，软件 2.0 天生就具有*适应性*。

如果你没有利用这些模型的灵活性来为自己谋利，你就没有充分利用深度学习，为此，你用来训练神经网络的库的选择很重要。

> 使用 [PyTorch](https://pytorch.org/) 。

[PyTorch](https://pytorch.org/) 和 [TensorFlow](https://www.tensorflow.org/) 是深度学习最常用的库。 [PyTorch](https://pytorch.org/) 的灵活性和适应性是我合作过的任何其他库无法比拟的。 [Torch](http://torch.ch/) 和后来的 [PyTorch](https://pytorch.org/) 是由开发深度学习本身的社区设计的，并且在我看来， [PyTorch](https://pytorch.org/) 是唯一一个将深度学习的精华带出来的库。*显而易见，神经网络是一个数学函数*；如果你不得不使用 [TensorFlow](https://www.tensorflow.org/) (例如在你的 android 应用中)，你可以在 [PyTorch](https://pytorch.org/) 的服务器上动态训练你的神经网络，并将参数——只是一堆数字——部署到应用的 [TensorFlow](https://www.tensorflow.org/) 或 [Azure](https://azure.microsoft.com/en-us/) 后端。

> Git 不是为跟踪软件 2.0 而设计的

所以假设你写了一个训练深度网络的源代码。每次你"*执行"*你的训练代码(软件 1.0)，你的神经网络(软件 2.0)就发生变化。在 CT 中检测肿瘤的源代码与在自动驾驶汽车的数据馈送中检测行人的代码几乎相同。唯一的数据集不同。Git 不是为了跟踪数据集、注释集或代码执行次数而设计的。目前， [DVC](https://dvc.org/) 是为数不多的用来跟踪你的软件 2.0 的工具之一。如果你知道更好的版本控制库，请告诉我，我会更新这篇文章。

> 在 Dockers 中运行您的代码

深度学习库和工具还不成熟。默认行为随着每个主要版本而变化。Dockers 帮助你及时保存你的代码，并确保你的代码从现在起两年后像今天一样运行。

> 如果您还没有数据集编译器，请使用它

数据管理是必须建立的最重要的单元。数据集编译器是一个独立的软件，它可以跟踪所有的数据、注释和预测(是的，您还需要跟踪每个模型的预测)，并且根据您正在运行的实验，它会为您编译一个新的数据集，您可以将其部署在服务器上进行训练。我会写一个关于这个模块应该是什么样子的单独的帖子。请让我知道这样一个模块是否有完整的功能，我会在这里放一个链接。

> 直觉来自你的日志

拥有一个统一的工具来管理您所有的实验结果、超参数和日志。一个好的可视化工具将所有这些信息打包在一起，让您充分利用您的数据和模型。我个人喜欢 [w & b](https://www.wandb.com/) 。但是也有其他的博客，所以选择你最喜欢的吧。

> 选择适合您任务的数据格式

JSON、、 [MongoDB](https://www.mongodb.com/) 、 [pandas](https://pandas.pydata.org/) 以及更多的库为数据提供了简单的格式。每一种都有自己的优缺点。如果你的文件太大，Yaml 会很慢，但是比 [JSON](https://www.json.org/json-en.html) 更容易手动修改。在开始编码之前，确保你理解你的任务需要什么。

## 衡量是关键。

适当的度量(在文档化之后)是 ML 企业中最被忽视的任务。

> 如果你没有衡量它，你就没有改进它

每次定义新任务时，*必须*发出的第一张票是一个**“验证集”的集合如果你不知道你的神经网络在一项任务中表现得好坏，那么你未来的努力很可能不会有任何成果。验证集必须随机收集，并且必须与您正在处理的域具有相同的统计属性。**

> 不要在验证集中挑选样本。

从验证集来看，你会知道给你的训练集加注释有多难。这要花多少钱，在短时间内用很少的资源完成任务会有多容易或多难？我的建议是自己注释验证集，并将注释任务分配给团队成员。看看不同注释者之间的分歧。如果分歧很大，回到重新定义任务，因为:

> 如果你不知道一个好的解决方案应该是什么样子，神经网络也不知道

好吧，假设您已经收集了一个好的验证集，并且您想要开始训练您的模型。

> 有固定的比较协议

尽早决定如何比较不同型号的性能——在相同的任务上——在不同的设置下。如果你选择只训练你的模型 5 个时期并比较结果，那么在你所有的实验中，你应该训练你的模型 5 个时期。如果你训练你的模型直到你的表现达到稳定，那么这就是你每次实验应该做的。我个人喜欢叠加每个实验的每个时期的性能。

> 不修复注释错误

有时您可能会在注释集中发现错误，这是很自然的。确保跟踪它们，但不要修复它们。如果你这样做了，你就不能将你未来的结果与你过去的基准进行比较。如果你发现使你以前的结果无效的主要错误，修正注释，但是确保你重复所有你过去的实验并且用它们更新你的结果。

> 找到适合你的测量方法

有大量的测量，每一个都捕捉到你的方法的一个方面。确保你选择了正确的尺寸。如果你正在解决一个 99.9%的情况都是否定的无偏设置下的二元分类任务，也许“ *AP* 比“*准确度”更适合你*此外，混合测量通常会带来其中任何一个单独测量都无法提供的洞察力。例如，如果验证集内的误差在减少，但损失值在增加，则您的模型很可能会失去校准，需要更多的正则化。

> 双对数图更容易解释，更容易

在双对数图上监控性能饱和比在线性图上监控要容易得多。出于这个原因，我更喜欢像“误差”这样随时间减少的度量标准，而不是“准确性”在下面的假设场景中，两个模型(蓝色和红色)在二元分类任务上接受训练，它们的性能被绘制为训练迭代的函数。

![](img/f62b952ade73306f9d583177dd1ebdbf.png)

很难从线性图中得出结论性的决定，但双对数图显示蓝色模型继续学习，而红色模型过度拟合。

## 花时间在时间管理上

深度学习在实践中的发展比在学术界慢得多，主要原因是深度学习是数据驱动的，收集、复制、移动、格式化和注释数据占用了你一半以上的时间。尽早决定格式和存储空间，

> 格式化、复制和存储您的数据一次

花在深度学习上的另一大部分时间是训练时间。尤其是在试图寻找最佳超参数时。确保您:

> 以一种不需要重复实验的方式记录你的工作

始终记录所有超参数的每个实验的性能，这样您就不必重复任何实验两次。

## 最后的话

这篇文章是题为“企业中的深度学习”的文章集的一部分，我正准备解决行业中与深度学习相关的一些问题。在这里，我试图解决深度学习团队需要做出的一些早期决定，以提高他们的效率。这些是必要的，但绝不是我从学术和工业角度处理深度学习后可以发现的足够的规则和指南。请让我知道你是否能想到更多的指导方针。