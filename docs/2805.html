<html>
<head>
<title>Forecasting Time Series Data: Netflix Stock Price Prediction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">预测时间序列数据:网飞股票价格预测</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/forecasting-time-series-data-netflix-stock-price-prediction-a941fa2c4893?source=collection_archive---------2-----------------------#2022-05-31">https://pub.towardsai.net/forecasting-time-series-data-netflix-stock-price-prediction-a941fa2c4893?source=collection_archive---------2-----------------------#2022-05-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0802" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">ARIMA-(G)带有MiniTab和R的ARCH模型</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f9fe39dfad1fbf665ef5505d724ddedb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*c7IlirlvSLkRl9RN"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">杰克·希尔斯在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="10cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">网飞股票价格最近相当不稳定，这使得时间序列数据的预测非常有趣。在这篇博客中，我将使用ARIMA(G)ARCH模型进行预测，Minitab用于绘图，R用于模型选择。(因为这个班级项目的说明，我将不得不遵守一些限制。)</p><p id="eb4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">阅读本博客前的一些先验知识包括:</p><ul class=""><li id="491c" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><a class="ae kv" href="https://en.wikipedia.org/wiki/Autoregressive_integrated_moving_average" rel="noopener ugc nofollow" target="_blank"> ARIMA车型</a></li><li id="c6ff" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="https://www.youtube.com/watch?v=Li95a2biFCU" rel="noopener ugc nofollow" target="_blank"> ARCH </a>和<a class="ae kv" href="https://www.youtube.com/watch?v=inoBpq1UEn4" rel="noopener ugc nofollow" target="_blank"> GARCH </a>车型</li></ul><h1 id="ebab" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">数据描述</h1><p id="bd22" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">该项目使用网飞从2002年5月23日到2022年3月18日的每日股票价格(4991次观察)进行时间序列预测。2022年3月18日的数据是我获得数据集时来自雅虎财经的最新数据。表格的标题如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/3d169d65a926109e777b57efeade0425.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vvh7gmN2TR0TM-JqiZsHEw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="48e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我将省略最后一个数据点，这是2022年3月18日ARIMA(G)拱门模型的数据。因此，n = 4991–1 = 4990，我将使用2002年5月23日至2022年3月17日的<em class="ne">调整关闭</em>数据。</p><h1 id="495e" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">ARIMA造型</h1><p id="d3fe" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">网飞股价(Adj Close)、DifNetflix、LogNetflix和DifLogNetflix的时间序列图如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/a9d0ee96524e595eaeadfe61c210a72b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nzLR-M__0iK91c3pNa_XaA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/f33b9573ba0be91b906f7d8b941ca8a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Eh4WkZ8rKV8wZygHXrO99g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="1bcf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有强有力的证据表明，网飞存在水平相关的波动。近年来，网飞股票价格更加不稳定。<strong class="ky ir">取log可以帮助我们减轻依赖于级别的波动性，并使曲线线性化</strong>，因为DifLogNetflix的波动性似乎不再依赖于级别。</p><p id="1af3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了选择ARIMA(p，d，q)模型，我们需要<strong class="ky ir">首先确定d的值，看看我们需要对数据求多少次差才能使其稳定</strong>。LogNetflix的ACF和PACF剧情如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/b64460d335958a8b2b584da9bbb3426f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OFsOgjnvg_VIZ6lmK75tiA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="9e77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">LogNetflix的ACF图指示悬挂行为，并且LogNetflix的PACF图在滞后1之后截止，因此LogNetflix是非平稳的。我们需要对数据进行差分。</p><p id="7651" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">DifLogNetflix的ACF和PACF图显示，差异一度似乎使数据稳定，因为没有统计上的显著滞后。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/4caacf5133cc5c028013e4fb9491a103.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_e0S20q6bZ-O0yI8jkjK-g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="679c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了再次检查d=1，我们可以再次对数据求差，并寻找过度求差的迹象。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/7c34ec20a172501ec62e68d3af869dd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GU626lOFDzNtIowhjuVUUw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="b4e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事实上，两次差异显示了<strong class="ky ir">过度差异的有力证据，因为Dif2LogNetflix的PCF在滞后1时统计上显著为负，接近-0.5 </strong>。因此，我们得出结论，在ARIMA模型中d=1。DifLogNetflix的ACF图建议采用ARIMA(0，1，4)模型，而DifLogNetflix的PACF建议采用ARIMA(4，1，0)模型。</p><p id="ef74" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们需要选择ARIMA模型中的p和q。我们任意挑p，q = 0，1，2(因为节俭原则)比较一下AICc。AICc的公式如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/373376198471aaf03679f552019e3e95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vMO3EwViJy66kojvLDNMeA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="c2b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">SS表示误差平方和，可以从Minitab输出中获得。我们知道N = N–d = 4990–1 = 4989。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/0696befe016c8470db9d43b92201a6ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J9_cMPh3vsazXsc5OV1wEA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="a64c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">常数为的ARIMA(0，1，1)给出了最小的AICc值，所以我们选择常数为的ARIMA(0，1，1)。常数为的ARIMA(0，1，1)的Minitab输出为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/aecb8e76465dd18b48b05f28839757ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*Ow9IW4SwYC0eCyix1X578w.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="08e2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">MA1系数和常数都具有统计学意义，p值小于0.05。因此，如果我们将{x_t}表示为网飞的时间序列，{y_t}表示为LogNetflix，{z_t}表示为DifLogNetflix。MA1系数的最佳估计值为-0.0309，常数的最佳估计值为0.001151。因此，拟合模型为</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/bece8f25e3cde842e6fa7518a3e2d92c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8d8fhSFgOyZ_VjuF1ZDdxw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="1aa5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其中z _ t = y _ t-y _ { t-1 } = log(x _ t)-log(x _ { t-1 })。</p><p id="dd74" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">提前一步预测和95%预测间隔如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/1439fbf3734ca7388f4281a4591e98ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*ILcxyx3w-XB7OtLZC8fnHw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="42b4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ne">残差</em>的时间序列图为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/e77fe981077d4a28bb26fbcfe88d3628.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*owKjJxEX2VuA8YitxEprLA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="0f13" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">残差看起来相对随机，只有少数绝对值超过0.3。残差的ACF和PACF图如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/3fd0bcab87ddba3d0e28786673820efd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H9CBb4ilHrBV6a3o-_G8Ng.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="f882" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">残差中没有很多统计上显著的滞后，这意味着残差看起来不相关。<em class="ne">平方残差</em>的ACF和PACF为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/89b0c7d293368c36377ea8856a23b963.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WvXJb4d16Z09C53rmjcy4g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="92bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，平方残差具有多个具有统计显著性的滞后，这意味着残差不是独立的。此外，我们可以从残差的时间序列图中看到，方差不是常数。存在条件异方差的证据。</p><p id="2140" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在进行(G)ARCH建模之前，我们需要将Minitab中的残差信息保存到一个txt文件中，并将其导入到r。</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="28cd" class="nx mh iq nt b gy ny nz l oa ob"># read file &amp; check head<br/>res = scan("RES.txt", what="list")<br/>head(res)</span><span id="22ab" class="nx mh iq nt b gy oc nz l oa ob"># clean up data &amp; convert data type<br/>res = res[-c(1,2)]<br/>res = as.numeric(res)<br/>head(res)</span></pre><h1 id="4b21" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">(G)拱形建模</h1><h2 id="3fe2" class="nx mh iq bd mi od oe dn mm of og dp mq lf oh oi ms lj oj ok mu ln ol om mw on bi translated">拱门(q)</h2><p id="1d4e" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">为了选择q从0到10的ARCH(q)模型，我们可以计算AICc。AICc的公式在这里发生了变化:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/619165ea2d2613b71a54a84a956d5c1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*DpNlrfTekR-sCeWeJMoiRA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="def1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">logLik的值可以从r中获得。</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="558e" class="nx mh iq nt b gy ny nz l oa ob">library(tseries)</span><span id="9e63" class="nx mh iq nt b gy oc nz l oa ob"># check different ARCH models<br/>for (i in 1:10){<br/>  print(paste0('model ARCH(', i, ')'))<br/>  model = garch(res, c(0,i), trace=F)<br/>  print(summary(model))<br/>  print(logLik(model))<br/>}</span><span id="0068" class="nx mh iq nt b gy oc nz l oa ob"># ARCH(0) model has to be manually calculated<br/># model = garch(res, c(0,0), trace=F) is going to give an error<br/>N = 4989<br/>print(paste0('log Lik.', -0.5*N*(1+log(2*pi*mean(res^2)))))</span></pre><p id="8333" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，我们知道N = N–d = 4990–1 = 4989，因此我们有:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/7d5cbf863b7d0f29d2db4d4d48aa539e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HkYI6NqY6CJhhjeWLu8dKQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><h2 id="c33e" class="nx mh iq bd mi od oe dn mm of og dp mq lf oh oi ms lj oj ok mu ln ol om mw on bi translated">GARCH(1，1)</h2><p id="6bbd" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">由于节俭原则，我们还可以考虑GARCH(1，1)模型。我们有logLik = 9799.593 (q=2)，对应的AICc是-1993 . 546656566666GARCH(1，1)产生最小的AICc，所以我们选择GARCH(1，1)。</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="28a4" class="nx mh iq nt b gy ny nz l oa ob"># compared with GARCH(1,1) model<br/>model=garch(res,c(1,1), trace=F)<br/>print(summary(model))<br/>print(logLik(model))</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/a8247407ee952f0db69cfa65c0cbcfc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MR61J-KfY4RqfktBiQTU1Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="baca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">p值不正确，因为它们用于双尾检验。我们应该查看所给出的p值的一半，但是它们是如此之小，以至于这些p值的一半在统计学上是非常显著的。因此，a0、a1和b1都具有统计显著性。然而，Jarque Bera检验的p值小于0.05，这表明GARCH残差的条件分布不是正态分布。Ljung-Box检验的p值大于0.05，这意味着GARCH残差不相关。但总的来说，模型是不充分的。</p><p id="7304" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了写出所选GARCH(1，1)模型的完整形式，我们有ω=0.000005875，α=0.01425，β=0.9814。因此，完整的形式是</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/63f303253dbcc0ce06236abed4a26368.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w1ldpvUuDINPKoCAqfexBw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="1196" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">无条件方差是</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/3d0389e6bbd8c5fa8467b3503bcbe93b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j_5BmQKKdACThr_ZLKRlcA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="4a44" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们从剩余数据中得知ϵ_4990=0.035765.我们还知道h_4990=0.00138539642318183。因此，<br/>h _ 4991 = 0.000005875+0.01425×0.035765+0.9814×0.00138539642318183 = 0.001383731。</p><p id="c8f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从ARIMA(0，1，1)模型中，我们知道f_4990，1=5.91954。因此，ARIMA-GARCH模型的95%预测区间为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/9d95ab00efc21a61de45722cab9be618.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LBWpfKNRtDEBu4wol74JdQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="564f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与95%预测区间为(5.84927，5.98981)的ARIMA(0，1，1)模型相比，ARIMA-GARCH模型的预测区间更宽。</p><p id="ae5a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下期对数汇率条件分布的第5个百分位数为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/e03f0a4b99f96ddb9a5004ec25b40839.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rpCn7sLUN91SoX_nHBss9g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="55f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们计算<em class="ne">条件方差</em> ht:</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="f37c" class="nx mh iq nt b gy ny nz l oa ob"># calculate ht<br/>ht = model$fit[,1]^2<br/>ht[1:5] # has NA<br/>write(c('ht', '*', ht), '../htfile.txt', 1)</span></pre><p id="9ade" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">ht的时间序列图为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/c770b825ec74cece78915f67c84ba065.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*0LLz_xy15Ge8axEa3Mf98g.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="2476" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从2002年5月23日到2014年4月14日的高温比后期高温更不稳定。2002年5月23日至2014年4月14日是波动性最大的时期，2022年5月23日至2005年5月9日是波动性最大的时期。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/c841341a211f8df89ff9359a6e9c0bac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*01tSPgiM4ybEQ6uFqyp1Rg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="f1bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与LogNetflix的时间序列图相比，这些高波动性的爆发似乎确实与对数汇率本身的时间序列图的研究结果一致。</p><p id="aca1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">logNetflix和提前一步95%预测区间的时间序列图如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/7774dbe6116d5d364bbd1f7fc6f98ffe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*nBJloZGoC2vXFp2muOsZuw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="521d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据剧情来看，LogNetflix多在低和高之间，所以预测区间还是挺准的。然而，由于ARIMA-GARCH参数是从整个数据集估计的，而不仅仅是从构建预测时的观测值估计的，因此这里的性能可能比实际预测环境中的性能好一些，因此对于x_1到x_4990的实际有用性有些问题。然而，x_4991没有被用于建立ARIMA-GARCH模型，因此对x_4991的预测更有实际意义。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/55e1626226f36445ce41958e8c02af56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*SltUtISzlMQilnfNdhK90A.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="7a38" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">测试告诉我们p值小于0.005，所以<em class="ne"> archres </em>不是正态分布。s形图表明尾部较重，这意味着模型似乎没有充分描述数据中的尖峰值。</p><p id="205a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">预测区间有209次失败，约为所有区间的209/4988 = 4.19%。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/f3074705d3df6185ba1b6cd129d499f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:208/format:webp/1*JIf2wActWe9j01peowCv6Q.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><h1 id="0c2b" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">性能检查</h1><p id="3c10" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">对于LogNetflix，ARIMA模型的95%预测区间为(5.84927，5.98981)，对应于网飞的区间为(347.89，399.339)。x_4991=380.6在预测区间内。</p><p id="9c18" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">ARIMA-GARCH模型的95%预测区间是(5.846631，5.992449)，这对应于网飞的区间(346.0665，400.39398)。x_4991=380.6在预测区间内。</p><p id="2a41" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">ARIMA区间和ARIMA-GARCH区间非常相似。这两个预测区间似乎既不太宽也不太窄。ARIMA-GARCH区间稍微宽一点，以适应最近较高的波动性，因为ARIMA-GARCH是适应性的，但ARIMA不是。</p></div></div>    
</body>
</html>