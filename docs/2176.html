<html>
<head>
<title>Create Word Cloud with TF-IDF</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用TF-IDF创建词云</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/natural-language-processing-c12b0d525f99?source=collection_archive---------0-----------------------#2021-09-14">https://pub.towardsai.net/natural-language-processing-c12b0d525f99?source=collection_archive---------0-----------------------#2021-09-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="8019" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/nlp" rel="noopener ugc nofollow" target="_blank">自然语言处理</a></h2><div class=""/><div class=""><h2 id="1a2b" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">一种通过更强大的功能来改进经典单词云的方法</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/691aa7956d5414df149858ed23fceada.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ov9yHKRQQzSezVUkrKLghw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者插图</figcaption></figure><p id="ab16" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><em class="md">这是</em> <a class="ae me" href="https://eugenia-anello.medium.com/nlp-tutorial-series-d0baaf7616e0" rel="noopener"> <em class="md"> NLP教程系列</em> </a> <em class="md">的第四篇帖子。本指南将让您了解如何使用TF-IDF表示来改进word cloud。</em></p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><p id="c029" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你听说过云这个词吗？这是一个惊人的文本数据的可视化，其目的是捕捉关键词。一个单词出现得越多，这个单词在表示中就越大。</p><p id="0133" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这是你随处可见的标准词云。但是真的有用吗？统计单词的出现次数有助于理解它们的重要性吗？肯定有一些重复的词可以被认为是关键词，但其他的则是噪音多于信息。此外，频率较低的术语可能会丢失，这样，我们会丢失重要的信息，而这些信息我们可以在表示中可视化。</p><p id="1abc" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">可以在word cloud中使用<a class="ae me" href="https://betterprogramming.pub/a-friendly-guide-to-nlp-tf-idf-with-python-example-5fcb26286a33?sk=c204d0a817f8b5cd52f0e3d4ab8d688e" rel="noopener ugc nofollow" target="_blank"> TF-IDF </a>进行改进。如您所知，TF-IDF是一种技术，可以同时量化一个文档内和一组文档中单词的重要性。重复多次的单词将倾向于具有较低的权重，而不太频繁的术语将被认为更重要。</p><p id="53f2" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这篇文章中，我将展示标准的词云，基于词频的词云，以及带有TF-IDF的词云，展示它们的主要区别。</p><p id="c3f2" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">目录:</strong></p><ol class=""><li id="ea65" class="mm mn it lj b lk ll ln lo lq mo lu mp ly mq mc mr ms mt mu bi translated"><strong class="lj jd">导入库和数据集</strong></li><li id="739e" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc mr ms mt mu bi translated"><strong class="lj jd">标准字云</strong></li><li id="efac" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc mr ms mt mu bi translated"><strong class="lj jd">基于词频的词云</strong></li><li id="5f6b" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc mr ms mt mu bi translated"><strong class="lj jd">字云与TF-IDF </strong></li></ol></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="89ee" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">1.导入库和数据集</h1><p id="d87b" class="pw-post-body-paragraph lh li it lj b lk ns kd lm ln nt kg lp lq nu ls lt lu nv lw lx ly nw ma mb mc im bi translated">用Python生成单词云，需要的模块有word cloud、matplotlib和pandas。如果您的Jupiter笔记本中没有安装word cloud，您只需添加这行代码:</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="99e6" class="oc nb it ny b gy od oe l of og">!pip install wordcloud</span></pre><p id="7f6d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">让我们导入库:</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="dfdb" class="oc nb it ny b gy od oe l of og">import pandas as pd <br/>import matplotlib.pyplot as plt<br/>from wordcloud import WordCloud</span></pre><p id="962a" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">本教程中使用的数据集取自<a class="ae me" href="https://www.kaggle.com/datafiniti/hotel-reviews" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>。它只是一个酒店列表以及相应的评论。这个数据集有许多列，但是我们需要的唯一一列叫做“review.text”。</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="d3df" class="oc nb it ny b gy od oe l of og">df = pd.read_csv('../input/hotel reviews/Datafiniti_Hotel_Reviews_Jun19.csv')<br/>df['reviews.text']</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oh"><img src="../Images/bd7487c8334e365f9424dc39aa2c50c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FItRPRF72sqpU1efApWotg.png"/></div></div></figure><h1 id="df83" class="na nb it bd nc nd oi nf ng nh oj nj nk ki ok kj nm kl ol km no ko om kp nq nr bi translated">2.标准单词云</h1><p id="bd1b" class="pw-post-body-paragraph lh li it lj b lk ns kd lm ln nt kg lp lq nu ls lt lu nv lw lx ly nw ma mb mc im bi translated">为了创建单词Cloud，我们现在只回顾一家酒店:</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="c875" class="oc nb it ny b gy od oe l of og">text = df['reviews.text'][1]<br/>text</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi on"><img src="../Images/c5a4dc0d109ef7071d056d3ca342808a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XRkh3Fy7l6dDb2jvxMLbZQ.png"/></div></div></figure><p id="cfcf" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">第一步是初始化一个<code class="fe oo op oq ny b">WordCloud</code>对象:</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="9569" class="oc nb it ny b gy od oe l of og">wordcloud = WordCloud()</span></pre><p id="e2ce" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">它包括许多可以指定的参数[1]。最广泛使用的参数是:</p><ul class=""><li id="bd51" class="mm mn it lj b lk ll ln lo lq mo lu mp ly mq mc or ms mt mu bi translated"><code class="fe oo op oq ny b">font_path</code>是指定改变默认字体的路径。默认值为无。</li><li id="1670" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc or ms mt mu bi translated"><code class="fe oo op oq ny b">width</code>和<code class="fe oo op oq ny b">height</code>的默认值分别等于400和200。</li><li id="ca1b" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc or ms mt mu bi translated"><code class="fe oo op oq ny b">random_state</code>用于再现每次相同的再现。</li><li id="103d" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc or ms mt mu bi translated"><code class="fe oo op oq ny b">max_words</code>是最大字数。默认值为200。</li><li id="f3ce" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc or ms mt mu bi translated"><code class="fe oo op oq ny b">stopwords</code>用于指定要从文本中删除的停用词列表。默认值为无。</li><li id="684f" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc or ms mt mu bi translated"><code class="fe oo op oq ny b">background_color</code>用于指定文字云表示的背景颜色。默认为“黑色”。</li><li id="6ed6" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc or ms mt mu bi translated"><code class="fe oo op oq ny b">colormap</code>是Matplotlib颜色图，将每个单词分配给一种随机颜色。</li><li id="5f29" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc or ms mt mu bi translated"><code class="fe oo op oq ny b">mask</code>指定改变字云的形状</li><li id="9bee" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc or ms mt mu bi translated"><code class="fe oo op oq ny b">collocations</code>被指定为包括或不包括两个词的搭配或二元组。默认值为True。如果您只想要单词云中的单个单词，您应该将该参数更改为False。</li></ul><p id="8c8d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">要了解更多关于WordCloud函数的信息，您也可以这样写:</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="1410" class="oc nb it ny b gy od oe l of og">?WordCloud</span></pre><p id="1cd9" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们最终可以这样从文本中生成单词cloud:</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="7a00" class="oc nb it ny b gy od oe l of og">wordcloud.generate(text)</span></pre><p id="5e80" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">首先，我们可以使用Maplotlib来显示它:</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="25ce" class="oc nb it ny b gy od oe l of og">plt.imshow(wordcloud, interpolation='bilinear')<br/>plt.axis("off")<br/>plt.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi os"><img src="../Images/68e0299a1c40361276d45563d96cecfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E-K3yhJ1XGTkJ5WJ99xupg.png"/></div></div></figure><p id="57aa" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">您也可以保存图像:</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="13df" class="oc nb it ny b gy od oe l of og">wordcloud.to_file('wordcloud.png')</span></pre><p id="d1e8" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">为了更加通用，我们还可以合并不同酒店的所有评论:</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="43a2" class="oc nb it ny b gy od oe l of og">text = " ".join(review for review in df['reviews.text'])</span></pre><p id="66a5" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这一次，我们可以改变单词云情节的背景、宽度和高度，并删除常用词，如“the”、“is”、“and”。</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="a8fb" class="oc nb it ny b gy od oe l of og">from wordcloud import STOPWORDS<br/>stopwords = set(STOPWORDS)<br/>wordcloud = WordCloud(width = 3000, height = 2000,background_color='white',stopwords=stopwords)<br/>wordcloud.generate(text)<br/>plt.figure(figsize=(40, 30))<br/>plt.imshow(wordcloud, interpolation='bilinear')<br/>plt.axis("off")<br/>plt.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/b7c3cbcf11aabfa94967ad55d4cabc8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a0zVonJcM38czYwlSUMDTQ.png"/></div></figure><p id="7719" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">通过这种方式，我们获得了评论中包含的单词的更清晰的可视化。</p><p id="4d5f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">为了得到一个更漂亮可爱的云字，我们可以改变它的形状。我们可以用一个JPG文件作为单词cloud的掩码。我选择沙发作为造型，因为酒店里总是摆满了沙发。我们只需要一个NumPy数组形式的图像，它由0到255之间的数字矩阵组成。如果你选择一个图像，你需要小心:它需要有一个白色的背景来配合单词cloud。</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="5f02" class="oc nb it ny b gy od oe l of og">import numpy as np<br/>from PIL import Image<br/>mask = np.array(Image.open('../input/sofa-image/sofa.jpg'))</span></pre><p id="fc7c" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在我们使用相同的代码行之后，只将参数掩码添加到函数中:</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="b1fb" class="oc nb it ny b gy od oe l of og">wordcloud = WordCloud(width = 3000, height = 2000, random_state=1,background_color='white', colormap='Set2', collocations=False, stopwords = STOPWORDS, mask=mask).generate(text)<br/>plt.figure(figsize=(40, 30))<br/>plt.imshow(wordcloud, interpolation='bilinear')<br/>plt.axis("off")<br/>plt.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/6f73aacdb6b7b301e8ea08d2f5166d96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/1*eEU2e4wZ4rknlFyhvlWs4w.png"/></div></figure><p id="b404" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">瞧啊。现在，我们有了一个沙发形状的字云！它肯定比正方形更清晰。</p><h1 id="9dfb" class="na nb it bd nc nd oi nf ng nh oj nj nk ki ok kj nm kl ol km no ko om kp nq nr bi translated"><strong class="ak"> 3。</strong>基于词频的词云</h1><p id="929d" class="pw-post-body-paragraph lh li it lj b lk ns kd lm ln nt kg lp lq nu ls lt lu nv lw lx ly nw ma mb mc im bi translated">在展示基于词云的词频之前，有一个必经的步骤:文本预处理。我们需要删除不必要的单词，如标点符号、空格和停用词。我们也可以将单词规范化，将单词转换成它的基本形式。例如，open转换为单词open。</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="555c" class="oc nb it ny b gy od oe l of og">from collections import Counter<br/>from nltk.stem import WordNetLemmatizer<br/>import re<br/>words = text.lower().split()<br/>words = [re.sub("[.,!?:;-='...'@#_]", " ", s) for s in words]<br/>words = [re.sub(r'\d+', '', w) for w in words]<br/>words = [word.strip() for word in words if word not in stopwords]<br/>words.remove('')<br/>lemmatiser = WordNetLemmatizer()<br/>lem_words = [lemmatiser.lemmatize(w, pos='v') for w in words]<br/>words_counter = Counter(lem_words)</span></pre><p id="d263" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们将单词列表转换成一个计数器对象，其中键是单词，值是相应的频率。我们可以使用<code class="fe oo op oq ny b">generate_from_frequencies</code>方法获得基于词频的词云，而不是使用<code class="fe oo op oq ny b">generatethe </code>方法。而且，输入是上一节得到的计数对象。</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="26f0" class="oc nb it ny b gy od oe l of og">wordcloud = WordCloud(width = 3000, height = 2000,background_color='white')<br/>wordcloud.generate_from_frequencies(words_counter)<br/>plt.figure(figsize=(40, 30))<br/>plt.imshow(wordcloud, interpolation='bilinear')<br/>plt.axis("off")<br/>plt.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ov"><img src="../Images/385466b1c4f28b1289e4b8ffa8208228.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NIuLn79X75qNvWxQ7bIeCA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">带词频的词云</figcaption></figure><p id="a94a" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">发现的单词cloud与之前获得的单词cloud没有太大不同，因为概念是相同的。我们仍然有非常大的单词“酒店”、“房间”、“住宿”、“员工”、“干净”、“棒极了”，而剩下的单词较小。使用TF-IDF看看单词cloud如何变化会很有趣。</p><h1 id="17c5" class="na nb it bd nc nd oi nf ng nh oj nj nk ki ok kj nm kl ol km no ko om kp nq nr bi translated">5.使用TF-IDF的词云</h1><p id="3ef3" class="pw-post-body-paragraph lh li it lj b lk ns kd lm ln nt kg lp lq nu ls lt lu nv lw lx ly nw ma mb mc im bi translated">我们重复清洁的部分，因为每一个酒店的审查应该被视为一个文件。所以，我们不能像以前一样合并所有的文本。</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="7629" class="oc nb it ny b gy od oe l of og">df["clean_text"] = df["reviews.text"].apply(lambda s: ' '.join(re.sub("[.,!?:;-='...'@#_]", " ", s).split()))<br/>df["clean_text"] = df["clean_text"].apply(lambda s: ' '.join(re.sub(r'\d+', '', s).split()))<br/>def rem_en(input_txt):<br/>    words = input_txt.lower().split()<br/>    noise_free_words = [word for word in words if word not in stopwords] <br/>    noise_free_text = " ".join(noise_free_words) <br/>    return noise_free_text<br/>df["clean_text"] = df["clean_text"].apply(lambda s: rem_en(s))<br/>lemmatiser = WordNetLemmatizer()<br/>df["clean_text"] = df["clean_text"].apply(lambda row: [lemmatiser.lemmatize(r, pos='v') for r in row.split()])<br/>df["clean_text"] = df["clean_text"].apply(lambda row: ' '.join(row))</span></pre><p id="4550" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们现在可以基于TF-IDF创建单词云</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="76d9" class="oc nb it ny b gy od oe l of og">tf_idf_counter = df_tfidf_sklearn.T.sum(axis=1)<br/>wordcloud = WordCloud(width = 3000, height = 2000,background_color='white')<br/>wordcloud.generate_from_frequencies(tf_idf_counter)<br/>plt.figure(figsize=(40, 30))<br/>plt.imshow(wordcloud, interpolation='bilinear')<br/>plt.axis("off")<br/>plt.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ov"><img src="../Images/8f2e9483e1d8e8bc563c262423fd4831.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gwqpBteDzGw-XY6G8AUN8A.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">使用tf-idf的word cloud</figcaption></figure><p id="cd0f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">显然，似乎有相同的话。但是有200字的时候就很难做比较了。让我们试着将两种情况下的字数限制在20个以内:</p><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="f294" class="oc nb it ny b gy od oe l of og">wordcloud = WordCloud(width = 3000, height = 2000, random_state=1,background_color='white', colormap='Set2', collocations=False, stopwords = STOPWORDS, mask=mask,max_words=20).generate_from_frequencies(words_counter)<br/>plt.figure(figsize=(40, 30))<br/>plt.imshow(wordcloud, interpolation='bilinear')<br/>plt.axis("off")<br/>plt.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/8c0aecf0161b2c9f15621a43d398b617.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/1*FKW5X8i2ApqPj8KUljewQg.png"/></div></figure><pre class="ks kt ku kv gt nx ny nz oa aw ob bi"><span id="7b20" class="oc nb it ny b gy od oe l of og">wordcloud = WordCloud(width = 3000, height = 2000, random_state=1,background_color='white', colormap='Set2', collocations=False, stopwords = STOPWORDS, mask=mask,max_words=20).generate_from_frequencies(tf_idf_counter)<br/>plt.figure(figsize=(40, 30))<br/>plt.imshow(wordcloud, interpolation='bilinear')<br/>plt.axis("off")<br/>plt.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/2b3af87f779ac22074fce00017b5fabc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/format:webp/1*Q5eggFT0hHP3uau0lzyseQ.png"/></div></figure><p id="0725" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果我们比较两种不同类型的词云，我们可以注意到一些方面:</p><ul class=""><li id="3e36" class="mm mn it lj b lk ll ln lo lq mo lu mp ly mq mc or ms mt mu bi translated">大部分词都是对等的，像“酒店”、“入住”、“工作人员”。</li><li id="36e1" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc or ms mt mu bi translated">在基于词频的词云中，“拿”、“一”、“使”这些词没有任何意义，在词云中被替换为来自thanking、comfort、bed的TF-IDF，这些词似乎更适合上下文。</li><li id="4431" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc or ms mt mu bi translated">即使两种表征之间有很多共同的词，维度也是变化的。例如，在第一个单词cloud中，“Stay”非常大，而在TF-IDF中，这个单词变得更小。相反，如果我们看“酒店”这个词，它在第二种情况下变得更大。</li></ul><h1 id="c3f4" class="na nb it bd nc nd oi nf ng nh oj nj nk ki ok kj nm kl ol km no ko om kp nq nr bi translated">最终想法:</h1><p id="0905" class="pw-post-body-paragraph lh li it lj b lk ns kd lm ln nt kg lp lq nu ls lt lu nv lw lx ly nw ma mb mc im bi translated">我希望这篇教程能帮助你对单词云表示有一个很好的了解，以及如何使用TF-IDF来改进它。代码在<a class="ae me" href="https://github.com/eugeniaring/Medium-Articles/blob/main/NLP/hotel-cloud.ipynb" rel="noopener ugc nofollow" target="_blank"> Github </a>上。感谢阅读。祝您愉快！</p><h1 id="f6f2" class="na nb it bd nc nd oi nf ng nh oj nj nk ki ok kj nm kl ol km no ko om kp nq nr bi translated">参考资料:</h1><p id="20b8" class="pw-post-body-paragraph lh li it lj b lk ns kd lm ln nt kg lp lq nu ls lt lu nv lw lx ly nw ma mb mc im bi translated">[1] <a class="ae me" href="https://amueller.github.io/word_cloud/generated/wordcloud.WordCloud.html" rel="noopener ugc nofollow" target="_blank"> Wordcloud文档</a></p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><p id="5ce6" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你喜欢我的文章吗？<a class="ae me" href="https://eugenia-anello.medium.com/membership" rel="noopener"> <em class="md">成为会员</em> </a> <em class="md">每天无限获取数据科学新帖！这是一种间接的支持我的方式，不会给你带来任何额外的费用。如果您已经是会员，</em> <a class="ae me" href="https://eugenia-anello.medium.com/subscribe" rel="noopener"> <em class="md">订阅</em> </a> <em class="md">每当我发布新的数据科学和python指南时，您都会收到电子邮件！</em></p></div></div>    
</body>
</html>