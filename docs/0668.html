<html>
<head>
<title>Seasonality Detection with Fast Fourier Transform (FFT) and Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于快速傅立叶变换和Python的季节性检测</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/seasonality-detection-with-fast-fourier-transform-fft-and-python-1021986d1e4f?source=collection_archive---------0-----------------------#2020-07-11">https://pub.towardsai.net/seasonality-detection-with-fast-fourier-transform-fft-and-python-1021986d1e4f?source=collection_archive---------0-----------------------#2020-07-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="c55e" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/machine-learning" rel="noopener ugc nofollow" target="_blank">机器学习</a></h2><div class=""/><div class=""><h2 id="cd08" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">使用Python中的FFT快速检测季节性</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/6cf40e1bf7659afc21fa6401d4559a54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pv2AJGKWmqbFC9NjAWXuCg.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">由<a class="ae le" href="https://unsplash.com/@isaacmsmith?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">艾萨克·史密斯</a>在<a class="ae le" href="/s/photos/graph-seasonal?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="9690" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">预测</h1><p id="e1eb" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated"><strong class="lz ja">预测</strong>是根据过去和现在的数据预测未来的过程之一。大多数预测问题与时间序列数据有关(即下个月产品A的销售量是多少)。</p><p id="1050" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">有些问题可能比其他问题更容易预测。事件或数量的可预测性取决于几个因素，其中包括:</p><ol class=""><li id="b9d4" class="my mz iq lz b ma mt md mu mg na mk nb mo nc ms nd ne nf ng bi translated">了解对结果有贡献的因素；</li><li id="b6de" class="my mz iq lz b ma nh md ni mg nj mk nk mo nl ms nd ne nf ng bi translated">数据可用性；</li><li id="a1b7" class="my mz iq lz b ma nh md ni mg nj mk nk mo nl ms nd ne nf ng bi translated">预测技术或学习算法。</li></ol><p id="0ef8" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">通常，有许多方法可以准确地解决预测问题，<strong class="lz ja"> <em class="nm">好的预测捕捉到历史数据</em> </strong>中存在的真实模式和关系，但不会复制不会再次发生的过去事件。</p><h1 id="a4aa" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">季节性和使用案例</h1><p id="3eaa" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">在时间序列数据中，季节性是指存在某些<strong class="lz ja">特定的规则间隔，或取决于特定时间框架(即每周、每月)的可预测的周期性变化</strong>。季节性的一些例子是圣诞节期间较高的销售额，假日期间较高的预订量。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/b6fa6b2dd8880579802443b4195a8145.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*dmnzV2wQsiHevCddvQIYRA.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">季节性图示例</figcaption></figure><p id="33ef" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">检测时间序列数据中的季节性可以改进预测，揭示一些隐藏的洞察力，并导致洞察力和建议。一般来说，时间序列数据预测可以表示为:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi no"><img src="../Images/6f974d62fb541a0ef4b6148d3455b30f.png" data-original-src="https://miro.medium.com/v2/resize:fit:252/format:webp/1*OiqcjkcETObBsRUMD3RSPQ.png"/></div></figure><p id="fc67" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">其中Y是度量单位；s代表季节性；t代表趋势；e是误差项。</p><p id="8911" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">一些关键的使用案例如下:</p><ul class=""><li id="e512" class="my mz iq lz b ma mt md mu mg na mk nb mo nc ms np ne nf ng bi translated">充值行为；</li><li id="9073" class="my mz iq lz b ma nh md ni mg nj mk nk mo nl ms np ne nf ng bi translated">特定页面或应用程序浏览行为；</li><li id="72ba" class="my mz iq lz b ma nh md ni mg nj mk nk mo nl ms np ne nf ng bi translated">销售和需求预测；</li><li id="9144" class="my mz iq lz b ma nh md ni mg nj mk nk mo nl ms np ne nf ng bi translated">温度预报。</li></ul><p id="7eb3" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">有许多方法可以检测时间序列数据中的季节性。然而，在这篇文章中，我们将重点讨论FFT(快速傅立叶变换)。</p><h1 id="89b9" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">Python中的FFT</h1><p id="0a53" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated"><strong class="lz ja">快速傅立叶变换</strong> ( <strong class="lz ja"> FFT </strong>)是计算序列的离散傅立叶变换(DFT)的算法。它将信号从原始数据(在这种情况下是时间)转换为频域表示。</p><blockquote class="nq nr ns"><p id="eb12" class="lx ly nm lz b ma mt ka mc md mu kd mf nt mv mi mj nu mw mm mn nv mx mq mr ms ij bi translated">简而言之，傅立叶变换获取基于时间的数据，测量每个可能的周期，并返回总体“周期方案”(找到的每个周期的振幅、偏移和旋转速度)。</p></blockquote><p id="a24f" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">让我们用正弦波在Python实现中演示一下。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="055c" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">根据脚本，我生成了持续时间为2秒的正弦波，有640个点(以32倍过采样系数采样的12 Hz频率波，即2 x 32 x 10 = 640)。然后，我们可以计算这些数据的FT，并可视化输出。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nw nx l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ny"><img src="../Images/a93051a18ba89869b92011ec7b2b381d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*go3oJD3xJdPgDuU4P9dGxA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">12 Hz正弦波及其FFT结果示例</figcaption></figure><p id="60a9" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">从结果可以看出，FT提供了正弦波中存在的频率成分。下图显示了我们如何将多个波叠加成一个波，并使用FFT来检测峰值。</p><p id="64ac" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">为了进一步展示傅立叶变换如何帮助检测季节性，下图展示了如何组合两种不同的波，并使用傅立叶变换来检测季节性。FT分别根据波形Hz产生两个峰值。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nz"><img src="../Images/e207bae70b5e7688ac9664d172c4648d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jsmOWZBGd-Vol7sVJVNImA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">组合波(2 Hz正弦波和20 Hz余弦波)及其傅立叶变换结果</figcaption></figure><p id="b56f" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">现在，让我们看看真实用例上的实现。在本次演示中，我们将检测天然气CO2排放的季节性。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oa"><img src="../Images/3ea37dd2625d355d4f17cd0f2f7f07c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f3hE8OvIoqGnj4TmTquFzA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">二氧化碳排放的时间序列图</figcaption></figure><p id="af80" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">然后，我们通过用<code class="fe ob oc od oe b">median()</code>方法减去并乘以<code class="fe ob oc od oe b">window</code>函数值(对该数据使用<code class="fe ob oc od oe b">blackman</code>)来标准化原始数据。请注意，窗口函数应与您拥有的数据集相适应，为了进一步研究可用的窗口函数，您可以参考<a class="ae le" href="https://sites.google.com/site/stevedtran/course/intro-to-digital-signal-processing/notes2/windowing/type-of-windowing" rel="noopener ugc nofollow" target="_blank">本</a>探索不同类型的窗口函数。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi of"><img src="../Images/c0ff7395e7de09d73923b3a38d7ffac9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cs4UTWnZRNzCvByB82nfWQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">原始数据和标准化数据的比较</figcaption></figure><p id="69d9" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">现在，我们可以计算FT输出并绘制图表，前几个频率点被忽略，因为这些点代表基线，对分析没有用处。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi og"><img src="../Images/38faa6e592b4959da81c5ab1cfb92a9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N1chd2Y_tq5wWTxdArummw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">财务测试结果的图形输出</figcaption></figure><p id="671f" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">根据输出，我们可以看到x=1.010处的强信号，我们可以将其转换为年，即0.99年(或11.89个月，取决于实施目标)。</p><h1 id="8d87" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">结束注释</h1><p id="f309" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">正如我们所见，FT可以帮助我们捕捉季节性，并可用于分解时间序列数据。FFT方法也内置在各种软件包中，可以方便地用于任何编程语言。</p><p id="ecef" class="pw-post-body-paragraph lx ly iq lz b ma mt ka mc md mu kd mf mg mv mi mj mk mw mm mn mo mx mq mr ms ij bi translated">感谢阅读，快乐学习！！！你可以在这里查看完整代码实现的笔记本。</p><div class="oh oi gp gr oj ok"><a href="https://github.com/netsatsawat/tutorial_fft_seasonality_detection/blob/master/FFT%20Tutorial.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd ja gy z fp op fr fs oq fu fw iz bi translated">netsatsawat/tutorial _ FFT _季节性_检测</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">permalink dissolve GitHub是超过5000万开发人员的家园，他们一起工作来托管和审查代码，管理…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">github.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy ky ok"/></div></div></a></div><div class="oh oi gp gr oj ok"><a href="https://www.linkedin.com/in/satsawat/" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd ja gy z fp op fr fs oq fu fw iz bi translated">沙特瓦特·纳塔卡·恩基特库尔- AVP，渣打银行-暹罗商业银行| LinkedIn高级数据科学家</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">我是一名数据爱好者，利用技术和业务知识来推动和传递对…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">www.linkedin.com</p></div></div><div class="ot l"><div class="oz l ov ow ox ot oy ky ok"/></div></div></a></div></div></div>    
</body>
</html>