<html>
<head>
<title>Scalable and Blazing Fast Similarity Search With Milvus Vector Database</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Milvus矢量数据库进行可扩展的快速相似性搜索</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/scalable-and-blazing-fast-similarity-search-with-milvus-vector-database-d221706e605a?source=collection_archive---------0-----------------------#2022-06-27">https://pub.towardsai.net/scalable-and-blazing-fast-similarity-search-with-milvus-vector-database-d221706e605a?source=collection_archive---------0-----------------------#2022-06-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="213d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在几毫秒内存储、索引、管理和搜索数万亿个文档向量！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d484c01697e8551590aa966c4f16c810.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*u2jYf2wd5nxuY8fU.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">来源:<a class="ae kv" href="https://milvus.io/blog/scalable-and-blazing-fast-similarity-search-with-milvus-vector-database.md" rel="noopener ugc nofollow" target="_blank"> Milvus博客</a></figcaption></figure><h1 id="172d" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="dbb9" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在这篇文章中，我们将涉及一些与向量数据库和大规模相似性搜索相关的有趣方面。在当今快速发展的世界中，我们会看到新技术、新业务、新数据源，因此我们需要不断使用新的方法来存储、管理和利用这些数据来获得洞察力。结构化的表格数据已经在关系数据库中存储了几十年，商业智能在分析和提取这种数据的洞察力方面发展很快。然而，考虑到当前的数据环境，</p><blockquote class="mk ml mm"><p id="377f" class="lo lp mn lq b lr mo jr lt lu mp ju lw mq mr lz ma ms mt md me mu mv mh mi mj ij bi translated"><a class="ae kv" href="https://mitsloan.mit.edu/ideas-made-to-matter/tapping-power-unstructured-data" rel="noopener ugc nofollow" target="_blank">“超过80–90%的数据是非结构化信息，如文本、视频、音频、web服务器日志、社交媒体等”</a></p></blockquote><p id="f6e5" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">组织一直在利用机器学习和深度学习的力量来尝试从这些数据中提取见解，因为传统的基于查询的方法可能不够甚至不可能。从这些数据中提取有价值的见解有巨大的、未开发的潜力，而我们才刚刚开始！</p><blockquote class="mw"><p id="338d" class="mx my iq bd mz na nb nc nd ne nf mj dk translated">“由于世界上大多数数据都是非结构化的，因此分析和处理这些数据的能力带来了巨大的机遇。”</p><p id="e2bb" class="mx my iq bd mz na nb nc nd ne nf mj dk translated">— Mikey Shulman，Kensho负责人</p></blockquote><p id="738d" class="pw-post-body-paragraph lo lp iq lq b lr ng jr lt lu nh ju lw lx ni lz ma mb nj md me mf nk mh mi mj ij bi translated">顾名思义，非结构化数据没有隐含的结构，比如由行和列组成的表格(因此称为表格数据或结构化数据)。与结构化数据不同，没有简单的方法将非结构化数据的内容存储在关系数据库中。利用非结构化数据获得洞察力面临三大挑战:</p><ul class=""><li id="9ab7" class="nl nm iq lq b lr mo lu mp lx nn mb no mf np mj nq nr ns nt bi translated"><strong class="lq ir">存储:</strong>常规的关系数据库适合保存结构化数据。虽然您可以使用NoSQL数据库来存储此类数据，但处理此类数据以提取正确的表示来支持大规模的人工智能应用程序会增加额外的开销</li><li id="5b0e" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated"><strong class="lq ir">表示:</strong>计算机不像我们一样理解文本或图像。他们只理解数字，我们需要将非结构化数据转换成一些有用的数字表示，通常是向量或嵌入。</li><li id="effa" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated"><strong class="lq ir">查询:</strong>不能像SQL那样直接基于明确的条件语句对结构化数据进行查询。想象一下，一个简单的例子，给定一张你最喜欢的一双鞋的照片，你试图搜索相似的鞋子！您不能使用原始像素值进行搜索，也不能表示鞋的形状、大小、样式、颜色等结构化特征。现在想象一下，要为数百万双鞋做这件事！</li></ul><p id="c3b9" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">因此，为了让计算机理解、处理、<strong class="lq ir"> <em class="mn">表示</em> </strong>非结构化数据，我们通常将它们转换成密集向量，通常称为嵌入。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/53d1bff3d0a478abf6b3b4be0bd249ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L6Jz_fpvoIQD09Dc8286vA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">将图像表示为密集嵌入向量；来源:<a class="ae kv" href="https://zilliz.com/learn/embedding-generation" rel="noopener ugc nofollow" target="_blank">嵌入生成</a></figcaption></figure><p id="7c65" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">存在多种方法，尤其是利用深度学习的方法，包括用于图像等视觉数据的卷积神经网络(CNN)和用于文本数据的转换器，它们可用于将此类非结构化数据转换为嵌入数据。<a class="ae kv" href="https://zilliz.com/" rel="noopener ugc nofollow" target="_blank"> Zilliz </a>有<a class="ae kv" href="https://zilliz.com/learn/embedding-generation" rel="noopener ugc nofollow" target="_blank"> <em class="mn">一篇涵盖不同嵌入技术的优秀文章</em> </a>！</p><p id="256c" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">现在存储这些嵌入向量是不够的。人们还需要能够查询并找出相似的向量。为什么这么问？大多数现实世界的应用程序都是由基于人工智能的解决方案的向量相似性搜索驱动的。这包括谷歌的视觉(图像)搜索、网飞或亚马逊的推荐系统、谷歌的文本搜索引擎、多模态搜索、重复数据删除等等！</p><p id="bb4e" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">大规模存储、管理和查询矢量并不是一项简单的任务。你需要专门的工具，矢量数据库是最有效的工具！在本文中，我们将涵盖以下几个方面:</p><ul class=""><li id="7b28" class="nl nm iq lq b lr mo lu mp lx nn mb no mf np mj nq nr ns nt bi translated">向量和向量相似性搜索</li><li id="46c0" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated">什么是矢量数据库？</li><li id="9f16" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated">Milvus —世界上最先进的矢量数据库</li><li id="1861" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated">使用Milvus执行视觉图像搜索——一个用例蓝图</li></ul><p id="529c" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我们开始吧！</p><h1 id="4faa" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">向量和向量相似性搜索</h1><p id="3d33" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">早些时候，我们确定了将图像和文本等非结构化数据表示为向量的必要性，因为计算机只能理解数字。我们通常利用人工智能模型，成为更具体的深度学习模型，将非结构化数据转换为机器可读的数字向量。通常，这些向量基本上是一个浮点数列表，它们共同表示底层的项目(图像、文本等)。).</p><h2 id="7f89" class="oa kx iq bd ky ob oc dn lc od oe dp lg lx of og li mb oh oi lk mf oj ok lm ol bi translated">理解向量</h2><p id="1ef1" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">考虑到自然语言处理(NLP)领域，我们有许多单词嵌入模型，如<a class="ae kv" href="https://towardsdatascience.com/understanding-feature-engineering-part-4-deep-learning-methods-for-text-data-96c44370bbfa" rel="noopener" target="_blank"> Word2Vec、GloVe和FastText </a>，它们可以帮助将单词表示为数字向量。随着时间的推移，我们已经看到了像<a class="ae kv" href="https://jalammar.github.io/illustrated-bert/" rel="noopener ugc nofollow" target="_blank"> BERT </a>这样的<a class="ae kv" href="https://arxiv.org/abs/1706.03762" rel="noopener ugc nofollow" target="_blank"> Transformer </a>模型的兴起，这些模型可以用来学习上下文嵌入向量以及整个句子和段落的更好表示。</p><p id="67e5" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">同样，在计算机视觉领域，我们有像<a class="ae kv" href="https://proceedings.neurips.cc/paper/2012/file/c399862d3b9d6b76c8436e924a68c45b-Paper.pdf" rel="noopener ugc nofollow" target="_blank">卷积神经网络</a>这样的模型，可以帮助从图像和视频等视觉数据中学习表示。随着变形金刚的崛起，我们也有了<a class="ae kv" href="https://arxiv.org/abs/2010.11929" rel="noopener ugc nofollow" target="_blank">视觉变形金刚</a>，可以比普通CNN表现更好。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/ee1501cd843a1a05f03128fb2fd2de57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JpPbwdWCAmmWOoJd.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">从非结构化数据中提取见解的示例工作流；来源:<a class="ae kv" href="https://milvus.io/blog/deep-dive-1-milvus-architecture-overview.md" rel="noopener ugc nofollow" target="_blank"> Milvus博客</a></figcaption></figure><p id="2ac5" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">这种向量的优势在于，我们可以利用它们来解决现实世界的问题，例如视觉搜索，在视觉搜索中，您通常上传一张照片，然后获得包括视觉上相似的图像的搜索结果。Google将此作为其搜索引擎中非常受欢迎的功能，如下例所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/46aeeecb35793e9b1d03260046204fce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YqYjhWuDoOhbYj8QA0sJNA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">谷歌视觉图像搜索的一个例子；来源:作者创作</figcaption></figure><p id="1846" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">这种应用程序由数据向量和向量相似性搜索提供支持。如果你考虑X-Y笛卡尔坐标空间中的两点。两点之间的距离可以计算为简单的欧几里德距离，如下式所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/29c6dd861d100519bd3b3436829ec4ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MdLqZwITzJoQlazn.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">二维欧几里德距离；来源:<a class="ae kv" href="https://en.wikipedia.org/wiki/Euclidean_distance" rel="noopener ugc nofollow" target="_blank">维基百科</a></figcaption></figure><p id="4998" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">现在，假设每个数据点是一个D维向量，您仍然可以使用欧几里德距离或其他距离度量，如汉明距离或余弦距离，来确定两个数据点之间的距离。这可以帮助建立接近度或相似度的概念，该概念可以被用作可量化的度量，以使用它们的向量找到给定参考项目的相似项目。</p><h2 id="bfd5" class="oa kx iq bd ky ob oc dn lc od oe dp lg lx of og li mb oh oi lk mf oj ok lm ol bi translated">理解向量相似性搜索</h2><p id="b02d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">向量相似性搜索，通常被称为最近邻(NN)搜索，基本上是计算参考项目(我们希望找到相似项目)和现有项目集合(通常在数据库中)之间的成对相似性(或距离)并返回前“k”个最近邻的过程，这些最近邻是前“k”个最相似的项目。计算这种相似性的关键部分是相似性度量，它可以是欧几里德距离、内积、余弦距离、汉明距离等。距离越小，向量越相似。</p><p id="9851" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">精确最近邻(NN)搜索的挑战是可伸缩性。每次都需要计算N个距离(假设存在N个项目)才能得到相似的项目。这可能会非常慢，尤其是如果你没有在某个地方存储和索引数据(比如向量数据库！).为了加快计算速度，我们通常利用近似最近邻搜索，这通常被称为ANN搜索，最终将向量存储到索引中。该索引有助于以智能的方式存储这些向量，以实现对参考查询项目的“近似”相似邻居的快速检索。典型的人工神经网络索引方法包括:</p><ul class=""><li id="fe05" class="nl nm iq lq b lr mo lu mp lx nn mb no mf np mj nq nr ns nt bi translated"><strong class="lq ir">矢量变换:</strong>这包括向矢量添加额外的变换，如降维(如PCA \ t-SNE)、旋转等</li><li id="8fdf" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated"><strong class="lq ir">矢量编码:</strong>这包括应用基于数据结构的技术，如位置敏感散列(LSH)、量化、树等。这有助于更快地检索相似的项目</li><li id="9e8c" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated"><strong class="lq ir">非穷举搜索方法:</strong>这主要用于防止穷举搜索，包括邻域图、倒排索引等方法。</li></ul><p id="5cab" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">这表明，要构建任何矢量相似性搜索应用程序，您需要一个能够帮助您大规模高效存储、索引和查询(搜索)的数据库。进入向量数据库！</p><h1 id="0066" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">什么是矢量数据库？</h1><p id="7907" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">鉴于我们现在已经了解了如何使用向量来表示非结构化数据以及向量搜索是如何工作的，我们可以将这两个概念结合起来构建一个向量数据库。</p><p id="9425" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">向量数据库是可扩展的数据平台，用于存储、索引和查询由非结构化数据(图像、文本等)生成的嵌入向量。)使用深度学习模型。</p><p id="41d9" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">处理大量的向量进行相似性搜索(即使有索引)会非常昂贵。尽管如此，最好和最先进的向量数据库应该允许你插入、索引和搜索数百万或数十亿的目标向量，此外还可以指定你选择的索引算法和相似性度量。</p><p id="2380" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">考虑到要在企业中使用健壮的数据库管理系统，矢量数据库主要应满足以下关键要求:</p><ol class=""><li id="7e56" class="nl nm iq lq b lr mo lu mp lx nn mb no mf np mj op nr ns nt bi translated"><strong class="lq ir">可扩展</strong>:矢量数据库应该能够索引和运行数十亿嵌入矢量的近似最近邻搜索</li><li id="29d1" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj op nr ns nt bi translated"><strong class="lq ir">可靠</strong>:向量数据库应该能够处理内部故障而不丢失数据，并且对操作影响最小，即具有容错能力</li><li id="96a2" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj op nr ns nt bi translated"><strong class="lq ir">快</strong>:查询和写入速度对矢量数据库很重要。对于Snapchat和Instagram这样每秒钟可以上传成百上千张新图片的平台来说，速度成为一个非常重要的因素。</li></ol><p id="fd43" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">向量数据库不仅仅存储数据向量。他们还负责使用有效的数据结构来索引这些向量，以便快速检索和支持CRUD(创建、读取、更新和删除)操作。矢量数据库还应该理想地支持属性过滤，即基于元数据字段(通常是标量字段)进行过滤。一个简单的例子是根据特定品牌的图像向量检索相似的鞋子。在这里，品牌是过滤所基于的属性。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/3e2dcbaa9a5cef3cee0c95070fb2886f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sB_RErQhXTfzA2rN.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">米尔乌斯过滤机制；来源:<a class="ae kv" href="https://zilliz.com/learn/attribute-filtering" rel="noopener ugc nofollow" target="_blank">属性过滤</a></figcaption></figure><p id="07a1" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">上图展示了<a class="ae kv" href="https://milvus.io/" rel="noopener ugc nofollow" target="_blank"> Milvus </a>，我们马上要谈到的向量数据库，是如何使用属性过滤的。<a class="ae kv" href="https://milvus.io/" rel="noopener ugc nofollow" target="_blank"> Milvus </a>将位掩码的概念引入过滤机制，以基于满足特定属性过滤器来保持位掩码为1的相似向量。更多细节请见<a class="ae kv" href="https://zilliz.com/learn/attribute-filtering" rel="noopener ugc nofollow" target="_blank"> <em class="mn">此处</em> </a>。</p><h1 id="d829" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">Milvus —世界上最先进的矢量数据库</h1><p id="83fd" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><a class="ae kv" href="https://milvus.io/" rel="noopener ugc nofollow" target="_blank"> Milvus </a>是一个开源的矢量数据库管理平台，专门为大规模矢量数据和简化机器学习操作(MLOps)而构建。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/a733b240c553b247d57b01621fcc14bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*X0NnDHdsO8pIEGQ_.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">米尔乌斯；来源:<a class="ae kv" href="https://milvus.io/blog/scalable-and-blazing-fast-similarity-search-with-milvus-vector-database.md" rel="noopener ugc nofollow" target="_blank"> Milvus博客</a></figcaption></figure><p id="8493" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><a class="ae kv" href="https://zilliz.com/" rel="noopener ugc nofollow" target="_blank"> Zilliz </a>，是建立世界上最先进的矢量数据库<a class="ae kv" href="https://milvus.io/" rel="noopener ugc nofollow" target="_blank"> Milvus </a>的幕后组织，旨在加速下一代数据结构的开发。Milvus目前是T4 LF AI数据基金会的一个毕业项目，专注于管理海量非结构化数据集的存储和搜索。该平台的效率和可靠性简化了大规模部署AI模型和MLOps的过程。Milvus有着广泛的应用，包括药物发现、计算机视觉、推荐系统、聊天机器人等等。</p><h2 id="bfd1" class="oa kx iq bd ky ob oc dn lc od oe dp lg lx of og li mb oh oi lk mf oj ok lm ol bi translated">Milvus的主要特征</h2><p id="f447" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Milvus具有许多有用的特性和功能，例如:</p><ul class=""><li id="b6fd" class="nl nm iq lq b lr mo lu mp lx nn mb no mf np mj nq nr ns nt bi translated"><strong class="lq ir">万亿矢量数据集上的超快的搜索速度:</strong>在万亿矢量数据集上，矢量搜索和检索的平均延迟以毫秒计。</li><li id="8480" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated"><strong class="lq ir">简化的非结构化数据管理</strong> : Milvus拥有丰富的API，专为数据科学工作流而设计。</li><li id="6ead" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated"><strong class="lq ir">可靠、始终在线的矢量数据库:</strong> Milvus的内置复制和故障转移/故障回复功能可确保数据和应用程序始终保持业务连续性。</li><li id="3add" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated"><strong class="lq ir">高可伸缩性和弹性:</strong>组件级可伸缩性使得按需伸缩成为可能。</li><li id="5f2e" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated"><strong class="lq ir">混合搜索:</strong>除了向量，Milvus还支持布尔、字符串、整数、浮点数等数据类型。Milvus将标量过滤与强大的向量相似性搜索结合起来(如前面的鞋子相似性示例所示)。</li><li id="0737" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated"><strong class="lq ir">统一的Lambda结构:</strong> Milvus结合了流和批处理进行数据存储，以平衡及时性和效率。</li><li id="503e" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated"><a class="ae kv" href="https://milvus.io/docs/v2.0.x/timetravel_ref.md" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir">时间旅行:</strong> </a> Milvus为所有的数据插入和删除操作维护一个时间线。它允许用户在搜索中指定时间戳，以在指定的时间点检索数据视图。</li><li id="91a6" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated"><strong class="lq ir">社区支持&amp;行业认可:</strong>拥有超过1，000名企业用户，<a class="ae kv" href="https://github.com/milvus-io/milvus" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上有10.5K+的星级，以及一个活跃的开源社区，当您使用Milvus时，您并不孤单。作为<a class="ae kv" href="https://lfaidata.foundation/" rel="noopener ugc nofollow" target="_blank"> LF AI &amp;数据基金会</a>下的研究生项目，Milvus有机构支持。</li></ul><h2 id="4a44" class="oa kx iq bd ky ob oc dn lc od oe dp lg lx of og li mb oh oi lk mf oj ok lm ol bi translated">矢量数据管理和搜索的现有方法</h2><p id="7d56" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">构建由向量相似性搜索支持的人工智能系统的一种常见方法是将近似最近邻搜索(ANNS)等算法与开源库配对，例如:</p><ul class=""><li id="4365" class="nl nm iq lq b lr mo lu mp lx nn mb no mf np mj nq nr ns nt bi translated"><a class="ae kv" href="https://ai.facebook.com/tools/faiss/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir">脸书AI相似性搜索(FAISS): </strong> </a> <strong class="lq ir"> </strong>该框架实现了高效的相似性搜索和密集向量的聚类。它包含在任意大小的向量集中搜索的算法，直到那些可能不适合RAM的向量。它支持索引功能，如反向多索引和产品量化</li><li id="a86e" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated"><a class="ae kv" href="https://github.com/spotify/annoy" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir"> Spotify的Annoy(近似最近邻哦耶)</strong> </a> <strong class="lq ir"> : </strong>该框架使用<a class="ae kv" href="http://en.wikipedia.org/wiki/Locality-sensitive_hashing#Random_projection" rel="noopener ugc nofollow" target="_blank">随机投影</a>并构建一棵树，以实现密集向量的大规模人工神经网络</li><li id="3628" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated"><a class="ae kv" href="https://github.com/google-research/google-research/tree/master/scann" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir"> Google的ScaNN(可伸缩最近邻):</strong> </a>这个框架在规模上执行高效的向量相似性搜索。由实现组成，其中包括最大内积搜索(MIPS)的搜索空间修剪和量化</li></ul><p id="eaf3" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">虽然这些库各有各的用处，但由于一些限制，这些算法库组合并不等同于像Milvus这样的成熟的矢量数据管理系统。我们现在将讨论其中的一些限制。</p><h2 id="fbca" class="oa kx iq bd ky ob oc dn lc od oe dp lg lx of og li mb oh oi lk mf oj ok lm ol bi translated">现有方法的局限性</h2><p id="cda7" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">前面讨论的用于管理矢量数据的现有方法有以下限制:</p><ol class=""><li id="f601" class="nl nm iq lq b lr mo lu mp lx nn mb no mf np mj op nr ns nt bi translated"><strong class="lq ir">灵活性:</strong>现有系统通常将所有数据存储在主内存中，因此它们不能轻松地跨多台机器以分布式模式运行，并且不太适合处理大规模数据集</li><li id="0355" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj op nr ns nt bi translated"><strong class="lq ir">动态数据处理:</strong>数据一旦输入到现有系统中，通常被认为是静态的，这使得动态数据的处理变得复杂，几乎不可能进行实时搜索</li><li id="318e" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj op nr ns nt bi translated"><strong class="lq ir">高级查询处理:</strong>大多数工具不支持高级查询处理(例如，属性过滤、混合搜索和多向量查询)，而高级查询处理对于构建支持高级过滤的真实世界相似性搜索引擎是必不可少的。</li><li id="bd5c" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj op nr ns nt bi translated"><strong class="lq ir">异构计算优化:</strong>很少有平台同时在CPU和GPU(不包括FAISS)上为异构系统架构提供优化，从而导致效率损失。</li></ol><p id="1bfa" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">Milvus试图克服所有这些限制，我们将在下一节详细讨论这一点。</p><h2 id="8bdd" class="oa kx iq bd ky ob oc dn lc od oe dp lg lx of og li mb oh oi lk mf oj ok lm ol bi translated">Milvus的优势—了解知识</h2><p id="787f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><a class="ae kv" href="https://milvus.io/" rel="noopener ugc nofollow" target="_blank"> Milvus </a>试图通过以下方式处理并成功解决建立在低效矢量数据管理和相似性搜索算法之上的现有系统的局限性:</p><ul class=""><li id="8e2c" class="nl nm iq lq b lr mo lu mp lx nn mb no mf np mj nq nr ns nt bi translated">它通过支持各种应用程序接口(包括Python、Java、Go、C++和RESTful APIs中的SDK)增强了灵活性</li><li id="9569" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated">它支持多种矢量索引类型(例如，基于量化的索引和基于图形的索引)，以及高级查询处理</li><li id="ea76" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated">Milvus使用日志结构的合并树(LSM树)处理动态向量数据，保持数据插入和删除的效率，并实时搜索</li><li id="97ea" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated">Milvus还为现代CPU和GPU上的异构计算架构提供优化，允许开发人员针对特定场景、数据集和应用环境调整系统</li></ul><p id="b989" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">Knowhere，Milvus的向量执行引擎，是一个操作者接口，用于访问系统上层的服务和系统下层的向量相似性搜索库，如Faiss、Hnswlib和airy。此外，Knowhere还负责异构计算。Knowhere控制在哪些硬件(例如CPU或GPU)上执行索引构建和搜索请求。这就是Knowhere得名的原因——知道在哪里执行操作。未来的版本将支持更多类型的硬件，包括DPU和TPU。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/4a2e55c12ded513a0c88011f45d47fca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mfoZulvlZzwwiMhLlnr3Pw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">米尔乌斯的Knowhere建筑:来源:<a class="ae kv" href="https://milvus.io/blog/deep-dive-8-knowhere.md" rel="noopener ugc nofollow" target="_blank">知乎深潜</a></figcaption></figure><p id="f643" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">Milvus中的计算主要涉及向量和标量运算。Knowhere只处理Milvus中向量的运算。上图展示了Milvus中的Knowhere架构。最底层是系统硬件。第三方索引库位于硬件之上。然后Knowhere通过CGO与顶层的索引节点和查询节点进行交互。Knowhere不仅进一步扩展了Faiss的功能，还优化了性能，并具有几个优点，包括支持BitsetView、支持更多类似的指标、支持AVX512指令集、自动SIMD指令选择和其他性能优化。详情可以在 这里找到<a class="ae kv" href="https://milvus.io/blog/deep-dive-8-knowhere.md" rel="noopener ugc nofollow" target="_blank"> <em class="mn">。</em></a></p><h2 id="b83b" class="oa kx iq bd ky ob oc dn lc od oe dp lg lx of og li mb oh oi lk mf oj ok lm ol bi translated">米尔乌斯建筑</h2><p id="226a" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">下图展示了<a class="ae kv" href="https://milvus.io/" rel="noopener ugc nofollow" target="_blank"> Milvus </a>平台的整体架构。Milvus将数据流与控制流分开，分为四层，在可伸缩性和灾难恢复方面相互独立。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/7251bb827f72333976807b111736a65f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QOJ_Zivjx-iOyblu.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">米尔乌斯建筑；来源:<a class="ae kv" href="https://milvus.io/blog/deep-dive-1-milvus-architecture-overview.md" rel="noopener ugc nofollow" target="_blank"> Milvus概述</a></figcaption></figure><ul class=""><li id="307b" class="nl nm iq lq b lr mo lu mp lx nn mb no mf np mj nq nr ns nt bi translated"><strong class="lq ir">接入层:</strong>接入层由一组无状态代理组成，作为系统的前端层和用户的端点。</li><li id="4820" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated">协调器服务:协调器服务负责集群拓扑节点管理、负载平衡、时间戳生成、数据声明和数据管理</li><li id="8d74" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated"><strong class="lq ir">工作者节点:</strong>工作者或执行节点执行由协调器服务发出的指令和由代理发起的数据操作语言(DML)命令。Milvus中的一个worker节点类似于<a class="ae kv" href="https://hadoop.apache.org/" rel="noopener ugc nofollow" target="_blank"> Hadoop </a>中的一个data节点，或者HBase中的一个区域服务器</li><li id="0bdd" class="nl nm iq lq b lr nu lu nv lx nw mb nx mf ny mj nq nr ns nt bi translated"><strong class="lq ir">存储:</strong>这是Milvus的基石，负责数据持久化。存储层由<strong class="lq ir">元存储</strong>、<strong class="lq ir">日志代理</strong>和<strong class="lq ir">对象存储</strong>组成</li></ul><p id="a6a4" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">请点击查看更多关于建筑的细节！</p><h1 id="4da7" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">使用Milvus执行视觉图像搜索——一个用例蓝图</h1><p id="319f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">像Milvus这样的开源矢量数据库使得任何企业都可以用最少的步骤创建自己的视觉图像搜索系统。开发人员可以使用预训练的人工智能模型将他们自己的图像数据集转换为向量，然后利用Milvus通过图像搜索类似的产品。让我们看看下面这个如何设计和构建这样一个系统的蓝图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/ffb461a1e7122ab201a02799511f118a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UbJ7NPS1RZcMQPDP.jpg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">视觉图像搜索的工作流程；来源:<a class="ae kv" href="https://github.com/milvus-io/bootcamp/tree/master/solutions/reverse_image_search/quick_deploy" rel="noopener ugc nofollow" target="_blank">反向图片搜索</a></figcaption></figure><p id="9311" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">在这个工作流程中，我们可以使用像<a class="ae kv" href="https://github.com/towhee-io/towhee" rel="noopener ugc nofollow" target="_blank">to hee</a>这样的开源框架来利用像ResNet-50这样的预训练模型，并从图像中提取矢量，在Milvus中轻松存储和索引这些矢量，还可以在MySQL数据库中存储图像id到实际图片的映射。一旦数据被编入索引，我们就可以轻松上传任何新图像，并使用Milvus进行大规模图像搜索。下图显示了一个视觉图像搜索示例。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/02b911dcce570ee9bba6e035a059b15d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XLI6edo0vVckGgUn.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">示例视觉搜索示例；来源:<a class="ae kv" href="https://github.com/milvus-io/bootcamp/tree/master/solutions/reverse_image_search/quick_deploy" rel="noopener ugc nofollow" target="_blank">反向图片搜索</a></figcaption></figure><blockquote class="mw"><p id="1808" class="mx my iq bd mz na ow ox oy oz pa mj dk translated"><a class="ae kv" href="https://github.com/milvus-io/bootcamp/tree/master/solutions/reverse_image_search/quick_deploy" rel="noopener ugc nofollow" target="_blank">感谢Milvus，一定要看看GitHub上开源的详细教程。</a></p></blockquote><h1 id="c762" class="kw kx iq bd ky kz la lb lc ld le lf lg jw pb jx li jz pc ka lk kc pd kd lm ln bi translated">结论</h1><p id="4a9d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在这篇文章中，我们已经讨论了相当多的内容。我们从使用Milvus(一个开源矢量数据库)来大规模表示非结构化数据、利用矢量和矢量相似性搜索的挑战开始。我们讨论了Milvus如何构建的细节和为其提供动力的关键组件，以及如何解决现实世界问题的蓝图，即使用Milvus进行视觉图像搜索。一定要试一试，开始用<a class="ae kv" href="https://milvus.io/" rel="noopener ugc nofollow" target="_blank"> Milvus </a>解决你自己的现实世界问题！</p></div><div class="ab cl pe pf hu pg" role="separator"><span class="ph bw bk pi pj pk"/><span class="ph bw bk pi pj pk"/><span class="ph bw bk pi pj"/></div><div class="ij ik il im in"><p id="4cc9" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">本文内容改编自我在Milvus博客<a class="ae kv" href="https://milvus.io/blog/scalable-and-blazing-fast-similarity-search-with-milvus-vector-database.md" rel="noopener ugc nofollow" target="_blank"><em class="mn"/></a>上的文章。</p></div><div class="ab cl pe pf hu pg" role="separator"><span class="ph bw bk pi pj pk"/><span class="ph bw bk pi pj pk"/><span class="ph bw bk pi pj"/></div><div class="ij ik il im in"><blockquote class="mk ml mm"><p id="1b81" class="lo lp mn lq b lr mo jr lt lu mp ju lw mq mr lz ma ms mt md me mu mv mh mi mj ij bi translated">喜欢这篇文章吗？请<a class="ae kv" href="https://www.linkedin.com/in/dipanzan/" rel="noopener ugc nofollow" target="_blank">联系我</a>讨论更多信息或给出反馈！</p></blockquote><div class="pl pm gp gr pn po"><a href="https://www.linkedin.com/in/dipanzan/" rel="noopener  ugc nofollow" target="_blank"><div class="pp ab fo"><div class="pq ab pr cl cj ps"><h2 class="bd ir gy z fp pt fr fs pu fu fw ip bi translated">Dipanjan Sarkar -首席数据科学家- SIT学院| LinkedIn</h2><div class="pv l"><h3 class="bd b gy z fp pt fr fs pu fu fw dk translated">应大众的要求，我最近重新开放了数据科学和职业的(付费)咨询和指导会议…</h3></div><div class="pw l"><p class="bd b dl z fp pt fr fs pu fu fw dk translated">www.linkedin.com</p></div></div><div class="px l"><div class="py l pz qa qb px qc kp po"/></div></div></a></div></div></div>    
</body>
</html>