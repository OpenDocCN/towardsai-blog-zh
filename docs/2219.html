<html>
<head>
<title>7 Ways to Identify and Handle Missing Data | 3 Ways You Should Not</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">识别和处理丢失数据的7种方法| 3种不应该的方法</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/7-ways-to-identify-and-handle-missing-data-3-ways-you-should-not-6bac24594006?source=collection_archive---------2-----------------------#2021-10-04">https://pub.towardsai.net/7-ways-to-identify-and-handle-missing-data-3-ways-you-should-not-6bac24594006?source=collection_archive---------2-----------------------#2021-10-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="f189" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/data-science" rel="noopener ugc nofollow" target="_blank">数据科学</a></h2><div class=""/><div class=""><h2 id="0df0" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">为ML准备高质量数据的10个策略</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/378ba1d05147086cf1d68e0dd6623813.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_qnS8jD80F1Zotwahxqm0g.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图片来自Canva Pro</figcaption></figure><p id="ca85" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi ma translated"><span class="l mb mc md bm me mf mg mh mi di"> G </span> ood数据科学家承认数据不可用背后的原因，确定缺失数据的范围，用正确的策略处理差距，并避免常见错误。</p><blockquote class="mj mk ml"><p id="85ae" class="le lf mm lg b lh li ka lj lk ll kd lm mn lo lp lq mo ls lt lu mp lw lx ly lz ij bi translated">这个故事是为那些想要理解丢失数据的概念、背后的原因以及我们必须处理它的策略的人写的——不要将理论与任何编程结构相混合。</p></blockquote><h2 id="0f88" class="mq mr iq bd ms mt mu dn mv mw mx dp my ln mz na nb lr nc nd ne lv nf ng nh iw bi translated">我们开始吧</h2><p id="477a" class="pw-post-body-paragraph le lf iq lg b lh ni ka lj lk nj kd lm ln nk lp lq lr nl lt lu lv nm lx ly lz ij bi translated"><em class="mm">“直走___米，在第二个十字路口转_ _ _ _”</em>，想象一下，如果一个导航员用一些缺失的数据为他/她指路，一个汽车司机会如何发疯。没有人喜欢看到数据集中的数据丢失。缺失数据<em class="mm">会影响</em>消费者应用程序，并让用户<em class="mm">无法做出任何决定</em>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/d881e837b9e159d77f99660a7180f8fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gli6RztEa_CLqPdvjoj9WQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图片来自Canva Pro</figcaption></figure><p id="24f7" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">数据科学家也是如此。我们也不喜欢看到数据集中的数据丢失，因为这使得原始数据不适合训练我们的底层机器学习算法。</p><h2 id="2a42" class="mq mr iq bd ms mt mu dn mv mw mx dp my ln mz na nb lr nc nd ne lv nf ng nh iw bi translated">丢失数据的原因可能是什么？</h2><p id="38c2" class="pw-post-body-paragraph le lf iq lg b lh ni ka lj lk nj kd lm ln nk lp lq lr nl lt lu lv nm lx ly lz ij bi translated">为什么只有某些部分的数据丢失了，而其他部分都是可用的！在制定战略之前，让我们先简单了解一下。</p><p id="4ea4" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">数据缺失是不可避免的，原因如下:</strong></p><ol class=""><li id="4605" class="no np iq lg b lh li lk ll ln nq lr nr lv ns lz nt nu nv nw bi translated"><strong class="lg ja">数据采集设备的故障</strong>。气象站的温度计。如果温度计上有灰尘，它可能会在短时间内停止记录温度，直到有人注意到它并清除灰尘。</li><li id="8f89" class="no np iq lg b lh nx lk ny ln nz lr oa lv ob lz nt nu nv nw bi translated">由于<strong class="lg ja">缺乏来自现场工作人员的</strong>知识，导致调查存在差距。在电话中筛选申请人的时候，新招聘人员可能会遗漏一些细节，比如——申请人在上次评估中获得的奖金数额。</li><li id="2beb" class="no np iq lg b lh nx lk ny ln nz lr oa lv ob lz nt nu nv nw bi translated"><strong class="lg ja">可选</strong>回答者填表时省略。一些客户可能不希望在反馈表中提供某些人口统计信息，如年龄、性别或收入。</li></ol><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/d530f7fa9da733d823c31ada81127478.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RLS7RkEYJxiEdXRoPTzZuw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图片来自Canva Pro</figcaption></figure><p id="42d6" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">4.由于<strong class="lg ja">安全</strong>或保密原因，从数据中明确删除某些字段。为了保密，在分发数据之前，组织可能会删除支付给某些高价值合作伙伴的销售佣金的详细信息。</p></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><p id="01f3" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">无论是什么原因，丢失的数据都会影响算法从数据中学习的能力。数据科学家必须在定义任何训练模型之前检测并解决它们。这就是需要。</p><h2 id="6856" class="mq mr iq bd ms mt mu dn mv mw mx dp my ln mz na nb lr nc nd ne lv nf ng nh iw bi translated">如何检测数据集中是否存在缺失数据？</h2><p id="defc" class="pw-post-body-paragraph le lf iq lg b lh ni ka lj lk nj kd lm ln nk lp lq lr nl lt lu lv nm lx ly lz ij bi translated">确定丢失的部分是处理它的关键。</p><p id="9c74" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">主要有5种方法来检测缺失数据的存在:</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/6e7e4aca1ed015106fb63ce4adfbdef1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cO7mDKE6rj8tsAe9ougRgg.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">由作者使用Canva Pro创建</figcaption></figure><ol class=""><li id="dd7f" class="no np iq lg b lh li lk ll ln nq lr nr lv ns lz nt nu nv nw bi translated">检查列中是否存在空值。</li><li id="51d5" class="no np iq lg b lh nx lk ny ln nz lr oa lv ob lz nt nu nv nw bi translated">检查<strong class="lg ja">计数是否匹配。</strong>如果列中的值的计数与数据集中的行数不匹配，则该列应该缺少一些值。</li><li id="82c3" class="no np iq lg b lh nx lk ny ln nz lr oa lv ob lz nt nu nv nw bi translated">寻找列中值的同质性。尽管计数匹配，但一些值可能已损坏。二十美元的地方写着二十美元。</li><li id="c362" class="no np iq lg b lh nx lk ny ln nz lr oa lv ob lz nt nu nv nw bi translated">查找列中是否存在任何无效的<strong class="lg ja">值。<br/>数值是否在规定范围内？<br/>分类值是否具有定义的列表？</strong></li><li id="c7e6" class="no np iq lg b lh nx lk ny ln nz lr oa lv ob lz nt nu nv nw bi translated">找出单个列级别的<strong class="lg ja">异常值</strong>。是的，我建议离群值也应该被视为缺失数据。</li></ol></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><p id="245e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在确定缺失数据的存在之后，下一个任务是定义一个策略来处理它。</p><h2 id="6e71" class="mq mr iq bd ms mt mu dn mv mw mx dp my ln mz na nb lr nc nd ne lv nf ng nh iw bi translated"><em class="nn">如何处理缺失的数据？</em></h2><p id="b3a3" class="pw-post-body-paragraph le lf iq lg b lh ni ka lj lk nj kd lm ln nk lp lq lr nl lt lu lv nm lx ly lz ij bi translated">在高层次上，所有的策略都分为两类:要么<em class="mm">消除</em>要么<em class="mm">替换</em>丢失的数据。</p><p id="4397" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">策略1:删除至少包含一个缺失值的所有行。<br/> </strong>一个伪算法会是这样的:</p><pre class="kp kq kr ks gt oj ok ol om aw on bi"><span id="4dd7" class="mq mr iq ok b gy oo op l oq or">for col in columns:<br/>  for row in rows:<br/>    if value is {null, blank or invalid}<br/>      delete row<br/>    end if<br/>   end for<br/>end for</span></pre><p id="2704" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这种策略会导致大量数据丢失，因此必须谨慎使用。当数据量很大并且缺失值随机分布在整个数据集中时，它非常适合。</p><p id="5006" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">随机分布确保删除某些行不会给数据集带来偏差。</p><p id="dd70" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">放在独特位置的10个温度计中只有一个没有记录下一天30分钟的温度。如果从数据集中删除某个特定温度计的所有读数，可能会对该温度计所在的测量点产生偏差。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi os"><img src="../Images/f3c73f355e6326bfc8a66f7f91b2a170.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sr56hVFQD6mT6NkOKKbrGw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">由作者使用Canva Pro创建</figcaption></figure><p id="84ac" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">策略二:用常量默认值替换。<br/> </strong>该策略易于实现，适合连续变量和分类变量。</p><p id="96a5" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">示例:<br/>临床数据集:布尔列“可用？”表示医生在某一天有空。如果该值为空/null/无效，请将其替换为“False”值。</p><p id="c4eb" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">项目管理数据集:如果缺少活动的“计划开始日期”，请用“项目开始日期”替换，该日期是一个常数。</p><p id="af40" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">策略3:替换为单变量统计<br/> </strong>估计新值，作为该特征中可用值的函数。如果是数字特征，函数可以是<em class="mm">均值、中值或众数、</em>等。在分类特征的情况下，它可以是返回最频繁出现的<em class="mm">值的函数。</em></p><p id="b58d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">例如:<br/>招聘驱动数据集:如果申请人缺少<em class="mm">‘期望薪资’</em>的值，则替换为<em class="mm">‘期望薪资’</em>特征的<strong class="lg ja">均值</strong>。</p><p id="4c49" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">策略4:替换为多元统计量<br/> </strong>在该策略中，该值被估计为同一行中其他可用值的函数。这是跨越多个特征的横向计算。</p><p id="dc39" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">例如:<br/>招聘驱动数据集:如果某个应聘人员缺少<em class="mm">【通知期限】</em>的值，则从该应聘人员的<em class="mm">【离职日期】</em>中导出。</p><p id="3111" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">策略5:迭代替换<br/> </strong>如果你认为，用一个常量替换所有缺失值会给数据集带来偏差，那么迭代替换是一个很好的策略。</p><p id="d2df" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">不是为一个特性定义一个单独的默认常量，而是定义一个可以考虑替换的常量列表。遍历该特征，并以循环方式用该列表中的常数替换每个缺失值。</p><p id="0bf3" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">示例:</strong> <br/>如果50个客户的数据中缺少“喜爱的颜色”。迭代客户列表，以循环方式在{red，green，blue}中填充一个。</p><p id="c546" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">策略六:线性向前或向后<br/> </strong>如果你认为，直接邻居比其余行提供了更可靠的信息，那么这个策略是apt。</p><p id="fa40" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">遍历一个要素，每当遇到缺失值时，将该值从上一行复制到当前行。这里的迭代可以是向前的(自顶向下)或者向后的(自底向上)。</p><p id="6956" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">示例:<br/>零售店销售交易:如果某个商品缺少批次Id，则获取前一个商品的批次Id。</p><p id="f6b4" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">工作场所访问控制日志:如果某个员工的离开时间缺失，则级联返回下一个已经离开的员工的离开时间。</p><p id="5718" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">策略7:考虑多个最近邻<br/> </strong>这是策略6和策略2的权衡。将该值估计为多个最近邻的函数。</p><p id="7415" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这种策略更适合k个最近邻的组合比单个最近邻更可靠的情况。它避免了最近邻中任何错误的长级联。</p><p id="c62a" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">为k设置一个值，计算之前k值的平均值，并填充缺失的值。如果相关性随着邻居的接近程度而变化，则计算加权平均值而不是正态平均值。</p><p id="48d6" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">例子:<br/>临床数据:“等待时间”表示患者在有机会咨询医生之前在房间中等待的时间。如果患者的“等待时间”缺失，那么从在该患者之前或之后咨询过医生的多个患者处获得是一个好主意。</p><p id="dab2" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">有可能前一个病人(n-1)已经异常地等待了很长时间。如果我们在这里进行线性向前(策略6)，就有可能级联放大数据集中的误差。相反，如果我们取前3名患者的加权平均值，那么误差会最小化并局限于当前患者。</p></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><h2 id="a906" class="mq mr iq bd ms mt mu dn mv mw mx dp my ln mz na nb lr nc nd ne lv nf ng nh iw bi translated"><em class="nn">有哪些要避免的常见错误？</em></h2><p id="655e" class="pw-post-body-paragraph le lf iq lg b lh ni ka lj lk nj kd lm ln nk lp lq lr nl lt lu lv nm lx ly lz ij bi translated">让我们仔细看看处理缺失数据时的一些常见错误，以及避免这些错误的最佳实践。</p><ol class=""><li id="b6cd" class="no np iq lg b lh li lk ll ln nq lr nr lv ns lz nt nu nv nw bi translated"><strong class="lg ja">避免异常值&amp;无效数据</strong> <br/>确保您将异常值和无效数据也视为缺失数据。在开始替换丢失的数据之前，检测并消除它们。如果不这样做，离群值会影响预测函数，最终可能会用一些不准确或有偏差的值替换缺失的数据。</li><li id="8199" class="no np iq lg b lh nx lk ny ln nz lr oa lv ob lz nt nu nv nw bi translated"><strong class="lg ja">不要忽略分布</strong> <br/>仅当缺失值在特征中随机分布时，才建议删除缺失值。如果缺失的原因在逻辑上与任何其他属性或特征相关，则必须协作删除这些行。<br/>示例:<br/>气候数据:如果所有缺失的“温度”值都映射到特定的温度计，那么您不应该显式删除这些行。首先，尝试使用数据的其他部分来估计这些值。如果估计是不可能的，那么删除所有行的故障温度计。虽然它可能包含一些具有正确值的行，但是这些行也应该与丢失的值一起被删除，以避免固有偏差。</li><li id="9724" class="no np iq lg b lh nx lk ny ln nz lr oa lv ob lz nt nu nv nw bi translated"><strong class="lg ja">不拘一格</strong> <br/>处理缺失值的主要目的是提高数据质量。使用在估计缺失值时提供最佳精确度的最佳估计方法。<br/>您如何知道所选择的评估方法是否是最佳方法？<br/>只有在训练了模型并验证了模型的准确性之后，你才会知道。保持算法和所有其他东西不变，重复数据准备、训练和验证的过程。这一次，使用不同的估计方法来替换丢失的值。模型精度的差异可归因于缺失值估计方法选择的差异。重复这个过程，直到你得到最好的估计方法。</li></ol><h1 id="c226" class="ot mr iq bd ms ou ov ow mv ox oy oz my kf pa kg nb ki pb kj ne kl pc km nh pd bi translated">总结一下:</h1><p id="82df" class="pw-post-body-paragraph le lf iq lg b lh ni ka lj lk nj kd lm ln nk lp lq lr nl lt lu lv nm lx ly lz ij bi translated">本文解释了处理缺失数据的四个要素。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/60f3283f6a599924014db415de912acf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TlTLF-cNPYS121ZtolmH2w.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</figcaption></figure><p id="c8de" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">数据质量对于训练最大似然算法的准确性至关重要。由于收集过程中的几个原因，丢失数据是不可避免的。在应用任何替换技术之前，确定缺失值(包括异常值和无效数据)的范围非常重要。讨论了处理缺失值的七种策略，并举例说明了合适的业务环境。从选择其中一个开始，重复这个练习，直到你看到模型中的最佳精确度。我们结束了👏 👏。</p></div></div>    
</body>
</html>