<html>
<head>
<title>Identifying and Handling Missing Data in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Python中识别和处理缺失数据</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/identifying-and-handling-missing-data-in-python-ebe114776f78?source=collection_archive---------1-----------------------#2021-09-24">https://pub.towardsai.net/identifying-and-handling-missing-data-in-python-ebe114776f78?source=collection_archive---------1-----------------------#2021-09-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="eee9" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/data-analysis" rel="noopener ugc nofollow" target="_blank">数据分析</a></h2><div class=""/><div class=""><h2 id="1099" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">清理和转换数据</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/eca5270e80eeb8f0de2a1454c18fc49c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*V2CvyHmMZAFzn7gZ"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">由<a class="ae lh" href="https://unsplash.com/@campaign_creators?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">活动创作者</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="8177" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">数据科学项目中最耗时的部分是清理和准备用于建模的数据。实践数据集中的数据和真实世界中的数据的区别在于真实的数据是杂乱和不干净的。大约80%的时间花在清理和转换数据上。更麻烦的是，不同的数据源可能以不同的方式指出缺失的数据。</p><p id="8244" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们将讨论缺失信息的一些广泛思考，研究Pandas如何决定解决它，并展示一些隐式Pandas工具来处理Python中的缺失数据。</p><p id="53e3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">由于计算速度和适应性的原因，NaN是缺省的missing worth标记，我们应该可以选择用各种类型的数据有效地区分这个值:浮点、整数、布尔和一般对象。</p><blockquote class="me mf mg"><p id="a32c" class="li lj mh lk b ll lm kd ln lo lp kg lq mi ls lt lu mj lw lx ly mk ma mb mc md im bi translated"><strong class="lk jd"> <em class="it">识别缺失数据</em> </strong></p></blockquote><p id="f9f4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们创建一个带有缺失值的数据帧，并检查熊猫如何处理缺失值。</p><pre class="ks kt ku kv gt ml mm mn mo aw mp bi"><span id="d43b" class="mq mr it mm b gy ms mt l mu mv">#Importing the libraries<br/>import pandas as pd<br/>import numpy as np</span><span id="98a0" class="mq mr it mm b gy mw mt l mu mv">#Creating a dataframe of 5 rows and 3 columns.<br/>#we will later insert c &amp; d rows as blank</span><span id="43ae" class="mq mr it mm b gy mw mt l mu mv">df=pd.DataFrame(np.random.randn(5,4),index=<br/>      ["a","b","e","f","g"],columns=["one","two","three","four"])</span><span id="180b" class="mq mr it mm b gy mw mt l mu mv">#reindexing the rows to insert missing values<br/>df=df.reindex(["a","b","c","d","e","f","g"])<br/>df</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/f12069841d5e54d151144ab7b2d203bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*xYKs_a4rGWdq5VlRCn3HFA.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者的照片</figcaption></figure><p id="86b0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这里的输出中，NaN表示不是数字。np.nan、None和NaT(对于datetime64[ns]类型)是熊猫的标准缺失值。</p><blockquote class="me mf mg"><p id="a3db" class="li lj mh lk b ll lm kd ln lo lp kg lq mi ls lt lu mj lw lx ly mk ma mb mc md im bi translated"><strong class="lk jd"> <em class="it">检查缺失数据</em> </strong></p></blockquote><p id="66d0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Pandas提供isnull()和notnull()函数，使检测缺失值变得更容易(跨不同的数组数据类型)，这些函数也用于Series和DataFrame对象。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi my"><img src="../Images/4227afd2490b5f5f25028a29d3c94805.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*FLVvrlvIrb1_4RVY579bMA.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者的照片</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mz"><img src="../Images/cb752d82ac63277b1fe9ea68f6e042bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nf_mnobEHnxU5jIfIL0TvQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者的照片</figcaption></figure><blockquote class="me mf mg"><p id="a5d4" class="li lj mh lk b ll lm kd ln lo lp kg lq mi ls lt lu mj lw lx ly mk ma mb mc md im bi translated"><strong class="lk jd"> <em class="it">有缺失数据的计算</em> </strong></p></blockquote><ul class=""><li id="b278" class="na nb it lk b ll lm lo lp lr nc lv nd lz ne md nf ng nh ni bi translated">添加数据时，NA将被视为零。</li><li id="585a" class="na nb it lk b ll nj lo nk lr nl lv nm lz nn md nf ng nh ni bi translated">如果结果是NA，则意味着所有数据都是NA。</li></ul><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi no"><img src="../Images/96a3d90c2189b6bd1900c1a8006f02fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ddln7dsVSqI8yvqOjJeW3Q.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者的照片</figcaption></figure><div class="np nq gp gr nr ns"><a rel="noopener  ugc nofollow" target="_blank" href="/python-examples-to-make-algorithm-more-robust-with-exception-handling-6bff7a127786"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd jd gy z fp nx fr fs ny fu fw jc bi translated">Python示例通过异常处理使算法更加健壮</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">程序正常流程中的错误中断</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">pub.towardsai.net</p></div></div><div class="ob l"><div class="oc l od oe of ob og lb ns"/></div></div></a></div><div class="np nq gp gr nr ns"><a rel="noopener  ugc nofollow" target="_blank" href="/what-are-python-decorators-in-function-b1776b049760"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd jd gy z fp nx fr fs ny fu fw jc bi translated">Python Decorators在功能上是什么？</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">向程序添加新功能</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">pub.towardsai.net</p></div></div><div class="ob l"><div class="oh l od oe of ob og lb ns"/></div></div></a></div><blockquote class="me mf mg"><p id="aae2" class="li lj mh lk b ll lm kd ln lo lp kg lq mi ls lt lu mj lw lx ly mk ma mb mc md im bi translated"><strong class="lk jd"> <em class="it">清理/填充缺失数据</em> </strong></p></blockquote><p id="572b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">pandas对象使用各种数据操作方法来处理丢失的数据。</p><h2 id="b87a" class="mq mr it bd oi oj ok dn ol om on dp oo lr op oq or lv os ot ou lz ov ow ox iz bi translated"><strong class="ak"> <em class="oy"> A .填充缺失值:fillna() </em> </strong></h2><p id="011b" class="pw-post-body-paragraph li lj it lk b ll oz kd ln lo pa kg lq lr pb lt lu lv pc lx ly lz pd mb mc md im bi translated">替换缺失值是一种常见的操作。Pandas为这个问题提供了一个非常方便的方法:fillna()可以用非na数据“填充”NA值。为了减少这种数据，fillna()提供了一些不同的策略。例如，我们可以简单地将每个NaN替换为“未知”或0。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/e3923a43a8c6ac62bf661e4714aadfdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*G5mFpDbYkOPm4gpgiTsndw.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者的照片</figcaption></figure><p id="7860" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们可以填充每个缺失的值，这被称为回填策略。在这里，我们用数据库中给定记录之后出现的第一个非空值填充。我们也可能有一个非空值，我们希望用另一个值来替换它。</p><h2 id="460e" class="mq mr it bd oi oj ok dn ol om on dp oo lr op oq or lv os ot ou lz ov ow ox iz bi translated">B.向前和向后填充NA</h2><p id="c685" class="pw-post-body-paragraph li lj it lk b ll oz kd ln lo pa kg lq lr pb lt lu lv pc lx ly lz pd mb mc md im bi translated">使用方法参数，丢失的值可以用它们之前或之后的值替换。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/fefc6c90c81b7dad9342e72abc2f0169.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*FxofIagkVh8I1kP5gU5blw.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者的照片</figcaption></figure><p id="8411" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这里，索引c和d的NaN现在已经被前一行的值填充，如果我们只希望连续的间隙填充到一定数量的数据点，我们也可以限制行数</p><p id="fdac" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">与ffill类似，我们也可以向后填充缺失的值，bfill代表向后填充。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/a2078924f55fc89808674e29d37bba33.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/1*gxuCH_qtIbWAh9iK7sPZMA.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者的照片</figcaption></figure><p id="a63f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">可用的填充方法</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/2992d1b48c6b44ce265ebb166ecbcdc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*IscPfRfzxZB2g0vlxCQ9QQ.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者的照片</figcaption></figure><p id="8853" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">对于时间序列信息，使用pad/ffill是非常正常的，因此在每个时间点都可以访问“最后一个已知值”。</p><p id="a997" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ffill()与fillna(method='ffill ')相当，bfill()与fillna(method='bfill ')相同</p><h2 id="ab25" class="mq mr it bd oi oj ok dn ol om on dp oo lr op oq or lv os ot ou lz ov ow ox iz bi translated">C.删除缺少的值</h2><p id="3763" class="pw-post-body-paragraph li lj it lk b ll oz kd ln lo pa kg lq lr pb lt lu lv pc lx ly lz pd mb mc md im bi translated">我们还可以用dropna()函数删除带有缺失数据的轴标签。要选择行(0)或列(1)，需要使用轴参数。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/80f3cfef09bbc0419e213c6973efdb16.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*wbrffUPJbOCGfLbJk99rLw.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者的照片</figcaption></figure><p id="b874" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这里，c &amp; d行已被删除，因为我们取了轴0。</p><p id="f258" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">此外，该参数如何用于设置条件下降。</p><ul class=""><li id="28f9" class="na nb it lk b ll lm lo lp lr nc lv nd lz ne md nf ng nh ni bi translated">how='any ':如果数据帧中有任何缺失值，则删除</li><li id="9fae" class="na nb it lk b ll nj lo nk lr nl lv nm lz nn md nf ng nh ni bi translated">how='all ':如果数据帧中缺少所有值，则删除</li></ul><p id="569e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">此外，使用thresh参数，我们可以为要删除的行/列设置缺失值的限制。</p><h2 id="278d" class="mq mr it bd oi oj ok dn ol om on dp oo lr op oq or lv os ot ou lz ov ow ox iz bi translated">D.插入文字</h2><p id="dd35" class="pw-post-body-paragraph li lj it lk b ll oz kd ln lo pa kg lq lr pb lt lu lv pc lx ly lz pd mb mc md im bi translated">interpolate() t默认情况下对Series和DataFrame对象在缺失的数据点执行线性插值。<strong class="lk jd">插值</strong>可以定义为一种从已知值的离散排列中找出变量中间值的方法。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pj"><img src="../Images/568683140942fa895627373e232733f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YFy4OpsKNHxiGwCUsbXxhA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者的照片</figcaption></figure><p id="1285" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">您正在处理的数据类型决定了合适的插值方法:</strong></p><ul class=""><li id="2f49" class="na nb it lk b ll lm lo lp lr nc lv nd lz ne md nf ng nh ni bi translated">如果你正在处理一个增长速度的时间序列，method='quadratic '可能是合适的。</li><li id="fce6" class="na nb it lk b ll nj lo nk lr nl lv nm lz nn md nf ng nh ni bi translated">如果你有一个接近累积分布函数的值，那么在那一点上method='pchip '应该运行得很好。</li><li id="4f0c" class="na nb it lk b ll nj lo nk lr nl lv nm lz nn md nf ng nh ni bi translated">为了用平滑绘图的目标来填补缺失的品质，考虑method='akima '。</li></ul><blockquote class="me mf mg"><p id="964d" class="li lj mh lk b ll lm kd ln lo lp kg lq mi ls lt lu mj lw lx ly mk ma mb mc md im bi translated"><strong class="lk jd"> <em class="it">结论</em> </strong></p></blockquote><p id="80c4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这些方便的概念在数据科学和机器学习项目的数据争论中非常有用。</p><p id="013e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我希望你喜欢这篇文章。通过我的<a class="ae lh" href="https://www.linkedin.com/in/data-scientist-95040a1ab/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae lh" href="https://twitter.com/amitprius" rel="noopener ugc nofollow" target="_blank"> twitter </a>联系我。</p><h1 id="0bd1" class="pk mr it bd oi pl pm pn ol po pp pq oo ki pr kj or kl ps km ou ko pt kp ox pu bi translated">推荐文章</h1><p id="e21a" class="pw-post-body-paragraph li lj it lk b ll oz kd ln lo pa kg lq lr pb lt lu lv pc lx ly lz pd mb mc md im bi translated">1.<a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="/8-active-learning-insights-of-python-collection-module-6c9e0cc16f6b?source=friends_link&amp;sk=4a5c9f9ad552005636ae720a658281b1">8 Python的主动学习见解收集模块</a> <br/> 2。<a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="/numpy-linear-algebra-on-images-ed3180978cdb?source=friends_link&amp;sk=d9afa4a1206971f9b1f64862f6291ac0"> NumPy:图像上的线性代数</a>T5】3。<a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="/exception-handling-concepts-in-python-4d5116decac3?source=friends_link&amp;sk=a0ed49d9fdeaa67925eac34ecb55ea30">Python中的异常处理概念</a> <br/> 4。<a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="/pandas-dealing-with-categorical-data-7547305582ff?source=friends_link&amp;sk=11c6809f6623dd4f6dd74d43727297cf">熊猫:处理分类数据</a> <br/> 5。<a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="/hyper-parameters-randomseachcv-and-gridsearchcv-in-machine-learning-b7d091cf56f4?source=friends_link&amp;sk=cab337083fb09601114a6e466ec59689">超参数:机器学习中的RandomSeachCV和GridSearchCV</a><br/>6。<a class="ae lh" href="https://medium.com/towards-artificial-intelligence/fully-explained-linear-regression-with-python-fe2b313f32f3?source=friends_link&amp;sk=53c91a2a51347ec2d93f8222c0e06402" rel="noopener">用Python </a> <br/> 7全面讲解了线性回归。<a class="ae lh" href="https://medium.com/towards-artificial-intelligence/fully-explained-logistic-regression-with-python-f4a16413ddcd?source=friends_link&amp;sk=528181f15a44e48ea38fdd9579241a78" rel="noopener">用Python </a> <br/>充分解释了Logistic回归8。<a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="/data-distribution-using-numpy-with-python-3b64aae6f9d6?source=friends_link&amp;sk=809e75802cbd25ddceb5f0f6496c9803">数据分发使用Numpy与Python </a> <br/> 9。<a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="/decision-trees-vs-random-forests-in-machine-learning-be56c093b0f?source=friends_link&amp;sk=91377248a43b62fe7aeb89a69e590860">机器学习中的决策树vs随机森林</a> <br/> 10。<a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="/standardization-in-data-preprocessing-with-python-96ae89d2f658?source=friends_link&amp;sk=f348435582e8fbb47407e9b359787e41">用Python实现数据预处理的标准化</a></p></div></div>    
</body>
</html>