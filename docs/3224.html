<html>
<head>
<title>Build Real-time Data Applications Quickly Using Streamlit And Prisma</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Streamlit和Prisma快速构建实时数据应用程序</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/build-real-time-data-applications-quickly-using-streamlit-and-prisma-ef6e6af81e30?source=collection_archive---------2-----------------------#2022-10-17">https://pub.towardsai.net/build-real-time-data-applications-quickly-using-streamlit-and-prisma-ef6e6af81e30?source=collection_archive---------2-----------------------#2022-10-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cdf0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将数据库支持集成到您的Streamlit应用中的快速实践指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/96397202675585aaae6b0ae735bf69fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ewogMQLzOfpEyJdloeatyA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://www.pexels.com/photo/low-angle-photography-of-tunnel-96381/" rel="noopener ugc nofollow" target="_blank">弗朗西斯科·温加罗拍摄的照片</a></figcaption></figure><p id="ee4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated"><span class="l lw lx ly bm lz ma mb mc md di">S</span>stream lit已经成为数据科学社区的福音，它提供了一种无需任何前端知识即可轻松快速构建数据应用的简单方法。Streamlit支持许多不同类型的组件，这些组件与日俱增。人们使用Pandas和CSV文件在Streamlit中构建仪表板。缺乏将Streamlit连接到真实数据库(SQL或NoSQL)来构建仪表板的技术。在这篇博客中，我们将看看如何使用Prisma连接PostgreSQL数据库来简化it。</p><p id="99ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="me">我已经创建了一个Streamlit web应用程序，并使用Prisma将其连接到一个实时AWS RDS实例。目前，该应用程序有一个单一的功能，使用电影名称搜索电影。您可以在</em><a class="ae ky" href="https://prisma.streamlitapp.com/" rel="noopener ugc nofollow" target="_blank"><em class="me">https://prisma.streamlitapp.com/</em></a><em class="me">查看申请。该应用的代码库可从</em>获得</p><p id="3591" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://github.com/vatsalsaglani/Streamlit-Prisma" rel="noopener ugc nofollow" target="_blank">https://github.com/vatsalsaglani/Streamlit-Prisma</a></p><p id="5667" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在继续讨论集成之前，让我们先看一下关于Prisma的简介</p><h1 id="78b9" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">Prisma是什么？</h1><p id="4dca" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi lv translated">risma是一种ORM，允许开发者使用面向对象的范例来读取、写入、更新&amp;删除数据。Prisma是使用Typescript开发的，它有一个直观的数据模型，完全是类型安全的，并提供自动迁移。Prisma主要用在NodeJS应用程序中，但这要感谢Robert Craige，他为Prisma创建了Python客户端，并提供给Python开发人员。Prisma Python客户端<a class="ae ky" href="https://prisma-client-py.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank">文档</a>提到不需要使用Prisma，因为客户端使用Rust与Prisma接口通信。</p><p id="d31f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以使用以下命令安装Prisma Python客户端</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="e0b5" class="nh mg it nd b gy ni nj l nk nl">pip install prisma</span></pre><p id="2ecf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Prisma需要一个数据模型来了解模式或数据库中的表之间的关系，以及与每个表中的每一列相关的数据类型，以确保类型安全。模式和数据库配置被添加到一个<code class="fe nm nn no nd b">schema.prisma</code>文件中。对于我们的教程，我们将使用以下数据模型</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="0e54" class="nh mg it nd b gy ni nj l nk nl">generator client {<br/>  provider  = "prisma-client-py"<br/>  interface = "sync"<br/>  recursive_type_depth = 5<br/>}</span><span id="4231" class="nh mg it nd b gy np nj l nk nl">datasource db {<br/>  provider = "postgresql"<br/>  url      = env("DATABASE_URL")<br/>}</span><span id="c201" class="nh mg it nd b gy np nj l nk nl">model Movies {<br/>  id             BigInt      @id @default(autoincrement())<br/>  movieId        BigInt      @unique<br/>  movieId_mapped BigInt      @unique<br/>  imdbId         String<br/>  tmdbId         String<br/>  meta           Meta[]<br/>  cast           Cast[]<br/>  crew           Crew[]<br/>  video          Videos[]<br/>  backdrop       BackDrops[]<br/>  poster         Posters[]<br/>  genres         Genre[]<br/>}</span><span id="9e57" class="nh mg it nd b gy np nj l nk nl">model Meta {<br/>  id           BigInt  @id @default(autoincrement())<br/>  title        String<br/>  overview     String?<br/>  popularity   Float?<br/>  backdrop     String?<br/>  poster       String?<br/>  release_date String?<br/>  runtime      BigInt?<br/>  rating       Float?<br/>  Movies       Movies? @relation(fields: [moviesId], references: [id])<br/>  moviesId     BigInt?<br/>}</span><span id="86d4" class="nh mg it nd b gy np nj l nk nl">model Cast {<br/>  id        BigInt  @id @default(autoincrement())<br/>  name      String?<br/>  character String?<br/>  profile   String?<br/>  Movies    Movies? @relation(fields: [moviesId], references: [id])<br/>  moviesId  BigInt?<br/>}</span><span id="4bac" class="nh mg it nd b gy np nj l nk nl">model Crew {<br/>  id         BigInt  @id @default(autoincrement())<br/>  name       String?<br/>  real_name  String?<br/>  department String?<br/>  profile    String?<br/>  job        String?<br/>  Movies     Movies? @relation(fields: [moviesId], references: [id])<br/>  moviesId   BigInt?<br/>}</span><span id="0e18" class="nh mg it nd b gy np nj l nk nl">model Videos {<br/>  id          BigInt  @id @default(autoincrement())<br/>  name        String?<br/>  key         String?<br/>  site        String?<br/>  size        String?<br/>  type        String?<br/>  videoId     String?<br/>  is_official Boolean?<br/>  Movies      Movies? @relation(fields: [moviesId], references: [id])<br/>  moviesId    BigInt?<br/>}</span><span id="8649" class="nh mg it nd b gy np nj l nk nl">model BackDrops {<br/>  id       BigInt  @id @default(autoincrement())<br/>  path     String?<br/>  Movies   Movies? @relation(fields: [moviesId], references: [id])<br/>  moviesId BigInt?<br/>}</span><span id="eacb" class="nh mg it nd b gy np nj l nk nl">model Posters {<br/>  id       BigInt  @id @default(autoincrement())<br/>  path     String?<br/>  Movies   Movies? @relation(fields: [moviesId], references: [id])<br/>  moviesId BigInt?<br/>}</span><span id="6cab" class="nh mg it nd b gy np nj l nk nl">model Genre {<br/>  id       BigInt  @id @default(autoincrement())<br/>  genreId  BigInt?<br/>  name     String?<br/>  Movies   Movies? @relation(fields: [moviesId], references: [id])<br/>  moviesId BigInt?<br/>}</span></pre><p id="0271" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请下载VS代码中的Prisma扩展进行格式化，并自动完成对Prisma模式的支持。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/cc31a7d642fdbbe5404d524f10cd1d34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xDeinSoI8Ju6ihFvxOirJw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="088d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nm nn no nd b">generator</code>下，我们指定客户端的类型和接口的类型。Prisma python客户端提供了开箱即用的<code class="fe nm nn no nd b">sync</code>和<code class="fe nm nn no nd b">async</code>接口。在本教程中，我们将使用<code class="fe nm nn no nd b">sync</code>界面。</p><p id="30b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nm nn no nd b">datasource</code>下，我们提供数据库的类型，即<code class="fe nm nn no nd b">provider</code>和<code class="fe nm nn no nd b">URL</code>来连接数据库。你可以使用<a class="ae ky" href="https://supabase.com/" rel="noopener ugc nofollow" target="_blank"> Supabase </a>免费创建一个Postgre SQL数据库。因为我已经将数据存储在AWS上的RDS实例中，所以我将使用它。如果你正在使用Supabase，那么<code class="fe nm nn no nd b">url</code>看起来会像<code class="fe nm nn no nd b">postgresql://postgres:[YOUR-PASSWORD]@[YOUR-HOST-NAME]:5432/postgres</code>。</p><p id="8842" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nm nn no nd b">model &lt;table_name&gt;</code>包含列名和数据类型，以及与数据库中其他表的关系。例如，这里我们有<code class="fe nm nn no nd b">Movies</code>模型和<code class="fe nm nn no nd b">Meta</code>模型；<code class="fe nm nn no nd b">Movies</code>型号有以下字段<code class="fe nm nn no nd b"><em class="me">id, movieId_mapped, movieId, imdbId, tmdbId</em></code> <em class="me">。另外，每部电影都有一些相关的元信息，我们把它们存储在不同的表中。现在要连接<code class="fe nm nn no nd b">Movies</code>和<code class="fe nm nn no nd b">Meta</code>表，我们可以有一个名为<code class="fe nm nn no nd b">meta</code>的字段，它的类型是<code class="fe nm nn no nd b">Meta</code>。</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/bb239efa49fad342a165231b6ccce797.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*BWRJ6_OSbNr1qOPipS9Uaw.gif"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者GIF</figcaption></figure><h1 id="1a1f" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">使用Supabase设置数据库</h1><h1 id="cc5b" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated"><span class="l lw lx ly bm lz ma mb mc md di">到</span>使用相同的数据模型和相同的数据，您可以请求从Google Drive下载数据转储的请求权限。</h1><p id="1f91" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">如果您正在使用<a class="ae ky" href="https://supabase.com/" rel="noopener ugc nofollow" target="_blank"> Supabase </a>下载数据转储后，您可以使用以下步骤。</p><p id="04c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第一步</strong></p><p id="b9ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从Supabase获取<strong class="lb iu">数据库URL </strong>。会在<code class="fe nm nn no nd b">settings/database</code>下。用数据库密码替换<code class="fe nm nn no nd b">[YOUR-PASSWORD-HERE]</code>。</p><p id="1bdf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第二步</strong></p><p id="6d43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到您的终端，移动到下载数据转储的文件夹。您可以使用以下命令将数据复制到Supabase数据库中。检查<code class="fe nm nn no nd b">psql</code>命令在您的系统中是否可用。如果没有，按照<a class="ae ky" href="https://www.timescale.com/blog/how-to-install-psql-on-mac-ubuntu-debian-windows/" rel="noopener ugc nofollow" target="_blank">这个</a>教程来安装。</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="5898" class="nh mg it nd b gy ni nj l nk nl">psql -d database_link &lt; data-backup.psql</span></pre><p id="d9d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">执行该命令后，将需要几分钟时间来导出数据。完成后，您应该会在数据库中看到以下表格。</p><p id="ef2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作者图片</p><p id="300b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果你想学习Prisma的基础知识以及如何使用Prisma Python客户端进行CRUD操作，你可以跟随<a class="ae ky" href="https://prisma-client-py.readthedocs.io/en/stable/reference/operations/" rel="noopener ugc nofollow" target="_blank">这篇文档</a>。它提供了关于查询、创建和操作数据的深入信息。我不想在这个博客里复制同样的东西。</p><p id="d9d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦安装了Prisma并设置了数据库，就可以进入集成部分了。</p><h1 id="89f8" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">综合</h1><p id="d5ef" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">如果您尚未安装Streamlit，请安装它。</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="8c56" class="nh mg it nd b gy ni nj l nk nl">pip install streamlit</span></pre><p id="66d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第一步:</strong></p><p id="d5b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个<code class="fe nm nn no nd b">.env</code>文件，并提供您的数据库URL，如下所示</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="770b" class="nh mg it nd b gy ni nj l nk nl">DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@[YOUR-HOST-NAME]:5432/postgres</span></pre><p id="020f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第二步:</strong></p><p id="ea32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">复制上面提到的<code class="fe nm nn no nd b">schema.prisma</code>文件。</p><p id="2091" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第三步:</strong></p><p id="a4fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个<code class="fe nm nn no nd b">utilities.py</code>文件并按照步骤操作</p><p id="77d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">→ <em class="me">在导入Prisma之前添加子进程调用生成Prisma客户端</em></p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="9389" class="nh mg it nd b gy ni nj l nk nl">import os<br/>import re<br/>import subprocess<br/>import json<br/>from typing import List, Dict</span><span id="a1f9" class="nh mg it nd b gy np nj l nk nl">def generate_prisma_client():<br/>    """Generates the Prisma Client and loads it<br/>    """<br/>    print(f'GENERATING PRISMA CLIENT')<br/>    subprocess.call(["prisma", "generate"])<br/>    print(f'GENERATED PRISMA CLIENT')</span><span id="2af8" class="nh mg it nd b gy np nj l nk nl">generate_prisma_client()<br/>try:<br/>    from prisma import Prisma<br/>except RuntimeError:<br/>    from prisma_cleanup import cleanup<br/>    cleanup()<br/>    print(f'GOT RUNTIME ERROR')<br/>    generate_prisma_client()<br/>    from prisma import Prisma</span></pre><p id="9e4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">→ <em class="me">添加一个</em> <strong class="lb iu"> <em class="me">电影</em> </strong> <em class="me">类来初始化Prisma数据库并查询数据</em></p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="3cf9" class="nh mg it nd b gy ni nj l nk nl">class Movies:<br/>    """Movies class with methods to search and list movies<br/>    """<br/>    def __init__(self):<br/>        self.db = Prisma()<br/>        self.db.connect()</span><span id="f6fa" class="nh mg it nd b gy np nj l nk nl">    def to_dict(self, obj: object):<br/>        """Converts an Object to Dictionary</span><span id="357f" class="nh mg it nd b gy np nj l nk nl">        Args:<br/>            obj (object): Object to convert to dictionary</span><span id="0ce5" class="nh mg it nd b gy np nj l nk nl">        Returns:<br/>            Dict: Values of object in a dictionary<br/>        """<br/>        return json.loads(json.dumps(obj, default=lambda o: o.__dict__))</span><span id="8439" class="nh mg it nd b gy np nj l nk nl">    def list_movies_by_title(self, title):<br/>        """Returns list of movies based on the title</span><span id="c43a" class="nh mg it nd b gy np nj l nk nl">        Args:<br/>            title (str): Title or part of title</span><span id="ec88" class="nh mg it nd b gy np nj l nk nl">        Returns:<br/>            List[Dict]: List of movies matching the title<br/>        """<br/>        matches = self.db.movies.find_many(where={<br/>            "meta": {<br/>                "every": {<br/>                    "title": {<br/>                        "contains": title,<br/>                        "mode": "insensitive"<br/>                    }<br/>                }<br/>            }<br/>        },<br/>                                           include={<br/>                                               "meta": True,<br/>                                               "cast": True,<br/>                                               "poster": {<br/>                                                   "take": 3<br/>                                               }<br/>                                           })<br/>        matches = list(map(lambda m: self.to_dict(m), matches))<br/>        return matches</span></pre><p id="b1c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第四步:</strong></p><p id="f327" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个<code class="fe nm nn no nd b">components.py</code>文件夹，并添加以下函数来创建HTML组件</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="66e9" class="nh mg it nd b gy ni nj l nk nl">def card(title, image, overview):</span><span id="ac51" class="nh mg it nd b gy np nj l nk nl">    return f"""<br/>    &lt;div class="col"&gt;<br/>        &lt;div class="card" style="width: 18rem;margin-top:2px"&gt;<br/>            &lt;img class="card-img-top" src="&lt;https://image.tmdb.org/t/p/original{image}&gt;" alt="Card image cap"&gt;<br/>            &lt;div class="card-body text-dark"&gt;<br/>                &lt;h5 class="card-title text-dark"&gt;{title}&lt;/h5&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>    """</span><span id="803e" class="nh mg it nd b gy np nj l nk nl">def rows(strings):<br/>    return f"""<br/>    &lt;div class="row" &gt;<br/>        {strings}<br/>    &lt;/div&gt;<br/>    """</span><span id="dea4" class="nh mg it nd b gy np nj l nk nl">def grid(movies):</span><span id="0a72" class="nh mg it nd b gy np nj l nk nl">    card_strings = [<br/>        card(title=movie.get("meta")[0].get("title"),<br/>             image=movie.get("meta")[0].get("poster"),<br/>             overview=movie.get("meta")[0].get("overview")) for movie in movies if movie.get("meta")[0].get("poster")<br/>    ]<br/>    row_strings = "\\n".join([<br/>        rows("\\n".join(card_strings[ix:ix + 4]))<br/>        for ix in range(0, len(card_strings), 4)<br/>    ])</span><span id="015e" class="nh mg it nd b gy np nj l nk nl">    return f"""<br/>    &lt;div class="container" &gt;<br/>        {row_strings}<br/>    &lt;/div&gt;<br/>    """</span></pre><p id="4d90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第五步:</strong></p><p id="ee86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建<code class="fe nm nn no nd b">streamlitapp.py</code>文件来构建前端，并添加以下代码</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="3449" class="nh mg it nd b gy ni nj l nk nl">import streamlit as st<br/>from utilities import Movies<br/>from components import card, grid</span><span id="98a7" class="nh mg it nd b gy np nj l nk nl">movObj = Movies()</span><span id="daf6" class="nh mg it nd b gy np nj l nk nl"># add bootstrap css<br/>st.markdown(<br/>    """&lt;link href="&lt;https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css&gt;" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"&gt;<br/>""",<br/>    unsafe_allow_html=True)<br/>st.header("Prisma Demo")</span><span id="e085" class="nh mg it nd b gy np nj l nk nl">movieText = st.text_input("Search Movies")</span><span id="9c69" class="nh mg it nd b gy np nj l nk nl">if movieText:<br/>    with st.spinner(text="Searching.."):<br/>				# search the movies based on the movieText<br/>        movies = movObj.list_movies_by_title(movieText.rstrip().lstrip())<br/>        st.markdown("""&lt;br /&gt;""", unsafe_allow_html=True)<br/>				# render the html<br/>        st.markdown(grid(movies), unsafe_allow_html=True)</span></pre><p id="957f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第六步:</strong></p><p id="5e4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个<code class="fe nm nn no nd b">requirements.txt</code>文件并添加以下模块</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="847d" class="nh mg it nd b gy ni nj l nk nl">prisma<br/>streamlit<br/>requests<br/>python-dotenv</span></pre><p id="cf66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用以下命令运行应用程序</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="b882" class="nh mg it nd b gy ni nj l nk nl">streamlit run streamlitapp.py</span></pre><p id="aff4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该会看到如下所示的内容</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/53f05ae5f06d341e55a6be9a8270d036.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Fa5C3f5zIaC1cmRM8tQZew.gif"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者GIF</figcaption></figure><h1 id="9d50" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">托管应用程序</h1><p id="6594" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi lv translated"><span class="l lw lx ly bm lz ma mb mc md di"> Y </span>您可以通过将您的代码推送到GitHub，在<strong class="lb iu"> <em class="me"> Streamlit社区云</em> </strong>上托管此应用程序。然后你可以登录<a class="ae ky" href="https://share.streamlit.io/" rel="noopener ugc nofollow" target="_blank">https://share.streamlit.io/</a>并创建一个新的应用程序。</p><p id="ea14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我选择<em class="me"> Python3.7 </em>来运行这个应用程序。您可以单击高级链接并选择Python版本。此外，你可以用TOML格式指定你的环境变量。</p><p id="fe7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的例子中，我们需要指定<code class="fe nm nn no nd b">DATABASE_URL</code>作为唯一的环境变量。</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="652c" class="nh mg it nd b gy ni nj l nk nl">DATABASE_URL = "postgresql://postgres:[YOUR-PASSWORD]@[YOUR-HOST-NAME]:5432/postgres"</span></pre><p id="26c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦您添加了环境变量并选择了Python版本，您就可以点击<strong class="lb iu"> <em class="me">【部署】，</em> </strong>，过一段时间，您的应用程序就会启动并运行了。</p><h1 id="a865" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">结论</h1><p id="582a" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi lv translated"><span class="l lw lx ly bm lz ma mb mc md di">在</span>这篇博客中，我们看到了如何使用Streamlit创建一个实时数据应用程序，通过利用Prisma ORM的功能从数据库中提取数据，将一个真实的数据库连接到Streamlit。我们看到了如何查询已经可用的数据，我们还可以在Streamlit中创建一个表单，并使用Prisma将数据添加到数据库中。</p></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><p id="b039" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="me">如果你觉得这篇文章很有帮助，请使用我的</em> <a class="ae ky" href="https://thevatsalsaglani.medium.com/membership" rel="noopener"> <em class="me">推荐链接</em> </a> <em class="me">或通过</em> <a class="ae ky" href="https://thevatsalsaglani.medium.com/" rel="noopener"> <em class="me">在Medium上关注我的</em> </a> <em class="me">并分享这篇博客来帮助支持我的内容。</em></p></div></div>    
</body>
</html>