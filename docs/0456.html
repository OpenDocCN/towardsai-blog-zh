<html>
<head>
<title>Dashboard Creation Using R Shiny</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用R Shiny创建仪表板</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/r-shiny-6592adf9479?source=collection_archive---------3-----------------------#2020-05-03">https://pub.towardsai.net/r-shiny-6592adf9479?source=collection_archive---------3-----------------------#2020-05-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="7c2b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Shiny是一个R包，用于构建交互式仪表盘，用来显示预测。程序员可以使用它以有效的方式向组织成员传达数据的发现。在这篇文章中，我将展示使用Shiny开发仪表板的过程。我将使用一家跨国零售公司的数据，并通过点击一个按钮来预测各个部门的价值。数据集信息和可以使用的各种模型已经在上一篇文章中讨论过了。</p><div class="kl km gp gr kn ko"><a href="https://medium.com/towards-artificial-intelligence/predicting-sales-using-r-programming-84b66d11c35d" rel="noopener follow" target="_blank"><div class="kp ab fo"><div class="kq ab kr cl cj ks"><h2 class="bd ir gy z fp kt fr fs ku fu fw ip bi translated">使用R编程预测销售额</h2><div class="kv l"><h3 class="bd b gy z fp kt fr fs ku fu fw dk translated">在本文中，我将预测一家跨国零售公司的销售额。这方面的数据集可以在…上找到</h3></div><div class="kw l"><p class="bd b dl z fp kt fr fs ku fu fw dk translated">medium.com</p></div></div><div class="kx l"><div class="ky l kz la lb kx lc ld ko"/></div></div></a></div><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/280f1381cc4f7f12294f03afe1f56573.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lgjaj9Xuv4o-bouH985IiA.jpeg"/></div></div></figure><p id="3f0e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要使用Shiny创建web应用程序，您必须创建以下文件:</p><p id="a890" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> ui。r</strong>&lt;——这个文件包含了关于你的仪表板前端的信息。代码类似于一个HTML文件。你可以用CSS主题、HTML小部件和JavaScript动作来扩展你闪亮的应用程序。</p><ul class=""><li id="6d6f" class="lp lq iq jp b jq jr ju jv jy lr kc ls kg lt kk lu lv lw lx bi translated">navbarPage:创建一个包含顶级导航栏的页面，该导航栏可用于切换一组tabPanel元素。</li><li id="ffda" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">tabPanel:创建一个可以包含在标签集中的标签面板。标签集对于将输出分成多个独立的可视部分非常有用。</li><li id="9202" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">sidebarLayout:创建一个带有侧边栏和主区域的布局。侧边栏以独特的背景色显示，通常包含输入控件。主区域占据水平宽度的2/3，通常包含输出。</li><li id="2831" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">sidebarPanel:创建一个包含输入控件的侧边栏面板，这些控件可以传递给sidebarLayout。</li><li id="38f7" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">mainPanel:创建包含输出元素的主面板。</li></ul><pre class="lf lg lh li gt md me mf mg aw mh bi"><span id="fca7" class="mi mj iq me b gy mk ml l mm mn">navbarPage(<br/>  <br/>   "Sales Forecast",<br/>   <br/>   tabPanel(<br/>         "Arima Forecast",<br/>         <br/>          sidebarLayout( <br/>              sidebarPanel(<br/>                selectInput("Dept", "Choose a Dept:",<br/>                            list(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99)<br/>                                 <br/>                                )<br/>                          ) ,<br/>                <br/>                <br/>                mainPanel(<br/>                  plotOutput("result")<br/>                     <br/>                         )<br/>                <br/>                      )<br/>          <br/>         )<br/>        <br/>   )</span></pre><p id="dd3c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">服务器。r</strong>&lt;——这个文件包含关于后端的信息。它将包含关于所使用的库、所使用的数据集、ML模型信息和图形信息的信息。</p><ul class=""><li id="9484" class="lp lq iq jp b jq jr ju jv jy lr kc ls kg lt kk lu lv lw lx bi translated">所需库:<em class="mo"> dplyr，forecast，reshape，ggplot2，tidyverse，shiny </em></li><li id="6787" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">renderPlot:渲染适合指定给输出槽的反应图。</li></ul><pre class="lf lg lh li gt md me mf mg aw mh bi"><span id="007d" class="mi mj iq me b gy mk ml l mm mn">function(input,output){</span><span id="977f" class="mi mj iq me b gy mp ml l mm mn">library(dplyr)<br/>library(forecast)<br/>library(reshape)<br/>library(ggplot2)<br/>library(tidyverse)<br/>library(shiny)</span><span id="5cc5" class="mi mj iq me b gy mp ml l mm mn">train &lt;- read.csv("C:/Users/hp/Desktop/Walmart_forecasting/train.csv")<br/>test &lt;-  read.csv("C:/Users/hp/Desktop/Walmart_forecasting/test.csv")</span><span id="7d22" class="mi mj iq me b gy mp ml l mm mn">output$result &lt;- renderPlot({</span><span id="5ed0" class="mi mj iq me b gy mp ml l mm mn">dept1_train &lt;- train %&gt;% filter(Store == "1") %&gt;% filter( Dept %in% input$Dept)<br/>dept1_test &lt;- test %&gt;% filter(Store == "1") %&gt;% filter( Dept %in% input$Dept)<br/>#dept1_test$ Weekly_Sales &lt;- 0</span><span id="07a3" class="mi mj iq me b gy mp ml l mm mn">dept1_train$Date &lt;- as.Date(dept1_train$Date , format = "%Y-%m-%d")<br/>sample_train &lt;- dept1_train %&gt;% filter(Date &lt; as.Date("2012-02-06"))<br/>sample_test &lt;- dept1_train %&gt;% filter(Date &gt;= as.Date("2012-02-06"))</span><span id="09da" class="mi mj iq me b gy mp ml l mm mn">#ts_train &lt;- ts(sample_train , start = c(2010,5) , frequency = 52)</span><span id="9134" class="mi mj iq me b gy mp ml l mm mn">ts_train_uni &lt;- ts(sample_train$Weekly_Sales , start = c(2010,5) , frequency = 52)</span><span id="7558" class="mi mj iq me b gy mp ml l mm mn">arima_model &lt;- auto.arima(ts_train_uni , seasonal.test = "seas"   )<br/> arima_pred = forecast(arima_model , h = nrow(sample_test))<br/> arima_pred &lt;- as.data.frame(arima_pred$mean)<br/>pred_data &lt;- sample_test %&gt;% add_column(arima_pred = arima_pred$x)<br/>#plot(forecast(arima_model , h=38)) #arima plot<br/>ggplot(pred_data , aes(x = Date , y = arima_pred)) + geom_line() + scale_x_date(date_breaks = "4 week")</span><span id="58cf" class="mi mj iq me b gy mp ml l mm mn">})</span><span id="ef12" class="mi mj iq me b gy mp ml l mm mn">}</span></pre><p id="bacd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> app。r</strong>&lt;——这是你合并其他两个文件并运行应用程序的父文件。</p><ul class=""><li id="9328" class="lp lq iq jp b jq jr ju jv jy lr kc ls kg lt kk lu lv lw lx bi translated">shinyApp:在R控制台使用这个函数时，闪亮的App对象会自动传递给运行app的<code class="fe mq mr ms me b">print()</code>函数。如果在函数中间调用这个函数，这个值将不会传递给<code class="fe mq mr ms me b">print()</code>，应用程序也不会运行。要运行应用程序，将应用程序对象传递给<code class="fe mq mr ms me b">print()</code>或<code class="fe mq mr ms me b">runApp()</code>。</li></ul><pre class="lf lg lh li gt md me mf mg aw mh bi"><span id="7672" class="mi mj iq me b gy mk ml l mm mn">library(dplyr)<br/>library(forecast)<br/>library(reshape)<br/>library(ggplot2)<br/>library(tidyverse)<br/>library(shiny)</span><span id="3dae" class="mi mj iq me b gy mp ml l mm mn">source("ui.R")<br/>source("server.R")</span><span id="b811" class="mi mj iq me b gy mp ml l mm mn">shinyApp(ui = ui , server = server)</span></pre><p id="1326" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">输出:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi mt"><img src="../Images/4fb3e88fe4bd8ac574b6df873878f5cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ikXz7jubZUqF9cLpvPzmdQ.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">部门5的预测</figcaption></figure><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi my"><img src="../Images/afa684207c61528cebe64903b9fade14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bTztGArHBr1r-rF0BgtcBQ.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">部门98的预测</figcaption></figure><p id="18c8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以使用R Shiny构建交互式应用程序，并以图表、文本或表格的形式显示输出。任何熟悉R的人都可以利用R的统计和数据分析能力，并使用R Shiny应用程序动态显示结果。此外，与其他可视化工具相比，它是开源的并且具有成本效益。在上面的例子中，我们能够使用ARIMA模型预测不同部门的销售额，并且能够使用一个使用shiny构建的简单下拉菜单将其可视化。</p></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><p id="597f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mo">感谢您阅读本文。如果你喜欢这篇文章，请鼓掌并发表评论:)。</em></p></div></div>    
</body>
</html>