<html>
<head>
<title>Sentiment Analysis on Solar Energy With NLP And Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于NLP和Python的太阳能情感分析</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/sentiment-analysis-on-solar-energy-with-nlp-and-python-1e6256194209?source=collection_archive---------3-----------------------#2022-06-10">https://pub.towardsai.net/sentiment-analysis-on-solar-energy-with-nlp-and-python-1e6256194209?source=collection_archive---------3-----------------------#2022-06-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="56e8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当以电子方式捕捉时，客户情绪——超越事实的表达，传达情绪、观点和情感——具有巨大的商业价值。我们谈论的是客户、潜在客户、患者、投票者和意见领袖的声音。”</p><p id="a4d5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">——塞思·格莱姆斯</em></p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/68ebf53c56f3d544490651fa67154d45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9HNgsSnudczY7pZFjK4oTQ.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated"><a class="ae lf" href="https://unsplash.com/@vivintsolar?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">摄于<a class="ae lf" href="https://unsplash.com/s/photos/solar-panels-on-homes?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的</a></figcaption></figure><p id="9938" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">简介</strong></p><p id="744b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">迫切需要对气候变化采取行动。我们经常看到大范围的火灾、洪水、干旱、飓风和龙卷风。<strong class="js iu"> </strong>根据美国国家海洋和大气管理局的数据，2021年美国的气候灾害造成了1450亿美元的损失，并导致688人死亡。显然，有必要做点什么。</p><p id="1fd1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">作为个人，我们可以对气候变化采取行动的一种方式是使用太阳能电池板为我们的家庭发电，迟早会为我们的电动汽车发电。通过使用太阳能，我们可以降低或消除电力成本，通过减少碳排放来改善我们的环境，并增加我们房屋的价值。</p><p id="e106" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">美国人对气候变化的看法</strong></p><p id="d855" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">皮尤研究中心进行了调查，以发现美国人对气候变化和可再生能源的看法。下面列出了他们的一些主要发现。您可以在此<a class="ae lf" href="https://www.pewresearch.org/fact-tank/2022/04/22/for-earth-day-key-facts-about-americans-views-of-climate-change-and-renewable-energy/" rel="noopener ugc nofollow" target="_blank">链接</a>查看他们的所有调查结果。</p><p id="ff37" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">四分之三的美国人认为人类活动，如燃烧化石燃料，至少在一定程度上导致了气候变化，46%的人认为这是一个很大的原因。</p><p id="d032" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">美国人普遍认为旨在减少全球气候变化影响的政策对环境有益，但在是否有助于经济发展的问题上存在分歧。</p><p id="bb16" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当谈到具体政策时，69%的美国成年人支持美国采取措施在2050年实现碳中和——也就是说，释放到大气中的二氧化碳不会超过被清除的二氧化碳。</p><p id="5a83" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">大约70%的美国人(69%)优先发展替代能源，如风能和太阳能，而不是扩大石油、煤炭和天然气的生产。</p><p id="2190" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">四分之三的美国人支持美国参与国际努力，帮助减少气候变化的影响。</p><p id="74a9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">情绪分析</strong></p><p id="4c65" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我认为分析与太阳能相关的情绪，发现人们的想法和/或情绪会很有趣。</p><p id="ad0a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">情感分析是自然语言处理(NLP)方法的一种常见应用，其目标是分析文本的内容，并对情感做出预测，如负面、中性或正面。这样，情感分析可以被看作是一种用一些情感得分来量化定性数据的方法。虽然情绪在很大程度上是主观的，但情绪量化已经有了许多有用的实现，包括企业了解消费者对产品的反应或检测在线对话中的仇恨言论。</p><p id="98a8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">进行情感分析的方法</strong></p><p id="ee9f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有三种主要的方法来实现情感分析。其中包括以下内容:</p><p id="4778" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">1.基于规则或词典的方法:这种方法依赖于手动创建的数据分类规则来确定情感。字典中的单词用正值或负值来表示它们的极性和情感强度。</p><p id="80d0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.自动化或机器学习方法:这种方法使用受监督的机器学习算法。用许多文本样本训练算法，直到它能够准确预测文本的情感。然后，更大的文本片段被输入到分类器中，它预测情绪为负面、中性或正面。</p><p id="dc97" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.混合方法:这种方法利用了规则/词典方法和自动/机器学习方法。这是进行情感分析的最有效和最广泛使用的方法。</p><p id="46ab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">路线图</strong></p><p id="141c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本文的剩余部分将展示一个分析与太阳能相关的情感的程序。我们将使用Twitter数据，并将推文分为积极、消极或中性情绪。以下步骤将使用NLP和Python来执行。</p><p id="0697" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">1.导入所需的库。</p><p id="1c31" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.获取Twitter数据。</p><p id="657e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.数据清理</p><p id="22c4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">4.应用情感分析。</p><p id="ca4b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">5.想象情感。</p><p id="8826" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">6.得出结论。</p><p id="e593" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">程序</strong></p><p id="cd0f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个项目的目标是分析Twitter数据，发现与太阳能相关的情感。</p><p id="4c5a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您需要安装Tweepy。Tweepy是一个开源的Python包，为您提供了一种使用Python访问Twitter API的简单方法。</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="4cb9" class="ll lm it lh b gy ln lo l lp lq">!pip install tweepy</span></pre><p id="cc47" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">导入所需的库</strong></p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="4140" class="ll lm it lh b gy ln lo l lp lq"><strong class="lh iu">import</strong> os<br/><strong class="lh iu">import</strong> tweepy <strong class="lh iu">as</strong> tw<br/><strong class="lh iu">import</strong> numpy <strong class="lh iu">as</strong> np<br/><strong class="lh iu">from</strong> nltk.sentiment.vader <strong class="lh iu">import</strong> SentimentIntensityAnalyzer<br/><strong class="lh iu">import</strong> nltk<br/>nltk<strong class="lh iu">.</strong>download('vader_lexicon')<br/><strong class="lh iu">import</strong> re<br/><strong class="lh iu">import</strong> pandas <strong class="lh iu">as</strong> pd<br/><strong class="lh iu">from</strong> wordcloud <strong class="lh iu">import</strong> WordCloud<br/><strong class="lh iu">import</strong> seaborn <strong class="lh iu">as</strong> sns<br/><strong class="lh iu">import</strong> matplotlib.pyplot <strong class="lh iu">as</strong> plt</span></pre><p id="6196" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">获取Twitter数据</strong></p><p id="49e3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于这个项目，我们将使用Twitter API从Twitter中提取数据。在使用他们的API之前，你需要设置一个Twitter开发者账户。我不会在这里介绍这个过程，但是你可以通过这个<a class="ae lf" href="https://python.plainenglish.io/scraping-twitter-data-with-an-api-and-python-445a4de4b18" rel="noopener ugc nofollow" target="_blank">链接</a>找到答案。</p><p id="7170" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将您的Twitter开发人员API和访问令牌分配给变量。</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="bb07" class="ll lm it lh b gy ln lo l lp lq">api_key<strong class="lh iu">=</strong> 'API Key Here' <br/>api_secret<strong class="lh iu">=</strong> 'API Secret Key Here'<br/>access_token<strong class="lh iu">=</strong> 'Access Token Here'<br/>access_token_secret<strong class="lh iu">=</strong> 'Access Token Secret Here'</span></pre><p id="cab3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">验证API和访问令牌。</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="9c51" class="ll lm it lh b gy ln lo l lp lq">auth <strong class="lh iu">=</strong> tw<strong class="lh iu">.</strong>OAuthHandler(api_key, api_secret)<br/>auth<strong class="lh iu">.</strong>set_access_token(access_token, access_token_secret)<br/>api <strong class="lh iu">=</strong> tw<strong class="lh iu">.</strong>API(auth, wait_on_rate_limit<strong class="lh iu">=True</strong>)</span></pre><p id="4c39" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将搜索词和开始日期定义为变量。</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="64c3" class="ll lm it lh b gy ln lo l lp lq">search_words <strong class="lh iu">=</strong> "solar energy"<br/>date_since <strong class="lh iu">=</strong> "2021-01-01"</span></pre><p id="02bd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用搜索词和开始日期收集推文。</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="3475" class="ll lm it lh b gy ln lo l lp lq">tweets <strong class="lh iu">=</strong> tw<strong class="lh iu">.</strong>Cursor(api<strong class="lh iu">.</strong>search,<br/>              q <strong class="lh iu">=</strong> search_words,<br/>              lang <strong class="lh iu">=</strong> "en",<br/>              since <strong class="lh iu">=</strong> date_since)<strong class="lh iu">.</strong>items(3000)</span></pre><p id="60b9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">定义一个函数来获取符合搜索条件的Twitter用户、tweet时间和tweet文本，并创建一个新的数据框。</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="690e" class="ll lm it lh b gy ln lo l lp lq"><strong class="lh iu">def</strong> get_related_tweets(key_word):<br/>    twitter_users <strong class="lh iu">=</strong> []<br/>    tweet_time <strong class="lh iu">=</strong> []<br/>    tweet_string <strong class="lh iu">=</strong> [] <br/>    <strong class="lh iu">for</strong> tweet <strong class="lh iu">in</strong> tw<strong class="lh iu">.</strong>Cursor(api<strong class="lh iu">.</strong>search,q<strong class="lh iu">=</strong>key_word, count<strong class="lh iu">=</strong>3000)<strong class="lh iu">.</strong>items(3000):<br/>             <strong class="lh iu">if</strong> (<strong class="lh iu">not</strong> tweet<strong class="lh iu">.</strong>retweeted) <strong class="lh iu">and</strong> ('RT @' <strong class="lh iu">not</strong> <strong class="lh iu">in</strong> tweet<strong class="lh iu">.</strong>text):<br/>                <strong class="lh iu">if</strong> tweet<strong class="lh iu">.</strong>lang <strong class="lh iu">==</strong> "en":<br/>                    twitter_users<strong class="lh iu">.</strong>append(tweet<strong class="lh iu">.</strong>user<strong class="lh iu">.</strong>name)<br/>                    tweet_time<strong class="lh iu">.</strong>append(tweet<strong class="lh iu">.</strong>created_at)<br/>                    tweet_string<strong class="lh iu">.</strong>append(tweet<strong class="lh iu">.</strong>text)<br/>                    <br/>    df <strong class="lh iu">=</strong> pd<strong class="lh iu">.</strong>DataFrame({'name':twitter_users, 'time': tweet_time, 'tweet': tweet_string})<br/>    df<strong class="lh iu">.</strong>to_csv(f"{key_word}.csv")<br/>    <strong class="lh iu">return</strong> df</span></pre><p id="205f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">调用该函数来获取包含太阳能文本的tweets，并显示一些tweets。</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="20a0" class="ll lm it lh b gy ln lo l lp lq">df <strong class="lh iu">=</strong> get_related_tweets("solar energy")<br/>df<strong class="lh iu">.</strong>head(5)</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi lr"><img src="../Images/21c20b1c4b9c20107434c1651a436e9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zf7aiUng1I-JQXKf5JFwGQ.png"/></div></div></figure><p id="01b2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">数据清理</strong></p><p id="0ec8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">tweets中的文本包含许多俚语和标点符号。我们需要对推文中的文本进行预处理和清理，然后才能用于情感分析。文本预处理是自然语言处理中最重要的任务之一。例如，您可能希望在将标点符号用于文本分类之前，删除文本中的所有标点符号。</p><p id="96e1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将使用正则表达式(Regex)来执行文本预处理任务。正则表达式是描述搜索模式的文本字符串，可以用最少的代码来匹配或替换字符串中的模式。Python的重新打包将用于实现正则表达式。要了解更多关于正则表达式的内容，请点击这个<a class="ae lf" href="https://stackabuse.com/using-regex-for-text-manipulation-in-python/" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><p id="797c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">创建一个包含tweets <em class="ko">的变量。</em></p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="9a81" class="ll lm it lh b gy ln lo l lp lq">tweets <strong class="lh iu">=</strong> df<strong class="lh iu">.</strong>iloc[:, 2]<strong class="lh iu">.</strong>values</span></pre><p id="72e5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过用Regex预处理文本数据来清理文本数据。</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="1666" class="ll lm it lh b gy ln lo l lp lq">processed_tweets <strong class="lh iu">=</strong> []<br/><br/><strong class="lh iu">for</strong> sentence <strong class="lh iu">in</strong> range(0, len(tweets)):<br/>    <em class="ko"># Remove all the special characters.</em><br/>    processed_tweet <strong class="lh iu">=</strong> re<strong class="lh iu">.</strong>sub(r'\W', ' ', str(tweets[sentence]))<br/><br/>    <em class="ko"># Remove all single characters as a result of removing the special characters.</em><br/>    processed_tweet<strong class="lh iu">=</strong> re<strong class="lh iu">.</strong>sub(r'\s+[a-zA-Z]\s+', ' ', processed_tweet)<br/><br/>    <em class="ko"># Remove single characters from the start.</em><br/>    processed_tweet <strong class="lh iu">=</strong> re<strong class="lh iu">.</strong>sub(r'\^[a-zA-Z]\s+', ' ', processed_tweet) <br/><br/>    <em class="ko"># Replace multiple spaces with a single space.</em><br/>    processed_tweet <strong class="lh iu">=</strong> re<strong class="lh iu">.</strong>sub(r'\s+', ' ', processed_tweet, flags<strong class="lh iu">=</strong>re<strong class="lh iu">.</strong>I)<br/><br/>    <em class="ko"># Remove links from text.</em><br/>    processed_tweet <strong class="lh iu">=</strong> re<strong class="lh iu">.</strong>sub(r'http\S+', '', processed_tweet)<br/><br/>    <em class="ko"># Remove prefixed 'b'.</em><br/>    processed_tweet <strong class="lh iu">=</strong> re<strong class="lh iu">.</strong>sub(r'^b\s+', '', processed_tweet)<br/><br/>    processed_tweets<strong class="lh iu">.</strong>append(processed_tweet)</span></pre><p id="c6d5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为已处理的推文创建新的数据框。</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="df52" class="ll lm it lh b gy ln lo l lp lq">clean_tweets <strong class="lh iu">=</strong> pd<strong class="lh iu">.</strong>DataFrame({'tweet': processed_tweets})<br/>clean_tweets<strong class="lh iu">.</strong>head(5)</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ls"><img src="../Images/8fc2b26d86cda60b963d32ebf668a4ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lerASj50Vl0YWI8SrRE8Jw.png"/></div></div></figure><p id="6558" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">应用情感分析</strong></p><p id="fe42" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">情感分析是一种文本分析方法，它检测文本中的极性(正面或负面观点)。我们将使用NLTK(自然语言工具包)子模块VADER对文本进行情感分析。</p><p id="c7d0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">VADER(情感推理的效价感知词典)是一个用于文本情感分析的模块，它对情感的极性(积极/消极)和强度(强度)都敏感。它直接应用于未标记的文本数据，并专门为社交媒体上表达的情感而设计。</p><p id="c0df" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">VADER的SentimentIntensityAnalyzer()接受一个字符串，并返回以下每个类别的得分字典:</p><ul class=""><li id="ffeb" class="lt lu it js b jt ju jx jy kb lv kf lw kj lx kn ly lz ma mb bi translated">否定的；消极的；负面的；负的</li><li id="12bc" class="lt lu it js b jt mc jx md kb me kf mf kj mg kn ly lz ma mb bi translated">中立的</li><li id="93c1" class="lt lu it js b jt mc jx md kb me kf mf kj mg kn ly lz ma mb bi translated">积极的</li><li id="f93a" class="lt lu it js b jt mc jx md kb me kf mf kj mg kn ly lz ma mb bi translated">复合(阳性、阴性和中性得分之和，然后在-1(强阴性)和+1(强阳性)之间标准化)。</li></ul><p id="1f62" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如，以下文本将返回这些输出分数:<br/>‘这是有史以来最好、最棒的电影！！!'<br/>输出-{'neg': 0.0，' neu': 0.425，' pos': 0.575，' compound': 0.8877}</p><p id="9def" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">分数范围在-1到1之间，其中-1表示非常消极，+1表示非常积极。我们将使用复合得分来确定与太阳能相关的推文是正面还是负面的。</p><p id="d558" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们现在将初始化情绪强度分析器，并创建一个lambda函数，该函数接收一个文本字符串，并对其应用Vader.polarity_scores()函数以获得结果，然后返回复合得分。使用Pandas中的apply功能，我们可以在数据框中创建一个新的复合列，其中包含每条tweet的所有复合得分。</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="3ace" class="ll lm it lh b gy ln lo l lp lq">vader <strong class="lh iu">=</strong> SentimentIntensityAnalyzer()<br/><br/>function <strong class="lh iu">=</strong> <strong class="lh iu">lambda</strong> title: vader<strong class="lh iu">.</strong>polarity_scores(title)['compound']<br/>clean_tweets['compound'] <strong class="lh iu">=</strong> clean_tweets['tweet']<strong class="lh iu">.</strong>apply(function)<br/>clean_tweets</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mh"><img src="../Images/2c23bf84938db1d178624cf152158b3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9srlXa_bC3d-fOPLz_l0sQ.png"/></div></div></figure><p id="adee" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">可视化情绪</strong></p><p id="f3a2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们看看情绪是如何分布的。通过绘制词云，我们可以更好地理解常用词。词云(也称为文本云)是一种可视化，其中特定的词在文本中出现的越多，它在词云中出现的就越大、越粗。</p><p id="7ed2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们用词云图将数据中的所有词可视化。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mi"><img src="../Images/5693e055c73702f20661520816d437e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8G-Y0IiWqY1cNkWv67cxcw.png"/></div></div></figure><p id="8f0a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">能源和太阳能是很突出的常用词。</p><p id="5ee7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">创建一个函数来计算消极(-1)、中立(0)和积极(+1)情绪，并在数据框中添加一个名为“情绪”的新列。</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="6407" class="ll lm it lh b gy ln lo l lp lq"><strong class="lh iu">def</strong> getAnalysis(score):<br/> <strong class="lh iu">if</strong> score <strong class="lh iu">&lt;</strong> 0:<br/>    <strong class="lh iu">return</strong> 'Negative'<br/> <strong class="lh iu">elif</strong> score <strong class="lh iu">==</strong> 0:<br/>    <strong class="lh iu">return</strong> 'Neutral'<br/> <strong class="lh iu">else</strong>:<br/>    <strong class="lh iu">return</strong> 'Positive'<br/><br/>clean_tweets['sentiment'] <strong class="lh iu">=</strong> clean_tweets['compound']<strong class="lh iu">.</strong>apply(getAnalysis)<br/>clean_tweets</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mj"><img src="../Images/fa3b9b47509320f13da862feb83ad4e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F3FXcVmJqKnY8gTh-QCcWw.png"/></div></div></figure><p id="3051" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">显示每种情绪的数量。</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="f760" class="ll lm it lh b gy ln lo l lp lq">clean_tweets['sentiment']<strong class="lh iu">.</strong>value_counts()</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mk"><img src="../Images/d78f635cec05f925deb8d8c8fd052a86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zqcYhwOHsXtZQY__iEP7_w.png"/></div></div></figure><p id="18f5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">总共有1298条推文。我们看到914条推文是正面的，211条是负面的，173条是中性的。</p><p id="edfe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">想象每种情绪的数量。</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="0939" class="ll lm it lh b gy ln lo l lp lq">plt<strong class="lh iu">.</strong>title('Sentiment Analysis')<br/>plt<strong class="lh iu">.</strong>xlabel('Sentiment')<br/>plt<strong class="lh iu">.</strong>ylabel('Counts')<br/>clean_tweets['sentiment']<strong class="lh iu">.</strong>value_counts()<strong class="lh iu">.</strong>plot(kind <strong class="lh iu">=</strong> 'bar')<br/>plt<strong class="lh iu">.</strong>show()</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ml"><img src="../Images/3d04071499142e25833be8f5b7526daa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IJLfYFjAnB9145RwmGtEaw.png"/></div></div></figure><p id="1aab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">基于复合分数可视化情感分布。</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="2946" class="ll lm it lh b gy ln lo l lp lq">plt<strong class="lh iu">.</strong>figure(figsize<strong class="lh iu">=</strong>(8, 5))<br/>sns<strong class="lh iu">.</strong>histplot(clean_tweets, x<strong class="lh iu">=</strong>'compound', color<strong class="lh iu">=</strong>"darkblue", bins<strong class="lh iu">=</strong>10, binrange<strong class="lh iu">=</strong>(<strong class="lh iu">-</strong>1, 1))<br/>plt<strong class="lh iu">.</strong>title("Solar Energy Sentiment Distribution")<br/>plt<strong class="lh iu">.</strong>xlabel("Compound Scores")<br/>plt<strong class="lh iu">.</strong>ylabel("")<br/>plt<strong class="lh iu">.</strong>tight_layout()</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mm"><img src="../Images/7af38d36881bc16ca6e675d1244a96fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vHpcmyEl0xTCYDiiVztymw.png"/></div></div></figure><p id="e1ff" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">结论</strong></p><p id="964e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">绝大多数推文显示了对太阳能的积极态度。70%的情绪是正面的，16%是中性的，13%是负面的。这些观点与皮尤研究中心的调查结果一致。对于我们环境的未来来说，这是一个令人鼓舞的迹象。希望更多的人会将他们的想法付诸行动，开始使用太阳能为他们的家庭供电，并驾驶电动或混合动力汽车。</p><p id="8d00" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">非常感谢你阅读我的文章！如果您有任何意见或反馈，请在下面添加。</p><p id="8187" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑报名成为一名媒体成员。会员资格使你可以无限制地访问媒体上的所有报道。你可以通过这个链接<a class="ae lf" href="https://medium.com/@dniggl/membership" rel="noopener">https://medium.com/@dniggl/membership</a>注册</p></div></div>    
</body>
</html>