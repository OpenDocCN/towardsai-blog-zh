<html>
<head>
<title>Steps Toward MLOps Research — Software Engineering Your AI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">迈向MLOps研究的步骤——软件工程你的人工智能</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/steps-toward-mlops-research-software-engineering-your-ai-99314dbffa61?source=collection_archive---------2-----------------------#2022-07-21">https://pub.towardsai.net/steps-toward-mlops-research-software-engineering-your-ai-99314dbffa61?source=collection_archive---------2-----------------------#2022-07-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8b5b23e541c3311a3fd71f56e3b02477.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sA5W2EMqxQRG90ifhkeDFQ.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">数据科学家在他们的模型被部署到生产环境一分钟后。Artem Beliaikin 在<a class="ae kc" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="3d61" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi lb translated"><span class="l lc ld le bm lf lg lh li lj di"> M </span> <a class="ae kc" href="https://en.wikipedia.org/wiki/MLOps" rel="noopener ugc nofollow" target="_blank"> LOps </a>是一个新领域的老要求；机器学习世界正在发展，从最黑暗背景下的小众主题发展成为广泛用例中的一流公民。但是伴随着强大的力量而来的是巨大的责任；除了添加新的、特定领域的需求(例如— <a class="ae kc" href="https://www.analyticsvidhya.com/blog/2021/11/model-explainability/" rel="noopener ugc nofollow" target="_blank">模型可解释性</a>，协作研究，并使其可读)，更传统的一般软件开发需求(例如—监控、API服务和<a class="ae kc" href="https://en.wikipedia.org/wiki/Release_management" rel="noopener ugc nofollow" target="_blank">发布管理</a>)对人工智能应用程序也变得越来越重要。这些过程在一般的软件开发领域中被很好地公式化了，但是对于机器学习领域来说是相当新的，因此，在被完全采用之前还需要时间。但与此同时，有很多事情可以做；第一步应该是接受一般的软件开发概念，并将它们融入机器学习世界。我们互动和管理人工智能项目的方式的微小变化。以下是实现该目标的关键点。简单，但同时对这一需求至关重要。</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lk"><img src="../Images/600bd0e435e4aa096c0133a7138f0e2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*op0uYwefc9jiBRIVjGZLFA.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">数据科学家在意识到他们的模型也应该在生产中处理后一分钟。照片由<a class="ae kc" href="https://unsplash.com/@dariusbashar?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">大流士巴沙尔</a>在<a class="ae kc" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="46c1" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">可重复研究—保留训练数据集</h1><p id="abc8" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">在机器学习领域，最困扰我们的一个主要现象是<a class="ae kc" href="https://en.wikipedia.org/wiki/Replication_crisis" rel="noopener ugc nofollow" target="_blank">不可复制的研究</a>论文；他们展示极端的结果，但同时不分享他们的代码、数据或重现结果的方法。现在放大到您的组织；假设我们有一个运行了一段时间的模型，为我们的客户提供服务并显示性能x。随着时间的推移，我们决定重新审视它的性能，以确定是否需要重新调整。问题是创建该模型的人已经离开/正在从事一个不同的项目，现在我们需要重新研究该模型，以便更好地理解其数字。通常在这样的过程中，我们会遇到边缘情况，比如异常数据、新的潜在<a class="ae kc" href="https://en.wikipedia.org/wiki/Feature_(machine_learning)#:~:text=In%20machine%20learning%20and%20pattern,pattern%20recognition%2C%20classification%20and%20regression." rel="noopener ugc nofollow" target="_blank">特征</a>、缺失值，或者只是对手头的问题有自己独特的观点。这些要点中的每一个都可以让我们踏上漫长的旅程，只是为了回答这样的问题:模型创造者熟悉它吗？如果有，他们做的事情有什么不同吗？。问题是这很容易变成浪费时间，追逐鬼魂而不知道这些是死胡同。但是，如果我们能够及时跳回到模型最初被训练的时候，并验证这些问题，会怎么样呢？英雄所见略同，很有可能，我们的许多“新的迷人的”想法已经被评估了！。但是，在人们开发出可以工作的时间机器之前，我们所能做的最好的事情就是保存模型被训练的原始训练群体，使我们能够轻松地验证手头的这些问题。系统地保存训练数据集快照将减轻许多这样的后续要求。</p><h1 id="2242" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated"><strong class="ak">可解释的研究——记录什么该做，什么不该做</strong></h1><p id="bd90" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">继续我们之前的观点，在某些情况下，保留训练数据集的快照是不够的，因为它将缺少一些重要的上下文点。回答诸如“为什么模型不使用特征X进行预测？”或者“用不同的方式表示数据不是更好吗？”仅具有训练数据集快照是不可行的。我们缺少的是导致这些决定的背景，通常数据本身是不可见的。针对这一需求的一个非常重要的解决方案是采用更结构化的研究方法；使用像iPython notebooks这样的工具使我们能够很容易地理解做了什么，为什么做，以及如何做。这种工具甚至对于在一个更大的T4研发组织中独自工作的数据科学家来说也很重要。保存记录完整且不断更新的笔记本，记录我们所做的研究和所做的决定，可以让我们轻松处理未来可能出现的问题和顾虑。成为我们研究的一本打开的书，它甚至可能使我们生成的模型对这样的未来问题进行自我解释。</p><h1 id="e429" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated"><strong class="ak">软件开发研究——把它做成一个项目并付诸实施</strong></h1><p id="bcbd" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">既然我们决定将iPython笔记本作为我们的主要研究工具，并且一旦我们努力使它更具结构化和可读性，那么将我们所有的开发转移到那个生态系统，甚至使我们的生产脚本作为笔记本来管理和触发，这是很诱人的。就我个人而言，我发现iPython笔记本在最初的研究和构思阶段非常有益，但在研究完成的那一刻也非常违反直觉和容易出错。代码开发过程通常包括版本、缺陷、用户故事、文档和许多其他现代软件工程特征。所有这些都非常适合使用源代码托管工具，如<a class="ae kc" href="https://git-scm.com/" rel="noopener ugc nofollow" target="_blank"> GIT </a>，使我们能够轻松地管理我们的代码开发状态。保持我们的笔记本版本使用<a class="ae kc" href="https://en.wikipedia.org/wiki/Version_control" rel="noopener ugc nofollow" target="_blank">版本控制</a>系统是朝着这个方向迈出的第一步。但这还不够。一旦研究阶段结束，将我们的笔记本视为常规软件开发项目并处理它所增加的相关需求是很重要的。一个这样的例子是确保我们的代码是可复制的，这一需求对于两个主要方面来说是非常重要的——数据创建阶段(通过使相关代码更加清晰可见，使我们能够轻松地调查和修复数据缺陷，还能够轻松地进行研究以开发过渡)和<a class="ae kc" href="https://en.wikipedia.org/wiki/Deployment_environment#Production" rel="noopener ugc nofollow" target="_blank">生产阶段</a>(能够清楚地了解应用程序需求，如如何支持在线推理以及一般上下文点，如预计的延迟)。当我们的代码在不同的笔记本上管理时，这些特性就不那么明显了。此外，基于笔记本的开发很容易容忍代码反模式，例如<a class="ae kc" href="https://en.wikipedia.org/wiki/Duplicate_code" rel="noopener ugc nofollow" target="_blank">代码重复</a>。一旦可视化、可读性和研究变得不那么重要，是时候将我们的iPython笔记本片段作为一般代码项目来管理了。</p><h1 id="ee3c" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated"><strong class="ak">研究软件开发— </strong>笔记本<strong class="ak">背景</strong></h1><p id="810d" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">既然我们已经知道了尽可能将我们的代码转移到一般项目中是多么重要，我们应该再次强调为什么我们首先决定使用iPython笔记本；简要地看一下人工智能的发展有两个主要阶段——探索/一般研究阶段和更具体的后续阶段，这时我们知道该做什么并开始实施它。通过轻松实现可视化和可解释性，iPython笔记本显然是研究阶段的最佳工具。虽然之前我们描述了为什么不要太依赖笔记本很重要，但是镜像不要太依赖一般的代码项目；与以前类似，将有一种趋势，将我们所有的开发都移出笔记本电脑生态系统。这种常见的步骤包括重构笔记本，将代码片段转移到代码项目中，并在我们的笔记本中使用它们的导入(而不是普通代码)。但隐藏的警告是，笔记本和一般代码项目有不同的进度和发布过程——几个月后重新访问我们的笔记本可能会隐藏这样一个事实，即虽然笔记本是通过代码版本X的导入生成的，但当前的代码基础是版本X+m，这与我们看到的笔记本状态不再相关(缺陷已修复，API被破坏，等等)..).我们缺少的是一个笔记本状态的组合代码项目。对此有一些可能的解决方案，比如将笔记本放入代码项目的一部分，这可以使进一步的调查了解他们所依赖的代码版本。但一个更直接的方法是在探索笔记本中明确他们试图调查什么，以及他们依赖什么资产、状态和版本。在某些情况下，甚至(原谅我，上帝)只是复制相关代码就能说得通。</p><h1 id="2f3c" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated"><strong class="ak">研究监控—模型性能</strong></h1><p id="9ad6" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">我们很多人容易忘记的重要一点是，一旦研究结束，开发结束，甚至部署结束，我们的工作也不会结束。在某些方面，只有当用户开始与我们生成的模型进行交互时，它才会开始。通常我们做的研究包括一个需求和一个相关的论题。例如，为了提高顾客的满意度(需要)，我们将努力改善我们的服务，确保顾客的要求得到及时处理和解决，假设这是为了提高他们的满意度(论文)。让我们假设我们为公司的支持团队创建了一个模型，该模型强调了客户的请求有可能得不到及时解决。一旦用户(支持员工)开始使用我们的应用程序，我们应该关注一些指标；首先，如果客户的请求现在没有得到更恰当的处理，那么就需要进一步的调试；也许UX、我们使用的数据或我们生成的模型有问题。然后，验证我们的论点是很重要的，即一旦更多的请求得到适当处理，满意度就会上升。从运营角度来看，不断验证这些特征非常重要。一个常见的观察指标是类别分布——寻找突然的变化(这可能表明一个问题),并将其与我们的研究基线数字进行比较(假设我们的模型预测验证分裂为正X%,现在为3*X%或X/3%,这可能表明一个问题)。在某些情况下，根据定义，我们的模型是周期性的，需要偶尔进行再培训。对于这些情况，我们希望使用代码生成模型(而不是在一次性笔记本中)。这样的代码可以是一般<a class="ae kc" href="https://en.wikipedia.org/wiki/CI/CD" rel="noopener ugc nofollow" target="_blank"> CI-CD </a>部署过程的一部分，并且应该包括自动测试，以验证生成的新模型是否应该替换现有的模型。这样的测试可能会分析我们提到的非常相同的指标，因此，可以被重用。</p><h1 id="aaaf" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated"><strong class="ak">研究测试—数据验证</strong></h1><p id="7e36" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">既然我们已经开始监控我们的模型，我们应该回顾其他可能应用的测试；除了常规操作指标(如延迟、使用的内存、请求失败等..)和直观的性能测试(准确率)，我们希望使用更经典的测试，如单元、功能和集成测试。鉴于数据对人工智能应用成功的高度重要性，应用这些测试的第一个领域应该是数据领域。此外，在许多情况下，我们是数据消费者(将在其他地方产生)，我们希望对数据的关键属性进行单元测试和监控。简单的方法是验证像数据定义这样的属性。这是天真的，不是因为缺乏重要性，而是因为这是一项永无止境的工作——每个数据字段都可以在许多方面进一步描述和分析(空值、密度、范围等)..).测试所有这些情况将很难维护，并且很容易导致许多FP警报。一个更合理的解决方案可以用相反的方式构建；首先，假设一切正常，从验证911案例开始(就像新数据到达一样)。然后，仅在识别数据缺陷之后生成新的数据测试(以便在将来验证它们)。使用这种方法将确保您不会有太多的测试，并且对于您已经有的测试，将有一个明确的动机来确保它们正常工作。</p><h1 id="f8b3" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated"><strong class="ak">软件开发研究，反之亦然</strong></h1><p id="11ac" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">人工智能研究只能受益于一般的软件开发概念。鉴于人工智能、ML工程师和iPython笔记本等工具的高度崛起，可以合理地假设反过来也会发生，通用软件开发也会发现人工智能概念从中受益。例如，开始使用笔记本作为DevOps工具来描述手边的环境属性。激动人心的日子就在前面。</p></div></div>    
</body>
</html>