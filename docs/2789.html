<html>
<head>
<title>Data Collection Using OpenCV</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用OpenCV收集数据</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/data-collection-using-opencv-cc5aa7f27255?source=collection_archive---------3-----------------------#2022-05-26">https://pub.towardsai.net/data-collection-using-opencv-cc5aa7f27255?source=collection_archive---------3-----------------------#2022-05-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1e51" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">OpenCV是“开源计算机视觉”的缩写，是一个机器学习库，旨在实现图像处理和计算机视觉应用。与对象检测和识别相反，OpenCV的一个尚未开发的应用是它收集数据的能力。更准确地说，它可用于通过将图像本地保存在您的机器中来创建数据集。请允许我详细说明。</p><p id="6053" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">OpenCV允许您访问机器中的网络摄像头，并处理它捕获的图像。这个想法包括处理</p><p id="dea0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是一个简单的代码片段。(在这个演示中，我将使用Python v 3.9.7)</p><p id="5a21" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">导入库</strong>:我们需要python的<em class="kl"> OpenCV </em>和<em class="kl"> OS </em>库来执行数据收集。如果您没有预安装这些软件包，可以通过在命令提示符下执行以下命令来安装它们:</p><ul class=""><li id="0268" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated">OpenCV: <em class="kl"> pip安装opencv-python </em></li><li id="2235" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">操作系统:<em class="kl"> pip安装操作系统</em></li></ul><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="24cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">初始化</strong>:下一步是创建一个VideoCapture对象，从系统的网络摄像头实时捕捉视频。这里有一个原始文档的链接— <a class="ae lh" href="https://docs.opencv.org/4.x/dd/d43/tutorial_py_video_display.html" rel="noopener ugc nofollow" target="_blank"> Docs </a>。我们还需要三个变量:</p><ul class=""><li id="9c90" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated"><em class="kl"> flag_collecting </em>:这是一个布尔变量，作为暂停/恢复按钮。</li><li id="aba6" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated"><em class="kl"> images_collected </em>:这是一个整数变量，用来表示系统中采集并保存的图像数量。</li><li id="14ad" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated"><em class="kl"> images_required </em>:这是一个整数变量，用于表示我们打算采集的图像数量。</li></ul><p id="b00a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们必须使用操作系统库中的<em class="kl">mkdir</em>(make-directory的缩写)命令创建一个文件夹/目录(在本例中为testing_demo)。</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="71d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">代码的症结</strong>:如果这是你第一次使用OpenCV，我建议你通过<a class="ae lh" href="https://docs.opencv.org/4.x/dd/d43/tutorial_py_video_display.html" rel="noopener ugc nofollow" target="_blank">这个</a>文档来理解代码的样板部分。我将逐行解释对标准代码的所有修改，以确保它更容易理解。</p><p id="ab15" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第3行:我必须使用<em class="kl"> flip() </em>命令沿y轴翻转帧，以确保视频以正确的方式呈现给我。</p><p id="533f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第5行:while循环将一直运行，直到收集的图像等于所需的图像。</p><p id="a5e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第8行:使用cv2.rectangle命令，我在屏幕上提到的坐标之间画了一个黑色方块。</p><p id="595c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第11–14行:我提取黑色方块内的切片帧或屏幕的一部分。然后，我将这些提取的帧保存在上面创建的目录中。这将产生尺寸为240x240像素的图像。OpenCV中坐标系的原点位于左上角。(80，320)是从原点开始的y坐标，它随着向下移动而增加。(380，620)是从原点开始的x坐标，它随着向右移动而增加。所以(380，80)和(620，320)对应黑色方块的左上和右下坐标。</p><p id="f6ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第16–18行:显示在给定坐标下采集的图像数量。</p><p id="5860" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第21–22行:键盘字符‘s’(代表开始/停止)用于暂停或恢复图像采集。它实际上相当于一个切换按钮。</p><p id="a6ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第23行:键盘字符“q”(表示退出)用于关闭窗口</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="45de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">应用</strong>:我原本是用这种技术来收集手形符号的图像，以创建一个图像数据集(在Kaggle上有:<a class="ae lh" href="https://www.kaggle.com/datasets/abhinowww/hand-cricket-symbols" rel="noopener ugc nofollow" target="_blank">手形符号</a>)，但极限只是你的想象。您可以用任何东西创建影像数据集。发挥创造力！</p><p id="90e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">实现</strong>:我添加了一些这段代码运行的图片。建议在你身后用一面普通的墙来收集数据，以确保帧中没有外部噪声。</p><p id="759a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请原谅我粗陋的穿着品味。</p><p id="209d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面的图像是在我运行代码之后，在我按下键盘上的字符' s '之前拍摄的，这将启动图像收集过程。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi li"><img src="../Images/3b2be776947f8af7d8e8dfb978709223.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*ybaP06rTW6HXJwW427N1rg.png"/></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk translated">图像采集前的初始状态</figcaption></figure><p id="fc18" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在这个图像是在我运行代码之后，在我按下键盘上的字符' s '之后拍摄的。如您所见，收集的图像数量显示在黑色方块上方。这个黑色方块的大小可以根据用户的意愿改变成任何形状或大小。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/aa637ab6268e834cab695badd2a0b74f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*hpGBSO1DSiSL_3KKkkqSxQ.png"/></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk translated">图像收集期间的中间状态</figcaption></figure><p id="e772" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是图像收集的结果。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/8ee0676d5efb1fc46094dde41eef3cff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*qtE8rLuM6vk8Zayz7m39kA.png"/></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk translated">收集的样本图像</figcaption></figure><p id="065a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是我所遇到的收集和格式化图像数据的最简单的方法之一。暂时就这样吧！回头见！</p></div></div>    
</body>
</html>