<html>
<head>
<title>Whatsapp Group Chat Analysis using Python and Plotly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python和Plotly的Whatsapp群聊分析</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/whatsapp-group-chat-analysis-using-python-and-plotly-89bade2bc382?source=collection_archive---------0-----------------------#2020-07-08">https://pub.towardsai.net/whatsapp-group-chat-analysis-using-python-and-plotly-89bade2bc382?source=collection_archive---------0-----------------------#2020-07-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="6c03" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/data-science" rel="noopener ugc nofollow" target="_blank">数据科学</a>，<a class="ae ep" href="https://towardsai.net/p/category/programming" rel="noopener ugc nofollow" target="_blank">编程</a></h2><div class=""/><div class=""><h2 id="5978" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用Pandas和Plotly从Whatsapp群聊的数据中获得洞察力和模式。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/3ad9d7dc285083b4be6945eb4e076f47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O9ERcJLSpFcdIG4Ry1ednA.png"/></div></div></figure><p id="248a" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">一组五个朋友决定在他们的第六学期去果阿旅行。在社交媒体出现之前，他们习惯于随叫随到或在大学食堂里计划一切。但现在多亏了Whatsapp，从旅行到考试和作业，一切都在Whatsapp群组上进行。同样，我也有五个朋友。</p><p id="8bf9" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">一天，我的朋友争辩说，与其他人相比，他是小组中唯一一个经常发短信的人。作为一名数据爱好者，我决定分析我们的群聊，以获得见解和使用模式，并验证我朋友的说法。我发现了相当有趣的东西。此外，最后一定要检查一下可视化效果！！！。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><blockquote class="mg mh mi"><p id="5213" class="ld le mj lf b lg lh kd li lj lk kg ll mk ln lo lp ml lr ls lt mm lv lw lx ly im bi translated">或者对代码不感兴趣的人，您可以浏览图片并复制本文末尾提供的笔记本。如果您对分析感兴趣，您也可以使用导出的聊天文件运行笔记本。</p></blockquote><h1 id="0e79" class="mn mo it bd mp mq mr ms mt mu mv mw mx ki my kj mz kl na km nb ko nc kp nd ne bi translated">数据准备和清理</h1><p id="d3ce" class="pw-post-body-paragraph ld le it lf b lg nf kd li lj ng kg ll lm nh lo lp lq ni ls lt lu nj lw lx ly im bi translated">首先，Whatsapp提供了将任何聊天(有媒体和无媒体)导出为<code class="fe nk nl nm nn b">.txt</code>文件的功能。我导出了我的没有媒体的群聊。一个示例导出的<code class="fe nk nl nm nn b">.txt</code>文件看起来像这样—</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi no"><img src="../Images/03484258b930679241b42c8f7ba97497.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*jmu8tW8G4spaL1Ch-MjJqw.png"/></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">样本图像</figcaption></figure><p id="3aab" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这个纯文本文件必须以有意义的方式进行解析和标记，以便在Pandas数据帧中提供(存储)。</p><p id="c8c1" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">让我们只考虑文本中的一行(我们称之为“原始文本”)，看看如何从中提取相关的列:</p><p id="ef21" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">2017年6月18日，晚上9:47——Teja Kura:为什么你有两个号码？</p><p id="82af" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在我们的示例文本行中，我们的主要目标是将原始消息自动分解成4个标记。</p><p id="50a4" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">{日期}，{时间}—{作者}:{消息}</p><p id="6792" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">{18/06/17}，{晚上9:47 }—{ Teja }:{为什么你有两个号码？}</p><p id="e105" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">可能会有消息多于一行的情况。这看起来像—</p><p id="ac85" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">2019年4月1日，晚上8:30—Vishal gur rala:下载所需的PDF或JPG格式的文件。</p><p id="7cff" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">因此，我们需要编写一个函数来检测每行是否以日期开头。如果是这样，这意味着这是一个独特的信息。然后，我们可以提取日期、时间、作者和消息。下面的代码检查每一行是否以日期和时间开始，然后将该行分成日期、时间、作者和消息标记。它还创建了一个数据框，将上述四个令牌作为四个单独的列。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="b447" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">让我们看看我们创建的数据框。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/9f7d0b60e8ddb42841806a6309523b7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*sTLkOL0LP3ZvWFWSqZjtEQ.png"/></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/3f3642f7163afe3b052223b394e3a5fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*0O-GgEDwZnxYILD896Dkkw.png"/></div></figure><p id="6e11" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我们可以看到该数据帧由<strong class="lf jd"> 35043 </strong>个条目组成，这意味着该组中有<strong class="lf jd"> 35k+消息</strong>。还要注意，前两条消息的作者值为None。是因为这些消息是由Whatsapp生成的，不包含作者。让我们放弃没有作者的消息。</p><pre class="ks kt ku kv gt nx nn ny nz aw oa bi"><span id="9435" class="ob mo it nn b gy oc od l oe of">df = df.dropna()</span></pre><p id="7cd1" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">让我们试着找出组中用户的总数。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi og"><img src="../Images/d9c4f387976229f76aa3680fb2f60601.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*fH2tN4QDQmpfVZHLoRMRnQ.png"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="2c39" class="mn mo it bd mp mq oh ms mt mu oi mw mx ki oj kj mz kl ok km nb ko ol kp nd ne bi translated">分组统计</h1><p id="97fa" class="pw-post-body-paragraph ld le it lf b lg nf kd li lj ng kg ll lm nh lo lp lq ni ls lt lu nj lw lx ly im bi translated">这里需要注意的一点是，我们导出的聊天没有媒体。因此，在媒体信息的地方，我们会发现短语<strong class="lf jd"> &lt;媒体省略了&gt;。</strong>有了这个的帮助，我们就可以找到群里分享的媒体消息总数了。为了找到使用的表情符号总数，我们将使用表情符号库。我们还将创建一个单独的列<strong class="lf jd">表情符号</strong>，其中仅包含该特定消息的表情符号。为了找到共享链接的总数，我们将编写一个regex模式，并使用python中的<code class="fe nk nl nm nn b">re</code>库来识别给定消息中的URL。我们还将创建一个单独的列<strong class="lf jd"> urlcount </strong>，它包含特定消息中的URL计数。稍后将使用所有额外创建的列。</p><p id="ee46" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">通过添加<code class="fe nk nl nm nn b">urlcount</code>列来计算共享的链接总数。表情符号的总数是通过将<code class="fe nk nl nm nn b">emoji</code>栏中所有列表的长度相加计算出来的。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="427e" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">输出— </strong></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/8e214788fe327f5660bb77df8c313db1.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*ZaMCDfwqWpNkZ1IJOMCp2Q.png"/></div></figure><p id="3e8c" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">你可以注意到<strong class="lf jd">媒体</strong>的总数大约为<strong class="lf jd"> 2k </strong>，使用的<strong class="lf jd">表情符号</strong>总数为<strong class="lf jd"> 6k </strong>，共享的<strong class="lf jd">链接</strong>总数大约为<strong class="lf jd"> 240 </strong>。</p><p id="8773" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">现在让我们将文本消息和媒体消息分成两个独立的数据帧。<code class="fe nk nl nm nn b">messages_df</code>将只包含短信。</p><pre class="ks kt ku kv gt nx nn ny nz aw oa bi"><span id="7883" class="ob mo it nn b gy oc od l oe of">media_messages_df = df[df['Message'] == '&lt;Media omitted&gt;']</span><span id="efd0" class="ob mo it nn b gy on od l oe of">messages_df = df.drop(media_messages_df.index)</span></pre><p id="f758" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">计算每个作者在每条消息中使用的字母和单词的数量可能会很有趣。因此，让我们使用以下代码向数据帧添加两个新列，称为“字母计数”和“单词计数”:</p><pre class="ks kt ku kv gt nx nn ny nz aw oa bi"><span id="2731" class="ob mo it nn b gy oc od l oe of">messages_df['Letter_Count'] = messages_df['Message'].apply(lambda s : len(s))<br/>messages_df['Word_Count'] = messages_df['Message'].apply(lambda s : len(s.split(' ')))</span></pre><p id="9d37" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我们的messages_df数据帧现在看起来像这样。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oo"><img src="../Images/9fae6aa41f2d0231adeb07008ded6f8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pdw-xmwTgxfdv_9mmjCK7A.jpeg"/></div></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="47ca" class="mn mo it bd mp mq oh ms mt mu oi mw mx ki oj kj mz kl ok km nb ko ol kp nd ne bi translated">作者明智的统计</h1><p id="2d34" class="pw-post-body-paragraph ld le it lf b lg nf kd li lj ng kg ll lm nh lo lp lq ni ls lt lu nj lw lx ly im bi translated">要查找每个作者的统计数据，首先，我们将创建数据框中所有唯一作者的列表。接下来，我们将遍历作者列表，过滤数据框并打印每个作者的统计数据。我们还将打印每位作者每封邮件的平均字数。因为我们有字数统计，所以总字数/总消息数将得出每条消息的平均字数。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nt nu l"/></div></figure><h2 id="e452" class="ob mo it bd mp op oq dn mt or os dp mx lm ot ou mz lq ov ow nb lu ox oy nd iz bi translated">输出—</h2><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/0ba299c641c35c28b7c8dd46ce7fe29e.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*uqgC0H14l9wxr7HYaxAMvA.png"/></div></figure><p id="b096" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这足以证明我朋友的论点是错误的。但是我继续分析更多。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="bc05" class="mn mo it bd mp mq oh ms mt mu oi mw mx ki oj kj mz kl ok km nb ko ol kp nd ne bi translated">表情符号统计</h1><h2 id="b2a6" class="ob mo it bd mp op oq dn mt or os dp mx lm ot ou mz lq ov ow nb lu ox oy nd iz bi translated">群组中使用的独特表情符号的数量</h2><p id="c992" class="pw-post-body-paragraph ld le it lf b lg nf kd li lj ng kg ll lm nh lo lp lq ni ls lt lu nj lw lx ly im bi translated">在分组统计中，我们计算了使用表情符号的总数。但是让我们找出使用的独特表情符号的总数。为了实现这一点，我们可以组合表情符号列中的所有列表，并通过使用set数据类型来查找唯一表情符号的数量。</p><pre class="ks kt ku kv gt nx nn ny nz aw oa bi"><span id="d712" class="ob mo it nn b gy oc od l oe of">total_emojis_list = list(set([a for b in messages_df.emoji for a in b]))<br/>total_emojis = len(total_emojis_list)<br/>print(total_emojis)</span><span id="a4bd" class="ob mo it nn b gy on od l oe of"># Output:<br/># 185</span></pre><p id="5178" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我们小组使用了185个独特的表情符号。似乎是一个相当大的数字。</p><h2 id="2e33" class="ob mo it bd mp op oq dn mt or os dp mx lm ot ou mz lq ov ow nb lu ox oy nd iz bi translated">群组中使用最多的表情符号</h2><p id="a38e" class="pw-post-body-paragraph ld le it lf b lg nf kd li lj ng kg ll lm nh lo lp lq ni ls lt lu nj lw lx ly im bi translated">在表情符号栏中，我们有每条信息的表情符号列表。通过将所有列表合并成一个大列表，并使用计数器功能，我们可以创建一个所有表情符号的频率列表。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nt nu l"/></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/1457cfb25c3ea2340ff2d159d03dd72d.png" data-original-src="https://miro.medium.com/v2/resize:fit:328/format:webp/1*Ifw5hupEP3z9y7sXMKMl4g.png"/></div></figure><p id="bec4" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我们可以看《T2》😂 ' <strong class="lf jd">称霸</strong>榜单，果然在一群朋友中。现在，让我们用一个饼状图来形象化这个群体的表情分布。</p><pre class="ks kt ku kv gt nx nn ny nz aw oa bi"><span id="4827" class="ob mo it nn b gy oc od l oe of">import plotly.express as px<br/>fig = px.pie(emoji_df, values='count', names='emoji',<br/>             title='Emoji Distribution')<br/>fig.update_traces(textposition='inside', textinfo='percent+label')<br/>fig.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pb"><img src="../Images/eb62af0ce4a1af46f703985b5a45e90f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KfVXn3Iy9t9T8j2UQD96oA.png"/></div></div></figure><p id="f9a7" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">Plotly的主要优点是情节在视觉上很吸引人，而且具有互动性。在Plotly中创建一个情节也是一件容易的事情。同样，我们可以为每个作者的表情符号分布ie创建饼状图。像我们之前做的那样过滤数据框，并为每个作者绘制表情分布的饼状图。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nt nu l"/></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pc"><img src="../Images/026d33aa16fa9a73a2a6dd0d28233ba1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0dzpe8EdI62LuKrzd4dc8A.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">移动用户可以点击图片并缩放以查看更多内容。</figcaption></figure><p id="698d" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">你可以注意到不同的作者有不同的模式。<strong class="lf jd">前两个</strong>饼图(按行)类似于组饼图，而后三个饼图略有不同。您还可以注意到饼图旁边的标签，这些标签对于5个用户是不同的。我(Teja Kura)在看到我的多样化饼状图后，才知道我使用的表情符号数量最多！</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="0459" class="mn mo it bd mp mq oh ms mt mu oi mw mx ki oj kj mz kl ok km nb ko ol kp nd ne bi translated">词云</h1><p id="4140" class="pw-post-body-paragraph ld le it lf b lg nf kd li lj ng kg ll lm nh lo lp lq ni ls lt lu nj lw lx ly im bi translated">单词云是特定文本中单词的可视化表示。单词云中单词的大小与该单词在文本中的出现频率成正比。我们将为群组中的所有消息创建一个单词云。</p><p id="4014" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">首先，让我们将所有35k条消息合并成一条大的单个文本消息，以创建单词云。</p><pre class="ks kt ku kv gt nx nn ny nz aw oa bi"><span id="7b21" class="ob mo it nn b gy oc od l oe of">text = " ".join(review for review in messages_df.Message)<br/>print ("There are {} words in all the messages.".format(len(text)))</span><span id="c5b5" class="ob mo it nn b gy on od l oe of"># OUTPUT - <br/># There are 687467 words in all the messages.</span></pre><p id="48e2" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">看起来所有的35k消息加起来包含6.8L个单词！</strong>接下来，在创建单词云之前，我们需要了解什么是<strong class="lf jd">停用词</strong>。停用词是文本中常用的词(如“the”、“a”、“an”、“in”)。搜索引擎被设计成可以忽略这些词。因为这些单词没有给文章增加新的意思，我们可以忽略它们。</p><p id="a1b8" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我们将使用python中的单词云库。库中已经存在预定的停用词列表。这个列表由英语单词组成。因为我们的母语是泰卢固语，而我们的大部分文本都是用英语输入的，所以我添加了额外的单词来更新停用词表。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nt nu l"/></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/1b9c9e8fb1c7d5853ca7f4eaeb367069.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*1rp-MOgzNMisA3tW9hMetg.png"/></div></figure><p id="d783" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">你可以看到像'<strong class="lf jd"> anta </strong>'、<strong class="lf jd"> kuda </strong>'这样的词比较大，这说明了它们被大量使用的事实。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="0e14" class="mn mo it bd mp mq oh ms mt mu oi mw mx ki oj kj mz kl ok km nb ko ol kp nd ne bi translated">更多统计数据</h1><h2 id="b790" class="ob mo it bd mp op oq dn mt or os dp mx lm ot ou mz lq ov ow nb lu ox oy nd iz bi translated">随着时间的推移消息的数量。</h2><p id="1a10" class="pw-post-body-paragraph ld le it lf b lg nf kd li lj ng kg ll lm nh lo lp lq ni ls lt lu nj lw lx ly im bi translated">我们将按日期对数据帧进行分组，并查找每个日期的总消息数。</p><pre class="ks kt ku kv gt nx nn ny nz aw oa bi"><span id="e455" class="ob mo it nn b gy oc od l oe of">date_df = messages_df.groupby("Date").sum()<br/>date_df.reset_index(inplace=True)</span><span id="e9d2" class="ob mo it nn b gy on od l oe of">fig = px.line(date_df, x="Date", y="MessageCount", title='Number of Messages as time moves on.')</span><span id="655c" class="ob mo it nn b gy on od l oe of">fig.update_xaxes(nticks=20)<br/>fig.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pb"><img src="../Images/5c09847d3fc3f19895b26fadac6b821d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sEItEa7A_aYHtlz5QV272Q.png"/></div></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h2 id="089c" class="ob mo it bd mp op oq dn mt or os dp mx lm ot ou mz lq ov ow nb lu ox oy nd iz bi translated">最有意思的一天是。</h2><p id="0004" class="pw-post-body-paragraph ld le it lf b lg nf kd li lj ng kg ll lm nh lo lp lq ni ls lt lu nj lw lx ly im bi translated">通过使用<code class="fe nk nl nm nn b">value_counts()</code> pandas方法，我们可以按降序查找数据帧中某个日期出现的总次数。</p><pre class="ks kt ku kv gt nx nn ny nz aw oa bi"><span id="7a16" class="ob mo it nn b gy oc od l oe of">messages_df['Date'].value_counts().head(10).plot.barh()<br/>plt.xlabel('Number of Messages')<br/>plt.ylabel('Date')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/71fd16fd825a27c3635001cc4f1ce225.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*S-rlymo4PlPjeNzgr7bPAA.png"/></div></figure><p id="c171" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">看来<strong class="lf jd">2019年7月26日</strong>是群里发生最多的一天！那天有700多条信息。经过深思熟虑，我了解到我们团队的一名成员在那天被安排到了甲骨文公司。也许我们在庆祝他在我们组的胜利！</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h2 id="227c" class="ob mo it bd mp op oq dn mt or os dp mx lm ot ou mz lq ov ow nb lu ox oy nd iz bi translated">日间配送。</h2><p id="ad6d" class="pw-post-body-paragraph ld le it lf b lg nf kd li lj ng kg ll lm nh lo lp lq ni ls lt lu nj lw lx ly im bi translated">让我们试着了解一下总共35k条消息在一天中(星期日、星期一……)的分布情况。我们将使用雷达图来了解白天的分布。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="d5a0" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">一定要看看下面的GIF来理解我们是如何解读雷达图的。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pg nu l"/></div></figure><p id="4eab" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我们可以看到<strong class="lf jd">星期五</strong>的消息数量<strong class="lf jd">最多</strong>(大约在5000到6000条之间)。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h2 id="cdd3" class="ob mo it bd mp op oq dn mt or os dp mx lm ot ou mz lq ov ow nb lu ox oy nd iz bi translated">小组成员什么时候最活跃？</h2><p id="c1c1" class="pw-post-body-paragraph ld le it lf b lg nf kd li lj ng kg ll lm nh lo lp lq ni ls lt lu nj lw lx ly im bi translated">与日期类似，我们也可以在时间列上应用<code class="fe nk nl nm nn b">value_counts</code>方法。</p><pre class="ks kt ku kv gt nx nn ny nz aw oa bi"><span id="6a71" class="ob mo it nn b gy oc od l oe of">messages_df['Time'].value_counts().head(10).plot.barh() plt.xlabel('Number of messages')<br/>plt.ylabel('Time')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/98f50f7be33ae576ef3065a338058ffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*EU_oG4gPJUy1o9h2rIjFsA.png"/></div></figure><p id="50c5" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我们可以注意到小组中的大部分活动发生在晚上10:00到10:15之间。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="a9f3" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">重大更新！！！—在收到许多关于兼容性问题的回复后，我创建了一个web应用程序，您只需上传您的聊天文件并进行分析即可！！</strong></p><p id="227b" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd"> Web App链接</strong> — <a class="ae pd" href="https://group-whatsapp-analyzer.herokuapp.com/" rel="noopener ugc nofollow" target="_blank"> Whatsapp群聊分析器</a> <br/> <strong class="lf jd">文章链接</strong>关于我是如何创建这个App的。点击<a class="ae pd" href="https://medium.com/towards-artificial-intelligence/whatsapp-group-chat-analysis-part-ii-efd7d4d0b051" rel="noopener">这里</a></p><h1 id="89af" class="mn mo it bd mp mq mr ms mt mu mv mw mx ki my kj mz kl na km nb ko nc kp nd ne bi translated">结论</h1><p id="c23a" class="pw-post-body-paragraph ld le it lf b lg nf kd li lj ng kg ll lm nh lo lp lq ni ls lt lu nj lw lx ly im bi translated">长篇大论的分析告一段落！在这篇文章中，我试图使用Python和Plotly来分析我们的Whatsapp群聊。我也理解了我们发短信方式的一些趋势，以及每个人的短信风格与群体相比有何不同。我希望你今天带了新东西回家！</p><p id="985f" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">如果您想联系，<strong class="lf jd">请在</strong><a class="ae pd" href="https://www.linkedin.com/in/saiteja-kura-49803b13b/" rel="noopener ugc nofollow" target="_blank"><strong class="lf jd">LinkedIn</strong></a><strong class="lf jd">上联系我。</strong></p></div></div>    
</body>
</html>