<html>
<head>
<title>Enhance Image processing Skill With Python Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python项目增强图像处理技能</h1>
<blockquote>原文：<a href="https://pub.towardsai.net/enhance-image-processing-skill-with-python-project-9bbbb1ce338c?source=collection_archive---------0-----------------------#2021-10-18">https://pub.towardsai.net/enhance-image-processing-skill-with-python-project-9bbbb1ce338c?source=collection_archive---------0-----------------------#2021-10-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="5faf" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/machine-learning/deep-learning" rel="noopener ugc nofollow" target="_blank">深度学习</a></h2><div class=""/><div class=""><h2 id="da03" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">图像处理中的目标检测和分割</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/1de770fb08f4e50919d21d5f8de5b921.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EKAlR_aqDARqXberfV0yjQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</figcaption></figure><p id="df7c" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如今，目标定位是图像处理应用中一项基本而重要的任务。从OpenCV到深度学习有各种各样的方法，在本文中，我们借助OpenCV进行橘子定位。在这里，我们将做各种图像预处理任务，以实现良好的对象检测。</p><p id="396a" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">本文中使用的方法如下所示:</p><pre class="ks kt ku kv gt md me mf mg aw mh bi"><span id="2d37" class="mi mj it me b gy mk ml l mm mn">1. Denoising Filters<br/>2. Color Space in image processing<br/>3. Threshold operations<br/>4. Pixel connections and noise removal<br/>5. Finding contours<br/>6. Drawing boundary on object</span></pre><p id="2af3" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">第一步是加载将在程序中使用的所有库，如下所示:</p><pre class="ks kt ku kv gt md me mf mg aw mh bi"><span id="f6a5" class="mi mj it me b gy mk ml l mm mn">import numpy as np<br/>import imutils<br/>import cv2</span></pre><p id="b1a9" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">号</strong>和<strong class="lj jd">号</strong>分别用于多维数值计算和图像功能操作。</p><p id="480e" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在，我们将借助OpenCV中的read方法来读取图像。将输入影像保存在python文件所在的文件夹中。</p><pre class="ks kt ku kv gt md me mf mg aw mh bi"><span id="5c05" class="mi mj it me b gy mk ml l mm mn">image = cv2.imread('o2.jpg')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/118b1ccdbe05c8aa650570aca6ce22e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*o8kjIP9Ytx5Ym0nxGt9WRg.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">输入图像。作者的照片</figcaption></figure><blockquote class="mp mq mr"><p id="8d93" class="lh li ms lj b lk ll kd lm ln lo kg lp mt lr ls lt mu lv lw lx mv lz ma mb mc im bi translated"><strong class="lj jd"> <em class="it">去噪滤镜</em> </strong></p></blockquote><p id="eee1" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">该滤波器将抑制输入图像中的噪声。过滤函数在代码下面使用。</p><pre class="ks kt ku kv gt md me mf mg aw mh bi"><span id="4a94" class="mi mj it me b gy mk ml l mm mn">dst = cv2.fastNlMeansDenoisingColored(image, None, 11, 11, 6, 12)</span><span id="7562" class="mi mj it me b gy mw ml l mm mn">#Argument pass to the denoising filter<br/>p1 = 11: Kernel size to compute weights<br/>p2 = 11: computing average weight<br/>p3 = 6: luminescence strength filter<br/>p4 = 12: color component filter </span></pre><p id="d1c8" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">OpenCv的读取格式是BGR，我们需要将其转换为RGB格式以进行进一步的预处理。</p><pre class="ks kt ku kv gt md me mf mg aw mh bi"><span id="af4e" class="mi mj it me b gy mk ml l mm mn">rgb_image = cv2.cvtColor(dst, cv2.COLOR_BGR2RGB)</span></pre><blockquote class="mp mq mr"><p id="daa5" class="lh li ms lj b lk ll kd lm ln lo kg lp mt lr ls lt mu lv lw lx mv lz ma mb mc im bi translated"><strong class="lj jd"> <em class="it">图像处理中的色彩空间</em> </strong></p></blockquote><p id="4502" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">图像处理中的颜色空间是在计算机视觉中用于各种应用的一种颜色模式和映射函数。这里，我们使用YCrCb颜色空间，因为在检查Cr图像后，可以很容易地将其转换为二值图像。</p><pre class="ks kt ku kv gt md me mf mg aw mh bi"><span id="acf8" class="mi mj it me b gy mk ml l mm mn">ycbcr_image = cv2.cvtColor(new_image, cv2.COLOR_RGB2YCrCb)</span><span id="7892" class="mi mj it me b gy mw ml l mm mn">#splitting all three channel of YCrCb<br/>Y, Cr, Cb = cv2.split(ycbcr_image)</span><span id="f69a" class="mi mj it me b gy mw ml l mm mn">#saving the Cr channel image<br/>cv2.imwrite('Cr.jpg',Cr)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/f1592361819efd3eaf494c1b6dcf6199.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*whgYoim-smMtwTjSApxzCA.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">Cr通道图像。作者的照片</figcaption></figure><p id="dfbe" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">YCrCb的三个不同通道如下所示:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mx"><img src="../Images/8236cc4f442921b9a4d55b0aabf88840.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FN1YkqmMpHLtdYfbAw11Cg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">YCrCb的三个通道图像。作者的照片</figcaption></figure><div class="my mz gp gr na nb"><a rel="noopener  ugc nofollow" target="_blank" href="/opencv-different-color-spaces-in-image-processing-with-python-17bbed3592ad"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd jd gy z fp ng fr fs nh fu fw jc bi translated">OpenCV:Python图像处理中的不同色彩空间</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">特征提取和目标检测的预处理技术</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">pub.towardsai.net</p></div></div><div class="nk l"><div class="nl l nm nn no nk np lb nb"/></div></div></a></div><blockquote class="mp mq mr"><p id="fe81" class="lh li ms lj b lk ll kd lm ln lo kg lp mt lr ls lt mu lv lw lx mv lz ma mb mc im bi translated"><strong class="lj jd"> <em class="it">阈值操作</em> </strong></p></blockquote><p id="83d5" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这一步中，我们将使用Cr图像来获得用于对象检测的二值图像。在Cr通道图像中很明显，二值图像可以分为黑白两类。</p><pre class="ks kt ku kv gt md me mf mg aw mh bi"><span id="2797" class="mi mj it me b gy mk ml l mm mn">ret,th1=cv2.threshold(Cr,180,255,cv2.THRESH_BINARY+cv2.THRESH_OTSU)</span><span id="d5a0" class="mi mj it me b gy mw ml l mm mn">#saving the binary image<br/>cv2.imwrite('Binary_image.jpg',th1)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/23443396dddb2fa2776cdfc2266a9f2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:658/format:webp/1*hZgushXMYwcdLYKDP01MTw.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">二进制图像。作者的照片</figcaption></figure><div class="my mz gp gr na nb"><a rel="noopener  ugc nofollow" target="_blank" href="/image-processing-morphological-operations-with-python-7e0f8d1983eb"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd jd gy z fp ng fr fs nh fu fw jc bi translated">图像处理:用Python进行形态学运算</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">为了从图像中去除噪声</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">pub.towardsai.net</p></div></div><div class="nk l"><div class="nr l nm nn no nk np lb nb"/></div></div></a></div><blockquote class="mp mq mr"><p id="8a18" class="lh li ms lj b lk ll kd lm ln lo kg lp mt lr ls lt mu lv lw lx mv lz ma mb mc im bi translated"><strong class="lj jd"> <em class="it">像素连接和噪声去除</em> </strong></p></blockquote><p id="1071" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在，我们知道我们的对象橙色是二值图像中的白色像素，但图像中仍有一些噪声，这些也是橙色的像素，但形状不正确。我们可以通过腐蚀和膨胀等形态学操作来去除噪声。但是，在这一步中，我们将移除具有连通分量的噪声，这些连通分量将找到该区域并用阈值移除它们。</p><pre class="ks kt ku kv gt md me mf mg aw mh bi"><span id="ccab" class="mi mj it me b gy mk ml l mm mn">#getting the connected components area<br/>nb_components, output, stats, centroids = <br/>           cv2.connectedComponentsWithStats(th1, connectivity=8)</span></pre><p id="4aa8" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">黑色背景也是一个组件，但是我们不需要这个对象，用下面的代码移除这个背景</p><pre class="ks kt ku kv gt md me mf mg aw mh bi"><span id="e4d7" class="mi mj it me b gy mk ml l mm mn">sizes = stats[1:, -1]; nb_components = nb_components - 1</span></pre><p id="f4f0" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在，选择要从二进制图像中移除的像素区域。</p><pre class="ks kt ku kv gt md me mf mg aw mh bi"><span id="9101" class="mi mj it me b gy mk ml l mm mn">min_size = 2000</span><span id="4e77" class="mi mj it me b gy mw ml l mm mn">#your answer image<br/>img2 = np.zeros((output.shape))</span><span id="ee07" class="mi mj it me b gy mw ml l mm mn">#keeping the area above the threshold value<br/>for i in range(0, nb_components):<br/>    if sizes[i] &gt;= min_size:<br/>        img2[output == i + 1] = 255<br/>        cv2.imwrite('img2.jpg',img2)<br/>        <br/>img3 = img2.astype(np.uint8) <br/>cv2.imwrite('binary_connected_components.jpg',img3)</span></pre><p id="b170" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这里，去除噪声的图像如下所示:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ns"><img src="../Images/d3e2f9d10497280a3ef4f9957042cc28.png" data-original-src="https://miro.medium.com/v2/resize:fit:586/format:webp/1*az_ZP-W_IX8dfrDAoV5cNg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">去噪图像。作者的照片</figcaption></figure><blockquote class="mp mq mr"><p id="fe96" class="lh li ms lj b lk ll kd lm ln lo kg lp mt lr ls lt mu lv lw lx mv lz ma mb mc im bi translated"><strong class="lj jd"> <em class="it">寻找等高线</em> </strong></p></blockquote><p id="a39a" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这一步是找到图像中的轮廓，即下面代码中的白色像素区域:</p><pre class="ks kt ku kv gt md me mf mg aw mh bi"><span id="5571" class="mi mj it me b gy mk ml l mm mn"># find contours in the thresholded image<br/>cnts = cv2.findContours(img3.copy(), cv2.RETR_EXTERNAL,<br/>                                     cv2.CHAIN_APPROX_SIMPLE)<br/>cnts = imutils.grab_contours(cnts)<br/>print("[INFO] {} unique contours found".format(len(cnts)))</span><span id="8b7c" class="mi mj it me b gy mw ml l mm mn">#output:<br/>[INFO] 5 unique contours found</span></pre><p id="dce5" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">轮廓保存在cnts变量中。</p><blockquote class="mp mq mr"><p id="973c" class="lh li ms lj b lk ll kd lm ln lo kg lp mt lr ls lt mu lv lw lx mv lz ma mb mc im bi translated"><strong class="lj jd"> <em class="it">在对象上绘制边界</em> </strong></p></blockquote><p id="755d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在，我们将在轮廓区域的帮助下围绕物体的边界。</p><pre class="ks kt ku kv gt md me mf mg aw mh bi"><span id="337d" class="mi mj it me b gy mk ml l mm mn"># loop over the contours<br/>for (i, c) in enumerate(cnts):<br/> # draw the contour<br/> ((x, y), _) = cv2.minEnclosingCircle(c)<br/> cv2.putText(image, "#{}".format(i + 1), (int(x) - 10, int(y)),<br/>  cv2.FONT_HERSHEY_SIMPLEX, 0.6, (0, 0, 255), 2)<br/> cv2.drawContours(image, [c], -1, (0, 255, 0), 2)</span><span id="ec59" class="mi mj it me b gy mw ml l mm mn">#save the result image<br/>cv2.imwrite('Result_Image.jpg',image)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/0e77874e6e5b8b562216b3abf56db483.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*8h4qqGy0TNXhz2VaAkAQBg.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">结果图像。作者的照片</figcaption></figure><blockquote class="mp mq mr"><p id="2d1d" class="lh li ms lj b lk ll kd lm ln lo kg lp mt lr ls lt mu lv lw lx mv lz ma mb mc im bi translated"><strong class="lj jd"> <em class="it">结论</em> </strong></p></blockquote><p id="de7b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">本文讨论了OpenCV中图像预处理的基本操作。</p><p id="ba74" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我希望你喜欢这篇文章。通过我的<a class="ae nu" href="https://www.linkedin.com/in/data-scientist-95040a1ab/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae nu" href="https://twitter.com/amitprius" rel="noopener ugc nofollow" target="_blank"> twitter </a>联系我。</p><h1 id="1577" class="nv mj it bd nw nx ny nz oa ob oc od oe ki of kj og kl oh km oi ko oj kp ok ol bi translated">推荐文章</h1><p id="ad87" class="pw-post-body-paragraph lh li it lj b lk om kd lm ln on kg lp lq oo ls lt lu op lw lx ly oq ma mb mc im bi translated">1.<a class="ae nu" rel="noopener ugc nofollow" target="_blank" href="/8-active-learning-insights-of-python-collection-module-6c9e0cc16f6b?source=friends_link&amp;sk=4a5c9f9ad552005636ae720a658281b1">8 Python的主动学习见解收集模块</a> <br/> 2。<a class="ae nu" rel="noopener ugc nofollow" target="_blank" href="/numpy-linear-algebra-on-images-ed3180978cdb?source=friends_link&amp;sk=d9afa4a1206971f9b1f64862f6291ac0"> NumPy:图像上的线性代数</a>T5】3。<a class="ae nu" rel="noopener ugc nofollow" target="_blank" href="/exception-handling-concepts-in-python-4d5116decac3?source=friends_link&amp;sk=a0ed49d9fdeaa67925eac34ecb55ea30">Python中的异常处理概念</a> <br/> 4。<a class="ae nu" rel="noopener ugc nofollow" target="_blank" href="/pandas-dealing-with-categorical-data-7547305582ff?source=friends_link&amp;sk=11c6809f6623dd4f6dd74d43727297cf">熊猫:处理分类数据</a> <br/> 5。<a class="ae nu" rel="noopener ugc nofollow" target="_blank" href="/hyper-parameters-randomseachcv-and-gridsearchcv-in-machine-learning-b7d091cf56f4?source=friends_link&amp;sk=cab337083fb09601114a6e466ec59689">超参数:机器学习中的RandomSeachCV和GridSearchCV</a><br/>6。<a class="ae nu" href="https://medium.com/towards-artificial-intelligence/fully-explained-linear-regression-with-python-fe2b313f32f3?source=friends_link&amp;sk=53c91a2a51347ec2d93f8222c0e06402" rel="noopener">用Python </a> <br/> 7全面讲解了线性回归。<a class="ae nu" href="https://medium.com/towards-artificial-intelligence/fully-explained-logistic-regression-with-python-f4a16413ddcd?source=friends_link&amp;sk=528181f15a44e48ea38fdd9579241a78" rel="noopener">用Python </a> <br/>充分解释了Logistic回归8。<a class="ae nu" rel="noopener ugc nofollow" target="_blank" href="/data-distribution-using-numpy-with-python-3b64aae6f9d6?source=friends_link&amp;sk=809e75802cbd25ddceb5f0f6496c9803">数据分发使用Numpy与Python </a> <br/> 9。<a class="ae nu" rel="noopener ugc nofollow" target="_blank" href="/decision-trees-vs-random-forests-in-machine-learning-be56c093b0f?source=friends_link&amp;sk=91377248a43b62fe7aeb89a69e590860">机器学习中的决策树vs随机森林</a> <br/> 10。<a class="ae nu" rel="noopener ugc nofollow" target="_blank" href="/standardization-in-data-preprocessing-with-python-96ae89d2f658?source=friends_link&amp;sk=f348435582e8fbb47407e9b359787e41">用Python实现数据预处理的标准化</a></p></div></div>    
</body>
</html>